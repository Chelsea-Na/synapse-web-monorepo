import{a as v,j as c}from"./jsx-runtime-670450c2.js";import{r as p}from"./index-f1f749bf.js";import{g as A,p as N}from"./sqlFunctions-5e40925f.js";import{a4 as T,ap as V}from"./index-fb7124f7.js";import{C as k}from"./ColumnType-3c5058f3.js";import{U as w}from"./UserCardList-20070253.js";import{L as x,i as O}from"./SynapseConstants-f1d07af3.js";import{L as b}from"./UserCard-78574058.js";import{a as F}from"./use-deep-compare-effect.esm-2b920fea.js";import{B as M}from"./Button-7d415009.js";const Q="sage_rotate_uids",B=3,J=(e=[],s=B,r)=>{let o=[],t=[];const i=localStorage.getItem(r);if(i!=null&&(o=JSON.parse(i)),o.length){const a=e.filter(n=>!o.includes(n));if(a.length>=s)return t=a.slice(0,s),localStorage.setItem(r,JSON.stringify(o.concat(t))),t;{localStorage.removeItem(r);const n=e.slice(0,s-a.length);return localStorage.setItem(r,JSON.stringify(n)),a.concat(n)}}else return t=e.slice(0,s),localStorage.setItem(r,JSON.stringify(t)),t},f=({sql:e,count:s,useQueryResultUserData:r=!1,size:o=x,summaryLink:t,summaryLinkText:i,selectedFacets:a,searchParams:n,sqlOperator:y})=>{const{accessToken:R}=T(),[d,I]=p.useState([]),[U,C]=p.useState(),[m,g]=p.useState();let S=!0;const E=`${Q}-${e}-${JSON.stringify(a)}`;return F(()=>(async function(){g(!0);const _=A(n,y),D=N(e),L=await V({partMask:O,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:D,query:{sql:e,additionalFilters:_,selectedFacets:a}},R),{queryResult:u}=L;if(u!=null&&u.queryResults.rows){const q=u.queryResults.headers.findIndex(l=>l.columnType===k.USERID),h=u.queryResults.rows.map(l=>l.values[q]).filter(l=>l!==null);if(S){const l=J(h,s,E);I(l),r&&C(L),g(!1)}}else console.log("UserCardListRotate: Error getting data")}(),()=>{S=!1}),[e,a,s,R,n,y]),v("div",{className:"UserCardListRotate bootstrap-4-backport",children:[m&&c(b,{}),!m&&d.length===0&&c("p",{className:"font-italic",children:"No one was found."}),!m&&d.length>0&&c(w,{list:d,size:o,data:U}),t&&i&&c("div",{className:"UserCardListRotate__summary",children:c(M,{className:"pill",variant:"secondary",size:"lg",href:t,children:i})})]})},ae=f;try{f.displayName="UserCardListRotate",f.__docgenInfo={description:"",displayName:"UserCardListRotate",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},useQueryResultUserData:{defaultValue:{value:"false"},description:"",name:"useQueryResultUserData",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"LARGE USER CARD"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},summaryLink:{defaultValue:null,description:"",name:"summaryLink",required:!1,type:{name:"string"}},summaryLinkText:{defaultValue:null,description:"",name:"summaryLinkText",required:!1,type:{name:"string"}},selectedFacets:{defaultValue:null,description:"",name:"selectedFacets",required:!1,type:{name:"FacetColumnRequest[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}}}}}catch{}export{ae as U};
//# sourceMappingURL=UserCardListRotate-f6d6525f.js.map
