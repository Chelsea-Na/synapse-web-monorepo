import{l as u}from"./index-cd1c2d2a.js";import{g as v}from"./entityHandlers-f2b34eff.js";import{M as $,b as w,c as K,d as P,m as L,e as V,a as B,g as q}from"./userProfileHandlers-41ef92a9.js";import{g as F,B as k}from"./getEndpoint-ac94413e.js";import{c as G}from"./accessRequirementHandlers-6bac13a2.js";import{g as W}from"./MockSubmission-d2122929.js";import{a as J,g as Q}from"./fileHandlers-787e077a.js";import{g as Y}from"./researchProjectHandlers-31a06154.js";import{bv as Z,bw as x,bx as z,by as X}from"./SynapseClient-2dca54f9.js";import{d as ee,f as O,g as b,M as te}from"./mock_user_profile-82ac8093.js";import{f as m,p as se,b as ae}from"./mockProject-af74cf4c.js";import{t as ne}from"./times-c23b3cf2.js";import{n as c}from"./index-3a31b023.js";import{c as re,b as oe,a as ie}from"./tableQueryHandlers-6783dc4b.js";import{M as me}from"./mockAnnotationColumns-6525609e.js";import{g as ue}from"./personalAccessTokenHandlers-a6382405.js";import{u as le}from"./uniqueId-4d05949d.js";function ce(e){return{id:String(m.number.int()),etag:m.string.uuid(),...e}}function de(e){return{id:String(m.number.int()),activeAuthors:ee.map(t=>String(t.id)),createdBy:String(se().id),createdOn:m.date.anytime().toISOString(),etag:m.string.uuid(),isDeleted:!1,isEdited:!1,isPinned:!1,lastActivity:m.date.anytime().toISOString(),messageKey:`${m.number.int()}/${m.number.int()}/${m.string.uuid()}`,modifiedOn:m.date.anytime().toISOString(),numberOfReplies:m.number.int({max:500}),numberOfViews:m.number.int({max:5e3}),title:m.lorem.words({min:2,max:8}),...e}}const pe="984321189",M=ae.map(e=>ce({projectId:e.id})),fe=M.flatMap(e=>ne(10).map(t=>de({forumId:e.id,projectId:e.projectId}))),f={id:"999",forumId:pe,projectId:"123",title:"mockTitle1",createdOn:"2022-09-28",createdBy:O.ownerId,modifiedOn:"2022-09-28",etag:"xxx",messageKey:"xxx",numberOfViews:2,numberOfReplies:3,lastActivity:"2022-09-28",activeAuthors:[O.ownerId,b.ownerId],isEdited:!1,isDeleted:!1,isPinned:!1},Ie={...f,id:"888",projectId:"12",title:"mockTitle2",createdBy:b.ownerId,numberOfViews:14,numberOfReplies:3};({...f,createdBy:b.ownerId,threadId:f.id});const y=[...fe,f,Ie];function ge(e){return[u.rest.get(`${e}${Z}/:id`,async(t,a,s)=>{let n=404,r={reason:`MSW could not find a mock forum object with ID ${t.params.id}`};const o=M.find(i=>i.id===t.params.id);return o&&(n=200,r=o),a(s.status(n),s.json(r))}),u.rest.get(`${e}${x}/:id`,async(t,a,s)=>{let n=404,r={reason:`MSW could not find a mock discussion thread bundle object with ID ${t.params.id}`};t.params.id==="messageUrl"&&(r={reason:"GET /thread/messageUrl is not yet implemented"});const o=y.find(i=>i.id===t.params.id);return o&&(n=200,r=o),a(s.status(n),s.json(r))})]}function D(e){return{subscriptionId:String(m.number.int({min:1e3,max:9999})),subscriberId:String(te),createdOn:m.date.anytime().toISOString(),...e}}const E=M.map(e=>D({objectId:e.id,objectType:c.FORUM})),_=y.map(e=>D({objectType:c.THREAD,objectId:e.id}));function he(e){return[u.rest.get(`${e}/repo/v1/subscription/all`,async(t,a,s)=>{const n=t.url.searchParams.get("objectType"),r=t.url.searchParams.get("sortDirection"),o=t.url.searchParams.get("offset"),i=t.url.searchParams.get("limit");let l=[];n===c.FORUM?l=E:n===c.THREAD&&(l=_);const d=l.length;r&&(l=l.sort((H,U)=>{const A=new Date(U.createdOn).getTime()-new Date(H.createdOn).getTime();return r==="ASC"?A:-1*A}));let I=0,S;o&&(I=parseInt(o)),i&&(S=parseInt(i)),l=l.slice(I,I+(S??0));const N={results:l,totalNumberOfResults:d};return a(s.status(200),s.json(N))}),u.rest.post(`${e}/repo/v1/subscription/list`,async(t,a,s)=>{const n=await t.json(),r=n.objectType;let o=[];r===c.FORUM?o=E:r===c.THREAD&&(o=_),o.filter(d=>n.idList.includes(d.subscriptionId));const i=o.length,l={results:o,totalNumberOfResults:i};return a(s.status(200),s.json(l))})]}const Te="9614712",be="a2b871cb-faa4-471a-8c23-b917c77fecb2",Me="My mock evaluation queue name",Se="Description for mock eval queue",Ae="1131050",Oe="2021-03-02T22:16:14.552Z",Ee="syn5585645",_e="Mock submission instructions",Re="Mock thanks for submitting",ye={id:Te,etag:be,name:Me,description:Se,ownerId:Ae,createdOn:Oe,contentSource:Ee,submissionInstructionsMessage:_e,submissionReceiptMessage:Re},g=[ye];function De(e){return[u.rest.get(`${e}${z(":evaluationId")}`,async(t,a,s)=>{let n=404,r={reason:`Mock Service worker could not find a mock evaluation queue with ID ${t.params.evaluationId}`};const o=g.find(i=>i.id===t.params.entityId);return o&&(r=o,n=200),a(s.status(n),s.json(r))}),u.rest.get(`${e}${X}`,async(t,a,s)=>{let n=200,r={results:g,totalNumberOfResults:g.length};return a(s.status(n),s.json(r))})]}const p="1234",Ce="f1b29c62-e987-4e69-9cec-198bf017a586",R=e=>{const t=Math.pow(10,e-1);return Math.floor(Math.random()*9*t+t)},h=e=>{const t=R(6).toString(),a=R(6).toString();return{id:t,etag:Ce,challengeId:p,teamId:a,message:`Message for team ${a}`,...e}},T=[h({teamId:String($),challengeId:p}),h({teamId:String(w),challengeId:p}),h({teamId:String(K),challengeId:p})];function je(e){return u.rest.get(`${e}/repo/v1/entity/:id/challenge`,async(t,a,s)=>{const n={id:p,etag:"f5e9df54-360b-4ede-9a17-f7f5680c8dd4",projectId:t.params.id,participantTeamId:String(P)};return a(s.status(200),s.json(n))})}function Ne(e){return u.rest.get(`${e}/repo/v1/challenge/:challengeId/challengeTeam`,async(t,a,s)=>{const n={results:T,totalNumberOfResults:T.length};return a(s.status(200),s.json(n))})}function He(e){return u.rest.post(`${e}/repo/v1/challenge/:challengeId/challengeTeam`,async(t,a,s)=>{const r={...await t.json(),id:le(),etag:"abcdef0987654321"};return T.push(r),a(s.status(200),s.json(r))})}function Ue(e){return u.rest.get(`${e}/repo/v1/challenge/:challengeId/submissionTeams`,async(t,a,s)=>{const n={results:[],totalNumberOfResults:0};return a(s.status(200),s.json(n))})}function ve(e){return[je(e),Ue(e),He(e),Ne(e)]}const $e=[...L];function C(e){return $e.find(t=>t.id===e)}const j=[...V];function we(e,t){return j.find(a=>a.teamId===e&&a.userId===t)}function Ke(e){j.push(e)}function Pe(e){return u.rest.get(`${e}/repo/v1/team/:teamId/member/:memberId/membershipStatus`,async(t,a,s)=>{const n=t.params.teamId,r=t.params.memberId;let o,i;return C(n)?(o=we(n,r)??{teamId:n,userId:r,isMember:!1,hasOpenInvitation:!1,hasOpenRequest:!1,canJoin:!0,membershipApprovalRequired:!1,hasUnmetAccessRequirement:!1,canSendEmail:!1},i=200):(o={reason:`getTeamMembershipStatusHandler could not locate a team with ID ${n}`},i=404),a(s.status(i),s.json(o))})}function Le(e){return u.rest.put(`${e}/repo/v1/team/:teamId/member/:memberId`,async(t,a,s)=>{const n=t.params.teamId,r=t.params.memberId;let o,i;return C(n)?(Ke({teamId:n,userId:r,isMember:!0,hasOpenInvitation:!1,hasOpenRequest:!1,canJoin:!0,membershipApprovalRequired:!1,hasUnmetAccessRequirement:!1,canSendEmail:!1}),o="",i=201):(o={reason:`getTeamMembershipStatusHandler could not locate a team with ID ${n}`},i=404),a(s.status(i),s.json(o))})}function Ve(e){return[Pe(e),Le(e)]}const Be=e=>[u.rest.options("*",async(t,a,s)=>a(s.status(200))),u.rest.get(`${e}/auth/v1/authenticatedOn`,async(t,a,s)=>a(s.status(200),s.json({authenticatedOn:new Date().toISOString()}))),...v(e),...B(e),q(e,!0,!0),...W(e),...G(e),...J(e),...Y(e),...Q(e),...ge(e),...he(e),...De(e),re(e),...oe(me,e),...ie(e),...ue(e),...Ve(e),...ve(e)];Be(F(k.REPO_ENDPOINT));export{Be as g};
