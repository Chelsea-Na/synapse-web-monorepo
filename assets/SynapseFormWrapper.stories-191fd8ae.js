var ms=Object.defineProperty;var vs=(e,t,r)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var B=(e,t,r)=>(vs(e,typeof t!="symbol"?t+"":t,r),r);import{j as N,a as V,F as G}from"./jsx-runtime-ad672792.js";import{bA as wi,aK as ys,b3 as gs,aV as _s,di as Ss,dj as Es,bu as ws,dk as bs,dl as Rs,S as Os}from"./SynapseContext-1c9e8220.js";import{a as Ro,c as J,g as As}from"./_commonjsHelpers-042e6b4d.js";import{r as On,e as br}from"./util-f26b5128.js";import{u as nn,r as Ts,b as Oo,c as Cs}from"./browser-0b8f916a.js";import{b as Is}from"./index-cc134824.js";import{a as Ns}from"./assert-a1982797.js";import{r as yt}from"./index-f1f749bf.js";import{b as Fs}from"./SynapseConstants-c11fd777.js";import{F as xs}from"./core.esm-08cdfe54.js";import{I as cr}from"./IconSvg-0c61ea2c.js";import{c as Ao}from"./cloneDeep-6c099e3c.js";import{k as Ps}from"./_baseClone-11a40197.js";import{f as ks,h as Ds,i as bi,a as Ls,l as j,b as Bs}from"./lodash.default-2030744a.js";import{g as gt}from"./_baseMap-39e03039.js";import{a as Ri}from"./isArray-5e3f9107.js";import{W as Ms}from"./WarningModal-cab5ead1.js";import{P as $s}from"./react-router-c83abb56.js";import{A as Oi}from"./Alert-84d62a08.js";import{B as Us}from"./Button-7d415009.js";import"./inheritsLoose-d541526f.js";import"./setPrototypeOf-0bb37fbe.js";import"./index-96c5f47c.js";import"./extends-98964cd2.js";import"./getEndpoint-5374ab4d.js";import"./SvgIcon-ed1b2f06.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./styled-ff065be4.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-eaaa54fe.js";import"./Box-b7c6e0f8.js";import"./extendSxProp-1b40785b.js";import"./Button-5da6eef4.js";import"./ButtonBase-4fdac2d3.js";import"./emotion-react.browser.esm-d0daa96f.js";import"./assertThisInitialized-081f9914.js";import"./TransitionGroupContext-a2b6e27b.js";import"./useForkRef-dd8a6e5c.js";import"./Clear-55e06940.js";import"./useTheme-16c0fb65.js";import"./isHostComponent-fa76b8d9.js";import"./index-4d501b15.js";import"./pick-63b75f03.js";import"./toString-cc90cb98.js";import"./isSymbol-7c514724.js";import"./_baseSlice-cf92e063.js";import"./_MapCache-c47e0ef4.js";import"./_baseTimes-8cccc40f.js";import"./_isIndex-af14b756.js";import"./index.browser-7a1de4f7.js";import"./hasIn-6ae41e3d.js";import"./uniq-b503d6a4.js";import"./_baseIteratee-dd2a3782.js";import"./_baseUniq-7e37c67e.js";import"./isPlainObject-6d05c27d.js";import"./union-43d319b4.js";import"./without-92533977.js";import"./_cacheHas-f4513965.js";import"./isArrayLikeObject-ca102021.js";import"./_isIterateeCall-82c5d97e.js";import"./uniq-9958a14f.js";import"./toInteger-97099945.js";import"./_setToArray-3d6ec6fd.js";import"./startCase-b2e198bb.js";import"./upperFirst-79e605a3.js";import"./omitBy-4d1da74d.js";import"./times-87f43916.js";import"./merge-f11e1b52.js";import"./_baseFor-d254fa1e.js";import"./isEqual-97aef6b7.js";import"./uniqueId-4d05949d.js";import"./groupBy-baf72949.js";import"./toLower-271fcf43.js";import"./Modal-6ffa84ac.js";import"./createWithBsPrefix-e09f51dd.js";import"./contains-33365353.js";import"./useWillUnmount-7fb15b8a.js";import"./divWithClassName-1aeead00.js";import"./usePrevious-9f30f8c7.js";import"./removeClass-164fd327.js";import"./hasClass-ec9efd32.js";import"./useWaitForDOMRef-54076dc2.js";import"./hook-c05d8d9f.js";var _e={},js={get exports(){return _e},set exports(e){_e=e}};const Vs=!1,Hs=/\r?\n/,Ws=/\bono[ @]/;function Ys(e){return!!(e&&e.configurable&&typeof e.get=="function")}function qs(e){return!!(!e||e.writable||typeof e.set=="function")}function To(e,t){let r=Co(e.stack),n=t?t.stack:void 0;return r&&n?r+`

`+n:r||n}function Ks(e,t,r){r?Object.defineProperty(t,"stack",{get:()=>{let n=e.get.apply(t);return To({stack:n},r)},enumerable:!1,configurable:!0}):zs(t,e)}function Co(e){if(e){let t=e.split(Hs),r;for(let n=0;n<t.length;n++){let i=t[n];if(Ws.test(i))r===void 0&&(r=n);else if(r!==void 0){t.splice(r,n-r);break}}if(t.length>0)return t.join(`
`)}return e}function zs(e,t){Object.defineProperty(e,"stack",{get:()=>Co(t.get.apply(e)),enumerable:!1,configurable:!0})}const Gs=["function","symbol","undefined"],Js=["constructor","prototype","__proto__"],Xs=Object.getPrototypeOf({});function Io(){let e={},t=this;for(let r of No(t))if(typeof r=="string"){let n=t[r],i=typeof n;Gs.includes(i)||(e[r]=n)}return e}function No(e,t=[]){let r=[];for(;e&&e!==Xs;)r=r.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let n=new Set(r);for(let i of t.concat(Js))n.delete(i);return n}const Qs=["name","message","stack"];function ur(e,t,r){let n=e;return Zs(n,t),t&&typeof t=="object"&&eu(n,t),n.toJSON=Io,r&&typeof r=="object"&&Object.assign(n,r),n}function Zs(e,t){let r=Object.getOwnPropertyDescriptor(e,"stack");Ys(r)?Ks(r,e,t):qs(r)&&(e.stack=To(e,t))}function eu(e,t){let r=No(t,Qs),n=e,i=t;for(let o of r)if(n[o]===void 0)try{n[o]=i[o]}catch{}}function tu(e){return e=e||{},{concatMessages:e.concatMessages===void 0?!0:!!e.concatMessages,format:e.format===void 0?Vs:typeof e.format=="function"?e.format:!1}}function ru(e,t){let r,n,i,o="";return typeof e[0]=="string"?i=e:typeof e[1]=="string"?(e[0]instanceof Error?r=e[0]:n=e[0],i=e.slice(1)):(r=e[0],n=e[1],i=e.slice(2)),i.length>0&&(t.format?o=t.format.apply(void 0,i):o=i.join(" ")),t.concatMessages&&r&&r.message&&(o+=(o?` 
`:"")+r.message),{originalError:r,props:n,message:o}}const Ve=An;function An(e,t){t=tu(t);function r(...n){let{originalError:i,props:o,message:a}=ru(n,t),l=new e(a);return ur(l,i,o)}return r[Symbol.species]=e,r}An.toJSON=function(t){return Io.call(t)};An.extend=function(t,r,n){return n||r instanceof Error?ur(t,r,n):r?ur(t,void 0,r):ur(t)};const Ai=Te;Te.error=new Ve(Error);Te.eval=new Ve(EvalError);Te.range=new Ve(RangeError);Te.reference=new Ve(ReferenceError);Te.syntax=new Ve(SyntaxError);Te.type=new Ve(TypeError);Te.uri=new Ve(URIError);const nu=Te;function Te(...e){let t=e[0];if(typeof t=="object"&&typeof t.name=="string"){for(let r of Object.values(nu))if(typeof r=="function"&&r.name==="ono"){let n=r[Symbol.species];if(n&&n!==Error&&(t instanceof n||t.name===n.name))return r.apply(void 0,e)}}return Te.error.apply(void 0,e)}On();typeof module=="object"&&typeof module.exports=="object"&&(module.exports=Object.assign(module.exports.default,module.exports));const iu=Object.freeze(Object.defineProperty({__proto__:null,Ono:Ve,default:Ai,ono:Ai},Symbol.toStringTag,{value:"Module"})),ot=Ro(iu);var se={},ou={get exports(){return se},set exports(e){se=e}};(function(e,t){let r=/^win/.test(process.platform),n=/\//g,i=/^(\w{2,}):\/\//i,o=e.exports,a=/~1/g,l=/~0/g,f=[/\?/g,"%3F",/\#/g,"%23"],m=[/\%23/g,"#",/\%24/g,"$",/\%26/g,"&",/\%2C/g,",",/\%40/g,"@"];t.parse=nn.parse,t.resolve=nn.resolve,t.cwd=function(){if(process.browser)return location.href;let v=process.cwd(),y=v.slice(-1);return y==="/"||y==="\\"?v:v+"/"},t.getProtocol=function(v){let y=i.exec(v);if(y)return y[1].toLowerCase()},t.getExtension=function(v){let y=v.lastIndexOf(".");return y>=0?o.stripQuery(v.substr(y).toLowerCase()):""},t.stripQuery=function(v){let y=v.indexOf("?");return y>=0&&(v=v.substr(0,y)),v},t.getHash=function(v){let y=v.indexOf("#");return y>=0?v.substr(y):"#"},t.stripHash=function(v){let y=v.indexOf("#");return y>=0&&(v=v.substr(0,y)),v},t.isHttp=function(v){let y=o.getProtocol(v);return y==="http"||y==="https"?!0:y===void 0?process.browser:!1},t.isFileSystemPath=function(v){if(process.browser)return!1;let y=o.getProtocol(v);return y===void 0||y==="file"},t.fromFileSystemPath=function(v){r&&(v=v.replace(/\\/g,"/")),v=encodeURI(v);for(let y=0;y<f.length;y+=2)v=v.replace(f[y],f[y+1]);return v},t.toFileSystemPath=function(v,y){v=decodeURI(v);for(let b=0;b<m.length;b+=2)v=v.replace(m[b],m[b+1]);let S=v.substr(0,7).toLowerCase()==="file://";return S&&(v=v[7]==="/"?v.substr(8):v.substr(7),r&&v[1]==="/"&&(v=v[0]+":"+v.substr(1)),y?v="file:///"+v:(S=!1,v=r?v:"/"+v)),r&&!S&&(v=v.replace(n,"\\"),v.substr(1,2)===":\\"&&(v=v[0].toUpperCase()+v.substr(1))),v},t.safePointerToPath=function(v){return v.length<=1||v[0]!=="#"||v[1]!=="/"?[]:v.slice(2).split("/").map(y=>decodeURIComponent(y).replace(a,"/").replace(l,"~"))}})(ou,se);var z={};const{Ono:Fo}=ot,{stripHash:xo,toFileSystemPath:au}=se,He=z.JSONParserError=class extends Error{constructor(t,r){super(),this.code="EUNKNOWN",this.message=t,this.source=r,this.path=null,Fo.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}};We(He);const Po=z.JSONParserErrorGroup=class ko extends Error{constructor(t){super(),this.files=t,this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${au(t.$refs._root$Ref.path)}'`,Fo.extend(this)}static getParserErrors(t){const r=[];for(const n of Object.values(t.$refs._$refs))n.errors&&r.push(...n.errors);return r}get errors(){return ko.getParserErrors(this.files)}};We(Po);const su=z.ParserError=class extends He{constructor(t,r){super(`Error parsing ${r}: ${t}`,r),this.code="EPARSER"}};We(su);const uu=z.UnmatchedParserError=class extends He{constructor(t){super(`Could not find parser for "${t}"`,t),this.code="EUNMATCHEDPARSER"}};We(uu);const lu=z.ResolverError=class extends He{constructor(t,r){super(t.message||`Error reading file "${r}"`,r),this.code="ERESOLVER","code"in t&&(this.ioErrorCode=String(t.code))}};We(lu);const cu=z.UnmatchedResolverError=class extends He{constructor(t){super(`Could not find resolver for "${t}"`,t),this.code="EUNMATCHEDRESOLVER"}};We(cu);const fu=z.MissingPointerError=class extends He{constructor(t,r){super(`Token "${t}" does not exist.`,xo(r)),this.code="EMISSINGPOINTER"}};We(fu);const hu=z.InvalidPointerError=class extends He{constructor(t,r){super(`Invalid $ref pointer "${t}". Pointers must begin with "#/"`,xo(r)),this.code="EINVALIDPOINTER"}};We(hu);function We(e){Object.defineProperty(e.prototype,"name",{value:e.name,enumerable:!0})}z.isHandledError=function(e){return e instanceof He||e instanceof Po};z.normalizeError=function(e){return e.path===null&&(e.path=[]),e};var Vr,Ti;function Rr(){if(Ti)return Vr;Ti=1,Vr=p;const e=Kt(),t=se,{JSONParserError:r,InvalidPointerError:n,MissingPointerError:i,isHandledError:o}=z,a=/\//g,l=/~/g,f=/~1/g,m=/~0/g;function p(b,g,R){this.$ref=b,this.path=g,this.originalPath=R||g,this.value=void 0,this.circular=!1,this.indirections=0}p.prototype.resolve=function(b,g,R){let w=p.parse(this.path,this.originalPath);this.value=S(b);for(let E=0;E<w.length;E++){if(v(this,g)&&(this.path=p.join(this.path,w.slice(E))),typeof this.value=="object"&&this.value!==null&&"$ref"in this.value)return this;let A=w[E];if(this.value[A]===void 0||this.value[A]===null)throw this.value=null,new i(A,decodeURI(this.originalPath));this.value=this.value[A]}return(!this.value||this.value.$ref&&t.resolve(this.path,this.value.$ref)!==R)&&v(this,g),this},p.prototype.set=function(b,g,R){let w=p.parse(this.path),E;if(w.length===0)return this.value=g,g;this.value=S(b);for(let A=0;A<w.length-1;A++)v(this,R),E=w[A],this.value&&this.value[E]!==void 0?this.value=this.value[E]:this.value=y(this,E,{});return v(this,R),E=w[w.length-1],y(this,E,g),b},p.parse=function(b,g){let R=t.getHash(b).substr(1);if(!R)return[];R=R.split("/");for(let w=0;w<R.length;w++)R[w]=decodeURIComponent(R[w].replace(f,"/").replace(m,"~"));if(R[0]!=="")throw new n(R,g===void 0?b:g);return R.slice(1)},p.join=function(b,g){b.indexOf("#")===-1&&(b+="#"),g=Array.isArray(g)?g:[g];for(let R=0;R<g.length;R++){let w=g[R];b+="/"+encodeURIComponent(w.replace(l,"~0").replace(a,"~1"))}return b};function v(b,g){if(e.isAllowed$Ref(b.value,g)){let R=t.resolve(b.path,b.value.$ref);if(R===b.path)b.circular=!0;else{let w=b.$ref.$refs._resolve(R,b.path,g);return w===null?!1:(b.indirections+=w.indirections+1,e.isExtended$Ref(b.value)?(b.value=e.dereference(b.value,w.value),!1):(b.$ref=w.$ref,b.path=w.path,b.value=w.value,!0))}}}function y(b,g,R){if(b.value&&typeof b.value=="object")g==="-"&&Array.isArray(b.value)?b.value.push(R):b.value[g]=R;else throw new r(`Error assigning $ref pointer "${b.path}". 
Cannot set "${g}" of a non-object.`);return R}function S(b){if(o(b))throw b;return b}return Vr}var Hr,Ci;function Kt(){if(Ci)return Hr;Ci=1,Hr=l;const e=Rr(),{InvalidPointerError:t,isHandledError:r,normalizeError:n}=z,{safePointerToPath:i,stripHash:o,getHash:a}=se;function l(){this.path=void 0,this.value=void 0,this.$refs=void 0,this.pathType=void 0,this.errors=void 0}return l.prototype.addError=function(f){this.errors===void 0&&(this.errors=[]);const m=this.errors.map(({footprint:p})=>p);Array.isArray(f.errors)?this.errors.push(...f.errors.map(n).filter(({footprint:p})=>!m.includes(p))):m.includes(f.footprint)||this.errors.push(n(f))},l.prototype.exists=function(f,m){try{return this.resolve(f,m),!0}catch{return!1}},l.prototype.get=function(f,m){return this.resolve(f,m).value},l.prototype.resolve=function(f,m,p,v){let y=new e(this,f,p);try{return y.resolve(this.value,m,v)}catch(S){if(!m||!m.continueOnError||!r(S))throw S;return S.path===null&&(S.path=i(a(v))),S instanceof t&&(S.source=decodeURI(o(v))),this.addError(S),null}},l.prototype.set=function(f,m){let p=new e(this,f);this.value=p.set(this.value,m)},l.is$Ref=function(f){return f&&typeof f=="object"&&typeof f.$ref=="string"&&f.$ref.length>0},l.isExternal$Ref=function(f){return l.is$Ref(f)&&f.$ref[0]!=="#"},l.isAllowed$Ref=function(f,m){if(l.is$Ref(f)){if(f.$ref.substr(0,2)==="#/"||f.$ref==="#")return!0;if(f.$ref[0]!=="#"&&(!m||m.resolve.external))return!0}},l.isExtended$Ref=function(f){return l.is$Ref(f)&&Object.keys(f).length>1},l.dereference=function(f,m){if(m&&typeof m=="object"&&l.isExtended$Ref(f)){let p={};for(let v of Object.keys(f))v!=="$ref"&&(p[v]=f[v]);for(let v of Object.keys(m))v in p||(p[v]=m[v]);return p}else return m},Hr}const{ono:Do}=ot,du=Kt(),Ue=se;var pu=Se;function Se(){this.circular=!1,this._$refs={},this._root$Ref=null}Se.prototype.paths=function(e){return Lo(this._$refs,arguments).map(r=>r.decoded)};Se.prototype.values=function(e){let t=this._$refs;return Lo(t,arguments).reduce((n,i)=>(n[i.decoded]=t[i.encoded].value,n),{})};Se.prototype.toJSON=Se.prototype.values;Se.prototype.exists=function(e,t){try{return this._resolve(e,"",t),!0}catch{return!1}};Se.prototype.get=function(e,t){return this._resolve(e,"",t).value};Se.prototype.set=function(e,t){let r=Ue.resolve(this._root$Ref.path,e),n=Ue.stripHash(r),i=this._$refs[n];if(!i)throw Do(`Error resolving $ref pointer "${e}". 
"${n}" not found.`);i.set(r,t)};Se.prototype._add=function(e){let t=Ue.stripHash(e),r=new du;return r.path=t,r.$refs=this,this._$refs[t]=r,this._root$Ref=this._root$Ref||r,r};Se.prototype._resolve=function(e,t,r){let n=Ue.resolve(this._root$Ref.path,e),i=Ue.stripHash(n),o=this._$refs[i];if(!o)throw Do(`Error resolving $ref pointer "${e}". 
"${i}" not found.`);return o.resolve(n,r,e,t)};Se.prototype._get$Ref=function(e){e=Ue.resolve(this._root$Ref.path,e);let t=Ue.stripHash(e);return this._$refs[t]};function Lo(e,t){let r=Object.keys(e);return t=Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t),t.length>0&&t[0]&&(r=r.filter(n=>t.indexOf(e[n].pathType)!==-1)),r.map(n=>({encoded:n,decoded:e[n].pathType==="file"?Ue.toFileSystemPath(n,!0):n}))}var zt={};zt.all=function(e){return Object.keys(e).filter(t=>typeof e[t]=="object").map(t=>(e[t].name=t,e[t]))};zt.filter=function(e,t,r){return e.filter(n=>!!Bo(n,t,r))};zt.sort=function(e){for(let t of e)t.order=t.order||Number.MAX_SAFE_INTEGER;return e.sort((t,r)=>t.order-r.order)};zt.run=function(e,t,r,n){let i,o,a=0;return new Promise((l,f)=>{m();function m(){if(i=e[a++],!i)return f(o);try{let S=Bo(i,t,r,p,n);if(S&&typeof S.then=="function")S.then(v,y);else if(S!==void 0)v(S);else if(a===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(S){y(S)}}function p(S,b){S?y(S):v(b)}function v(S){l({plugin:i,result:S})}function y(S){o={plugin:i,error:S},m()}})};function Bo(e,t,r,n,i){let o=e[t];if(typeof o=="function")return o.apply(e,[r,n,i]);if(!n){if(o instanceof RegExp)return o.test(r.url);if(typeof o=="string")return o===r.extension;if(Array.isArray(o))return o.indexOf(r.extension)!==-1}return o}const{ono:on}=ot,Ii=se,Be=zt,{ResolverError:Ni,ParserError:Fi,UnmatchedParserError:mu,UnmatchedResolverError:vu,isHandledError:yu}=z;var Mo=gu;async function gu(e,t,r){e=Ii.stripHash(e);let n=t._add(e),i={url:e,extension:Ii.getExtension(e)};try{const o=await _u(i,r,t);n.pathType=o.plugin.name,i.data=o.result;const a=await Su(i,r,t);return n.value=a.result,a.result}catch(o){throw yu(o)&&(n.value=o),o}}function _u(e,t,r){return new Promise((n,i)=>{let o=Be.all(t.resolve);o=Be.filter(o,"canRead",e),Be.sort(o),Be.run(o,"read",e,r).then(n,a);function a(l){!l&&t.continueOnError?i(new vu(e.url)):!l||!("error"in l)?i(on.syntax(`Unable to resolve $ref pointer "${e.url}"`)):l.error instanceof Ni?i(l.error):i(new Ni(l,e.url))}})}function Su(e,t,r){return new Promise((n,i)=>{let o=Be.all(t.parse),a=Be.filter(o,"canParse",e),l=a.length>0?a:o;Be.sort(l),Be.run(l,"parse",e,r).then(f,m);function f(p){!p.plugin.allowEmpty&&Eu(p.result)?i(on.syntax(`Error parsing "${e.url}" as ${p.plugin.name}. 
Parsed value is empty`)):n(p)}function m(p){!p&&t.continueOnError?i(new mu(e.url)):!p||!("error"in p)?i(on.syntax(`Unable to parse ${e.url}`)):p.error instanceof Fi?i(p.error):i(new Fi(p.error.message,e.url))}})}function Eu(e){return e===void 0||typeof e=="object"&&Object.keys(e).length===0||typeof e=="string"&&e.trim().length===0||Buffer.isBuffer(e)&&e.length===0}const{ParserError:wu}=z;var bu={order:100,allowEmpty:!0,canParse:".json",async parse(e){let t=e.data;if(Buffer.isBuffer(t)&&(t=t.toString()),typeof t=="string"){if(t.trim().length===0)return;try{return JSON.parse(t)}catch(r){throw new wu(r.message,e.url)}}else return t}},ee={},Tn={},Ee={};function $o(e){return typeof e>"u"||e===null}function Ru(e){return typeof e=="object"&&e!==null}function Ou(e){return Array.isArray(e)?e:$o(e)?[]:[e]}function Au(e,t){var r,n,i,o;if(t)for(o=Object.keys(t),r=0,n=o.length;r<n;r+=1)i=o[r],e[i]=t[i];return e}function Tu(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function Cu(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Ee.isNothing=$o;Ee.isObject=Ru;Ee.toArray=Ou;Ee.repeat=Tu;Ee.isNegativeZero=Cu;Ee.extend=Au;function Uo(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Vt(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Uo(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Vt.prototype=Object.create(Error.prototype);Vt.prototype.constructor=Vt;Vt.prototype.toString=function(t){return this.name+": "+Uo(this,t)};var Gt=Vt,Mt=Ee;function Wr(e,t,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-t>l&&(o=" ... ",t=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+e.slice(t,r).replace(/\t/g,"→")+a,pos:n-t+o.length}}function Yr(e,t){return Mt.repeat(" ",t-e.length)+e}function Iu(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",f,m,p=Math.min(e.line+t.linesAfter,i.length).toString().length,v=t.maxLength-(t.indent+p+3);for(f=1;f<=t.linesBefore&&!(a-f<0);f++)m=Wr(e.buffer,n[a-f],i[a-f],e.position-(n[a]-n[a-f]),v),l=Mt.repeat(" ",t.indent)+Yr((e.line-f+1).toString(),p)+" | "+m.str+`
`+l;for(m=Wr(e.buffer,n[a],i[a],e.position,v),l+=Mt.repeat(" ",t.indent)+Yr((e.line+1).toString(),p)+" | "+m.str+`
`,l+=Mt.repeat("-",t.indent+p+3+m.pos)+`^
`,f=1;f<=t.linesAfter&&!(a+f>=i.length);f++)m=Wr(e.buffer,n[a+f],i[a+f],e.position-(n[a]-n[a+f]),v),l+=Mt.repeat(" ",t.indent)+Yr((e.line+f+1).toString(),p)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var Nu=Iu,fr={},Fu={get exports(){return fr},set exports(e){fr=e}},xi=Gt,xu=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Pu=["scalar","sequence","mapping"];function ku(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function Du(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(xu.indexOf(r)===-1)throw new xi('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=ku(t.styleAliases||null),Pu.indexOf(this.kind)===-1)throw new xi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ne=Du,kt=Gt,qr=ne;function Pi(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function Lu(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function an(e){return this.extend(e)}an.prototype.extend=function(t){var r=[],n=[];if(t instanceof qr)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new kt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof qr))throw new kt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new kt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new kt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof qr))throw new kt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(an.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Pi(i,"implicit"),i.compiledExplicit=Pi(i,"explicit"),i.compiledTypeMap=Lu(i.compiledImplicit,i.compiledExplicit),i};var jo=an,Bu=ne,Vo=new Bu("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Mu=ne,Ho=new Mu("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),$u=ne,Wo=new $u("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Uu=jo,Yo=new Uu({explicit:[Vo,Ho,Wo]}),ju=ne;function Vu(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Hu(){return null}function Wu(e){return e===null}var qo=new ju("tag:yaml.org,2002:null",{kind:"scalar",resolve:Vu,construct:Hu,predicate:Wu,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Yu=ne;function qu(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Ku(e){return e==="true"||e==="True"||e==="TRUE"}function zu(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Ko=new Yu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:qu,construct:Ku,predicate:zu,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),Gu=Ee,Ju=ne;function Xu(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Qu(e){return 48<=e&&e<=55}function Zu(e){return 48<=e&&e<=57}function el(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Xu(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Qu(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Zu(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function tl(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function rl(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Gu.isNegativeZero(e)}var zo=new Ju("tag:yaml.org,2002:int",{kind:"scalar",resolve:el,construct:tl,predicate:rl,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Go=Ee,nl=ne,il=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function ol(e){return!(e===null||!il.test(e)||e[e.length-1]==="_")}function al(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var sl=/^[-+]?[0-9]+e/;function ul(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Go.isNegativeZero(e))return"-0.0";return r=e.toString(10),sl.test(r)?r.replace("e",".e"):r}function ll(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Go.isNegativeZero(e))}var Jo=new nl("tag:yaml.org,2002:float",{kind:"scalar",resolve:ol,construct:al,predicate:ll,represent:ul,defaultStyle:"lowercase"}),Xo=Yo.extend({implicit:[qo,Ko,zo,Jo]});(function(e){e.exports=Xo})(Fu);var cl=ne,Qo=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Zo=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function fl(e){return e===null?!1:Qo.exec(e)!==null||Zo.exec(e)!==null}function hl(e){var t,r,n,i,o,a,l,f=0,m=null,p,v,y;if(t=Qo.exec(e),t===null&&(t=Zo.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(o=+t[4],a=+t[5],l=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(p=+t[10],v=+(t[11]||0),m=(p*60+v)*6e4,t[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,a,l,f)),m&&y.setTime(y.getTime()-m),y}function dl(e){return e.toISOString()}var ea=new cl("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:fl,construct:hl,instanceOf:Date,represent:dl}),pl=ne;function ml(e){return e==="<<"||e===null}var ta=new pl("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ml}),vl=ne,Cn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function yl(e){if(e===null)return!1;var t,r,n=0,i=e.length,o=Cn;for(r=0;r<i;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function gl(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,o=Cn,a=0,l=[];for(t=0;t<i;t++)t%4===0&&t&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(t));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function _l(e){var t="",r=0,n,i,o=e.length,a=Cn;for(n=0;n<o;n++)n%3===0&&n&&(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]),r=(r<<8)+e[n];return i=o%3,i===0?(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]):i===2?(t+=a[r>>10&63],t+=a[r>>4&63],t+=a[r<<2&63],t+=a[64]):i===1&&(t+=a[r>>2&63],t+=a[r<<4&63],t+=a[64],t+=a[64]),t}function Sl(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var ra=new vl("tag:yaml.org,2002:binary",{kind:"scalar",resolve:yl,construct:gl,predicate:Sl,represent:_l}),El=ne,wl=Object.prototype.hasOwnProperty,bl=Object.prototype.toString;function Rl(e){if(e===null)return!0;var t=[],r,n,i,o,a,l=e;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,bl.call(i)!=="[object Object]")return!1;for(o in i)if(wl.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function Ol(e){return e!==null?e:[]}var na=new El("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Rl,construct:Ol}),Al=ne,Tl=Object.prototype.toString;function Cl(e){if(e===null)return!0;var t,r,n,i,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(n=a[t],Tl.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[t]=[i[0],n[i[0]]]}return!0}function Il(e){if(e===null)return[];var t,r,n,i,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1)n=a[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}var ia=new Al("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Cl,construct:Il}),Nl=ne,Fl=Object.prototype.hasOwnProperty;function xl(e){if(e===null)return!0;var t,r=e;for(t in r)if(Fl.call(r,t)&&r[t]!==null)return!1;return!0}function Pl(e){return e!==null?e:{}}var oa=new Nl("tag:yaml.org,2002:set",{kind:"mapping",resolve:xl,construct:Pl}),In=fr.extend({implicit:[ea,ta],explicit:[ra,na,ia,oa]}),nt=Ee,aa=Gt,kl=Nu,Dl=In,je=Object.prototype.hasOwnProperty,hr=1,sa=2,ua=3,dr=4,Kr=1,Ll=2,ki=3,Bl=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ml=/[\x85\u2028\u2029]/,$l=/[,\[\]\{\}]/,la=/^(?:!|!!|![a-z\-]+!)$/i,ca=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Di(e){return Object.prototype.toString.call(e)}function Ae(e){return e===10||e===13}function it(e){return e===9||e===32}function ae(e){return e===9||e===32||e===10||e===13}function _t(e){return e===44||e===91||e===93||e===123||e===125}function Ul(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function jl(e){return e===120?2:e===117?4:e===85?8:0}function Vl(e){return 48<=e&&e<=57?e-48:-1}function Li(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function Hl(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var fa=new Array(256),ha=new Array(256);for(var ht=0;ht<256;ht++)fa[ht]=Li(ht)?1:0,ha[ht]=Li(ht);function Wl(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Dl,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function da(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=kl(r),new aa(t,r)}function D(e,t){throw da(e,t)}function pr(e,t){e.onWarning&&e.onWarning.call(null,da(e,t))}var Bi={YAML:function(t,r,n){var i,o,a;t.version!==null&&D(t,"duplication of %YAML directive"),n.length!==1&&D(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&D(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&D(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&pr(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,o;n.length!==2&&D(t,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],la.test(i)||D(t,"ill-formed tag handle (first argument) of the TAG directive"),je.call(t.tagMap,i)&&D(t,'there is a previously declared suffix for "'+i+'" tag handle'),ca.test(o)||D(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{D(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Me(e,t,r,n){var i,o,a,l;if(t<r){if(l=e.input.slice(t,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||D(e,"expected valid JSON character");else Bl.test(l)&&D(e,"the stream contains non-printable characters");e.result+=l}}function Mi(e,t,r,n){var i,o,a,l;for(nt.isObject(r)||D(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],je.call(t,o)||(t[o]=r[o],n[o]=!0)}function St(e,t,r,n,i,o,a,l,f){var m,p;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,p=i.length;m<p;m+=1)Array.isArray(i[m])&&D(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Di(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&Di(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,p=o.length;m<p;m+=1)Mi(e,t,o[m],r);else Mi(e,t,o,r);else!e.json&&!je.call(r,i)&&je.call(t,i)&&(e.line=a||e.line,e.lineStart=l||e.lineStart,e.position=f||e.position,D(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete r[i];return t}function Nn(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):D(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function K(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;it(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ae(i))for(Nn(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&pr(e,"deficient indentation"),n}function Or(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||ae(r)))}function Fn(e,t){t===1?e.result+=" ":t>1&&(e.result+=nt.repeat(`
`,t-1))}function Yl(e,t,r){var n,i,o,a,l,f,m,p,v=e.kind,y=e.result,S;if(S=e.input.charCodeAt(e.position),ae(S)||_t(S)||S===35||S===38||S===42||S===33||S===124||S===62||S===39||S===34||S===37||S===64||S===96||(S===63||S===45)&&(i=e.input.charCodeAt(e.position+1),ae(i)||r&&_t(i)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,l=!1;S!==0;){if(S===58){if(i=e.input.charCodeAt(e.position+1),ae(i)||r&&_t(i))break}else if(S===35){if(n=e.input.charCodeAt(e.position-1),ae(n))break}else{if(e.position===e.lineStart&&Or(e)||r&&_t(S))break;if(Ae(S))if(f=e.line,m=e.lineStart,p=e.lineIndent,K(e,!1,-1),e.lineIndent>=t){l=!0,S=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=f,e.lineStart=m,e.lineIndent=p;break}}l&&(Me(e,o,a,!1),Fn(e,e.line-f),o=a=e.position,l=!1),it(S)||(a=e.position+1),S=e.input.charCodeAt(++e.position)}return Me(e,o,a,!1),e.result?!0:(e.kind=v,e.result=y,!1)}function ql(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Me(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Ae(r)?(Me(e,n,i,!0),Fn(e,K(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Or(e)?D(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);D(e,"unexpected end of the stream within a single quoted scalar")}function Kl(e,t){var r,n,i,o,a,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return Me(e,r,e.position,!0),e.position++,!0;if(l===92){if(Me(e,r,e.position,!0),l=e.input.charCodeAt(++e.position),Ae(l))K(e,!1,t);else if(l<256&&fa[l])e.result+=ha[l],e.position++;else if((a=jl(l))>0){for(i=a,o=0;i>0;i--)l=e.input.charCodeAt(++e.position),(a=Ul(l))>=0?o=(o<<4)+a:D(e,"expected hexadecimal character");e.result+=Hl(o),e.position++}else D(e,"unknown escape sequence");r=n=e.position}else Ae(l)?(Me(e,r,n,!0),Fn(e,K(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Or(e)?D(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}D(e,"unexpected end of the stream within a double quoted scalar")}function zl(e,t){var r=!0,n,i,o,a=e.tag,l,f=e.anchor,m,p,v,y,S,b=Object.create(null),g,R,w,E;if(E=e.input.charCodeAt(e.position),E===91)p=93,S=!1,l=[];else if(E===123)p=125,S=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),E=e.input.charCodeAt(++e.position);E!==0;){if(K(e,!0,t),E=e.input.charCodeAt(e.position),E===p)return e.position++,e.tag=a,e.anchor=f,e.kind=S?"mapping":"sequence",e.result=l,!0;r?E===44&&D(e,"expected the node content, but found ','"):D(e,"missed comma between flow collection entries"),R=g=w=null,v=y=!1,E===63&&(m=e.input.charCodeAt(e.position+1),ae(m)&&(v=y=!0,e.position++,K(e,!0,t))),n=e.line,i=e.lineStart,o=e.position,wt(e,t,hr,!1,!0),R=e.tag,g=e.result,K(e,!0,t),E=e.input.charCodeAt(e.position),(y||e.line===n)&&E===58&&(v=!0,E=e.input.charCodeAt(++e.position),K(e,!0,t),wt(e,t,hr,!1,!0),w=e.result),S?St(e,l,b,R,g,w,n,i,o):v?l.push(St(e,null,b,R,g,w,n,i,o)):l.push(g),K(e,!0,t),E=e.input.charCodeAt(e.position),E===44?(r=!0,E=e.input.charCodeAt(++e.position)):r=!1}D(e,"unexpected end of the stream within a flow collection")}function Gl(e,t){var r,n,i=Kr,o=!1,a=!1,l=t,f=0,m=!1,p,v;if(v=e.input.charCodeAt(e.position),v===124)n=!1;else if(v===62)n=!0;else return!1;for(e.kind="scalar",e.result="";v!==0;)if(v=e.input.charCodeAt(++e.position),v===43||v===45)Kr===i?i=v===43?ki:Ll:D(e,"repeat of a chomping mode identifier");else if((p=Vl(v))>=0)p===0?D(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?D(e,"repeat of an indentation width identifier"):(l=t+p-1,a=!0);else break;if(it(v)){do v=e.input.charCodeAt(++e.position);while(it(v));if(v===35)do v=e.input.charCodeAt(++e.position);while(!Ae(v)&&v!==0)}for(;v!==0;){for(Nn(e),e.lineIndent=0,v=e.input.charCodeAt(e.position);(!a||e.lineIndent<l)&&v===32;)e.lineIndent++,v=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>l&&(l=e.lineIndent),Ae(v)){f++;continue}if(e.lineIndent<l){i===ki?e.result+=nt.repeat(`
`,o?1+f:f):i===Kr&&o&&(e.result+=`
`);break}for(n?it(v)?(m=!0,e.result+=nt.repeat(`
`,o?1+f:f)):m?(m=!1,e.result+=nt.repeat(`
`,f+1)):f===0?o&&(e.result+=" "):e.result+=nt.repeat(`
`,f):e.result+=nt.repeat(`
`,o?1+f:f),o=!0,a=!0,f=0,r=e.position;!Ae(v)&&v!==0;)v=e.input.charCodeAt(++e.position);Me(e,r,e.position,!1)}return!0}function $i(e,t){var r,n=e.tag,i=e.anchor,o=[],a,l=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(e.position);f!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),!(f!==45||(a=e.input.charCodeAt(e.position+1),!ae(a))));){if(l=!0,e.position++,K(e,!0,-1)&&e.lineIndent<=t){o.push(null),f=e.input.charCodeAt(e.position);continue}if(r=e.line,wt(e,t,ua,!1,!0),o.push(e.result),K(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&f!==0)D(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function Jl(e,t,r){var n,i,o,a,l,f,m=e.tag,p=e.anchor,v={},y=Object.create(null),S=null,b=null,g=null,R=!1,w=!1,E;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=v),E=e.input.charCodeAt(e.position);E!==0;){if(!R&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(E===63||E===58)&&ae(n))E===63?(R&&(St(e,v,y,S,b,null,a,l,f),S=b=g=null),w=!0,R=!0,i=!0):R?(R=!1,i=!0):D(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,E=n;else{if(a=e.line,l=e.lineStart,f=e.position,!wt(e,r,sa,!1,!0))break;if(e.line===o){for(E=e.input.charCodeAt(e.position);it(E);)E=e.input.charCodeAt(++e.position);if(E===58)E=e.input.charCodeAt(++e.position),ae(E)||D(e,"a whitespace character is expected after the key-value separator within a block mapping"),R&&(St(e,v,y,S,b,null,a,l,f),S=b=g=null),w=!0,R=!1,i=!1,S=e.tag,b=e.result;else if(w)D(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=m,e.anchor=p,!0}else if(w)D(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=m,e.anchor=p,!0}if((e.line===o||e.lineIndent>t)&&(R&&(a=e.line,l=e.lineStart,f=e.position),wt(e,t,dr,!0,i)&&(R?b=e.result:g=e.result),R||(St(e,v,y,S,b,g,a,l,f),S=b=g=null),K(e,!0,-1),E=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&E!==0)D(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return R&&St(e,v,y,S,b,null,a,l,f),w&&(e.tag=m,e.anchor=p,e.kind="mapping",e.result=v),w}function Xl(e){var t,r=!1,n=!1,i,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&D(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(r=!0,a=e.input.charCodeAt(++e.position)):a===33?(n=!0,i="!!",a=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):D(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!ae(a);)a===33&&(n?D(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),la.test(i)||D(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),$l.test(o)&&D(e,"tag suffix cannot contain flow indicator characters")}o&&!ca.test(o)&&D(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{D(e,"tag name is malformed: "+o)}return r?e.tag=o:je.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:D(e,'undeclared tag handle "'+i+'"'),!0}function Ql(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&D(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ae(r)&&!_t(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&D(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Zl(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!ae(n)&&!_t(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&D(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),je.call(e.anchorMap,r)||D(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],K(e,!0,-1),!0}function wt(e,t,r,n,i){var o,a,l,f=1,m=!1,p=!1,v,y,S,b,g,R;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=l=dr===r||ua===r,n&&K(e,!0,-1)&&(m=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;Xl(e)||Ql(e);)K(e,!0,-1)?(m=!0,l=o,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):l=!1;if(l&&(l=m||i),(f===1||dr===r)&&(hr===r||sa===r?g=t:g=t+1,R=e.position-e.lineStart,f===1?l&&($i(e,R)||Jl(e,R,g))||zl(e,g)?p=!0:(a&&Gl(e,g)||ql(e,g)||Kl(e,g)?p=!0:Zl(e)?(p=!0,(e.tag!==null||e.anchor!==null)&&D(e,"alias node should not have any properties")):Yl(e,g,hr===r)&&(p=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(p=l&&$i(e,R))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&D(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),v=0,y=e.implicitTypes.length;v<y;v+=1)if(b=e.implicitTypes[v],b.resolve(e.result)){e.result=b.construct(e.result),e.tag=b.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(je.call(e.typeMap[e.kind||"fallback"],e.tag))b=e.typeMap[e.kind||"fallback"][e.tag];else for(b=null,S=e.typeMap.multi[e.kind||"fallback"],v=0,y=S.length;v<y;v+=1)if(e.tag.slice(0,S[v].tag.length)===S[v].tag){b=S[v];break}b||D(e,"unknown tag !<"+e.tag+">"),e.result!==null&&b.kind!==e.kind&&D(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+b.kind+'", not "'+e.kind+'"'),b.resolve(e.result,e.tag)?(e.result=b.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):D(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||p}function ec(e){var t=e.position,r,n,i,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(K(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),r=e.position;a!==0&&!ae(a);)a=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&D(e,"directive name must not be less than one character in length");a!==0;){for(;it(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!Ae(a));break}if(Ae(a))break;for(r=e.position;a!==0&&!ae(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}a!==0&&Nn(e),je.call(Bi,n)?Bi[n](e,n,i):pr(e,'unknown document directive "'+n+'"')}if(K(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,K(e,!0,-1)):o&&D(e,"directives end mark is expected"),wt(e,e.lineIndent-1,dr,!1,!0),K(e,!0,-1),e.checkLineBreaks&&Ml.test(e.input.slice(t,e.position))&&pr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Or(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,K(e,!0,-1));return}if(e.position<e.length-1)D(e,"end of the stream or a document separator is expected");else return}function pa(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Wl(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,D(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)ec(r);return r.documents}function tc(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=pa(e,r);if(typeof t!="function")return n;for(var i=0,o=n.length;i<o;i+=1)t(n[i])}function rc(e,t){var r=pa(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new aa("expected a single document in the stream, but found more")}}Tn.loadAll=tc;Tn.load=rc;var ma={},Ar=Ee,Jt=Gt,nc=In,va=Object.prototype.toString,ya=Object.prototype.hasOwnProperty,xn=65279,ic=9,Ht=10,oc=13,ac=32,sc=33,uc=34,sn=35,lc=37,cc=38,fc=39,hc=42,ga=44,dc=45,mr=58,pc=61,mc=62,vc=63,yc=64,_a=91,Sa=93,gc=96,Ea=123,_c=124,wa=125,te={};te[0]="\\0";te[7]="\\a";te[8]="\\b";te[9]="\\t";te[10]="\\n";te[11]="\\v";te[12]="\\f";te[13]="\\r";te[27]="\\e";te[34]='\\"';te[92]="\\\\";te[133]="\\N";te[160]="\\_";te[8232]="\\L";te[8233]="\\P";var Sc=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ec=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function wc(e,t){var r,n,i,o,a,l,f;if(t===null)return{};for(r={},n=Object.keys(t),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),f=e.compiledTypeMap.fallback[a],f&&ya.call(f.styleAliases,l)&&(l=f.styleAliases[l]),r[a]=l;return r}function bc(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Jt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ar.repeat("0",n-t.length)+t}var Rc=1,Wt=2;function Oc(e){this.schema=e.schema||nc,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ar.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=wc(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Wt:Rc,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ui(e,t){for(var r=Ar.repeat(" ",t),n=0,i=-1,o="",a,l=e.length;n<l;)i=e.indexOf(`
`,n),i===-1?(a=e.slice(n),n=l):(a=e.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function un(e,t){return`
`+Ar.repeat(" ",e.indent*t)}function Ac(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function vr(e){return e===ac||e===ic}function Yt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==xn||65536<=e&&e<=1114111}function ji(e){return Yt(e)&&e!==xn&&e!==oc&&e!==Ht}function Vi(e,t,r){var n=ji(e),i=n&&!vr(e);return(r?n:n&&e!==ga&&e!==_a&&e!==Sa&&e!==Ea&&e!==wa)&&e!==sn&&!(t===mr&&!i)||ji(t)&&!vr(t)&&e===sn||t===mr&&i}function Tc(e){return Yt(e)&&e!==xn&&!vr(e)&&e!==dc&&e!==vc&&e!==mr&&e!==ga&&e!==_a&&e!==Sa&&e!==Ea&&e!==wa&&e!==sn&&e!==cc&&e!==hc&&e!==sc&&e!==_c&&e!==pc&&e!==mc&&e!==fc&&e!==uc&&e!==lc&&e!==yc&&e!==gc}function Cc(e){return!vr(e)&&e!==mr}function $t(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function ba(e){var t=/^\n* /;return t.test(e)}var Ra=1,ln=2,Oa=3,Aa=4,mt=5;function Ic(e,t,r,n,i,o,a,l){var f,m=0,p=null,v=!1,y=!1,S=n!==-1,b=-1,g=Tc($t(e,0))&&Cc($t(e,e.length-1));if(t||a)for(f=0;f<e.length;m>=65536?f+=2:f++){if(m=$t(e,f),!Yt(m))return mt;g=g&&Vi(m,p,l),p=m}else{for(f=0;f<e.length;m>=65536?f+=2:f++){if(m=$t(e,f),m===Ht)v=!0,S&&(y=y||f-b-1>n&&e[b+1]!==" ",b=f);else if(!Yt(m))return mt;g=g&&Vi(m,p,l),p=m}y=y||S&&f-b-1>n&&e[b+1]!==" "}return!v&&!y?g&&!a&&!i(e)?Ra:o===Wt?mt:ln:r>9&&ba(e)?mt:a?o===Wt?mt:ln:y?Aa:Oa}function Nc(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===Wt?'""':"''";if(!e.noCompatMode&&(Sc.indexOf(t)!==-1||Ec.test(t)))return e.quotingType===Wt?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=n||e.flowLevel>-1&&r>=e.flowLevel;function f(m){return Ac(e,m)}switch(Ic(t,l,e.indent,a,f,e.quotingType,e.forceQuotes&&!n,i)){case Ra:return t;case ln:return"'"+t.replace(/'/g,"''")+"'";case Oa:return"|"+Hi(t,e.indent)+Wi(Ui(t,o));case Aa:return">"+Hi(t,e.indent)+Wi(Ui(Fc(t,a),o));case mt:return'"'+xc(t)+'"';default:throw new Jt("impossible error: invalid scalar style")}}()}function Hi(e,t){var r=ba(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Wi(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Fc(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=e.indexOf(`
`);return m=m!==-1?m:e.length,r.lastIndex=m,Yi(e.slice(0,m),t)}(),i=e[0]===`
`||e[0]===" ",o,a;a=r.exec(e);){var l=a[1],f=a[2];o=f[0]===" ",n+=l+(!i&&!o&&f!==""?`
`:"")+Yi(f,t),i=o}return n}function Yi(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,f="";n=r.exec(e);)l=n.index,l-i>t&&(o=a>i?a:l,f+=`
`+e.slice(i,o),i=o+1),a=l;return f+=`
`,e.length-i>t&&a>i?f+=e.slice(i,a)+`
`+e.slice(a+1):f+=e.slice(i),f.slice(1)}function xc(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=$t(e,i),n=te[r],!n&&Yt(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||bc(r);return t}function Pc(e,t,r){var n="",i=e.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(Pe(e,t,l,!1,!1)||typeof l>"u"&&Pe(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function qi(e,t,r,n){var i="",o=e.tag,a,l,f;for(a=0,l=r.length;a<l;a+=1)f=r[a],e.replacer&&(f=e.replacer.call(r,String(a),f)),(Pe(e,t+1,f,!0,!0,!1,!0)||typeof f>"u"&&Pe(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=un(e,t)),e.dump&&Ht===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function kc(e,t,r){var n="",i=e.tag,o=Object.keys(r),a,l,f,m,p;for(a=0,l=o.length;a<l;a+=1)p="",n!==""&&(p+=", "),e.condenseFlow&&(p+='"'),f=o[a],m=r[f],e.replacer&&(m=e.replacer.call(r,f,m)),Pe(e,t,f,!1,!1)&&(e.dump.length>1024&&(p+="? "),p+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Pe(e,t,m,!1,!1)&&(p+=e.dump,n+=p));e.tag=i,e.dump="{"+n+"}"}function Dc(e,t,r,n){var i="",o=e.tag,a=Object.keys(r),l,f,m,p,v,y;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new Jt("sortKeys must be a boolean or a function");for(l=0,f=a.length;l<f;l+=1)y="",(!n||i!=="")&&(y+=un(e,t)),m=a[l],p=r[m],e.replacer&&(p=e.replacer.call(r,m,p)),Pe(e,t+1,m,!0,!0,!0)&&(v=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,v&&(e.dump&&Ht===e.dump.charCodeAt(0)?y+="?":y+="? "),y+=e.dump,v&&(y+=un(e,t)),Pe(e,t+1,p,!0,v)&&(e.dump&&Ht===e.dump.charCodeAt(0)?y+=":":y+=": ",y+=e.dump,i+=y));e.tag=o,e.dump=i||"{}"}function Ki(e,t,r){var n,i,o,a,l,f;for(i=r?e.explicitTypes:e.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof t=="object"&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(r?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(f=e.styleMap[l.tag]||l.defaultStyle,va.call(l.represent)==="[object Function]")n=l.represent(t,f);else if(ya.call(l.represent,f))n=l.represent[f](t,f);else throw new Jt("!<"+l.tag+'> tag resolver accepts not "'+f+'" style');e.dump=n}return!0}return!1}function Pe(e,t,r,n,i,o,a){e.tag=null,e.dump=r,Ki(e,r,!1)||Ki(e,r,!0);var l=va.call(e.dump),f=n,m;n&&(n=e.flowLevel<0||e.flowLevel>t);var p=l==="[object Object]"||l==="[object Array]",v,y;if(p&&(v=e.duplicates.indexOf(r),y=v!==-1),(e.tag!==null&&e.tag!=="?"||y||e.indent!==2&&t>0)&&(i=!1),y&&e.usedDuplicates[v])e.dump="*ref_"+v;else{if(p&&y&&!e.usedDuplicates[v]&&(e.usedDuplicates[v]=!0),l==="[object Object]")n&&Object.keys(e.dump).length!==0?(Dc(e,t,e.dump,i),y&&(e.dump="&ref_"+v+e.dump)):(kc(e,t,e.dump),y&&(e.dump="&ref_"+v+" "+e.dump));else if(l==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?qi(e,t-1,e.dump,i):qi(e,t,e.dump,i),y&&(e.dump="&ref_"+v+e.dump)):(Pc(e,t,e.dump),y&&(e.dump="&ref_"+v+" "+e.dump));else if(l==="[object String]")e.tag!=="?"&&Nc(e,e.dump,t,o,f);else{if(l==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Jt("unacceptable kind of an object to dump "+l)}e.tag!==null&&e.tag!=="?"&&(m=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",e.dump=m+" "+e.dump)}return!0}function Lc(e,t){var r=[],n=[],i,o;for(cn(e,r,n),i=0,o=n.length;i<o;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(o)}function cn(e,t,r){var n,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)cn(e[i],t,r);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)cn(e[n[i]],t,r)}function Bc(e,t){t=t||{};var r=new Oc(t);r.noRefs||Lc(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Pe(r,0,n,!0,!0)?r.dump+`
`:""}ma.dump=Bc;var Ta=Tn,Mc=ma;function Pn(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}ee.Type=ne;ee.Schema=jo;ee.FAILSAFE_SCHEMA=Yo;ee.JSON_SCHEMA=Xo;ee.CORE_SCHEMA=fr;ee.DEFAULT_SCHEMA=In;ee.load=Ta.load;ee.loadAll=Ta.loadAll;ee.dump=Mc.dump;ee.YAMLException=Gt;ee.types={binary:ra,float:Jo,map:Wo,null:qo,pairs:ia,set:oa,timestamp:ea,bool:Ko,int:zo,merge:ta,omap:na,seq:Ho,str:Vo};ee.safeLoad=Pn("safeLoad","load");ee.safeLoadAll=Pn("safeLoadAll","loadAll");ee.safeDump=Pn("safeDump","dump");const{ParserError:$c}=z,Uc=ee,{JSON_SCHEMA:jc}=ee;var Vc={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let t=e.data;if(Buffer.isBuffer(t)&&(t=t.toString()),typeof t=="string")try{return Uc.load(t,{schema:jc})}catch(r){throw new $c(r.message,e.url)}else return t}};const{ParserError:Hc}=z;let Wc=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;var Yc={order:300,allowEmpty:!0,encoding:"utf8",canParse(e){return(typeof e.data=="string"||Buffer.isBuffer(e.data))&&Wc.test(e.url)},parse(e){if(typeof e.data=="string")return e.data;if(Buffer.isBuffer(e.data))return e.data.toString(this.encoding);throw new Hc("data is not text",e.url)}};let qc=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;var Kc={order:400,allowEmpty:!0,canParse(e){return Buffer.isBuffer(e.data)&&qc.test(e.url)},parse(e){return Buffer.isBuffer(e.data)?e.data:Buffer.from(e.data)}},yr={},zc={get exports(){return yr},set exports(e){yr=e}},at={},Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.constants=void 0;Ye.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};var fn={};typeof BigInt=="function"?fn.default=BigInt:fn.default=function(){throw new Error("BigInt is not supported in this environment.")};Object.defineProperty(at,"__esModule",{value:!0});at.Stats=void 0;var qe=Ye,Gc=fn,Jc=qe.constants.S_IFMT,Xc=qe.constants.S_IFDIR,Qc=qe.constants.S_IFREG,Zc=qe.constants.S_IFBLK,ef=qe.constants.S_IFCHR,tf=qe.constants.S_IFLNK,rf=qe.constants.S_IFIFO,nf=qe.constants.S_IFSOCK,Ca=function(){function e(){}return e.build=function(t,r){r===void 0&&(r=!1);var n=new e,i=t.uid,o=t.gid,a=t.atime,l=t.mtime,f=t.ctime,m=r?Gc.default:function(v){return v};n.uid=m(i),n.gid=m(o),n.rdev=m(0),n.blksize=m(4096),n.ino=m(t.ino),n.size=m(t.getSize()),n.blocks=m(1),n.atime=a,n.mtime=l,n.ctime=f,n.birthtime=f,n.atimeMs=m(a.getTime()),n.mtimeMs=m(l.getTime());var p=m(f.getTime());return n.ctimeMs=p,n.birthtimeMs=p,n.dev=m(0),n.mode=m(t.mode),n.nlink=m(t.nlink),n},e.prototype._checkModeProperty=function(t){return(Number(this.mode)&Jc)===t},e.prototype.isDirectory=function(){return this._checkModeProperty(Xc)},e.prototype.isFile=function(){return this._checkModeProperty(Qc)},e.prototype.isBlockDevice=function(){return this._checkModeProperty(Zc)},e.prototype.isCharacterDevice=function(){return this._checkModeProperty(ef)},e.prototype.isSymbolicLink=function(){return this._checkModeProperty(tf)},e.prototype.isFIFO=function(){return this._checkModeProperty(rf)},e.prototype.isSocket=function(){return this._checkModeProperty(nf)},e}();at.Stats=Ca;at.default=Ca;var bt={},kn={},Tr={};(function(e){var t=J&&J.__spreadArray||function(a,l,f){if(f||arguments.length===2)for(var m=0,p=l.length,v;m<p;m++)(v||!(m in l))&&(v||(v=Array.prototype.slice.call(l,0,m)),v[m]=l[m]);return a.concat(v||Array.prototype.slice.call(l))};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferFrom=e.bufferAllocUnsafe=e.Buffer=void 0;var r=Is;Object.defineProperty(e,"Buffer",{enumerable:!0,get:function(){return r.Buffer}});function n(a){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];return new(r.Buffer.bind.apply(r.Buffer,t([void 0,a],l,!1)))}var i=r.Buffer.allocUnsafe||n;e.bufferAllocUnsafe=i;var o=r.Buffer.from||n;e.bufferFrom=o})(Tr);var Dn={};(function(e){var t=J&&J.__extends||function(){var g=function(R,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,A){E.__proto__=A}||function(E,A){for(var C in A)Object.prototype.hasOwnProperty.call(A,C)&&(E[C]=A[C])},g(R,w)};return function(R,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");g(R,w);function E(){this.constructor=R}R.prototype=w===null?Object.create(w):(E.prototype=w.prototype,new E)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.E=e.AssertionError=e.message=e.RangeError=e.TypeError=e.Error=void 0;var r=Ns,n=On(),i=typeof Symbol>"u"?"_kCode":Symbol("code"),o={};function a(g){return function(R){t(w,R);function w(E){for(var A=[],C=1;C<arguments.length;C++)A[C-1]=arguments[C];var T=R.call(this,m(E,A))||this;return T.code=E,T[i]=E,T.name="".concat(R.prototype.name," [").concat(T[i],"]"),T}return w}(g)}var l=typeof globalThis<"u"?globalThis:J,f=function(g){t(R,g);function R(w){var E=this;if(typeof w!="object"||w===null)throw new e.TypeError("ERR_INVALID_ARG_TYPE","options","object");return w.message?E=g.call(this,w.message)||this:E=g.call(this,"".concat(n.inspect(w.actual).slice(0,128)," ")+"".concat(w.operator," ").concat(n.inspect(w.expected).slice(0,128)))||this,E.generatedMessage=!w.message,E.name="AssertionError [ERR_ASSERTION]",E.code="ERR_ASSERTION",E.actual=w.actual,E.expected=w.expected,E.operator=w.operator,e.Error.captureStackTrace(E,w.stackStartFunction),E}return R}(l.Error);e.AssertionError=f;function m(g,R){r.strictEqual(typeof g,"string");var w=o[g];r(w,"An invalid error message key was used: ".concat(g,"."));var E;if(typeof w=="function")E=w;else{if(E=n.format,R===void 0||R.length===0)return w;R.unshift(w)}return String(E.apply(null,R))}e.message=m;function p(g,R){o[g]=typeof R=="function"?R:String(R)}e.E=p,e.Error=a(l.Error),e.TypeError=a(l.TypeError),e.RangeError=a(l.RangeError),p("ERR_ARG_NOT_ITERABLE","%s must be iterable"),p("ERR_ASSERTION","%s"),p("ERR_BUFFER_OUT_OF_BOUNDS",b),p("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),p("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),p("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),p("ERR_DNS_SET_SERVERS_FAILED",function(g,R){return'c-ares failed to set servers: "'.concat(g,'" [').concat(R,"]")}),p("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),p("ERR_ENCODING_NOT_SUPPORTED",function(g){return'The "'.concat(g,'" encoding is not supported')}),p("ERR_ENCODING_INVALID_ENCODED_DATA",function(g){return"The encoded data was not valid for encoding ".concat(g)}),p("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),p("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),p("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),p("ERR_INDEX_OUT_OF_RANGE","Index out of range"),p("ERR_INVALID_ARG_TYPE",v),p("ERR_INVALID_ARRAY_LENGTH",function(g,R,w){return r.strictEqual(typeof w,"number"),'The array "'.concat(g,'" (length ').concat(w,") must be of length ").concat(R,".")}),p("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),p("ERR_INVALID_CALLBACK","Callback must be a function"),p("ERR_INVALID_CHAR","Invalid character in %s"),p("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),p("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),p("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),p("ERR_INVALID_FILE_URL_PATH","File URL path %s"),p("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),p("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),p("ERR_INVALID_OPT_VALUE",function(g,R){return'The value "'.concat(String(R),'" is invalid for option "').concat(g,'"')}),p("ERR_INVALID_OPT_VALUE_ENCODING",function(g){return'The value "'.concat(String(g),'" is invalid for option "encoding"')}),p("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),p("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),p("ERR_INVALID_THIS",'Value of "this" must be of type %s'),p("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),p("ERR_INVALID_URL","Invalid URL: %s"),p("ERR_INVALID_URL_SCHEME",function(g){return"The URL must be ".concat(S(g,"scheme"))}),p("ERR_IPC_CHANNEL_CLOSED","Channel closed"),p("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),p("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),p("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),p("ERR_MISSING_ARGS",y),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),p("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),p("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),p("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),p("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),p("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),p("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),p("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),p("ERR_SOCKET_CANNOT_SEND","Unable to send data"),p("ERR_SOCKET_CLOSED","Socket is closed"),p("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),p("ERR_STDERR_CLOSE","process.stderr cannot be closed"),p("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),p("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),p("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),p("ERR_TLS_DH_PARAM_SIZE",function(g){return"DH parameter size ".concat(g," is less than 2048")}),p("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),p("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),p("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),p("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),p("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),p("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),p("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),p("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),p("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),p("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function v(g,R,w){r(g,"name is required");var E;R.includes("not ")?(E="must not be",R=R.split("not ")[1]):E="must be";var A;if(Array.isArray(g)){var C=g.map(function(x){return'"'.concat(x,'"')}).join(", ");A="The ".concat(C," arguments ").concat(E," ").concat(S(R,"type"))}else if(g.includes(" argument"))A="The ".concat(g," ").concat(E," ").concat(S(R,"type"));else{var T=g.includes(".")?"property":"argument";A='The "'.concat(g,'" ').concat(T," ").concat(E," ").concat(S(R,"type"))}return arguments.length>=3&&(A+=". Received type ".concat(w!==null?typeof w:"null")),A}function y(){for(var g=[],R=0;R<arguments.length;R++)g[R]=arguments[R];r(g.length>0,"At least one arg needs to be specified");var w="The ",E=g.length;switch(g=g.map(function(A){return'"'.concat(A,'"')}),E){case 1:w+="".concat(g[0]," argument");break;case 2:w+="".concat(g[0]," and ").concat(g[1]," arguments");break;default:w+=g.slice(0,E-1).join(", "),w+=", and ".concat(g[E-1]," arguments");break}return"".concat(w," must be specified")}function S(g,R){if(r(g,"expected is required"),r(typeof R=="string","thing is required"),Array.isArray(g)){var w=g.length;return r(w>0,"At least one expected value needs to be specified"),g=g.map(function(E){return String(E)}),w>2?"one of ".concat(R," ").concat(g.slice(0,w-1).join(", "),", or ")+g[w-1]:w===2?"one of ".concat(R," ").concat(g[0]," or ").concat(g[1]):"of ".concat(R," ").concat(g[0])}else return"of ".concat(R," ").concat(String(g))}function b(g,R){return R?"Attempt to write outside buffer bounds":'"'.concat(g,'" is outside of buffer bounds')}})(Dn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.strToEncoding=e.assertEncoding=e.ENCODING_UTF8=void 0;var t=Tr,r=Dn;e.ENCODING_UTF8="utf8";function n(o){if(o&&!t.Buffer.isEncoding(o))throw new r.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",o)}e.assertEncoding=n;function i(o,a){return!a||a===e.ENCODING_UTF8?o:a==="buffer"?new t.Buffer(o):new t.Buffer(o).toString(a)}e.strToEncoding=i})(kn);Object.defineProperty(bt,"__esModule",{value:!0});bt.Dirent=void 0;var Ke=Ye,of=kn,af=Ke.constants.S_IFMT,sf=Ke.constants.S_IFDIR,uf=Ke.constants.S_IFREG,lf=Ke.constants.S_IFBLK,cf=Ke.constants.S_IFCHR,ff=Ke.constants.S_IFLNK,hf=Ke.constants.S_IFIFO,df=Ke.constants.S_IFSOCK,Ia=function(){function e(){this.name="",this.mode=0}return e.build=function(t,r){var n=new e,i=t.getNode().mode;return n.name=(0,of.strToEncoding)(t.getName(),r),n.mode=i,n},e.prototype._checkModeProperty=function(t){return(this.mode&af)===t},e.prototype.isDirectory=function(){return this._checkModeProperty(sf)},e.prototype.isFile=function(){return this._checkModeProperty(uf)},e.prototype.isBlockDevice=function(){return this._checkModeProperty(lf)},e.prototype.isCharacterDevice=function(){return this._checkModeProperty(cf)},e.prototype.isSymbolicLink=function(){return this._checkModeProperty(ff)},e.prototype.isFIFO=function(){return this._checkModeProperty(hf)},e.prototype.isSocket=function(){return this._checkModeProperty(df)},e}();bt.Dirent=Ia;bt.default=Ia;var Na={};function Re(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function zi(e,t){for(var r="",n=0,i=-1,o=0,a,l=0;l<=e.length;++l){if(l<e.length)a=e.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var f=r.lastIndexOf("/");if(f!==r.length-1){f===-1?(r="",n=0):(r=r.slice(0,f),n=r.length-1-r.lastIndexOf("/")),i=l,o=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=l,o=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+e.slice(i+1,l):r=e.slice(i+1,l),n=l-i-1;i=l,o=0}else a===46&&o!==-1?++o:o=-1}return r}function pf(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}var Et={resolve:function(){for(var t="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var o;i>=0?o=arguments[i]:(n===void 0&&(n=process.cwd()),o=n),Re(o),o.length!==0&&(t=o+"/"+t,r=o.charCodeAt(0)===47)}return t=zi(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(Re(t),t.length===0)return".";var r=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=zi(t,!r),t.length===0&&!r&&(t="."),t.length>0&&n&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return Re(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,r=0;r<arguments.length;++r){var n=arguments[r];Re(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":Et.normalize(t)},relative:function(t,r){if(Re(t),Re(r),t===r||(t=Et.resolve(t),r=Et.resolve(r),t===r))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var i=t.length,o=i-n,a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var l=r.length,f=l-a,m=o<f?o:f,p=-1,v=0;v<=m;++v){if(v===m){if(f>m){if(r.charCodeAt(a+v)===47)return r.slice(a+v+1);if(v===0)return r.slice(a+v)}else o>m&&(t.charCodeAt(n+v)===47?p=v:v===0&&(p=0));break}var y=t.charCodeAt(n+v),S=r.charCodeAt(a+v);if(y!==S)break;y===47&&(p=v)}var b="";for(v=n+p+1;v<=i;++v)(v===i||t.charCodeAt(v)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+r.slice(a+p):(a+=p,r.charCodeAt(a)===47&&++a,r.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(Re(t),t.length===0)return".";for(var r=t.charCodeAt(0),n=r===47,i=-1,o=!0,a=t.length-1;a>=1;--a)if(r=t.charCodeAt(a),r===47){if(!o){i=a;break}}else o=!1;return i===-1?n?"/":".":n&&i===1?"//":t.slice(0,i)},basename:function(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Re(t);var n=0,i=-1,o=!0,a;if(r!==void 0&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var l=r.length-1,f=-1;for(a=t.length-1;a>=0;--a){var m=t.charCodeAt(a);if(m===47){if(!o){n=a+1;break}}else f===-1&&(o=!1,f=a+1),l>=0&&(m===r.charCodeAt(l)?--l===-1&&(i=a):(l=-1,i=f))}return n===i?i=f:i===-1&&(i=t.length),t.slice(n,i)}else{for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!o){n=a+1;break}}else i===-1&&(o=!1,i=a+1);return i===-1?"":t.slice(n,i)}},extname:function(t){Re(t);for(var r=-1,n=0,i=-1,o=!0,a=0,l=t.length-1;l>=0;--l){var f=t.charCodeAt(l);if(f===47){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),f===46?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return pf("/",t)},parse:function(t){Re(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return r;var n=t.charCodeAt(0),i=n===47,o;i?(r.root="/",o=1):o=0;for(var a=-1,l=0,f=-1,m=!0,p=t.length-1,v=0;p>=o;--p){if(n=t.charCodeAt(p),n===47){if(!m){l=p+1;break}continue}f===-1&&(m=!1,f=p+1),n===46?a===-1?a=p:v!==1&&(v=1):a!==-1&&(v=-1)}return a===-1||f===-1||v===0||v===1&&a===f-1&&a===l+1?f!==-1&&(l===0&&i?r.base=r.name=t.slice(1,f):r.base=r.name=t.slice(l,f)):(l===0&&i?(r.name=t.slice(1,a),r.base=t.slice(1,f)):(r.name=t.slice(l,a),r.base=t.slice(l,f)),r.ext=t.slice(a,f)),l>0?r.dir=t.slice(0,l-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};Et.posix=Et;var mf=Et,Fa={},Rt={},gr={},vf={get exports(){return gr},set exports(e){gr=e}},Gi;function yf(){if(Gi)return gr;Gi=1;var e=vf.exports={},t,r;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n}catch{t=n}try{typeof clearTimeout=="function"?r=clearTimeout:r=i}catch{r=i}})();function o(g){if(t===setTimeout)return setTimeout(g,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(g,0);try{return t(g,0)}catch{try{return t.call(null,g,0)}catch{return t.call(this,g,0)}}}function a(g){if(r===clearTimeout)return clearTimeout(g);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(g);try{return r(g)}catch{try{return r.call(null,g)}catch{return r.call(this,g)}}}var l=[],f=!1,m,p=-1;function v(){!f||!m||(f=!1,m.length?l=m.concat(l):p=-1,l.length&&y())}function y(){if(!f){var g=o(v);f=!0;for(var R=l.length;R;){for(m=l,l=[];++p<R;)m&&m[p].run();p=-1,R=l.length}m=null,f=!1,a(g)}}e.nextTick=function(g){var R=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)R[w-1]=arguments[w];l.push(new S(g,R)),l.length===1&&!f&&o(y)};function S(g,R){this.fun=g,this.array=R}S.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(g){return[]},e.binding=function(g){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(g){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},gr}var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});var hn;typeof setImmediate=="function"?hn=setImmediate.bind(typeof globalThis<"u"?globalThis:J):hn=setTimeout.bind(typeof globalThis<"u"?globalThis:J);Cr.default=hn;Object.defineProperty(Rt,"__esModule",{value:!0});Rt.createProcess=void 0;var gf=function(){if(typeof process<"u")return process;try{return yf()}catch{return}};function xa(){var e=gf()||{};return e.cwd||(e.cwd=function(){return"/"}),e.nextTick||(e.nextTick=Cr.default),e.emitWarning||(e.emitWarning=function(t,r){console.warn("".concat(r).concat(r?": ":"").concat(t))}),e.env||(e.env={}),e}Rt.createProcess=xa;Rt.default=xa();(function(e){var t=J&&J.__extends||function(){var w=function(E,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(C[x]=T[x])},w(E,A)};return function(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");w(E,A);function C(){this.constructor=E}E.prototype=A===null?Object.create(A):(C.prototype=A.prototype,new C)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.File=e.Link=e.Node=e.SEP=void 0;var r=Rt,n=Tr,i=Ye,o=br,a=at,l=i.constants.S_IFMT,f=i.constants.S_IFDIR,m=i.constants.S_IFREG,p=i.constants.S_IFLNK,v=i.constants.O_APPEND,y=function(){var w,E;return(E=(w=r.default.getuid)===null||w===void 0?void 0:w.call(r.default))!==null&&E!==void 0?E:0},S=function(){var w,E;return(E=(w=r.default.getgid)===null||w===void 0?void 0:w.call(r.default))!==null&&E!==void 0?E:0};e.SEP="/";var b=function(w){t(E,w);function E(A,C){C===void 0&&(C=438);var T=w.call(this)||this;return T.uid=y(),T.gid=S(),T.atime=new Date,T.mtime=new Date,T.ctime=new Date,T.perm=438,T.mode=m,T.nlink=1,T.perm=C,T.mode|=C,T.ino=A,T}return E.prototype.getString=function(A){return A===void 0&&(A="utf8"),this.getBuffer().toString(A)},E.prototype.setString=function(A){this.buf=(0,n.bufferFrom)(A,"utf8"),this.touch()},E.prototype.getBuffer=function(){return this.buf||this.setBuffer((0,n.bufferAllocUnsafe)(0)),(0,n.bufferFrom)(this.buf)},E.prototype.setBuffer=function(A){this.buf=(0,n.bufferFrom)(A),this.touch()},E.prototype.getSize=function(){return this.buf?this.buf.length:0},E.prototype.setModeProperty=function(A){this.mode=this.mode&~l|A},E.prototype.setIsFile=function(){this.setModeProperty(m)},E.prototype.setIsDirectory=function(){this.setModeProperty(f)},E.prototype.setIsSymlink=function(){this.setModeProperty(p)},E.prototype.isFile=function(){return(this.mode&l)===m},E.prototype.isDirectory=function(){return(this.mode&l)===f},E.prototype.isSymlink=function(){return(this.mode&l)===p},E.prototype.makeSymlink=function(A){this.symlink=A,this.setIsSymlink()},E.prototype.write=function(A,C,T,x){if(C===void 0&&(C=0),T===void 0&&(T=A.length),x===void 0&&(x=0),this.buf||(this.buf=(0,n.bufferAllocUnsafe)(0)),x+T>this.buf.length){var L=(0,n.bufferAllocUnsafe)(x+T);this.buf.copy(L,0,0,this.buf.length),this.buf=L}return A.copy(this.buf,x,C,C+T),this.touch(),T},E.prototype.read=function(A,C,T,x){C===void 0&&(C=0),T===void 0&&(T=A.byteLength),x===void 0&&(x=0),this.buf||(this.buf=(0,n.bufferAllocUnsafe)(0));var L=T;return L>A.byteLength&&(L=A.byteLength),L+x>this.buf.length&&(L=this.buf.length-x),this.buf.copy(A,C,x,x+L),L},E.prototype.truncate=function(A){if(A===void 0&&(A=0),!A)this.buf=(0,n.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,n.bufferAllocUnsafe)(0)),A<=this.buf.length)this.buf=this.buf.slice(0,A);else{var C=(0,n.bufferAllocUnsafe)(A);this.buf.copy(C),C.fill(0,this.buf.length),this.buf=C}this.touch()},E.prototype.chmod=function(A){this.perm=A,this.mode=this.mode&-512|A,this.touch()},E.prototype.chown=function(A,C){this.uid=A,this.gid=C,this.touch()},E.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},E.prototype.canRead=function(A,C){return A===void 0&&(A=y()),C===void 0&&(C=S()),!!(this.perm&4||C===this.gid&&this.perm&32||A===this.uid&&this.perm&256)},E.prototype.canWrite=function(A,C){return A===void 0&&(A=y()),C===void 0&&(C=S()),!!(this.perm&2||C===this.gid&&this.perm&16||A===this.uid&&this.perm&128)},E.prototype.del=function(){this.emit("delete",this)},E.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},E}(o.EventEmitter);e.Node=b;var g=function(w){t(E,w);function E(A,C,T){var x=w.call(this)||this;return x.children={},x._steps=[],x.ino=0,x.length=0,x.vol=A,x.parent=C,x.name=T,x.syncSteps(),x}return Object.defineProperty(E.prototype,"steps",{get:function(){return this._steps},set:function(A){this._steps=A;for(var C=0,T=Object.values(this.children);C<T.length;C++){var x=T[C];x==null||x.syncSteps()}},enumerable:!1,configurable:!0}),E.prototype.setNode=function(A){this.node=A,this.ino=A.ino},E.prototype.getNode=function(){return this.node},E.prototype.createChild=function(A,C){C===void 0&&(C=this.vol.createNode());var T=new E(this.vol,this,A);return T.setNode(C),C.isDirectory(),this.setChild(A,T),T},E.prototype.setChild=function(A,C){return C===void 0&&(C=new E(this.vol,this,A)),this.children[A]=C,C.parent=this,this.length++,this.emit("child:add",C,this),C},E.prototype.deleteChild=function(A){delete this.children[A.getName()],this.length--,this.emit("child:delete",A,this)},E.prototype.getChild=function(A){if(Object.hasOwnProperty.call(this.children,A))return this.children[A]},E.prototype.getPath=function(){return this.steps.join(e.SEP)},E.prototype.getName=function(){return this.steps[this.steps.length-1]},E.prototype.walk=function(A,C,T){if(C===void 0&&(C=A.length),T===void 0&&(T=0),T>=A.length)return this;if(T>=C)return this;var x=A[T],L=this.getChild(x);return L?L.walk(A,C,T+1):null},E.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},E.prototype.syncSteps=function(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]},E}(o.EventEmitter);e.Link=g;var R=function(){function w(E,A,C,T){this.position=0,this.link=E,this.node=A,this.flags=C,this.fd=T}return w.prototype.getString=function(E){return this.node.getString()},w.prototype.setString=function(E){this.node.setString(E)},w.prototype.getBuffer=function(){return this.node.getBuffer()},w.prototype.setBuffer=function(E){this.node.setBuffer(E)},w.prototype.getSize=function(){return this.node.getSize()},w.prototype.truncate=function(E){this.node.truncate(E)},w.prototype.seekTo=function(E){this.position=E},w.prototype.stats=function(){return a.default.build(this.node)},w.prototype.write=function(E,A,C,T){A===void 0&&(A=0),C===void 0&&(C=E.length),typeof T!="number"&&(T=this.position),this.flags&v&&(T=this.getSize());var x=this.node.write(E,A,C,T);return this.position=T+x,x},w.prototype.read=function(E,A,C,T){A===void 0&&(A=0),C===void 0&&(C=E.byteLength),typeof T!="number"&&(T=this.position);var x=this.node.read(E,A,C,T);return this.position=T+x,x},w.prototype.chmod=function(E){this.node.chmod(E)},w.prototype.chown=function(E,A){this.node.chown(E,A)},w}();e.File=R})(Fa);var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});function _f(e,t,r){var n=setTimeout.apply(typeof globalThis<"u"?globalThis:J,arguments);return n&&typeof n=="object"&&typeof n.unref=="function"&&n.unref(),n}Ln.default=_f;var Xt={},Ji=J&&J.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.FileHandle=void 0;function U(e,t,r){return r===void 0&&(r=function(n){return n}),function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new Promise(function(o,a){e[t].bind(e).apply(void 0,Ji(Ji([],n,!1),[function(l,f){return l?a(l):o(r(f))}],!1))})}}var vt=function(){function e(t,r){this.vol=t,this.fd=r}return e.prototype.appendFile=function(t,r){return U(this.vol,"appendFile")(this.fd,t,r)},e.prototype.chmod=function(t){return U(this.vol,"fchmod")(this.fd,t)},e.prototype.chown=function(t,r){return U(this.vol,"fchown")(this.fd,t,r)},e.prototype.close=function(){return U(this.vol,"close")(this.fd)},e.prototype.datasync=function(){return U(this.vol,"fdatasync")(this.fd)},e.prototype.read=function(t,r,n,i){return U(this.vol,"read",function(o){return{bytesRead:o,buffer:t}})(this.fd,t,r,n,i)},e.prototype.readFile=function(t){return U(this.vol,"readFile")(this.fd,t)},e.prototype.stat=function(t){return U(this.vol,"fstat")(this.fd,t)},e.prototype.sync=function(){return U(this.vol,"fsync")(this.fd)},e.prototype.truncate=function(t){return U(this.vol,"ftruncate")(this.fd,t)},e.prototype.utimes=function(t,r){return U(this.vol,"futimes")(this.fd,t,r)},e.prototype.write=function(t,r,n,i){return U(this.vol,"write",function(o){return{bytesWritten:o,buffer:t}})(this.fd,t,r,n,i)},e.prototype.writeFile=function(t,r){return U(this.vol,"writeFile")(this.fd,t,r)},e}();Xt.FileHandle=vt;function Sf(e){return typeof Promise>"u"?null:{FileHandle:vt,access:function(t,r){return U(e,"access")(t,r)},appendFile:function(t,r,n){return U(e,"appendFile")(t instanceof vt?t.fd:t,r,n)},chmod:function(t,r){return U(e,"chmod")(t,r)},chown:function(t,r,n){return U(e,"chown")(t,r,n)},copyFile:function(t,r,n){return U(e,"copyFile")(t,r,n)},lchmod:function(t,r){return U(e,"lchmod")(t,r)},lchown:function(t,r,n){return U(e,"lchown")(t,r,n)},link:function(t,r){return U(e,"link")(t,r)},lstat:function(t,r){return U(e,"lstat")(t,r)},mkdir:function(t,r){return U(e,"mkdir")(t,r)},mkdtemp:function(t,r){return U(e,"mkdtemp")(t,r)},open:function(t,r,n){return U(e,"open",function(i){return new vt(e,i)})(t,r,n)},readdir:function(t,r){return U(e,"readdir")(t,r)},readFile:function(t,r){return U(e,"readFile")(t instanceof vt?t.fd:t,r)},readlink:function(t,r){return U(e,"readlink")(t,r)},realpath:function(t,r){return U(e,"realpath")(t,r)},rename:function(t,r){return U(e,"rename")(t,r)},rmdir:function(t){return U(e,"rmdir")(t)},rm:function(t,r){return U(e,"rm")(t,r)},stat:function(t,r){return U(e,"stat")(t,r)},symlink:function(t,r,n){return U(e,"symlink")(t,r,n)},truncate:function(t,r){return U(e,"truncate")(t,r)},unlink:function(t){return U(e,"unlink")(t)},utimes:function(t,r,n){return U(e,"utimes")(t,r,n)},writeFile:function(t,r,n){return U(e,"writeFile")(t instanceof vt?t.fd:t,r,n)}}}Xt.default=Sf;var Dt={},Xi;function Ef(){if(Xi)return Dt;Xi=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.unixify=i,Dt.correctPath=o;var e=process.platform==="win32";function t(a){var l=a.length-1;if(l<2)return a;for(;r(a,l);)l--;return a.substr(0,l+1)}function r(a,l){var f=a[l];return l>0&&(f==="/"||e&&f==="\\")}function n(a,l){if(typeof a!="string")throw new TypeError("expected a string");return a=a.replace(/[\\\/]+/g,"/"),l!==!1&&(a=t(a)),a}function i(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e?(a=n(a,l),a.replace(/^([a-zA-Z]+:|\.\/)/,"")):a}function o(a){return i(a.replace(/^\\\\\?\\.:\\/,"\\"))}return Dt}(function(e){var t=J&&J.__extends||function(){var h=function(s,u){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(c[_]=d[_])},h(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");h(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=J&&J.__spreadArray||function(h,s,u){if(u||arguments.length===2)for(var c=0,d=s.length,_;c<d;c++)(_||!(c in s))&&(_||(_=Array.prototype.slice.call(s,0,c)),_[c]=s[c]);return h.concat(_||Array.prototype.slice.call(s))};Object.defineProperty(e,"__esModule",{value:!0}),e.FSWatcher=e.StatWatcher=e.Volume=e.toUnixTimestamp=e.bufferToEncoding=e.dataToBuffer=e.dataToStr=e.pathToSteps=e.filenameToSteps=e.pathToFilename=e.flagsToNumber=e.FLAGS=void 0;var n=mf,i=Fa,o=at,a=bt,l=Tr,f=Cr,m=Rt,p=Ln,v=Ts(),y=Ye,S=br,b=kn,g=Dn,R=On(),w=Xt,E=n.resolve,A=y.constants.O_RDONLY,C=y.constants.O_WRONLY,T=y.constants.O_RDWR,x=y.constants.O_CREAT,L=y.constants.O_EXCL,Z=y.constants.O_TRUNC,le=y.constants.O_APPEND,ie=y.constants.O_SYNC,Tt=y.constants.O_DIRECTORY,Ct=y.constants.F_OK,ut=y.constants.COPYFILE_EXCL,ke=y.constants.COPYFILE_FICLONE_FORCE,ze=n.posix?n.posix:n,re=ze.sep,De=ze.relative,Ge=ze.join,Je=ze.dirname,It=m.default.platform==="win32",Ha=128,Ne={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},Wa=function(h){return"Expected options to be either an object or a string, but got ".concat(h," instead")},W="ENOENT",kr="EBADF",Xn="EINVAL",Ya="EPERM",qa="EPROTO",Le="EEXIST",Xe="ENOTDIR",Qn="EMFILE",Zn="EACCES",Dr="EISDIR",ei="ENOTEMPTY",ti="ENOSYS",ri="ERR_FS_EISDIR";function Ka(h,s,u,c){s===void 0&&(s=""),u===void 0&&(u=""),c===void 0&&(c="");var d="";switch(u&&(d=" '".concat(u,"'")),c&&(d+=" -> '".concat(c,"'")),h){case W:return"ENOENT: no such file or directory, ".concat(s).concat(d);case kr:return"EBADF: bad file descriptor, ".concat(s).concat(d);case Xn:return"EINVAL: invalid argument, ".concat(s).concat(d);case Ya:return"EPERM: operation not permitted, ".concat(s).concat(d);case qa:return"EPROTO: protocol error, ".concat(s).concat(d);case Le:return"EEXIST: file already exists, ".concat(s).concat(d);case Xe:return"ENOTDIR: not a directory, ".concat(s).concat(d);case Dr:return"EISDIR: illegal operation on a directory, ".concat(s).concat(d);case Zn:return"EACCES: permission denied, ".concat(s).concat(d);case ei:return"ENOTEMPTY: directory not empty, ".concat(s).concat(d);case Qn:return"EMFILE: too many open files, ".concat(s).concat(d);case ti:return"ENOSYS: function not implemented, ".concat(s).concat(d);case ri:return"[ERR_FS_EISDIR]: Path is a directory: ".concat(s," returned EISDIR (is a directory) ").concat(u);default:return"".concat(h,": error occurred, ").concat(s).concat(d)}}function $(h,s,u,c,d){s===void 0&&(s=""),u===void 0&&(u=""),c===void 0&&(c=""),d===void 0&&(d=Error);var _=new d(Ka(h,s,u,c));return _.code=h,u&&(_.path=u),_}var Qe;(function(h){h[h.r=A]="r",h[h["r+"]=T]="r+",h[h.rs=A|ie]="rs",h[h.sr=h.rs]="sr",h[h["rs+"]=T|ie]="rs+",h[h["sr+"]=h["rs+"]]="sr+",h[h.w=C|x|Z]="w",h[h.wx=C|x|Z|L]="wx",h[h.xw=h.wx]="xw",h[h["w+"]=T|x|Z]="w+",h[h["wx+"]=T|x|Z|L]="wx+",h[h["xw+"]=h["wx+"]]="xw+",h[h.a=C|le|x]="a",h[h.ax=C|le|x|L]="ax",h[h.xa=h.ax]="xa",h[h["a+"]=T|le|x]="a+",h[h["ax+"]=T|le|x|L]="ax+",h[h["xa+"]=h["ax+"]]="xa+"})(Qe=e.FLAGS||(e.FLAGS={}));function Ze(h){if(typeof h=="number")return h;if(typeof h=="string"){var s=Qe[h];if(typeof s<"u")return s}throw new g.TypeError("ERR_INVALID_OPT_VALUE","flags",h)}e.flagsToNumber=Ze;function Lr(h,s){var u;if(s){var c=typeof s;switch(c){case"string":u=Object.assign({},h,{encoding:s});break;case"object":u=Object.assign({},h,s);break;default:throw TypeError(Wa(c))}}else return h;return u.encoding!=="buffer"&&(0,b.assertEncoding)(u.encoding),u}function et(h){return function(s){return Lr(h,s)}}function oe(h){if(typeof h!="function")throw TypeError(Ne.CB);return h}function lt(h){return function(s,u){return typeof s=="function"?[h(),s]:[h(s),oe(u)]}}var Br={encoding:"utf8"},er=et(Br),ni=lt(er),za={flag:"r"},ii=et(za),oi={encoding:"utf8",mode:438,flag:Qe[Qe.w]},ai=et(oi),si={encoding:"utf8",mode:438,flag:Qe[Qe.a]},ui=et(si),Ga=lt(ui),Ja=Br,li=et(Ja),Xa=lt(li),ci={mode:511,recursive:!1},fi=function(h){return typeof h=="number"?Object.assign({},ci,{mode:h}):Object.assign({},ci,h)},Qa={recursive:!1},hi=function(h){return Object.assign({},Qa,h)},Za=et(Br),es=lt(Za),ts={encoding:"utf8",withFileTypes:!1},di=et(ts),rs=lt(di),ns={bigint:!1},Nt=function(h){return h===void 0&&(h={}),Object.assign({},ns,h)},Mr=function(h,s){return typeof h=="function"?[Nt(),h]:[Nt(h),oe(s)]};function is(h){if(h.hostname!=="")throw new g.TypeError("ERR_INVALID_FILE_URL_HOST",m.default.platform);for(var s=h.pathname,u=0;u<s.length;u++)if(s[u]==="%"){var c=s.codePointAt(u+2)|32;if(s[u+1]==="2"&&c===102)throw new g.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(s)}function k(h){if(typeof h!="string"&&!l.Buffer.isBuffer(h)){try{if(!(h instanceof nn.URL))throw new TypeError(Ne.PATH_STR)}catch{throw new TypeError(Ne.PATH_STR)}h=is(h)}var s=String(h);return $r(s),s}e.pathToFilename=k;var Ft=function(h,s){return s===void 0&&(s=m.default.cwd()),E(s,h)};if(It){var os=Ft,as=Ef().unixify;Ft=function(h,s){return as(os(h,s))}}function q(h,s){var u=Ft(h,s),c=u.substring(1);return c?c.split(re):[]}e.filenameToSteps=q;function ss(h){return q(k(h))}e.pathToSteps=ss;function us(h,s){return s===void 0&&(s=b.ENCODING_UTF8),l.Buffer.isBuffer(h)?h.toString(s):h instanceof Uint8Array?(0,l.bufferFrom)(h).toString(s):String(h)}e.dataToStr=us;function xt(h,s){return s===void 0&&(s=b.ENCODING_UTF8),l.Buffer.isBuffer(h)?h:h instanceof Uint8Array?(0,l.bufferFrom)(h):(0,l.bufferFrom)(String(h),s)}e.dataToBuffer=xt;function pi(h,s){return!s||s==="buffer"?h:h.toString(s)}e.bufferToEncoding=pi;function $r(h,s){if((""+h).indexOf("\0")!==-1){var u=new Error("Path must be a string without null bytes");if(u.code=W,typeof s!="function")throw u;return m.default.nextTick(s,u),!1}return!0}function ls(h,s){if(typeof h=="number")return h;if(typeof h=="string")return parseInt(h,8);if(s)return ue(s)}function ue(h,s){var u=ls(h,s);if(typeof u!="number"||isNaN(u))throw new TypeError(Ne.MODE_INT);return u}function tt(h){return h>>>0===h}function Pt(h){if(!tt(h))throw TypeError(Ne.FD)}function Fe(h){if(typeof h=="string"&&+h==h)return+h;if(h instanceof Date)return h.getTime()/1e3;if(isFinite(h))return h<0?Date.now()/1e3:h;throw new Error("Cannot parse time: "+h)}e.toUnixTimestamp=Fe;function ct(h){if(typeof h!="number")throw TypeError(Ne.UID)}function ft(h){if(typeof h!="number")throw TypeError(Ne.GID)}function cs(h){var s={};function u(c,d){for(var _ in d){var O=d[_],I=Ge(c,_);typeof O=="string"?s[I]=O:typeof O=="object"&&O!==null&&Object.keys(O).length>0?u(I,O):s[I]=null}}return u("",h),s}var fs=function(){function h(s){s===void 0&&(s={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,w.default)(this),this.statWatchers={},this.props=Object.assign({Node:i.Node,Link:i.Link,File:i.File},s);var u=this.createLink();u.setNode(this.createNode(!0));var c=this;this.StatWatcher=function(O){t(I,O);function I(){return O.call(this,c)||this}return I}(mi);var d=be;this.ReadStream=function(O){t(I,O);function I(){for(var F=[],P=0;P<arguments.length;P++)F[P]=arguments[P];return O.apply(this,r([c],F,!1))||this}return I}(d);var _=fe;this.WriteStream=function(O){t(I,O);function I(){for(var F=[],P=0;P<arguments.length;P++)F[P]=arguments[P];return O.apply(this,r([c],F,!1))||this}return I}(_),this.FSWatcher=function(O){t(I,O);function I(){return O.call(this,c)||this}return I}(yi),this.root=u}return h.fromJSON=function(s,u){var c=new h;return c.fromJSON(s,u),c},h.fromNestedJSON=function(s,u){var c=new h;return c.fromNestedJSON(s,u),c},Object.defineProperty(h.prototype,"promises",{get:function(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),h.prototype.createLink=function(s,u,c,d){if(c===void 0&&(c=!1),!s)return new this.props.Link(this,null,"");if(!u)throw new Error("createLink: name cannot be empty");return s.createChild(u,this.createNode(c,d))},h.prototype.deleteLink=function(s){var u=s.parent;return u?(u.deleteChild(s),!0):!1},h.prototype.newInoNumber=function(){var s=this.releasedInos.pop();return s||(this.ino=(this.ino+1)%4294967295,this.ino)},h.prototype.newFdNumber=function(){var s=this.releasedFds.pop();return typeof s=="number"?s:h.fd--},h.prototype.createNode=function(s,u){s===void 0&&(s=!1);var c=new this.props.Node(this.newInoNumber(),u);return s&&c.setIsDirectory(),this.inodes[c.ino]=c,c},h.prototype.getNode=function(s){return this.inodes[s]},h.prototype.deleteNode=function(s){s.del(),delete this.inodes[s.ino],this.releasedInos.push(s.ino)},h.prototype.genRndStr=function(){var s=(Math.random()+1).toString(36).substring(2,8);return s.length===6?s:this.genRndStr()},h.prototype.getLink=function(s){return this.root.walk(s)},h.prototype.getLinkOrThrow=function(s,u){var c=q(s),d=this.getLink(c);if(!d)throw $(W,u,s);return d},h.prototype.getResolvedLink=function(s){for(var u=typeof s=="string"?q(s):s,c=this.root,d=0;d<u.length;){var _=u[d];if(c=c.getChild(_),!c)return null;var O=c.getNode();if(O.isSymlink()){u=O.symlink.concat(u.slice(d+1)),c=this.root,d=0;continue}d++}return c},h.prototype.getResolvedLinkOrThrow=function(s,u){var c=this.getResolvedLink(s);if(!c)throw $(W,u,s);return c},h.prototype.resolveSymlinks=function(s){return this.getResolvedLink(s.steps.slice(1))},h.prototype.getLinkAsDirOrThrow=function(s,u){var c=this.getLinkOrThrow(s,u);if(!c.getNode().isDirectory())throw $(Xe,u,s);return c},h.prototype.getLinkParent=function(s){return this.root.walk(s,s.length-1)},h.prototype.getLinkParentAsDirOrThrow=function(s,u){var c=s instanceof Array?s:q(s),d=this.getLinkParent(c);if(!d)throw $(W,u,re+c.join(re));if(!d.getNode().isDirectory())throw $(Xe,u,re+c.join(re));return d},h.prototype.getFileByFd=function(s){return this.fds[String(s)]},h.prototype.getFileByFdOrThrow=function(s,u){if(!tt(s))throw TypeError(Ne.FD);var c=this.getFileByFd(s);if(!c)throw $(kr,u);return c},h.prototype.wrapAsync=function(s,u,c){var d=this;oe(c),(0,f.default)(function(){var _;try{_=s.apply(d,u)}catch(O){c(O);return}c(null,_)})},h.prototype._toJSON=function(s,u,c){var d;s===void 0&&(s=this.root),u===void 0&&(u={});var _=!0,O=s.children;s.getNode().isFile()&&(O=(d={},d[s.getName()]=s.parent.getChild(s.getName()),d),s=s.parent);for(var I in O){_=!1;var F=s.getChild(I);if(!F)throw new Error("_toJSON: unexpected undefined");var P=F.getNode();if(P.isFile()){var M=F.getPath();c&&(M=De(c,M)),u[M]=P.getString()}else P.isDirectory()&&this._toJSON(F,u,c)}var Y=s.getPath();return c&&(Y=De(c,Y)),Y&&_&&(u[Y]=null),u},h.prototype.toJSON=function(s,u,c){u===void 0&&(u={}),c===void 0&&(c=!1);var d=[];if(s){s instanceof Array||(s=[s]);for(var _=0,O=s;_<O.length;_++){var I=O[_],F=k(I),P=this.getResolvedLink(F);P&&d.push(P)}}else d.push(this.root);if(!d.length)return u;for(var M=0,Y=d;M<Y.length;M++){var P=Y[M];this._toJSON(P,u,c?P.getPath():"")}return u},h.prototype.fromJSON=function(s,u){u===void 0&&(u=m.default.cwd());for(var c in s){var d=s[c];if(c=Ft(c,u),typeof d=="string"){var _=Je(c);this.mkdirpBase(_,511),this.writeFileSync(c,d)}else this.mkdirpBase(c,511)}},h.prototype.fromNestedJSON=function(s,u){this.fromJSON(cs(s),u)},h.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},h.prototype.mountSync=function(s,u){this.fromJSON(u,s)},h.prototype.openLink=function(s,u,c){if(c===void 0&&(c=!0),this.openFiles>=this.maxFiles)throw $(Qn,"open",s.getPath());var d=s;if(c&&(d=this.resolveSymlinks(s)),!d)throw $(W,"open",s.getPath());var _=d.getNode();if(_.isDirectory()){if((u&(A|T|C))!==A)throw $(Dr,"open",s.getPath())}else if(u&Tt)throw $(Xe,"open",s.getPath());if(!(u&C)&&!_.canRead())throw $(Zn,"open",s.getPath());var O=new this.props.File(s,_,u,this.newFdNumber());return this.fds[O.fd]=O,this.openFiles++,u&Z&&O.truncate(),O},h.prototype.openFile=function(s,u,c,d){d===void 0&&(d=!0);var _=q(s),O=d?this.getResolvedLink(_):this.getLink(_);if(O&&u&L)throw $(Le,"open",s);if(!O&&u&x){var I=this.getResolvedLink(_.slice(0,_.length-1));if(!I)throw $(W,"open",re+_.join(re));u&x&&typeof c=="number"&&(O=this.createLink(I,_[_.length-1],!1,c))}if(O)return this.openLink(O,u,d);throw $(W,"open",s)},h.prototype.openBase=function(s,u,c,d){d===void 0&&(d=!0);var _=this.openFile(s,u,c,d);if(!_)throw $(W,"open",s);return _.fd},h.prototype.openSync=function(s,u,c){c===void 0&&(c=438);var d=ue(c),_=k(s),O=Ze(u);return this.openBase(_,O,d)},h.prototype.open=function(s,u,c,d){var _=c,O=d;typeof c=="function"&&(_=438,O=c),_=_||438;var I=ue(_),F=k(s),P=Ze(u);this.wrapAsync(this.openBase,[F,P,I],O)},h.prototype.closeFile=function(s){this.fds[s.fd]&&(this.openFiles--,delete this.fds[s.fd],this.releasedFds.push(s.fd))},h.prototype.closeSync=function(s){Pt(s);var u=this.getFileByFdOrThrow(s,"close");this.closeFile(u)},h.prototype.close=function(s,u){Pt(s),this.wrapAsync(this.closeSync,[s],u)},h.prototype.openFileOrGetById=function(s,u,c){if(typeof s=="number"){var d=this.fds[s];if(!d)throw $(W);return d}else return this.openFile(k(s),u,c)},h.prototype.readBase=function(s,u,c,d,_){var O=this.getFileByFdOrThrow(s);return O.read(u,Number(c),Number(d),_)},h.prototype.readSync=function(s,u,c,d,_){return Pt(s),this.readBase(s,u,c,d,_)},h.prototype.read=function(s,u,c,d,_,O){var I=this;if(oe(O),d===0)return m.default.nextTick(function(){O&&O(null,0,u)});(0,f.default)(function(){try{var F=I.readBase(s,u,c,d,_);O(null,F,u)}catch(P){O(P)}})},h.prototype.readFileBase=function(s,u,c){var d,_=typeof s=="number",O=_&&tt(s),I;if(O)I=s;else{var F=k(s),P=q(F),M=this.getResolvedLink(P);if(M){var Y=M.getNode();if(Y.isDirectory())throw $(Dr,"open",M.getPath())}I=this.openSync(s,u)}try{d=pi(this.getFileByFdOrThrow(I).getBuffer(),c)}finally{O||this.closeSync(I)}return d},h.prototype.readFileSync=function(s,u){var c=ii(u),d=Ze(c.flag);return this.readFileBase(s,d,c.encoding)},h.prototype.readFile=function(s,u,c){var d=lt(ii)(u,c),_=d[0],O=d[1],I=Ze(_.flag);this.wrapAsync(this.readFileBase,[s,I,_.encoding],O)},h.prototype.writeBase=function(s,u,c,d,_){var O=this.getFileByFdOrThrow(s,"write");return O.write(u,c,d,_)},h.prototype.writeSync=function(s,u,c,d,_){Pt(s);var O,I,F,P,M=typeof u!="string";M?(I=(c||0)|0,F=d,P=_):(P=c,O=d);var Y=xt(u,O);return M?typeof F>"u"&&(F=Y.length):(I=0,F=Y.length),this.writeBase(s,Y,I,F,P)},h.prototype.write=function(s,u,c,d,_,O){var I=this;Pt(s);var F,P,M,Y,pe,Ur=typeof u,gi=typeof c,_i=typeof d,Si=typeof _;Ur!=="string"?gi==="function"?pe=c:_i==="function"?(F=c|0,pe=d):Si==="function"?(F=c|0,P=d,pe=_):(F=c|0,P=d,M=_,pe=O):gi==="function"?pe=c:_i==="function"?(M=c,pe=d):Si==="function"&&(M=c,Y=d,pe=_);var tr=xt(u,Y);Ur!=="string"?typeof P>"u"&&(P=tr.length):(F=0,P=tr.length);var jr=oe(pe);(0,f.default)(function(){try{var Ei=I.writeBase(s,tr,F,P,M);Ur!=="string"?jr(null,Ei,tr):jr(null,Ei,u)}catch(ps){jr(ps)}})},h.prototype.writeFileBase=function(s,u,c,d){var _=typeof s=="number",O;_?O=s:O=this.openBase(k(s),c,d);var I=0,F=u.length,P=c&le?void 0:0;try{for(;F>0;){var M=this.writeSync(O,u,I,F,P);I+=M,F-=M,P!==void 0&&(P+=M)}}finally{_||this.closeSync(O)}},h.prototype.writeFileSync=function(s,u,c){var d=ai(c),_=Ze(d.flag),O=ue(d.mode),I=xt(u,d.encoding);this.writeFileBase(s,I,_,O)},h.prototype.writeFile=function(s,u,c,d){var _=c,O=d;typeof c=="function"&&(_=oi,O=c);var I=oe(O),F=ai(_),P=Ze(F.flag),M=ue(F.mode),Y=xt(u,F.encoding);this.wrapAsync(this.writeFileBase,[s,Y,P,M],I)},h.prototype.linkBase=function(s,u){var c=q(s),d=this.getLink(c);if(!d)throw $(W,"link",s,u);var _=q(u),O=this.getLinkParent(_);if(!O)throw $(W,"link",s,u);var I=_[_.length-1];if(O.getChild(I))throw $(Le,"link",s,u);var F=d.getNode();F.nlink++,O.createChild(I,F)},h.prototype.copyFileBase=function(s,u,c){var d=this.readFileSync(s);if(c&ut&&this.existsSync(u))throw $(Le,"copyFile",s,u);if(c&ke)throw $(ti,"copyFile",s,u);this.writeFileBase(u,d,Qe.w,438)},h.prototype.copyFileSync=function(s,u,c){var d=k(s),_=k(u);return this.copyFileBase(d,_,(c||0)|0)},h.prototype.copyFile=function(s,u,c,d){var _=k(s),O=k(u),I,F;typeof c=="function"?(I=0,F=c):(I=c,F=d),oe(F),this.wrapAsync(this.copyFileBase,[_,O,I],F)},h.prototype.linkSync=function(s,u){var c=k(s),d=k(u);this.linkBase(c,d)},h.prototype.link=function(s,u,c){var d=k(s),_=k(u);this.wrapAsync(this.linkBase,[d,_],c)},h.prototype.unlinkBase=function(s){var u=q(s),c=this.getLink(u);if(!c)throw $(W,"unlink",s);if(c.length)throw Error("Dir not empty...");this.deleteLink(c);var d=c.getNode();d.nlink--,d.nlink<=0&&this.deleteNode(d)},h.prototype.unlinkSync=function(s){var u=k(s);this.unlinkBase(u)},h.prototype.unlink=function(s,u){var c=k(s);this.wrapAsync(this.unlinkBase,[c],u)},h.prototype.symlinkBase=function(s,u){var c=q(u),d=this.getLinkParent(c);if(!d)throw $(W,"symlink",s,u);var _=c[c.length-1];if(d.getChild(_))throw $(Le,"symlink",s,u);var O=d.createChild(_);return O.getNode().makeSymlink(q(s)),O},h.prototype.symlinkSync=function(s,u,c){var d=k(s),_=k(u);this.symlinkBase(d,_)},h.prototype.symlink=function(s,u,c,d){var _=oe(typeof c=="function"?c:d),O=k(s),I=k(u);this.wrapAsync(this.symlinkBase,[O,I],_)},h.prototype.realpathBase=function(s,u){var c=q(s),d=this.getResolvedLink(c);if(!d)throw $(W,"realpath",s);return(0,b.strToEncoding)(d.getPath()||"/",u)},h.prototype.realpathSync=function(s,u){return this.realpathBase(k(s),li(u).encoding)},h.prototype.realpath=function(s,u,c){var d=Xa(u,c),_=d[0],O=d[1],I=k(s);this.wrapAsync(this.realpathBase,[I,_.encoding],O)},h.prototype.lstatBase=function(s,u,c){u===void 0&&(u=!1),c===void 0&&(c=!1);var d=this.getLink(q(s));if(d)return o.default.build(d.getNode(),u);if(c)throw $(W,"lstat",s)},h.prototype.lstatSync=function(s,u){var c=Nt(u),d=c.throwIfNoEntry,_=d===void 0?!0:d,O=c.bigint,I=O===void 0?!1:O;return this.lstatBase(k(s),I,_)},h.prototype.lstat=function(s,u,c){var d=Mr(u,c),_=d[0],O=_.throwIfNoEntry,I=O===void 0?!0:O,F=_.bigint,P=F===void 0?!1:F,M=d[1];this.wrapAsync(this.lstatBase,[k(s),P,I],M)},h.prototype.statBase=function(s,u,c){u===void 0&&(u=!1),c===void 0&&(c=!0);var d=this.getResolvedLink(q(s));if(d)return o.default.build(d.getNode(),u);if(c)throw $(W,"stat",s)},h.prototype.statSync=function(s,u){var c=Nt(u),d=c.bigint,_=d===void 0?!0:d,O=c.throwIfNoEntry,I=O===void 0?!0:O;return this.statBase(k(s),_,I)},h.prototype.stat=function(s,u,c){var d=Mr(u,c),_=d[0],O=_.bigint,I=O===void 0?!1:O,F=_.throwIfNoEntry,P=F===void 0?!0:F,M=d[1];this.wrapAsync(this.statBase,[k(s),I,P],M)},h.prototype.fstatBase=function(s,u){u===void 0&&(u=!1);var c=this.getFileByFd(s);if(!c)throw $(kr,"fstat");return o.default.build(c.node,u)},h.prototype.fstatSync=function(s,u){return this.fstatBase(s,Nt(u).bigint)},h.prototype.fstat=function(s,u,c){var d=Mr(u,c),_=d[0],O=d[1];this.wrapAsync(this.fstatBase,[s,_.bigint],O)},h.prototype.renameBase=function(s,u){var c=this.getLink(q(s));if(!c)throw $(W,"rename",s,u);var d=q(u),_=this.getLinkParent(d);if(!_)throw $(W,"rename",s,u);var O=c.parent;O&&O.deleteChild(c);var I=d[d.length-1];c.name=I,c.steps=r(r([],_.steps,!0),[I],!1),_.setChild(c.getName(),c)},h.prototype.renameSync=function(s,u){var c=k(s),d=k(u);this.renameBase(c,d)},h.prototype.rename=function(s,u,c){var d=k(s),_=k(u);this.wrapAsync(this.renameBase,[d,_],c)},h.prototype.existsBase=function(s){return!!this.statBase(s)},h.prototype.existsSync=function(s){try{return this.existsBase(k(s))}catch{return!1}},h.prototype.exists=function(s,u){var c=this,d=k(s);if(typeof u!="function")throw Error(Ne.CB);(0,f.default)(function(){try{u(c.existsBase(d))}catch{u(!1)}})},h.prototype.accessBase=function(s,u){this.getLinkOrThrow(s,"access")},h.prototype.accessSync=function(s,u){u===void 0&&(u=Ct);var c=k(s);u=u|0,this.accessBase(c,u)},h.prototype.access=function(s,u,c){var d=Ct,_;typeof u!="function"?(d=u|0,_=oe(c)):_=u;var O=k(s);this.wrapAsync(this.accessBase,[O,d],_)},h.prototype.appendFileSync=function(s,u,c){c===void 0&&(c=si);var d=ui(c);(!d.flag||tt(s))&&(d.flag="a"),this.writeFileSync(s,u,d)},h.prototype.appendFile=function(s,u,c,d){var _=Ga(c,d),O=_[0],I=_[1];(!O.flag||tt(s))&&(O.flag="a"),this.writeFile(s,u,O,I)},h.prototype.readdirBase=function(s,u){var c=q(s),d=this.getResolvedLink(c);if(!d)throw $(W,"readdir",s);var _=d.getNode();if(!_.isDirectory())throw $(Xe,"scandir",s);if(u.withFileTypes){var O=[];for(var I in d.children){var F=d.getChild(I);F&&O.push(a.default.build(F,u.encoding))}return!It&&u.encoding!=="buffer"&&O.sort(function(Y,pe){return Y.name<pe.name?-1:Y.name>pe.name?1:0}),O}var P=[];for(var M in d.children)P.push((0,b.strToEncoding)(M,u.encoding));return!It&&u.encoding!=="buffer"&&P.sort(),P},h.prototype.readdirSync=function(s,u){var c=di(u),d=k(s);return this.readdirBase(d,c)},h.prototype.readdir=function(s,u,c){var d=rs(u,c),_=d[0],O=d[1],I=k(s);this.wrapAsync(this.readdirBase,[I,_],O)},h.prototype.readlinkBase=function(s,u){var c=this.getLinkOrThrow(s,"readlink"),d=c.getNode();if(!d.isSymlink())throw $(Xn,"readlink",s);var _=re+d.symlink.join(re);return(0,b.strToEncoding)(_,u)},h.prototype.readlinkSync=function(s,u){var c=er(u),d=k(s);return this.readlinkBase(d,c.encoding)},h.prototype.readlink=function(s,u,c){var d=ni(u,c),_=d[0],O=d[1],I=k(s);this.wrapAsync(this.readlinkBase,[I,_.encoding],O)},h.prototype.fsyncBase=function(s){this.getFileByFdOrThrow(s,"fsync")},h.prototype.fsyncSync=function(s){this.fsyncBase(s)},h.prototype.fsync=function(s,u){this.wrapAsync(this.fsyncBase,[s],u)},h.prototype.fdatasyncBase=function(s){this.getFileByFdOrThrow(s,"fdatasync")},h.prototype.fdatasyncSync=function(s){this.fdatasyncBase(s)},h.prototype.fdatasync=function(s,u){this.wrapAsync(this.fdatasyncBase,[s],u)},h.prototype.ftruncateBase=function(s,u){var c=this.getFileByFdOrThrow(s,"ftruncate");c.truncate(u)},h.prototype.ftruncateSync=function(s,u){this.ftruncateBase(s,u)},h.prototype.ftruncate=function(s,u,c){var d=typeof u=="number"?u:0,_=oe(typeof u=="number"?c:u);this.wrapAsync(this.ftruncateBase,[s,d],_)},h.prototype.truncateBase=function(s,u){var c=this.openSync(s,"r+");try{this.ftruncateSync(c,u)}finally{this.closeSync(c)}},h.prototype.truncateSync=function(s,u){if(tt(s))return this.ftruncateSync(s,u);this.truncateBase(s,u)},h.prototype.truncate=function(s,u,c){var d=typeof u=="number"?u:0,_=oe(typeof u=="number"?c:u);if(tt(s))return this.ftruncate(s,d,_);this.wrapAsync(this.truncateBase,[s,d],_)},h.prototype.futimesBase=function(s,u,c){var d=this.getFileByFdOrThrow(s,"futimes"),_=d.node;_.atime=new Date(u*1e3),_.mtime=new Date(c*1e3)},h.prototype.futimesSync=function(s,u,c){this.futimesBase(s,Fe(u),Fe(c))},h.prototype.futimes=function(s,u,c,d){this.wrapAsync(this.futimesBase,[s,Fe(u),Fe(c)],d)},h.prototype.utimesBase=function(s,u,c){var d=this.openSync(s,"r");try{this.futimesBase(d,u,c)}finally{this.closeSync(d)}},h.prototype.utimesSync=function(s,u,c){this.utimesBase(k(s),Fe(u),Fe(c))},h.prototype.utimes=function(s,u,c,d){this.wrapAsync(this.utimesBase,[k(s),Fe(u),Fe(c)],d)},h.prototype.mkdirBase=function(s,u){var c=q(s);if(!c.length)throw $(Le,"mkdir",s);var d=this.getLinkParentAsDirOrThrow(s,"mkdir"),_=c[c.length-1];if(d.getChild(_))throw $(Le,"mkdir",s);d.createChild(_,this.createNode(!0,u))},h.prototype.mkdirpBase=function(s,u){for(var c=Ft(s),d=c.substring(1),_=d?d.split(re):[],O=this.root,I=!1,F=0;F<_.length;F++){var P=_[F];if(!O.getNode().isDirectory())throw $(Xe,"mkdir",O.getPath());var M=O.getChild(P);if(M)if(M.getNode().isDirectory())O=M;else throw $(Xe,"mkdir",M.getPath());else O=O.createChild(P,this.createNode(!0,u)),I=!0}return I?c:void 0},h.prototype.mkdirSync=function(s,u){var c=fi(u),d=ue(c.mode,511),_=k(s);if(c.recursive)return this.mkdirpBase(_,d);this.mkdirBase(_,d)},h.prototype.mkdir=function(s,u,c){var d=fi(u),_=oe(typeof u=="function"?u:c),O=ue(d.mode,511),I=k(s);d.recursive?this.wrapAsync(this.mkdirpBase,[I,O],_):this.wrapAsync(this.mkdirBase,[I,O],_)},h.prototype.mkdirpSync=function(s,u){return this.mkdirSync(s,{mode:u,recursive:!0})},h.prototype.mkdirp=function(s,u,c){var d=typeof u=="function"?void 0:u,_=oe(typeof u=="function"?u:c);this.mkdir(s,{mode:d,recursive:!0},_)},h.prototype.mkdtempBase=function(s,u,c){c===void 0&&(c=5);var d=s+this.genRndStr();try{return this.mkdirBase(d,511),(0,b.strToEncoding)(d,u)}catch(_){if(_.code===Le){if(c>1)return this.mkdtempBase(s,u,c-1);throw Error("Could not create temp dir.")}else throw _}},h.prototype.mkdtempSync=function(s,u){var c=er(u).encoding;if(!s||typeof s!="string")throw new TypeError("filename prefix is required");return $r(s),this.mkdtempBase(s,c)},h.prototype.mkdtemp=function(s,u,c){var d=ni(u,c),_=d[0].encoding,O=d[1];if(!s||typeof s!="string")throw new TypeError("filename prefix is required");$r(s)&&this.wrapAsync(this.mkdtempBase,[s,_],O)},h.prototype.rmdirBase=function(s,u){var c=hi(u),d=this.getLinkAsDirOrThrow(s,"rmdir");if(d.length&&!c.recursive)throw $(ei,"rmdir",s);this.deleteLink(d)},h.prototype.rmdirSync=function(s,u){this.rmdirBase(k(s),u)},h.prototype.rmdir=function(s,u,c){var d=hi(u),_=oe(typeof u=="function"?u:c);this.wrapAsync(this.rmdirBase,[k(s),d],_)},h.prototype.rmBase=function(s,u){u===void 0&&(u={});var c=this.getResolvedLink(s);if(!c){if(!u.force)throw $(W,"stat",s);return}if(c.getNode().isDirectory()&&!u.recursive)throw $(ri,"rm",s);this.deleteLink(c)},h.prototype.rmSync=function(s,u){this.rmBase(k(s),u)},h.prototype.rm=function(s,u,c){var d=es(u,c),_=d[0],O=d[1];this.wrapAsync(this.rmBase,[k(s),_],O)},h.prototype.fchmodBase=function(s,u){var c=this.getFileByFdOrThrow(s,"fchmod");c.chmod(u)},h.prototype.fchmodSync=function(s,u){this.fchmodBase(s,ue(u))},h.prototype.fchmod=function(s,u,c){this.wrapAsync(this.fchmodBase,[s,ue(u)],c)},h.prototype.chmodBase=function(s,u){var c=this.openSync(s,"r");try{this.fchmodBase(c,u)}finally{this.closeSync(c)}},h.prototype.chmodSync=function(s,u){var c=ue(u),d=k(s);this.chmodBase(d,c)},h.prototype.chmod=function(s,u,c){var d=ue(u),_=k(s);this.wrapAsync(this.chmodBase,[_,d],c)},h.prototype.lchmodBase=function(s,u){var c=this.openBase(s,T,0,!1);try{this.fchmodBase(c,u)}finally{this.closeSync(c)}},h.prototype.lchmodSync=function(s,u){var c=ue(u),d=k(s);this.lchmodBase(d,c)},h.prototype.lchmod=function(s,u,c){var d=ue(u),_=k(s);this.wrapAsync(this.lchmodBase,[_,d],c)},h.prototype.fchownBase=function(s,u,c){this.getFileByFdOrThrow(s,"fchown").chown(u,c)},h.prototype.fchownSync=function(s,u,c){ct(u),ft(c),this.fchownBase(s,u,c)},h.prototype.fchown=function(s,u,c,d){ct(u),ft(c),this.wrapAsync(this.fchownBase,[s,u,c],d)},h.prototype.chownBase=function(s,u,c){var d=this.getResolvedLinkOrThrow(s,"chown"),_=d.getNode();_.chown(u,c)},h.prototype.chownSync=function(s,u,c){ct(u),ft(c),this.chownBase(k(s),u,c)},h.prototype.chown=function(s,u,c,d){ct(u),ft(c),this.wrapAsync(this.chownBase,[k(s),u,c],d)},h.prototype.lchownBase=function(s,u,c){this.getLinkOrThrow(s,"lchown").getNode().chown(u,c)},h.prototype.lchownSync=function(s,u,c){ct(u),ft(c),this.lchownBase(k(s),u,c)},h.prototype.lchown=function(s,u,c,d){ct(u),ft(c),this.wrapAsync(this.lchownBase,[k(s),u,c],d)},h.prototype.watchFile=function(s,u,c){var d=k(s),_=u,O=c;if(typeof _=="function"&&(O=u,_=null),typeof O!="function")throw Error('"watchFile()" requires a listener function');var I=5007,F=!0;_&&typeof _=="object"&&(typeof _.interval=="number"&&(I=_.interval),typeof _.persistent=="boolean"&&(F=_.persistent));var P=this.statWatchers[d];return P||(P=new this.StatWatcher,P.start(d,F,I),this.statWatchers[d]=P),P.addListener("change",O),P},h.prototype.unwatchFile=function(s,u){var c=k(s),d=this.statWatchers[c];d&&(typeof u=="function"?d.removeListener("change",u):d.removeAllListeners("change"),d.listenerCount("change")===0&&(d.stop(),delete this.statWatchers[c]))},h.prototype.createReadStream=function(s,u){return new this.ReadStream(s,u)},h.prototype.createWriteStream=function(s,u){return new this.WriteStream(s,u)},h.prototype.watch=function(s,u,c){var d=k(s),_=u;typeof u=="function"&&(c=u,_=null);var O=er(_),I=O.persistent,F=O.recursive,P=O.encoding;I===void 0&&(I=!0),F===void 0&&(F=!1);var M=new this.FSWatcher;return M.start(d,I,F,P),c&&M.addListener("change",c),M},h.fd=2147483647,h}();e.Volume=fs;function hs(h){h.emit("stop")}var mi=function(h){t(s,h);function s(u){var c=h.call(this)||this;return c.onInterval=function(){try{var d=c.vol.statSync(c.filename);c.hasChanged(d)&&(c.emit("change",d,c.prev),c.prev=d)}finally{c.loop()}},c.vol=u,c}return s.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},s.prototype.hasChanged=function(u){return u.mtimeMs>this.prev.mtimeMs||u.nlink!==this.prev.nlink},s.prototype.start=function(u,c,d){c===void 0&&(c=!0),d===void 0&&(d=5007),this.filename=k(u),this.setTimeout=c?setTimeout.bind(typeof globalThis<"u"?globalThis:J):p.default,this.interval=d,this.prev=this.vol.statSync(this.filename),this.loop()},s.prototype.stop=function(){clearTimeout(this.timeoutRef),m.default.nextTick(hs,this)},s}(S.EventEmitter);e.StatWatcher=mi;var ce;function ds(h){ce=(0,l.bufferAllocUnsafe)(h),ce.used=0}R.inherits(be,v.Readable),e.ReadStream=be;function be(h,s,u){if(!(this instanceof be))return new be(h,s,u);if(this._vol=h,u=Object.assign({},Lr(u,{})),u.highWaterMark===void 0&&(u.highWaterMark=64*1024),v.Readable.call(this,u),this.path=k(s),this.fd=u.fd===void 0?null:u.fd,this.flags=u.flags===void 0?"r":u.flags,this.mode=u.mode===void 0?438:u.mode,this.start=u.start,this.end=u.end,this.autoClose=u.autoClose===void 0?!0:u.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}be.prototype.open=function(){var h=this;this._vol.open(this.path,this.flags,this.mode,function(s,u){if(s){h.autoClose&&h.destroy&&h.destroy(),h.emit("error",s);return}h.fd=u,h.emit("open",u),h.read()})},be.prototype._read=function(h){if(typeof this.fd!="number")return this.once("open",function(){this._read(h)});if(this.destroyed)return;(!ce||ce.length-ce.used<Ha)&&ds(this._readableState.highWaterMark);var s=ce,u=Math.min(ce.length-ce.used,h),c=ce.used;if(this.pos!==void 0&&(u=Math.min(this.end-this.pos+1,u)),u<=0)return this.push(null);var d=this;this._vol.read(this.fd,ce,ce.used,u,this.pos,_),this.pos!==void 0&&(this.pos+=u),ce.used+=u;function _(O,I){if(O)d.autoClose&&d.destroy&&d.destroy(),d.emit("error",O);else{var F=null;I>0&&(d.bytesRead+=I,F=s.slice(c,c+I)),d.push(F)}}},be.prototype._destroy=function(h,s){this.close(function(u){s(h||u)})},be.prototype.close=function(h){var s=this,u;if(h&&this.once("close",h),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",vi);return}return m.default.nextTick(function(){return s.emit("close")})}typeof((u=this._readableState)===null||u===void 0?void 0:u.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(c){c?s.emit("error",c):s.emit("close")}),this.fd=null};function vi(h){this.close()}R.inherits(fe,v.Writable),e.WriteStream=fe;function fe(h,s,u){if(!(this instanceof fe))return new fe(h,s,u);if(this._vol=h,u=Object.assign({},Lr(u,{})),v.Writable.call(this,u),this.path=k(s),this.fd=u.fd===void 0?null:u.fd,this.flags=u.flags===void 0?"w":u.flags,this.mode=u.mode===void 0?438:u.mode,this.start=u.start,this.autoClose=u.autoClose===void 0?!0:!!u.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}u.encoding&&this.setDefaultEncoding(u.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}fe.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(h,s){if(h){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",h);return}this.fd=s,this.emit("open",s)}.bind(this))},fe.prototype._write=function(h,s,u){if(!(h instanceof l.Buffer||h instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(h,s,u)});var c=this;this._vol.write(this.fd,h,0,h.length,this.pos,function(d,_){if(d)return c.autoClose&&c.destroy&&c.destroy(),u(d);c.bytesWritten+=_,u()}),this.pos!==void 0&&(this.pos+=h.length)},fe.prototype._writev=function(h,s){if(typeof this.fd!="number")return this.once("open",function(){this._writev(h,s)});for(var u=this,c=h.length,d=new Array(c),_=0,O=0;O<c;O++){var I=h[O].chunk;d[O]=I,_+=I.length}var F=l.Buffer.concat(d);this._vol.write(this.fd,F,0,F.length,this.pos,function(P,M){if(P)return u.destroy&&u.destroy(),s(P);u.bytesWritten+=M,s()}),this.pos!==void 0&&(this.pos+=_)},fe.prototype.close=function(h){var s=this,u;if(h&&this.once("close",h),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",vi);return}return m.default.nextTick(function(){return s.emit("close")})}typeof((u=this._writableState)===null||u===void 0?void 0:u.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(c){c?s.emit("error",c):s.emit("close")}),this.fd=null},fe.prototype._destroy=be.prototype._destroy,fe.prototype.destroySoon=fe.prototype.end;var yi=function(h){t(s,h);function s(u){var c=h.call(this)||this;return c._filename="",c._filenameEncoded="",c._recursive=!1,c._encoding=b.ENCODING_UTF8,c._onNodeChange=function(){c._emit("change")},c._onParentChild=function(d){d.getName()===c._getName()&&c._emit("rename")},c._emit=function(d){c.emit("change",d,c._filenameEncoded)},c._persist=function(){c._timer=setTimeout(c._persist,1e6)},c._vol=u,c}return s.prototype._getName=function(){return this._steps[this._steps.length-1]},s.prototype.start=function(u,c,d,_){c===void 0&&(c=!0),d===void 0&&(d=!1),_===void 0&&(_=b.ENCODING_UTF8),this._filename=k(u),this._steps=q(this._filename),this._filenameEncoded=(0,b.strToEncoding)(this._filename),this._recursive=d,this._encoding=_;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(F){var O=new Error("watch ".concat(this._filename," ").concat(F.code));throw O.code=F.code,O.errno=F.code,O}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange);var I=this._link.parent;I&&(I.setMaxListeners(I.getMaxListeners()+1),I.on("child:delete",this._onParentChild)),c&&this._persist()},s.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var u=this._link.parent;u&&u.removeListener("child:delete",this._onParentChild)},s}(S.EventEmitter);e.FSWatcher=yi})(Na);var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.fsAsyncMethods=$e.fsSyncMethods=$e.fsProps=void 0;var wf=["constants","F_OK","R_OK","W_OK","X_OK","Stats"];$e.fsProps=wf;var bf=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","createReadStream","createWriteStream"];$e.fsSyncMethods=bf;var Rf=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","watchFile","unwatchFile","watch"];$e.fsAsyncMethods=Rf;(function(e,t){var r=J&&J.__assign||function(){return r=Object.assign||function(g){for(var R,w=1,E=arguments.length;w<E;w++){R=arguments[w];for(var A in R)Object.prototype.hasOwnProperty.call(R,A)&&(g[A]=R[A])}return g},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.fs=t.createFsFromVolume=t.vol=t.Volume=void 0;var n=at,i=bt,o=Na,a=$e,l=a.fsSyncMethods,f=a.fsAsyncMethods,m=Ye,p=m.constants.F_OK,v=m.constants.R_OK,y=m.constants.W_OK,S=m.constants.X_OK;t.Volume=o.Volume,t.vol=new o.Volume;function b(g){for(var R={F_OK:p,R_OK:v,W_OK:y,X_OK:S,constants:m.constants,Stats:n.default,Dirent:i.default},w=0,E=l;w<E.length;w++){var A=E[w];typeof g[A]=="function"&&(R[A]=g[A].bind(g))}for(var C=0,T=f;C<T.length;C++){var A=T[C];typeof g[A]=="function"&&(R[A]=g[A].bind(g))}return R.StatWatcher=g.StatWatcher,R.FSWatcher=g.FSWatcher,R.WriteStream=g.WriteStream,R.ReadStream=g.ReadStream,R.promises=g.promises,R._toUnixTimestamp=o.toUnixTimestamp,R}t.createFsFromVolume=b,t.fs=b(t.vol),e.exports=r(r({},e.exports),t.fs),e.exports.semantic=!0})(zc,yr);const Of=yr,{ono:zr}=ot,Qi=se,{ResolverError:Gr}=z;var Af={order:100,canRead(e){return Qi.isFileSystemPath(e.url)},read(e){return new Promise((t,r)=>{let n;try{n=Qi.toFileSystemPath(e.url)}catch(i){r(new Gr(zr.uri(i,`Malformed URI: ${e.url}`),e.url))}try{Of.readFile(n,(i,o)=>{i?r(new Gr(zr(i,`Error opening file "${n}"`),n)):t(o)})}catch(i){r(new Gr(zr(i,`Error opening file "${n}"`),n))}})}};const Tf=Oo,Cf=Oo,{ono:rr}=ot,Ut=se,{ResolverError:Zi}=z;var If={order:200,headers:null,timeout:5e3,redirects:5,withCredentials:!1,canRead(e){return Ut.isHttp(e.url)},read(e){let t=Ut.parse(e.url);return process.browser&&!t.protocol&&(t.protocol=Ut.parse(location.href).protocol),Pa(t,this)}};function Pa(e,t,r){return new Promise((n,i)=>{e=Ut.parse(e),r=r||[],r.push(e.href),Nf(e,t).then(o=>{if(o.statusCode>=400)throw rr({status:o.statusCode},`HTTP ERROR ${o.statusCode}`);if(o.statusCode>=300)if(r.length>t.redirects)i(new Zi(rr({status:o.statusCode},`Error downloading ${r[0]}. 
Too many redirects: 
  ${r.join(` 
  `)}`)));else if(o.headers.location){let a=Ut.resolve(e,o.headers.location);Pa(a,t,r).then(n,i)}else throw rr({status:o.statusCode},`HTTP ${o.statusCode} redirect with no location header`);else n(o.body||Buffer.alloc(0))}).catch(o=>{i(new Zi(rr(o,`Error downloading ${e.href}`),e.href))})})}function Nf(e,t){return new Promise((r,n)=>{let o=(e.protocol==="https:"?Cf:Tf).get({hostname:e.hostname,port:e.port,path:e.path,auth:e.auth,protocol:e.protocol,headers:t.headers||{},withCredentials:t.withCredentials});typeof o.setTimeout=="function"&&o.setTimeout(t.timeout),o.on("timeout",()=>{o.abort()}),o.on("error",n),o.once("response",a=>{a.body=Buffer.alloc(0),a.on("data",l=>{a.body=Buffer.concat([a.body,Buffer.from(l)])}),a.on("error",n),a.on("end",()=>{r(a)})})})}const Ff=bu,xf=Vc,Pf=Yc,kf=Kc,Df=Af,Lf=If;var Bf=Bn;function Bn(e){dn(this,Bn.defaults),dn(this,e)}Bn.defaults={parse:{json:Ff,yaml:xf,text:Pf,binary:kf},resolve:{file:Df,http:Lf,external:!0},continueOnError:!1,dereference:{circular:!0,excludedPathMatcher:()=>!1}};function dn(e,t){if(eo(t)){let r=Object.keys(t);for(let n=0;n<r.length;n++){let i=r[n],o=t[i],a=e[i];eo(o)?e[i]=dn(a||{},o):o!==void 0&&(e[i]=o)}}return e}function eo(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}const to=Bf;var Mf=$f;function $f(e){let t,r,n,i;return e=Array.prototype.slice.call(e),typeof e[e.length-1]=="function"&&(i=e.pop()),typeof e[0]=="string"?(t=e[0],typeof e[2]=="object"?(r=e[1],n=e[2]):(r=void 0,n=e[1])):(t="",r=e[0],n=e[1]),n instanceof to||(n=new to(n)),{path:t,schema:r,options:n,callback:i}}const ro=Kt(),Uf=Rr(),jf=Mo,Lt=se,{isHandledError:Vf}=z;var Hf=Wf;function Wf(e,t){if(!t.resolve.external)return Promise.resolve();try{let r=Mn(e.schema,e.$refs._root$Ref.path+"#",e.$refs,t);return Promise.all(r)}catch(r){return Promise.reject(r)}}function Mn(e,t,r,n,i){i=i||new Set;let o=[];if(e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!i.has(e))if(i.add(e),ro.isExternal$Ref(e))o.push(no(e,t,r,n));else for(let a of Object.keys(e)){let l=Uf.join(t,a),f=e[a];ro.isExternal$Ref(f)?o.push(no(f,l,r,n)):o=o.concat(Mn(f,l,r,n,i))}return o}async function no(e,t,r,n){let i=Lt.resolve(t,e.$ref),o=Lt.stripHash(i);if(e=r._$refs[o],e)return Promise.resolve(e.value);try{const a=await jf(i,r,n);let l=Mn(a,o+"#",r,n);return Promise.all(l)}catch(a){if(!n.continueOnError||!Vf(a))throw a;return r._$refs[o]&&(a.source=decodeURI(Lt.stripHash(t)),a.path=Lt.safePointerToPath(Lt.getHash(t))),[]}}const _r=Kt(),qt=Rr(),Jr=se;var Yf=qf;function qf(e,t){let r=[];$n(e,"schema",e.$refs._root$Ref.path+"#","#",0,r,e.$refs,t),Kf(r)}function $n(e,t,r,n,i,o,a,l){let f=t===null?e:e[t];if(f&&typeof f=="object"&&!ArrayBuffer.isView(f))if(_r.isAllowed$Ref(f))io(e,t,r,n,i,o,a,l);else{let m=Object.keys(f).sort((p,v)=>p==="definitions"?-1:v==="definitions"?1:p.length-v.length);for(let p of m){let v=qt.join(r,p),y=qt.join(n,p),S=f[p];_r.isAllowed$Ref(S)?io(f,p,r,y,i,o,a,l):$n(f,p,v,y,i,o,a,l)}}}function io(e,t,r,n,i,o,a,l){let f=t===null?e:e[t],m=Jr.resolve(r,f.$ref),p=a._resolve(m,n,l);if(p===null)return;let v=qt.parse(n).length,y=Jr.stripHash(p.path),S=Jr.getHash(p.path),b=y!==a._root$Ref.path,g=_r.isExtended$Ref(f);i+=p.indirections;let R=zf(o,e,t);if(R)if(v<R.depth||i<R.indirections)Gf(o,R);else return;o.push({$ref:f,parent:e,key:t,pathFromRoot:n,depth:v,file:y,hash:S,value:p.value,circular:p.circular,extended:g,external:b,indirections:i}),R||$n(p.value,null,p.path,n,i+1,o,a,l)}function Kf(e){e.sort((i,o)=>{if(i.file!==o.file)return i.file<o.file?-1:1;if(i.hash!==o.hash)return i.hash<o.hash?-1:1;if(i.circular!==o.circular)return i.circular?-1:1;if(i.extended!==o.extended)return i.extended?1:-1;if(i.indirections!==o.indirections)return i.indirections-o.indirections;if(i.depth!==o.depth)return i.depth-o.depth;{let a=i.pathFromRoot.lastIndexOf("/definitions"),l=o.pathFromRoot.lastIndexOf("/definitions");return a!==l?l-a:i.pathFromRoot.length-o.pathFromRoot.length}});let t,r,n;for(let i of e)i.external?i.file===t&&i.hash===r?i.$ref.$ref=n:i.file===t&&i.hash.indexOf(r+"/")===0?i.$ref.$ref=qt.join(n,qt.parse(i.hash.replace(r,"#"))):(t=i.file,r=i.hash,n=i.pathFromRoot,i.$ref=i.parent[i.key]=_r.dereference(i.$ref,i.value),i.circular&&(i.$ref.$ref=i.pathFromRoot)):i.$ref.$ref=i.hash}function zf(e,t,r){for(let n=0;n<e.length;n++){let i=e[n];if(i.parent===t&&i.key===r)return i}}function Gf(e,t){let r=e.indexOf(t);e.splice(r,1)}const pn=Kt(),oo=Rr(),{ono:Jf}=ot,Xf=se;var Qf=Zf;function Zf(e,t){let r=Un(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,t);e.$refs.circular=r.circular,e.schema=r.value}function Un(e,t,r,n,i,o,a,l){let f,m={value:e,circular:!1},p=l.dereference.excludedPathMatcher;if((l.dereference.circular==="ignore"||!i.has(e))&&e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!p(r)){if(n.add(e),i.add(e),pn.isAllowed$Ref(e,l))f=ao(e,t,r,n,i,o,a,l),m.circular=f.circular,m.value=f.value;else for(const v of Object.keys(e)){let y=oo.join(t,v),S=oo.join(r,v);if(p(S))continue;let b=e[v],g=!1;pn.isAllowed$Ref(b,l)?(f=ao(b,y,S,n,i,o,a,l),g=f.circular,e[v]!==f.value&&(e[v]=f.value)):n.has(b)?g=ka(y,a,l):(f=Un(b,y,S,n,i,o,a,l),g=f.circular,e[v]!==f.value&&(e[v]=f.value)),m.circular=m.circular||g}n.delete(e)}return m}function ao(e,t,r,n,i,o,a,l){let f=Xf.resolve(t,e.$ref);const m=o.get(f);if(m){const g=Object.keys(e);if(g.length>1){const R={};for(let w of g)w!=="$ref"&&!(w in m.value)&&(R[w]=e[w]);return{circular:m.circular,value:Object.assign({},m.value,R)}}return m}let p=a._resolve(f,t,l);if(p===null)return{circular:!1,value:null};let v=p.circular,y=v||n.has(p.value);y&&ka(t,a,l);let S=pn.dereference(e,p.value);if(!y){let g=Un(S,p.path,r,n,i,o,a,l);y=g.circular,S=g.value}y&&!v&&l.dereference.circular==="ignore"&&(S=e),v&&(S.$ref=r);const b={circular:y,value:S};return Object.keys(e).length===1&&o.set(f,b),b}function ka(e,t,r){if(t.circular=!0,!r.dereference.circular)throw Jf.reference(`Circular $ref pointer found at ${e}`);return!0}function eh(){return typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:typeof setImmediate=="function"?setImmediate:function(t){setTimeout(t,0)}}var th=eh(),so=th,rh=function(t,r){if(t){r.then(function(n){so(function(){t(null,n)})},function(n){so(function(){t(n)})});return}else return r};const Da=pu,nh=Mo,Ir=Mf,ih=Hf,oh=Yf,ah=Qf,dt=se,{JSONParserError:sh,InvalidPointerError:uh,MissingPointerError:lh,ResolverError:ch,ParserError:fh,UnmatchedParserError:hh,UnmatchedResolverError:dh,isHandledError:ph,JSONParserErrorGroup:uo}=z,ye=rh,{ono:lo}=ot;js.exports=Ce;_e.default=Ce;_e.JSONParserError=sh;_e.InvalidPointerError=uh;_e.MissingPointerError=lh;_e.ResolverError=ch;_e.ParserError=fh;_e.UnmatchedParserError=hh;_e.UnmatchedResolverError=dh;function Ce(){this.schema=null,this.$refs=new Da}Ce.parse=function(t,r,n,i){let o=this,a=new o;return a.parse.apply(a,arguments)};Ce.prototype.parse=async function(t,r,n,i){let o=Ir(arguments),a;if(!o.path&&!o.schema){let m=lo(`Expected a file path, URL, or object. Got ${o.path||o.schema}`);return ye(o.callback,Promise.reject(m))}this.schema=null,this.$refs=new Da;let l="http";if(dt.isFileSystemPath(o.path)&&(o.path=dt.fromFileSystemPath(o.path),l="file"),o.path=dt.resolve(dt.cwd(),o.path),o.schema&&typeof o.schema=="object"){let m=this.$refs._add(o.path);m.value=o.schema,m.pathType=l,a=Promise.resolve(o.schema)}else a=nh(o.path,this.$refs,o.options);let f=this;try{let m=await a;if(m!==null&&typeof m=="object"&&!Buffer.isBuffer(m))return f.schema=m,ye(o.callback,Promise.resolve(f.schema));if(o.options.continueOnError)return f.schema=null,ye(o.callback,Promise.resolve(f.schema));throw lo.syntax(`"${f.$refs._root$Ref.path||m}" is not a valid JSON Schema`)}catch(m){return!o.options.continueOnError||!ph(m)?ye(o.callback,Promise.reject(m)):(this.$refs._$refs[dt.stripHash(o.path)]&&this.$refs._$refs[dt.stripHash(o.path)].addError(m),ye(o.callback,Promise.resolve(null)))}};Ce.resolve=function(t,r,n,i){let o=this,a=new o;return a.resolve.apply(a,arguments)};Ce.prototype.resolve=async function(t,r,n,i){let o=this,a=Ir(arguments);try{return await this.parse(a.path,a.schema,a.options),await ih(o,a.options),jn(o),ye(a.callback,Promise.resolve(o.$refs))}catch(l){return ye(a.callback,Promise.reject(l))}};Ce.bundle=function(t,r,n,i){let o=this,a=new o;return a.bundle.apply(a,arguments)};Ce.prototype.bundle=async function(t,r,n,i){let o=this,a=Ir(arguments);try{return await this.resolve(a.path,a.schema,a.options),oh(o,a.options),jn(o),ye(a.callback,Promise.resolve(o.schema))}catch(l){return ye(a.callback,Promise.reject(l))}};Ce.dereference=function(t,r,n,i){let o=this,a=new o;return a.dereference.apply(a,arguments)};Ce.prototype.dereference=async function(t,r,n,i){let o=this,a=Ir(arguments);try{return await this.resolve(a.path,a.schema,a.options),ah(o,a.options),jn(o),ye(a.callback,Promise.resolve(o.schema))}catch(l){return ye(a.callback,Promise.reject(l))}};function jn(e){if(uo.getParserErrors(e).length>0)throw new uo(e)}var Sr={},mh={get exports(){return Sr},set exports(e){Sr=e}},ge={},xe={},Qt={},jt=typeof Symbol=="function"?Symbol("curriable placeholder"):60881;function vh(e,t){function r(n){return function(){var i=n.length,o=arguments,a=o.length,l=[],f=0,m=t,p;if(i)for(var v=-1;++v<i;)l[v]=p=n[v]===jt&&f<a?o[f++]:n[v],p!==jt&&--m;if(f<a)for(;f<a;)l[l.length]=p=o[f],p!==jt&&f<t&&--m,++f;return m>0?r(l):e.apply(this,l)}}return r([])}function st(e,t){var r=typeof t=="number"?t:e.length,n=vh(e,r);return n.arity=r,n.fn=e,n}st.__=jt;function yh(e){return e===jt}st.isPlaceholder=yh;function gh(e){return e.fn}st.uncurry=gh;var nr,ir,me,pt,_h=typeof Buffer<"u"&&typeof Buffer.from=="function",Sh=typeof Uint16Array=="function",Eh=/\[object (HTML(.*)Element)\]/,wh=/\[object (SVG(.*)Element)\]/,bh=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"],Oe=bh.reduce(function(e,t){return e["[object "+t+"]"]=t,e},{}),H=Object.keys(Oe).reduce(function(e,t){return e[Oe[t].toUpperCase()]=t,e},{}),Rh={"[object Map]":!0,"[object Set]":!0},Oh={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},Ah=(nr={},nr[H.ARGUMENTS]=!0,nr[H.ARRAY]=!0,nr),Th=(ir={},ir[H.REGEXP]=!0,ir[H.SYMBOL]=!0,ir),Ch=(me={},me[H.FLOAT32ARRAY]=!0,me[H.FLOAT64ARRAY]=!0,me[H.INT8ARRAY]=!0,me[H.INT16ARRAY]=!0,me[H.INT32ARRAY]=!0,me[H.UINT8ARRAY]=!0,me[H.UINT8CLAMPEDARRAY]=!0,me[H.UINT16ARRAY]=!0,me[H.UINT32ARRAY]=!0,me),Ih=(pt={},pt[H.GENERATOR]=!0,pt[H.PROMISE]=!0,pt[H.WEAKMAP]=!0,pt[H.WEAKSET]=!0,pt),Nh=/^\s*function\s*([^(]*)/i,La=Object.prototype.toString,Fh=Object.keys;function xh(e){return e.name||(e.toString().match(Nh)||[])[1]||"anonymous"}function Ph(e){for(var t=e.length,r=5381,n=52711,i;t--;)i=e.charCodeAt(t),r=r*33^i,n=n*33^i;return(r>>>0)*4096+(n>>>0)}function kh(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function Ba(e,t){return e>t}function Dh(e,t){return e[0]>t[0]}function mn(e,t){for(var r,n,i=0;i<e.length;++i){for(n=e[i],r=i-1;~r&&t(e[r],n);--r)e[r+1]=e[r];e[r+1]=n}return e}function Lh(e,t,r){var n=typeof e.get=="function",i=[];n?(e.forEach(function(m,p){i.push([lr(p,t,r),lr(m,t,r)])}),mn(i,Dh)):(e.forEach(function(m){i.push(lr(m,t,r))}),mn(i,Ba));for(var o=xh(e.constructor)+"|[",a=0,l=i.length,f;a<l;++a)f=i[a],o+=(a?",":"")+(n?"["+f[0]+","+f[1]+"]":f);return o+"]"}function Bh(e){for(var t=mn(Fh(e),Ba),r={},n,i=0;i<t.length;++i)n=t[i],r[n]=e[n];return r}function Mh(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function $h(e){return Buffer.from(e).toString("utf8")}function Uh(){return""}var co=function(){return _h?$h:Sh?Mh:Uh}();function jh(e){for(var t=e.children,r="",n=0;n<t.length;++n)r+=t[n].outerHTML;return r}function fo(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r+1;return 0}function Er(e,t,r,n){if(n===void 0){var i=typeof e;if(i==="string"||Oh[i])return i+"|"+e;if(e===null)return"null|"+e}var o=n||La.call(e);return Ah[o]?e:o===H.OBJECT?Bh(e):Th[o]?Oe[o]+"|"+e.toString():Rh[o]?Lh(e,t,r):o===H.DATE?Oe[o]+"|"+e.getTime():o===H.ERROR?Oe[o]+"|"+e.stack:o===H.EVENT?kh(e):Ih[o]?Oe[o]+"|NOT_ENUMERABLE":Eh.test(o)||wh.test(o)?o.slice(8,-1)+"|"+e.outerHTML:o===H.DOCUMENTFRAGMENT?Oe[o]+"|"+jh(e):Ch[o]?Oe[o]+"|"+e.join(","):o===H.ARRAYBUFFER?Oe[o]+"|"+co(e):o===H.DATAVIEW?Oe[o]+"|"+co(e.buffer):e}function Vh(e,t){return e===void 0&&(e=[]),t===void 0&&(t=[]),function(r,n){if(typeof n=="object")if(e.length){var i=fo(e,this);i===0?e.push(this):(e.splice(i),t.splice(i)),t.push(r);var o=fo(e,n);if(o!==0)return"[~"+(t.slice(0,o).join(".")||".")+"]";e.push(n)}else e[0]=n,t[0]=r;return r&&this[r]instanceof Date?Er(this[r],e,t,H.DATE):Er(n,e,t)}}function lr(e,t,r){if(!e||typeof e!="object")return Er(e,t,r);var n=La.call(e);return n===H.DATE||n===H.REGEXP?Er(e,t,r,n):JSON.stringify(e,Vh(t,r))}function de(e){return Ph(lr(e))}de.is=st(function(e,t){return de(e)===de(t)});de.is.all=st(function(e){for(var t=de.is(e),r=1;r<arguments.length;++r)if(!t(arguments[r]))return!1;return!0},2);de.is.any=st(function(e){for(var t=de.is(e),r=1;r<arguments.length;r++)if(t(arguments[r]))return!0;return!1},2);de.is.not=st(function(e,t){return de(e)!==de(t)});const Hh=Object.freeze(Object.defineProperty({__proto__:null,default:de,hash:de},Symbol.toStringTag,{value:"Module"})),Wh=Ro(Hh);Object.defineProperty(Qt,"__esModule",{value:!0});var Yh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),qh=Wh,Kh=zh(qh);function zh(e){return e&&e.__esModule?e:{default:e}}function Gh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Vn=function(){function e(t,r,n){Gh(this,e),this.id=t;var i={cache:!0};if(typeof n>"u"&&(n=i),typeof r!="function"?(this.value=r,this.type=this.constructor.CONSTANT):(this.calculationMethod=r,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");if(typeof this.value>"u"&&typeof this.calculationMethod>"u")throw new Error("facts must have a value or method");return this.priority=parseInt(n.priority||1,10),this.options=Object.assign({},i,n),this.cacheKeyMethod=this.defaultCacheKeys,this}return Yh(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(r,n){return this.hasOwnProperty("value")?this.value:this.calculationMethod(r,n)}},{key:"defaultCacheKeys",value:function(r,n){return{params:n,id:r}}},{key:"getCacheKey",value:function(r){if(this.options.cache===!0){var n=this.cacheKeyMethod(this.id,r),i=e.hashFromObject(n);return i}}}],[{key:"hashFromObject",value:function(r){return(0,Kh.default)(r)}}]),e}();Vn.CONSTANT="CONSTANT";Vn.DYNAMIC="DYNAMIC";Qt.default=Vn;var Nr={},Hn={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.default=Jh;function Jh(e){(typeof process<"u"&&process.env&&{}.DEBUG&&{}.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}function Xh(e){return!!e&&typeof e=="object"}var Ma=Xh;Object.defineProperty(Hn,"__esModule",{value:!0});var Qh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Zh=Ot,ed=$a(Zh),td=Ma,rd=$a(td);function $a(e){return e&&e.__esModule?e:{default:e}}function nd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var id=function(){function e(t){if(nd(this,e),!t)throw new Error("Condition: constructor options required");var r=e.booleanOperator(t);if(Object.assign(this,t),r){var n=t[r];if(!Array.isArray(n))throw new Error('"'+r+'" must be an array');this.operator=r,this.priority=parseInt(t.priority,10)||1,this[r]=n.map(function(i){return new e(i)})}else{if(!t.hasOwnProperty("fact"))throw new Error('Condition: constructor "fact" property required');if(!t.hasOwnProperty("operator"))throw new Error('Condition: constructor "operator" property required');if(!t.hasOwnProperty("value"))throw new Error('Condition: constructor "value" property required');t.hasOwnProperty("priority")&&(t.priority=parseInt(t.priority,10))}}return Qh(e,[{key:"toJSON",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={};this.priority&&(n.priority=this.priority);var i=e.booleanOperator(this);return i?n[i]=this[i].map(function(o){return o.toJSON(r)}):(n.operator=this.operator,n.value=this.value,n.fact=this.fact,this.factResult!==void 0&&(n.factResult=this.factResult),this.result!==void 0&&(n.result=this.result),this.params&&(n.params=this.params),this.path&&(n.path=this.path)),r?JSON.stringify(n):n}},{key:"_getValue",value:function(r){var n=this.value;return(0,rd.default)(n)&&n.hasOwnProperty("fact")?r.factValue(n.fact,n.params,n.path):Promise.resolve(n)}},{key:"evaluate",value:function(r,n){var i=this;if(!r)return Promise.reject(new Error("almanac required"));if(!n)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var o=n.get(this.operator);return o?this._getValue(r).then(function(a){return r.factValue(i.fact,i.params,i.path).then(function(l){var f=o.evaluate(l,a);return(0,ed.default)("condition::evaluate <"+l+" "+i.operator+" "+a+"?> ("+f+")"),{result:f,leftHandSideValue:l,rightHandSideValue:a,operator:i.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return e.booleanOperator(this)!==void 0}}],[{key:"booleanOperator",value:function(r){if(r.hasOwnProperty("any"))return"any";if(r.hasOwnProperty("all"))return"all"}}]),e}();Hn.default=id;var Wn={},vn={},od={get exports(){return vn},set exports(e){vn=e}};(function(e){var t=function(){function r(y,S){return S!=null&&y instanceof S}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(y,S,b,g,R){typeof S=="object"&&(b=S.depth,g=S.prototype,R=S.includeNonEnumerable,S=S.circular);var w=[],E=[],A=typeof Buffer<"u";typeof S>"u"&&(S=!0),typeof b>"u"&&(b=1/0);function C(T,x){if(T===null)return null;if(x===0)return T;var L,Z;if(typeof T!="object")return T;if(r(T,n))L=new n;else if(r(T,i))L=new i;else if(r(T,o))L=new o(function(De,Ge){T.then(function(Je){De(C(Je,x-1))},function(Je){Ge(C(Je,x-1))})});else if(a.__isArray(T))L=[];else if(a.__isRegExp(T))L=new RegExp(T.source,v(T)),T.lastIndex&&(L.lastIndex=T.lastIndex);else if(a.__isDate(T))L=new Date(T.getTime());else{if(A&&Buffer.isBuffer(T))return Buffer.allocUnsafe?L=Buffer.allocUnsafe(T.length):L=new Buffer(T.length),T.copy(L),L;r(T,Error)?L=Object.create(T):typeof g>"u"?(Z=Object.getPrototypeOf(T),L=Object.create(Z)):(L=Object.create(g),Z=g)}if(S){var le=w.indexOf(T);if(le!=-1)return E[le];w.push(T),E.push(L)}r(T,n)&&T.forEach(function(De,Ge){var Je=C(Ge,x-1),It=C(De,x-1);L.set(Je,It)}),r(T,i)&&T.forEach(function(De){var Ge=C(De,x-1);L.add(Ge)});for(var ie in T){var Tt;Z&&(Tt=Object.getOwnPropertyDescriptor(Z,ie)),!(Tt&&Tt.set==null)&&(L[ie]=C(T[ie],x-1))}if(Object.getOwnPropertySymbols)for(var Ct=Object.getOwnPropertySymbols(T),ie=0;ie<Ct.length;ie++){var ut=Ct[ie],ke=Object.getOwnPropertyDescriptor(T,ut);ke&&!ke.enumerable&&!R||(L[ut]=C(T[ut],x-1),ke.enumerable||Object.defineProperty(L,ut,{enumerable:!1}))}if(R)for(var ze=Object.getOwnPropertyNames(T),ie=0;ie<ze.length;ie++){var re=ze[ie],ke=Object.getOwnPropertyDescriptor(T,re);ke&&ke.enumerable||(L[re]=C(T[re],x-1),Object.defineProperty(L,re,{enumerable:!1}))}return L}return C(y,b)}a.clonePrototype=function(S){if(S===null)return null;var b=function(){};return b.prototype=S,new b};function l(y){return Object.prototype.toString.call(y)}a.__objToStr=l;function f(y){return typeof y=="object"&&l(y)==="[object Date]"}a.__isDate=f;function m(y){return typeof y=="object"&&l(y)==="[object Array]"}a.__isArray=m;function p(y){return typeof y=="object"&&l(y)==="[object RegExp]"}a.__isRegExp=p;function v(y){var S="";return y.global&&(S+="g"),y.ignoreCase&&(S+="i"),y.multiline&&(S+="m"),S}return a.__getRegExpFlags=v,a}();e.exports&&(e.exports=t)})(od);Object.defineProperty(Wn,"__esModule",{value:!0});var ad=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),sd=vn,or=ud(sd);function ud(e){return e&&e.__esModule?e:{default:e}}function ld(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cd=function(){function e(t,r,n,i){ld(this,e),this.conditions=(0,or.default)(t),this.event=(0,or.default)(r),this.priority=(0,or.default)(n),this.name=(0,or.default)(i),this.result=null}return ad(e,[{key:"setResult",value:function(r){this.result=r}},{key:"toJSON",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return r?JSON.stringify(n):n}}]),e}();Wn.default=cd;Object.defineProperty(Nr,"__esModule",{value:!0});var fd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),hd=Hn,dd=Yn(hd),pd=Wn,md=Yn(pd),vd=br,yd=Ot,Xr=Yn(yd);function Yn(e){return e&&e.__esModule?e:{default:e}}function gd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Sd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ed=function(e){Sd(t,e);function t(r){gd(this,t);var n=_d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));typeof r=="string"&&(r=JSON.parse(r)),r&&r.conditions&&n.setConditions(r.conditions),r&&r.onSuccess&&n.on("success",r.onSuccess),r&&r.onFailure&&n.on("failure",r.onFailure),r&&(r.name||r.name===0)&&n.setName(r.name);var i=r&&r.priority||1;n.setPriority(i);var o=r&&r.event||{type:"unknown"};return n.setEvent(o),n}return fd(t,[{key:"setPriority",value:function(n){if(n=parseInt(n,10),n<=0)throw new Error("Priority must be greater than zero");return this.priority=n,this}},{key:"setName",value:function(n){if(!n&&n!==0)throw new Error('Rule "name" must be defined');return this.name=n,this}},{key:"setConditions",value:function(n){if(!n.hasOwnProperty("all")&&!n.hasOwnProperty("any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new dd.default(n),this}},{key:"setEvent",value:function(n){if(!n)throw new Error("Rule: setEvent() requires event object");if(!n.hasOwnProperty("type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:n.type},n.params&&(this.event.params=n.params),this}},{key:"setEngine",value:function(n){return this.engine=n,this}},{key:"toJSON",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return n?JSON.stringify(i):i}},{key:"prioritizeConditions",value:function(n){var i=this,o=n.reduce(function(a,l){var f=l.priority;if(!f){var m=i.engine.getFact(l.fact);f=m&&m.priority||1}return a[f]||(a[f]=[]),a[f].push(l),a},{});return Object.keys(o).sort(function(a,l){return Number(a)>Number(l)?-1:1}).map(function(a){return o[a]})}},{key:"evaluate",value:function(n){var i=this,o=new md.default(this.conditions,this.event,this.priority,this.name),a=function(S){if(S.isBooleanOperator()){var b=S[S.operator],g=void 0;return S.operator==="all"?g=p(b):g=m(b),g.then(function(R){var w=R===!0;return S.result=w,w})}else return S.evaluate(n,i.engine.operators).then(function(R){var w=R.result;return S.factResult=R.leftHandSideValue,S.result=w,w})},l=function(S,b){return Array.isArray(S)||(S=[S]),Promise.all(S.map(function(g){return a(g)})).then(function(g){return(0,Xr.default)("rule::evaluateConditions results",g),b.call(g,function(R){return R===!0})})},f=function(S,b){if(S.length===0)return Promise.resolve(!0);var g=Array.prototype.some;b==="all"&&(g=Array.prototype.every);for(var R=i.prioritizeConditions(S),w=Promise.resolve(),E=function(T){var x=R[T],L=!1;w=w.then(function(Z){return b==="any"&&Z===!0||L?((0,Xr.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),L=!0,!0):b==="all"&&Z===!1||L?((0,Xr.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),L=!0,!1):l(x,g)})},A=0;A<R.length;A++)E(A);return w},m=function(S){return f(S,"any")},p=function(S){return f(S,"all")},v=function(S){return o.setResult(S),S?i.emit("success",o.event,n,o):i.emit("failure",o.event,n,o),o};return o.conditions.any?m(o.conditions.any).then(function(y){return v(y)}):p(o.conditions.all).then(function(y){return v(y)})}}]),t}(vd.EventEmitter);Nr.default=Ed;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});var wd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function bd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Rd=function(){function e(t,r,n){if(bd(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if(typeof r!="function")throw new Error("Missing operator callback");this.cb=r,this.factValueValidator=n,this.factValueValidator||(this.factValueValidator=function(){return!0})}return wd(e,[{key:"evaluate",value:function(r,n){return this.factValueValidator(r)&&this.cb(r,n)}}]),e}();Zt.default=Rd;var qn={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});function Od(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ad(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Td(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Kn.UndefinedFactError=function(e){Td(t,e);function t(){var r;Od(this,t);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=Ad(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(i)));return a.code="UNDEFINED_FACT",a}return t}(Error);var Qr,ho;function Cd(){return ho||(ho=1,Qr=function(e){var t=this,r;if(arguments.length<2)r=function(){if(this instanceof r){var o=t.apply(this,arguments);return Object(o)===o?o:this}else return t.apply(e,arguments)};else{for(var n=new Array(arguments.length-1),i=1;i<arguments.length;i++)n[i-1]=arguments[i];r=function(){var o=n.length,a=new Array(o+arguments.length),l;for(l=0;l<o;l++)a[l]=n[l];for(l=0;l<arguments.length;l++)a[o+l]=arguments[l];if(this instanceof r){var f=t.apply(this,a);return Object(f)===f?f:this}else return t.apply(e,a)}}return r.prototype=t.prototype,r}),Qr}/*!
 * imports.
 */var Id=Function.prototype.bind||Cd();/*!
 * exports.
 */var Nd=Fd;function Fd(e,t){var r=function(){return arguments.length===0?r:arguments.length>1?e.apply(t,arguments):Id.call(e,t,arguments[0])};return r.uncurry=function(){return e},r}/*!
 * exports.
 */var xd=Dd;/*!
 * regexp patterns.
 */var Pd=/\[([^\[\]]+)\]/g,kd=/^[.]*|[.]*$/g;function Dd(e){return{}.toString.call(e)=="[object String]"?e.replace(Pd,".$1").replace(kd,""):""}var Ld=Object.prototype.toString;function Bd(e){for(var t=-1,r=$d(Md(e).split(".")),n=r.length,i=[];++t<n;)i.push(Ud(r[t]));return i}function Md(e){return(Ld.call(e)==="[object String]"?e:"").replace(/\\\./g,"￿")}function $d(e){for(var t=-1,r=e.length,n=[];++t<r;)e[t]&&n.push(e[t]);return n}function Ud(e){return e.replace(/\uffff/g,".")}/*!
 * exports.
 */var jd=Bd,Vd=Nd,po=Cs("selectn"),Hd=xd,Wd=jd,Yd=Object.prototype.toString,qd=Vd(Kd);function Kd(e,t){po("arguments:",{path:e,object:t});for(var r=-1,n=Yd.call(e)==="[object Array]"?e:Wd(Hd(e)),i=n.length,o=i?t:void 0;++r<i;){if(Object(o)!==o)return;o=o[n[r]]}return po("ref:",o),typeof o=="function"?o():o}Object.defineProperty(qn,"__esModule",{value:!0});var mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Gd=Qt,Zr=Fr(Gd),Jd=Kn,Xd=Ot,Bt=Fr(Xd),Qd=qd,Zd=Fr(Qd),ep=Ma,tp=Fr(ep);function Fr(e){return e&&e.__esModule?e:{default:e}}function rp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var np=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rp(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=!!n.allowUndefinedFacts;for(var i in r){var o=void 0;r[i]instanceof Zr.default?o=r[i]:o=new Zr.default(i,r[i]),this._addConstantFact(o),(0,Bt.default)("almanac::constructor initialized runtime fact:"+o.id+" with "+o.value+"<"+mo(o.value)+">")}}return zd(e,[{key:"_getFact",value:function(r){return this.factMap.get(r)}},{key:"_addConstantFact",value:function(r){this.factMap.set(r.id,r),this._setFactValue(r,{},r.value)}},{key:"_setFactValue",value:function(r,n,i){var o=r.getCacheKey(n),a=Promise.resolve(i);return o&&this.factResultsCache.set(o,a),a}},{key:"addRuntimeFact",value:function(r,n){var i=new Zr.default(r,n);return this._addConstantFact(i)}},{key:"factValue",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=void 0,a=this._getFact(r);if(a===void 0)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new Jd.UndefinedFactError("Undefined fact: "+r));if(a.isConstant())o=Promise.resolve(a.calculate(n,this));else{var l=a.getCacheKey(n),f=l&&this.factResultsCache.get(l);f?(o=Promise.resolve(f),(0,Bt.default)("almanac::factValue cache hit for fact:"+r)):((0,Bt.default)("almanac::factValue cache miss for fact:"+r+"; calculating"),o=this._setFactValue(a,n,a.calculate(n,this)))}return i?o.then(function(m){if((0,tp.default)(m)){var p=(0,Zd.default)(i)(m);return(0,Bt.default)("condition::evaluate extracting object property "+i+", received: "+p),p}else return(0,Bt.default)("condition::evaluate could not compute object path("+i+") of non-object: "+m+" <"+(typeof m>"u"?"undefined":mo(m))+">; continuing with "+m),m}):o}}]),e}();qn.default=np;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});var ip=function(){var t=[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r.event&&t.push(r.event),t}};zn.SuccessEventFact=ip;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});var op=Zt,Ie=ap(op);function ap(e){return e&&e.__esModule?e:{default:e}}var we=[];we.push(new Ie.default("equal",function(e,t){return e===t}));we.push(new Ie.default("notEqual",function(e,t){return e!==t}));we.push(new Ie.default("in",function(e,t){return t.indexOf(e)>-1}));we.push(new Ie.default("notIn",function(e,t){return t.indexOf(e)===-1}));we.push(new Ie.default("contains",function(e,t){return e.indexOf(t)>-1},Array.isArray));we.push(new Ie.default("doesNotContain",function(e,t){return e.indexOf(t)===-1},Array.isArray));function xr(e){return Number.parseFloat(e).toString()!=="NaN"}we.push(new Ie.default("lessThan",function(e,t){return e<t},xr));we.push(new Ie.default("lessThanInclusive",function(e,t){return e<=t},xr));we.push(new Ie.default("greaterThan",function(e,t){return e>t},xr));we.push(new Ie.default("greaterThanInclusive",function(e,t){return e>=t},xr));Gn.default=we;Object.defineProperty(xe,"__esModule",{value:!0});xe.FINISHED=xe.RUNNING=xe.READY=void 0;var sp=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),up=Qt,ar=At(up),lp=Nr,en=At(lp),cp=Zt,tn=At(cp),fp=qn,hp=At(fp),dp=br,pp=zn,mp=Gn,vp=At(mp),yp=Ot,rt=At(yp);function At(e){return e&&e.__esModule?e:{default:e}}function gp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Sp(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ep=xe.READY="READY",vo=xe.RUNNING="RUNNING",yo=xe.FINISHED="FINISHED",wp=function(e){Sp(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gp(this,t);var i=_p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.rules=[],i.allowUndefinedFacts=n.allowUndefinedFacts||!1,i.operators=new Map,i.facts=new Map,i.status=Ep,r.map(function(o){return i.addRule(o)}),vp.default.map(function(o){return i.addOperator(o)}),i}return sp(t,[{key:"addRule",value:function(n){if(!n)throw new Error("Engine: addRule() requires options");if(!n.hasOwnProperty("conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!n.hasOwnProperty("event"))throw new Error('Engine: addRule() argument requires "event" property');var i=void 0;return n instanceof en.default?i=n:i=new en.default(n),i.setEngine(this),this.rules.push(i),this.prioritizedRules=null,this}},{key:"removeRule",value:function(n){if(!(n instanceof en.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var i=this.rules.indexOf(n);return i===-1?!1:(this.prioritizedRules=null,!!this.rules.splice(i,1).length)}},{key:"addOperator",value:function(n,i){var o=void 0;n instanceof tn.default?o=n:o=new tn.default(n,i),(0,rt.default)("engine::addOperator name:"+o.name),this.operators.set(o.name,o)}},{key:"removeOperator",value:function(n){var i=void 0;return n instanceof tn.default?i=n.name:i=n,this.operators.delete(i)}},{key:"addFact",value:function(n,i,o){var a=n,l=void 0;return n instanceof ar.default?(a=n.id,l=n):l=new ar.default(n,i,o),(0,rt.default)("engine::addFact id:"+a),this.facts.set(a,l),this}},{key:"removeFact",value:function(n){var i=void 0;return n instanceof ar.default?i=n.id:i=n,this.facts.delete(i)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var n=this.rules.reduce(function(i,o){var a=o.priority;return i[a]||(i[a]=[]),i[a].push(o),i},{});this.prioritizedRules=Object.keys(n).sort(function(i,o){return Number(i)>Number(o)?-1:1}).map(function(i){return n[i]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=yo,this}},{key:"getFact",value:function(n){return this.facts.get(n)}},{key:"evaluateRules",value:function(n,i){var o=this;return Promise.all(n.map(function(a){if(o.status!==vo){(0,rt.default)("engine::run status:"+o.status+"; skipping remaining rules");return}return a.evaluate(i).then(function(l){(0,rt.default)("engine::run ruleResult:"+l.result),l.result?(o.emit("success",a.event,i,l),o.emit(a.event.type,a.event.params,i,l),i.factValue("success-events",{event:a.event})):o.emit("failure",a.event,i,l)})}))}},{key:"run",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,rt.default)("engine::run started"),(0,rt.default)("engine::run runtimeFacts:",i),i["success-events"]=new ar.default("success-events",(0,pp.SuccessEventFact)(),{cache:!1}),this.status=vo;var o=new hp.default(this.facts,i,{allowUndefinedFacts:this.allowUndefinedFacts}),a=this.prioritizeRules(),l=Promise.resolve();return new Promise(function(f,m){a.map(function(p){return l=l.then(function(){return n.evaluateRules(p,o)}).catch(m),l}),l.then(function(){return n.status=yo,(0,rt.default)("engine::run completed"),o.factValue("success-events")}).then(function(p){f({events:p,almanac:o})}).catch(m)})}}]),t}(dp.EventEmitter);xe.default=wp;Object.defineProperty(ge,"__esModule",{value:!0});ge.Engine=ge.Operator=ge.Rule=ge.Fact=void 0;ge.default=function(e,t){return new Ua.default(e,t)};var bp=xe,Ua=Pr(bp),Rp=Qt,Op=Pr(Rp),Ap=Nr,Tp=Pr(Ap),Cp=Zt,Ip=Pr(Cp);function Pr(e){return e&&e.__esModule?e:{default:e}}ge.Fact=Op.default;ge.Rule=Tp.default;ge.Operator=Ip.default;ge.Engine=Ua.default;(function(e){e.exports=ge})(mh);var he=(e=>(e[e.TODO=0]="TODO",e[e.PROGRESS=1]="PROGRESS",e[e.COMPLETED=2]="COMPLETED",e[e.EXCLUDED=3]="EXCLUDED",e[e.ERROR=4]="ERROR",e))(he||{}),X=(e=>(e[e.PREVIOUS=0]="PREVIOUS",e[e.NEXT=1]="NEXT",e[e.GO_TO_STEP=2]="GO_TO_STEP",e[e.SAVE=3]="SAVE",e[e.SUBMIT=4]="SUBMIT",e[e.VALIDATE=5]="VALIDATE",e[e.NONE=6]="NONE",e))(X||{}),Q=(e=>(e[e.PROGRESS=0]="PROGRESS",e[e.ERROR=1]="ERROR",e[e.SAVE_SUCCESS=2]="SAVE_SUCCESS",e[e.SUBMIT_SUCCESS=3]="SUBMIT_SUCCESS",e[e.ERROR_CRITICAL=4]="ERROR_CRITICAL",e))(Q||{});function yn(e){let t=N(G,{});return e.isSubmitted?t=N("div",{children:"Your information has been submitted"}):e.bodyText&&(t=N("div",{dangerouslySetInnerHTML:{__html:e.bodyText}})),V("div",{className:`submission-header${e.isSubmitted?" submitted":""}`,children:[N("h2",{children:e.title}),t,N("hr",{})]})}try{yn.displayName="Header",yn.__docgenInfo={description:"",displayName:"Header",props:{isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}},bodyText:{defaultValue:null,description:"",name:"bodyText",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}}}catch{}function gn(e){const t=e.stepList.filter(o=>o.child!==!0),r=(o,a,l,f)=>{let m="circle";return l||f?{iconDef:m}:(a?m="block":o===he.COMPLETED?m="checkCircle":o===he.ERROR&&(m="errorOutlined"),{iconDef:m})},n=(o,a=!1)=>{let l="item";return o&&(l=`${l} pointed `),a&&(l=`${l} static`),l},i=(o,a,l=!1)=>{if(!o||o.child&&!l)return N(G,{});const f=(v,y,S)=>!v.inProgress&&(!y||v.final)?N("button",{className:"btn btn-link",onClick:()=>S(v),children:v.title}):N("span",{children:v.title}),m=r(o.state,o.excluded,o.static,o.final),p=n(o.inProgress,o.static);return V("div",{className:p,children:[N(cr,{icon:m.iconDef}),f(o,a,e.onStepChange)]})};return N("div",{className:"SRC-menuLayout json-forms-menu",style:{flex:"1"},children:N("ul",{children:t.map((o,a)=>V("li",{className:"item-wrap",children:[i(o,!!e.isWizardMode),o.children&&o.children.length>0&&N("div",{className:"subMenu",children:N("ul",{children:o.children&&o.children.map((l,f)=>{const m=e.stepList.find(p=>p.id===l);return typeof m>"u"?N(G,{}):N("li",{className:"item-wrap",children:i(m,!!e.isWizardMode,!0)},`${f}-${l}`)})})})]},`${a}-${o.id}`))})})}try{gn.displayName="StepsSideNav",gn.__docgenInfo={description:"",displayName:"StepsSideNav",props:{stepList:{defaultValue:null,description:"",name:"stepList",required:!0,type:{name:"Step[]"}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:"(step: Step) => void"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}}}}}catch{}function _n(e){const r=(o=>o.isWizardMode?o.previousStepIds&&o.previousStepIds.length>0:o.steps.findIndex(a=>a.id===o.currentStep.id)>0)(e)?N("button",{type:"button",onClick:o=>e.onNavAction(X.PREVIOUS),className:"btn btn-link nav-link prev",children:N(cr,{icon:"chevronLeft"})}):N(G,{}),n=e.currentStep.final?N(G,{}):N("button",{type:"button",onClick:o=>e.onNavAction(X.NEXT),className:"btn btn-link nav-link next",children:N(cr,{icon:"chevronRight"})}),i=N("button",{type:"button",className:"btn btn-action save",disabled:e.isFormSubmitted,onClick:o=>e.onNavAction(X.SAVE),children:"SAVE"});return V("div",{children:[N("hr",{}),V("div",{className:"buttonWrapper pull-right",children:[r," ",n," ",i]})]})}function Sn(e){const t=e.steps.find(r=>r.id===e.nextStepId);return typeof t>"u"?N(G,{}):V("span",{className:"nav-link",children:[N("a",{onClick:r=>e.onNavAction(t),children:t.title}),N(cr,{icon:"chevronRight"})]})}try{_n.displayName="NavButtons",_n.__docgenInfo={description:"",displayName:"NavButtons",props:{isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},previousStepIds:{defaultValue:null,description:"",name:"previousStepIds",required:!0,type:{name:"string[]"}},onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"(action: NavActionEnum) => void"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},currentStep:{defaultValue:null,description:"",name:"currentStep",required:!0,type:{name:"Step"}},isFormSubmitted:{defaultValue:null,description:"",name:"isFormSubmitted",required:!1,type:{name:"boolean"}}}}}catch{}try{Sn.displayName="NextStepLink",Sn.__docgenInfo={description:"",displayName:"NextStepLink",props:{onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"(step: Step) => void"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},nextStepId:{defaultValue:null,description:"",name:"nextStepId",required:!0,type:{name:"string | undefined"}}}}}catch{}function En(e){const t=V("div",{children:[N("h6",{children:"Data"}),N("pre",{children:JSON.stringify(e.formData,null,2)})]});return N(G,{children:!e.hidden&&t})}try{En.displayName="DataDebug",En.__docgenInfo={description:"",displayName:"DataDebug",props:{formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!0,type:{name:"boolean"}}}}}catch{}function Np(e,t,r){const n=/\[\d+\]\./g,i=/\.(\d)+/g;e=e.replace(i,"[$1]");const a=`${e.split(".").join(".properties.")}.title`,l=`${e}.ui:title`,f=a.replace(n,".items."),m=l.replace(n,".items."),p=a.match(n);let v=Ds(p);v&&(v=v.substring(1,v.length-2),v=isNaN(parseInt(v))?"":`${parseInt(v)+1}`);const y=gt(r,l)||gt(t.properties,a)||gt(r,m)||gt(t.properties,f)||`${f}`;return`${v?"["+v+"] ":""}${y}`}function Fp(e,t,r,n){function i(f,m,p){const v=".";return Object.keys(f).forEach(y=>{if(f[y]===null)m[p+y]="";else if(Ri(f[y])&&!bi(f[y]))for(const S in f[y])if(Ri(f[y][S])||wi(f[y])&&!bi(f[y][S]))i(f[y][S],m,`${p}${y}[${S}]${v}`);else{let b=m[`${p}${y}`];b=b?`${b}, `:"",m[`${p}${y}`]=b+f[y][S]}else wi(f[y])&&!Ls(f[y])?i(f[y],m,`${p}${y}${v}`):m[p+y]=f[y]}),m}const o=i(Ao(e),[],"");return Ps(o).map(f=>{let m=o[f];o[f]===!1&&(m="false"),o[f]===!0&&(m="true");const p=f.indexOf(".");return{screen:ks(t,{id:f.substring(0,p)}),label:Np(f,r,n),value:m}}).filter(f=>f.label.indexOf(".properties.included.title")===-1).filter(f=>f.screen&&typeof f.value<"u").map(f=>({label:f.label,value:f.value,screen:f.screen})).sort((f,m)=>f.screen.order-m.screen.order)}function wn(e){let t=[];t=Fp(Ao(e.formData),e.steps,e.schema,e.uiSchema);let r="";const n=V(G,{children:[N("table",{className:"table summary-table-header",children:N("thead",{children:V("tr",{children:[N("th",{children:"Step"}),N("th",{children:"Label"}),N("th",{children:"Value"})]})})}),N("div",{className:"scroll-area table-body",children:N("table",{className:"table summary-table",children:N("tbody",{children:t.map((i,o)=>V("tr",{children:[N("td",{children:r!==i.screen.id&&(r=i.screen.id)&&N("span",{children:i.screen.title})}),N("td",{children:i.label}),N("td",{children:i.value})]},`${o}-${i.screen.id}-${i.label}`))})})})]});return V(G,{children:[N("p",{className:"step-exclude-directions",children:'Below is all of the data you have entered. Before submitting, click "Validate" to ensure that all of the required data has been entered.'}),N("button",{className:"nav-link pull-right",onClick:()=>window.print(),children:"Print this data"}),N("div",{className:"panel panel-default padding-full wrap",children:N("div",{className:"summary scroll-area",children:n})})]})}try{wn.displayName="SummaryTable",wn.__docgenInfo={description:"",displayName:"SummaryTable",props:{isWizard:{defaultValue:null,description:"",name:"isWizard",required:!1,type:{name:"boolean"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},callbackFn:{defaultValue:null,description:"",name:"callbackFn",required:!1,type:{name:"((screenId: string) => void)"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}}}}}catch{}var bn={},xp={get exports(){return bn},set exports(e){bn=e}},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var ve=yt;function ja(){return(ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Pp=ve.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},ve.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),kp=ve.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},ve.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function Dp(e,t,r,n,i){var o=(e-r)/(t-r);if(o===0)return n;if(o===1)return i;for(var a="#",l=1;l<6;l+=2){var f=parseInt(n.substr(l,2),16),m=parseInt(i.substr(l,2),16),p=Math.round((1-o)*f+o*m).toString(16);p.length===1&&(p="0"+p),a+=p}return a}function go(e){if(e.length===7)return e;for(var t="#",r=1;r<4;r+=1)t+=e[r]+e[r];return t}function _o(e,t,r,n,i){return Dp(e,t,r,go(n),go(i))}function Lp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)===-1&&(r[n]=e[n]);return r}var So=function(e){function t(r){e.call(this,r);var n=r.height,i=r.width,o=r.checked;this.t=r.handleDiameter||n-2,this.i=Math.max(i-n,i-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={s:o?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.componentDidUpdate=function(r){r.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},t.prototype.k=function(r){this.y.focus(),this.setState({C:r,M:!0,m:Date.now()})},t.prototype.x=function(r){var n=this.state,i=n.C,o=n.s,a=(this.props.checked?this.i:this.o)+r-i;n.R||r===i||this.setState({R:!0});var l=Math.min(this.i,Math.max(this.o,a));l!==o&&this.setState({s:l})},t.prototype.S=function(r){var n=this.state,i=n.s,o=n.R,a=n.m,l=this.props.checked,f=(this.i+this.o)/2,m=Date.now()-a;!o||m<250?this.T(r):l?f<i?this.setState({s:this.i}):this.T(r):i<f?this.setState({s:this.o}):this.T(r),this.setState({R:!1,M:!1}),this.n=Date.now()},t.prototype.h=function(r){r.preventDefault(),typeof r.button=="number"&&r.button!==0||(this.k(r.clientX),window.addEventListener("mousemove",this.r),window.addEventListener("mouseup",this.a))},t.prototype.r=function(r){r.preventDefault(),this.x(r.clientX)},t.prototype.a=function(r){this.S(r),window.removeEventListener("mousemove",this.r),window.removeEventListener("mouseup",this.a)},t.prototype.c=function(r){this.$=null,this.k(r.touches[0].clientX)},t.prototype.l=function(r){this.x(r.touches[0].clientX)},t.prototype.u=function(r){r.preventDefault(),this.S(r)},t.prototype.p=function(r){50<Date.now()-this.n&&(this.T(r),50<Date.now()-this.e&&this.setState({M:!1}))},t.prototype.b=function(){this.e=Date.now()},t.prototype.g=function(){this.setState({M:!0})},t.prototype.v=function(){this.setState({M:!1})},t.prototype.w=function(r){this.y=r},t.prototype.f=function(r){r.preventDefault(),this.y.focus(),this.T(r),this.setState({M:!1})},t.prototype.T=function(r){var n=this.props;(0,n.onChange)(!n.checked,r,n.id)},t.prototype.render=function(){var r=this.props,n=r.disabled,i=r.className,o=r.offColor,a=r.onColor,l=r.offHandleColor,f=r.onHandleColor,m=r.checkedIcon,p=r.uncheckedIcon,v=r.boxShadow,y=r.activeBoxShadow,S=r.height,b=r.width,g=Lp(r,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),R=this.state,w=R.s,E=R.R,A=R.M,C={position:"relative",display:"inline-block",textAlign:"left",opacity:n?.5:1,direction:"ltr",borderRadius:S/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},T={height:S,width:b,margin:Math.max(0,(this.t-S)/2),position:"relative",background:_o(w,this.i,this.o,o,a),borderRadius:S/2,cursor:n?"default":"pointer",WebkitTransition:E?null:"background 0.25s",MozTransition:E?null:"background 0.25s",transition:E?null:"background 0.25s"},x={height:S,width:Math.min(1.5*S,b-(this.t+S)/2+1),position:"relative",opacity:(w-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:E?null:"opacity 0.25s",MozTransition:E?null:"opacity 0.25s",transition:E?null:"opacity 0.25s"},L={height:S,width:Math.min(1.5*S,b-(this.t+S)/2+1),position:"absolute",opacity:1-(w-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:E?null:"opacity 0.25s",MozTransition:E?null:"opacity 0.25s",transition:E?null:"opacity 0.25s"},Z={height:this.t,width:this.t,background:_o(w,this.i,this.o,l,f),display:"inline-block",cursor:n?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+w+"px)",top:Math.max(0,(S-this.t)/2),outline:0,boxShadow:A?y:v,border:0,WebkitTransition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return ve.createElement("div",{className:i,style:C},ve.createElement("div",{className:"react-switch-bg",style:T,onClick:n?null:this.f,onMouseDown:function(le){return le.preventDefault()}},m&&ve.createElement("div",{style:x},m),p&&ve.createElement("div",{style:L},p)),ve.createElement("div",{className:"react-switch-handle",style:Z,onClick:function(le){return le.preventDefault()},onMouseDown:n?null:this.h,onTouchStart:n?null:this.c,onTouchMove:n?null:this.l,onTouchEnd:n?null:this.u,onTouchCancel:n?null:this.v}),ve.createElement("input",ja({},{type:"checkbox",role:"switch",disabled:n,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},g,{ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})))},t}(ve.Component);So.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:Pp,checkedIcon:kp,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},Jn.default=So;(function(e){e.exports=Jn})(xp);const Bp=As(bn);class Rn extends yt.Component{constructor(r){super(r);B(this,"excludeWarningText",V("div",{children:[N("p",{children:"This action will clear any entered data on this page and remove this form from your submission. You can include it again at anytime. Only this page will be affected."}),N("p",{children:"Are you sure you want to skip this step and clear any entered data?"})]}));B(this,"excludeWarningHeader","Skip This Step?");B(this,"unsavedDataWarning","You might have some unsaved data. Are you sure you want to leave?");B(this,"formRef");B(this,"submitButtonRef");B(this,"formDivRef");B(this,"navAction",X.NONE);B(this,"uiSchema");B(this,"nextStep");B(this,"extraErrors",[]);B(this,"isNewForm",r=>Object.keys(r).length==1&&Object.keys(r)[0]==="metadata"||Object.keys(r).length==0);B(this,"getFirstStep",(r,n)=>this.isNewForm(n)?r[0]:r.find(i=>i.final===!0)||r[0]);B(this,"onUnload",r=>this.state.hasUnsavedChanges?(r.preventDefault(),r.returnValue=this.unsavedDataWarning):void 0);B(this,"setupBeforeUnloadListener",()=>{window.addEventListener("beforeunload",this.onUnload)});B(this,"_setIncludedPropInFormDataNonWizard",(r,n)=>{const i={},o=r.formData;return Object.keys(n).forEach(a=>{j.get(n[a],"properties.included")&&j.set(i,`${a}.included`,!0)}),{...o,...i}});B(this,"_setIncludedPropInFormDataWizard",r=>{const n=r.currentStep.id,i=j.cloneDeep(r.formData);return j.set(i,`${n}.included`,!0),i});B(this,"getSchema",({id:r,final:n})=>n?this.props.schema:j.pick(this.props.schema,["title","type",`properties.${r}`]));B(this,"getNextStepId",async(r,n,i)=>{if(i)return i;if(!r.rules||r.rules.length===0)return r.default;const o=new Sr.Engine(r.rules);try{const a=await o.run(n);return a.events.length>0?a.events[0].params.next:r.default}catch{return r.default}});B(this,"moveStep",async(r,n,i,o=[...this.state.previousStepIds])=>{var v;const a=this.state.currentStep;let l;(v=this.formRef)!=null&&v.current&&this.formRef.current.setState({errorSchema:{}});const f=this.props.isWizardMode&&!n;f&&o.push(a.id),i?l=he.ERROR:(l=he.COMPLETED,!f&&this.props.isWizardMode&&(l=he.TODO)),n=await this.getNextStepId(a,r,n);const m=this.state.steps.map(y=>y.id===a.id?{...y,state:l,inProgress:!1}:y.id===n?{...y,inProgress:!0}:y);f&&j.set(r,`${n}.included`,!0);const p=this.state.steps.find(y=>y.id===n);this.props.isWizardMode&&p.final&&Object.keys(r).forEach(y=>{r[y].included===void 0&&(r[y]={})}),this.saveStepState(o,m,p,r)});B(this,"saveStepState",(r,n,i,o)=>{this.setState({previousStepIds:r,steps:n,currentStep:i,formData:o,hasValidated:!1,doShowErrors:!1})});B(this,"goPrevious",async(r,n)=>{let i;const o=[...this.state.previousStepIds];if(this.props.isWizardMode)i=o.pop(),this.isSubmitScreen()||j.set(r,`${this.state.currentStep.id}.included`,void 0);else{const a=j.findIndex(this.state.steps,{id:this.state.currentStep.id});a>0&&(i=this.state.steps[a-1].id)}if(!j.isUndefined(i))return this.moveStep(r,i,n,o)});B(this,"triggerAction",async r=>{if(r===X.SAVE)return this.props.onSave(this.state.formData);this.navAction=r,this.extraErrors=await this.runCustomValidation(this.state.formData,this.state.currentStep,this.state.steps),this.submitButtonRef.current&&this.submitButtonRef.current.click()});B(this,"triggerStepChange",r=>{this.nextStep=r,this.triggerAction(X.GO_TO_STEP)});B(this,"onError",r=>{if(this.setState({doShowErrors:!0,hasValidated:!1}),this.navAction===X.VALIDATE){const n=this.setStepStatusForFailedValidation(r.props,this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep));this.setState({steps:n}),this.formDivRef.current.scrollTo(0,0),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,n[0].id,!0),this.setState({isLoadingSaved:!1}))}});B(this,"setStepStatusForFailedValidation",(r,n,i,o,a)=>{const l=r.map(p=>j.trimStart(p.property,".").split(".")[0]),f=Object.keys(a);return n.map(p=>{if(l.indexOf(p.id)>-1)return{...p,state:he.ERROR};if(f.indexOf(p.id)>-1){let v=he.COMPLETED;return i&&!j.get(o[p.id],"included")&&(v=p.state),{...p,state:v}}else return p})});B(this,"onSubmit",()=>{this.performAction(this.navAction,this.state.currentStep.state===he.ERROR)});B(this,"isSubmitScreen",()=>this.state.currentStep.final===!0&&!this.state.isLoadingSaved);B(this,"showExcludeStateWarningModal",(r,n=!1)=>{this.setState({modalContext:{action:this.toggleExcludeStep,arguments:[r,!0,n]}})});B(this,"toggleExcludeStep",(r,n)=>{this.setState((i,o)=>{const a=i.steps.map(m=>m.id===r?{...m,excluded:n}:m),l=j.cloneDeep(i.formData),f=j.cloneDeep(i.currentStep);return f.id===r&&(f.excluded=n),n?l[r]={}:j.set(l,`${r}.included`,!0),{steps:a,formData:l,modalContext:void 0,currentStep:f}})});B(this,"renderNotification",r=>r===Q.SAVE_SUCCESS?N("div",{className:"notification-area",children:" Successfully saved "}):r===Q.SUBMIT_SUCCESS?N("div",{className:"notification-area",children:" Successfully submitted "}):r===Q.PROGRESS?N("div",{className:"notification-area",children:" working on it ...."}):N(G,{}));B(this,"renderTextForStaticScreen",()=>{if(!this.state.currentStep.copy)return N(G,{});const r=this.state.currentStep.copy;return N("div",{className:"static-screen",dangerouslySetInnerHTML:{__html:r}})});B(this,"renderOptionalFormSubheader",(r=!1)=>{if(r)return N(G,{});const n=this.state.currentStep;return n.excluded===!0?V("div",{className:"step-exclude-directions",children:["This form is currently not included in the submission.",N("button",{className:"btn btn-link",onClick:()=>this.toggleExcludeStep(n.id,!1),children:"INCLUDE"})]}):n.excluded===!1?V("div",{className:"step-exclude-directions",children:['This form is currently included in the submission. Enter some data if you have it, or click "Skip".',N("button",{className:"btn btn-link",onClick:()=>this.showExcludeStateWarningModal(this.state.currentStep.id),children:"SKIP"})]}):N(G,{})});B(this,"renderHelpToggle",(r,n,i)=>r.static||r.final?N(G,{}):N(G,{children:V("label",{className:"pull-right toggle-help-label",children:[N("span",{children:"Hide help"}),N(Bp,{checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,className:"toggle-help",offColor:"#ccc",onChange:()=>i(),checked:n}),N("span",{children:"Show help"})]})}));B(this,"runCustomValidation",async(r,n,i)=>{const o=[];let a=n.validationRules||[],l={[n.id]:r[n.id]};if(n.final&&(a=i.reduce((p,v)=>v.validationRules&&v.validationRules.length>0?p.concat(v.validationRules):p,[]),l=j.cloneDeep(r)),a.length===0)return[];const f=[];a.forEach(p=>{const v=p.event.params.property;if(v.indexOf("[*]")===-1)f.push(p);else{const y=v.split("[*]")[0].substring(1),S=j.get(r,y);if(Array.isArray(S)&&typeof S!="string")for(let b=0;b<S.length;b++){const g=JSON.parse(JSON.stringify(p).replace(/\[\*\]/g,`[${b}]`));f.push(g)}else f.push(p)}});const m=new Sr.Engine(f,{allowUndefinedFacts:!0});try{(await m.run(l)).events.forEach(y=>{const S={...y.params,params:{},stack:`${y.params.property} ${y.params.message}`};o.push(S)})}catch(p){console.log(p)}return o});B(this,"transformErrors",r=>{if(this.extraErrors.forEach(i=>{r.find(o=>o.stack===i.stack)||r.push(i)}),this.navAction!==X.SUBMIT&&this.navAction!==X.VALIDATE&&(!this.props.isWizardMode||this.state.currentStep.final)){const i={...this.state.currentStep};return r.length>0?i.state=he.ERROR:i.state=he.COMPLETED,this.setState({currentStep:i}),[]}return r.filter(i=>i.name==="required").forEach(i=>{const o=i.property.substring(0,i.property.lastIndexOf("."));j.remove(r,a=>a.property.indexOf(o)>-1&&(a.name==="enum"||a.name==="oneOf"))}),r.map(i=>(i.message=i.message.replace("property","field"),i))});B(this,"renderErrorListTemplate",r=>{const{errors:n}=r,i=n.map((o,a)=>Mp(this.state.steps,o,this.uiSchema,a,this.props.schema)).sort((o,a)=>o.order-a.order).map(o=>o.element);return N("div",{className:"form-error-summary",children:N("ul",{className:"error-detail",children:i})})});this.uiSchema=Va(j.cloneDeep(r.uiSchema),"ui:help");const n=r.navSchema.steps.map((o,a)=>({...o,inProgress:a===0})).sort((o,a)=>o.order-a.order);this.formRef=yt.createRef(),this.formDivRef=yt.createRef(),this.submitButtonRef=yt.createRef();const i=this.getFirstStep(n,r.formData);this.state={currentStep:i,steps:n,previousStepIds:[],formData:r.formData,doShowErrors:!1,doShowHelp:!0,hasUnsavedChanges:!1,isSubmitted:r.isSubmitted,isLoadingSaved:!this.isNewForm(this.props.formData)}}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}componentDidUpdate(r){const n=this.props.callbackStatus!==r.callbackStatus,i=this.props.callbackStatus===Q.SAVE_SUCCESS||this.props.callbackStatus===Q.SUBMIT_SUCCESS;n&&i&&(this.setState({hasUnsavedChanges:!1}),this.props.callbackStatus===Q.SUBMIT_SUCCESS&&(this.setState({isSubmitted:!0}),window.history.back()))}componentDidMount(){this.setupBeforeUnloadListener(),this.isNewForm(this.state.formData)?this.setState(n=>({formData:this.props.isWizardMode?this._setIncludedPropInFormDataWizard(n):this._setIncludedPropInFormDataNonWizard(n,this.props.schema)})):this.triggerAction(X.VALIDATE)}handleOnChange({formData:r}){if(!this.isSubmitScreen()&&!this.state.currentStep.excluded){const n=!j.isEqual(this.state.formData,r);this.setState({formData:r,hasUnsavedChanges:n})}}performAction(r,n){const i=this.state.formData;switch(r){case X.NEXT:return this.moveStep(i,void 0,n);case X.PREVIOUS:return this.goPrevious(i,n);case X.GO_TO_STEP:return this.nextStep?this.moveStep(i,this.nextStep.id,n):void 0;case X.SUBMIT:{this.props.onSubmit(i);return}case X.VALIDATE:{const o=this.setStepStatusForFailedValidation([],this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep)),a={...this.state.currentStep,state:he.COMPLETED};this.setState({hasValidated:!0,currentStep:a,steps:o}),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,o[0].id,!1),this.setState({isLoadingSaved:!1}));return}default:return}}render(){return V("div",{className:"outter-wrap",children:[N($s,{when:this.state.hasUnsavedChanges,message:this.unsavedDataWarning}),N(yn,{isSubmitted:this.state.isSubmitted,bodyText:this.state.currentStep.description,title:this.props.formTitle}),N("div",{children:V("div",{className:"inner-wrap",children:[N(gn,{stepList:this.state.steps,isWizardMode:this.props.isWizardMode,onStepChange:this.triggerStepChange}),this.state.isLoadingSaved&&N("div",{className:"text-center",children:N("span",{className:"spinner"})}),V("div",{className:"form-wrap",children:[N("div",{className:"form-title",children:this.state.currentStep.title}),this.renderNotification(this.props.callbackStatus),V("div",{className:`right-top-actions ${this.state.isSubmitted?"hide":""}`,children:[!this.state.currentStep.static&&N("button",{type:"button",className:"btn btn-action save pull-right",onClick:()=>{this.triggerAction(X.VALIDATE)},children:"VALIDATE"}),this.renderHelpToggle(this.state.currentStep,this.state.doShowHelp,()=>this.setState({doShowHelp:!this.state.doShowHelp})),this.isSubmitScreen()&&N("button",{type:"button",className:"btn btn-action save pull-right",disabled:this.state.isSubmitted,onClick:()=>{this.triggerAction(X.SUBMIT)},children:"SUBMIT"})]}),this.renderOptionalFormSubheader(this.props.isWizardMode),V("div",{className:this.isSubmitScreen()||this.state.currentStep.static?"hide-form-only":"wrap",children:[this.state.hasValidated&&N("div",{className:"notification-area",children:"Great! All required data on this form has been entered."}),V("div",{ref:this.formDivRef,className:`scroll-area ${this.state.currentStep.excluded?"disabled":" "} `,children:[N(xs,{noHtml5Validate:!0,className:this.state.doShowHelp?"submissionInputForm":"submissionInputForm no-help",liveValidate:!1,formData:this.state.formData,schema:this.getSchema(this.state.currentStep),uiSchema:this.uiSchema,onSubmit:this.onSubmit,onChange:r=>this.handleOnChange(r),onError:r=>this.onError({props:r,form:this.formRef}),showErrorList:!!this.state.doShowErrors||!!this.props.isWizardMode,ErrorList:this.renderErrorListTemplate,transformErrors:this.transformErrors,ref:this.formRef,disabled:this.state.currentStep.excluded||this.state.isSubmitted,children:N("div",{style:{display:"none"},children:N("button",{type:"submit",ref:this.submitButtonRef})})}),this.renderTextForStaticScreen(),!this.props.isWizardMode&&N(Sn,{steps:this.state.steps,nextStepId:this.state.currentStep.default,onNavAction:r=>this.triggerStepChange(r)})]})]}),this.isSubmitScreen()&&N(wn,{formData:this.state.formData,steps:this.state.steps,callbackFn:r=>this.showExcludeStateWarningModal(r,!0),uiSchema:this.props.uiSchema,schema:this.props.schema}),N(_n,{currentStep:this.state.currentStep,steps:this.state.steps,previousStepIds:this.state.previousStepIds,isFormSubmitted:this.state.isSubmitted,onNavAction:r=>{this.triggerAction(r)}})]})]})}),this.state.modalContext&&N(Ms,{show:!0,title:this.excludeWarningHeader,modalBody:this.excludeWarningText,className:`theme-${this.props.formClass}`,onConfirmCallbackArgs:this.state.modalContext.arguments,onCancel:()=>this.setState({modalContext:void 0}),onConfirm:(r,n)=>this.toggleExcludeStep(r,n)}),N(En,{formData:this.state.formData,hidden:!0})]})}}function Mp(e,t,r,n,i){const o=j.trimStart(t.property,"."),a=o.split("."),l=`${a.join(".properties.")}.title`,f=`${o}.ui:title`,m=l.replace(/\[.*?\]/,".items"),p=f.replace(/\[.*?\]/,".items"),v=l.match(/\[.*?\]/);let y=j.first(v);y&&(y=y.substring(1,y.length-1),y=isNaN(parseInt(y))?"":` [${parseInt(y)+1}]`);const S=j.get(r,f)||j.get(i.properties,l)||j.get(r,p)||j.get(i.properties,m)||t.property,b=j.find(e,{id:a[0]})||{title:a[0],order:0},g=N("li",{className:"",children:V("span",{children:[V("strong",{children:[b.title,y,":"]}),S,"  ",t.message]})},n);return{order:b.order,element:g}}function Va(e,t){return j.keys(e).some(r=>{if(r===t){const n=e[r];return e[r]=N("span",{dangerouslySetInnerHTML:{__html:n}}),e}e[r]&&typeof e[r]=="object"&&Va(e[r],t)}),e}try{Rn.displayName="SynapseForm",Rn.__docgenInfo={description:"",displayName:"SynapseForm",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}},navSchema:{defaultValue:null,description:"",name:"navSchema",required:!0,type:{name:"{ steps: any[]; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"IFormData"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(formData: IFormData) => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(formData: IFormData) => void"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},callbackStatus:{defaultValue:null,description:"",name:"callbackStatus",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}},isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}}}}}catch{}async function rn(e,t,r,n){try{const i=await ys(e,t,r),o=await gs(i,e,!0,!0),a=await _s(o.fileHandle,o.preSignedURL),l=JSON.parse(a);return{version:i.versionNumber,content:l}}catch(i){const o={message:`${i.message}:  configuration data for ${t} failed to load`};return n&&n(o),Promise.reject(o)}}class wr extends yt.Component{constructor(r){var n,i;super(r);B(this,"getFileEntityDataDereferenced",async(r,n,i)=>{const{version:o,content:a}=await rn(r,n,i,this.onError),l=await _e.dereference(a);return{version:o,content:l}});B(this,"getData",async r=>{if(r)try{let n={},i,o,a,l,f;const{searchParams:m}=this.props;if(m&&({dataFileHandleId:i,submitted:o}=m),i){const y=await Ss(i,r);n=JSON.parse(y),o&&n&&n.metadata&&({formSchemaVersion:a,uiSchemaVersion:l,navSchemaVersion:f}=n.metadata)}const p=[this.getFileEntityDataDereferenced(r,this.props.formSchemaEntityId,a),rn(r,this.props.formUiSchemaEntityId,l,this.onError),rn(r,this.props.formNavSchemaEntityId,f,this.onError)],v=await Promise.all(p);i||(n={metadata:{formSchemaVersion:v[0].version,uiSchemaVersion:v[1].version,navSchemaVersion:v[2].version}}),this.setState({formData:n,formSchema:v[0].content,formUiSchema:v[1].content,formNavSchema:v[2].content,isLoading:!1})}catch(n){this.onError({message:n})}finally{this.setState({isLoading:!1})}});B(this,"finishedProcessing",(r,n)=>{this.setState({isLoading:!1,notification:{type:r,message:n},status:r}),setTimeout(()=>{this.setState({status:void 0})},7e3)});B(this,"onError",r=>{this.setState({notification:{type:Q.ERROR,message:r.message,name:r.name},status:Q.ERROR,isLoading:!1})});B(this,"submitForm",async r=>{await this.saveToFile(r),this.setState({isLoading:!0}),await Es(this.state.formDataId,this.props.token),this.finishedProcessing(Q.SUBMIT_SUCCESS,"File Submitted")});B(this,"createOrUpdateFormDataFile",async(r,n)=>{r=`${r}.json`;const i=await ws(this.props.token,r,n),{searchParams:o}=this.props,a=o&&o.formGroupId;if(!a)throw console.error("formGroupId must be defined"),"formGroupId must be defined";try{const l=i.fileHandleId;let f;return this.state.formDataId?f=await bs(this.state.formDataId,r,l,this.props.token):f=await Rs(a,r,l,this.props.token),f}catch(l){throw this.onError(l),l}});B(this,"saveToFile",async r=>{const n=gt(r,this.props.fileNamePath);if(this.setState({status:Q.PROGRESS,notification:{type:Q.PROGRESS,message:"Progress"},isLoading:!0}),!n){let i="File Name";try{const o=`${this.props.fileNamePath.replace(".",".properties.")}.title`;i=gt(this.state.formSchema.properties,o,i)}finally{const o=`Please Provide the ${i} before saving`;this.onError({message:o})}return}try{const i=new Blob([JSON.stringify(r)],{type:"text/json"}),o=await this.createOrUpdateFormDataFile(n,i);this.setState({formDataId:o.formDataId}),this.finishedProcessing(Q.SAVE_SUCCESS,"File Saved")}catch(i){this.onError({message:i})}});B(this,"isReadyToDisplayForm",r=>this.state.status!==Q.ERROR_CRITICAL&&r.formSchema&&r.formUiSchema&&r.formNavSchema&&r.formData);B(this,"renderLoader",(r,n)=>Bs([Q.ERROR,Q.ERROR_CRITICAL],r.status)&&n.token&&r.isLoading?N("div",{className:"text-center",children:N("span",{className:"spinner"})}):N(G,{}));B(this,"renderNotification",r=>r?r.type===Q.ERROR?V(Oi,{variant:"danger",onClose:()=>this.setState({status:void 0}),children:[N(Oi.Heading,{children:"Error"}),V("p",{children:[r.name," ",r.message]})]}):N(G,{}):N(G,{}));B(this,"renderUnauthenticatedView",r=>r?N(G,{}):V("div",{className:"panel padding-full unauthenticated text-center bootstrap-4-backport",children:["Please",N(Us,{variant:"light-primary-base",style:{margin:"10px"},className:`pill ${Fs}`,children:"sign in"}),"to initiate or continue your submission"]}));this.state={isLoading:!0,formDataId:(i=(n=this.props)==null?void 0:n.searchParams)==null?void 0:i.formDataId}}async componentDidMount(){await this.getData(this.props.token)}async componentDidUpdate(r){this.props.token!==r.token&&await this.getData(this.props.token)}render(){return N("div",{className:`theme-${this.props.formClass}`,children:V("div",{className:"SRC-ReactJsonForm",children:[this.renderNotification(this.state.notification),this.renderLoader(this.state,this.props),this.renderUnauthenticatedView(this.props.token),this.isReadyToDisplayForm(this.state)&&N("div",{children:N(Rn,{schema:this.state.formSchema,uiSchema:this.state.formUiSchema,formData:this.state.formData,navSchema:this.state.formNavSchema,isWizardMode:this.props.isWizardMode,formTitle:this.props.formTitle,formClass:this.props.formClass,callbackStatus:this.state.status,onSave:r=>{this.saveToFile(r)},onSubmit:r=>{this.submitForm(r)},isSubmitted:this.props.searchParams&&!!this.props.searchParams.submitted})})]})})}}try{wr.displayName="SynapseFormWrapper",wr.__docgenInfo={description:"",displayName:"SynapseFormWrapper",props:{formSchemaEntityId:{defaultValue:null,description:"",name:"formSchemaEntityId",required:!0,type:{name:"string"}},formUiSchemaEntityId:{defaultValue:null,description:"",name:"formUiSchemaEntityId",required:!0,type:{name:"string"}},formNavSchemaEntityId:{defaultValue:null,description:"",name:"formNavSchemaEntityId",required:!0,type:{name:"string"}},token:{defaultValue:null,description:"",name:"token",required:!1,type:{name:"string"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"UploadToolSearchParams"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},fileNamePath:{defaultValue:null,description:"",name:"fileNamePath",required:!0,type:{name:"string"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}}}}}catch{}const Ev={title:"Synapse/SynapseFormWrapper",component:wr,render:e=>N(Os,{children:t=>N(wr,{...e,token:t==null?void 0:t.accessToken})})},sr={args:{formTitle:"Your Contribution Request",formClass:"contribution-request",formSchemaEntityId:"syn20692910",fileNamePath:"study.submission_name",formUiSchemaEntityId:"syn20692911",formNavSchemaEntityId:"syn20968007",isWizardMode:!0}};var Eo,wo,bo;sr.parameters={...sr.parameters,docs:{...(Eo=sr.parameters)==null?void 0:Eo.docs,source:{originalSource:`{
  args: {
    formTitle: 'Your Contribution Request',
    formClass: 'contribution-request',
    formSchemaEntityId: 'syn20692910',
    fileNamePath: 'study.submission_name',
    formUiSchemaEntityId: 'syn20692911',
    formNavSchemaEntityId: 'syn20968007',
    isWizardMode: true
  }
}`,...(bo=(wo=sr.parameters)==null?void 0:wo.docs)==null?void 0:bo.source}}};const wv=["Demo"];export{sr as Demo,wv as __namedExportsOrder,Ev as default};
//# sourceMappingURL=SynapseFormWrapper.stories-191fd8ae.js.map
