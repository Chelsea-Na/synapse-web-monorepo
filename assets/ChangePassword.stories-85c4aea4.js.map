{"version":3,"file":"ChangePassword.stories-85c4aea4.js","sources":["../../src/lib/containers/ChangePassword.tsx","../../src/lib/containers/ChangePassword.stories.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { FormGroup, FormControl, FormLabel, Button } from 'react-bootstrap'\nimport { ChangePasswordWithCurrentPassword } from '../utils/synapseTypes/ChangePasswordRequests'\nimport { displayToast } from './ToastMessage'\nimport { SynapseClient } from '../utils'\nimport { useSynapseContext } from '../utils/SynapseContext'\nimport { UserProfile } from '../utils/synapseTypes'\n\nconst ChangePassword: React.FunctionComponent = () => {\n  const { accessToken } = useSynapseContext()\n  const [oldPassword, setOldPassword] = useState<string>('')\n  const [newPassword, setNewPassword] = useState<string>('')\n  const [confirmPassword, setConfirmPassword] = useState<string>('')\n  const [currentUserProfile, setUserProfile] = useState<UserProfile>()\n\n  useEffect(() => {\n    async function getUserProfile() {\n      const userProfile = await SynapseClient.getUserProfile(accessToken)\n      setUserProfile(userProfile)\n    }\n    if (accessToken) {\n      getUserProfile()\n    } else {\n      setUserProfile(undefined)\n    }\n  }, [accessToken])\n\n  const handleChangePassword = async (\n    clickEvent: React.FormEvent<HTMLElement>,\n  ) => {\n    clickEvent.preventDefault()\n    try {\n      if (newPassword !== confirmPassword) {\n        displayToast(\n          'New password and confirm password does not match.',\n          'danger',\n        )\n      } else if (accessToken) {\n        const changeRequest: ChangePasswordWithCurrentPassword = {\n          newPassword,\n          concreteType:\n            'org.sagebionetworks.repo.model.auth.ChangePasswordWithCurrentPassword',\n          username: currentUserProfile?.userName!,\n          currentPassword: oldPassword,\n        }\n        await SynapseClient.changePasswordWithCurrentPassword(\n          changeRequest,\n          accessToken,\n        )\n          .then(() => displayToast('Successfully changed', 'success'))\n          .catch((err: any) => displayToast(err.reason as string, 'danger'))\n      }\n    } catch (err) {\n      displayToast(err.reason as string, 'danger')\n    }\n  }\n\n  return (\n    <div className=\"changePassword\">\n      <form onSubmit={handleChangePassword}>\n        <FormGroup controlId=\"oldPassword\">\n          <FormLabel>Current Password</FormLabel>\n          <FormControl\n            type=\"password\"\n            onChange={e => setOldPassword(e.target.value)}\n            value={oldPassword}\n          />\n        </FormGroup>\n        <FormGroup controlId=\"newPassword\">\n          <FormLabel>New Password</FormLabel>\n          <FormControl\n            type=\"password\"\n            onChange={e => setNewPassword(e.target.value)}\n            value={newPassword}\n          />\n        </FormGroup>\n        <FormGroup controlId=\"confirmPassword\">\n          <FormLabel>Confirm Password</FormLabel>\n          <FormControl\n            type=\"password\"\n            onChange={e => setConfirmPassword(e.target.value)}\n            value={confirmPassword}\n          />\n        </FormGroup>\n        <Button type=\"submit\" onSubmit={handleChangePassword}>\n          Change Password\n        </Button>\n      </form>\n    </div>\n  )\n}\n\nexport default ChangePassword\n","import React from 'react';\nimport { ComponentStory, ComponentMeta } from '@storybook/react';\nimport ChangePassword from './ChangePassword';\n\n// More on default export: https://storybook.js.org/docs/react/writing-stories/introduction#default-export\nexport default ({\n  title: 'Authentication/ChangePassword',\n  component: ChangePassword,\n  // More on argTypes: https://storybook.js.org/docs/react/api/argtypes\n  argTypes: {}\n} as ComponentMeta<typeof ChangePassword>);\n\n// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args\nconst Template: ComponentStory<typeof ChangePassword> = args => <ChangePassword {...args} />;\nexport const ChangePasswordDemo = Template.bind({});\n// More on args: https://storybook.js.org/docs/react/writing-stories/args\nChangePasswordDemo.args = {};\nChangePasswordDemo.parameters = {\n  ...ChangePasswordDemo.parameters,\n  docs: {\n    ...ChangePasswordDemo.parameters?.docs,\n    source: {\n      originalSource: \"args => <ChangePassword {...args} />\",\n      ...ChangePasswordDemo.parameters?.docs?.source\n    }\n  }\n};"],"names":["ChangePassword","accessToken","useSynapseContext","oldPassword","setOldPassword","useState","newPassword","setNewPassword","confirmPassword","setConfirmPassword","currentUserProfile","setUserProfile","useEffect","getUserProfile","userProfile","SynapseClient.getUserProfile","handleChangePassword","clickEvent","displayToast","changeRequest","SynapseClient.changePasswordWithCurrentPassword","err","jsx","jsxs","FormGroup","FormLabel","FormControl","e","Button","ChangePassword$1","ChangePassword_stories","Template","args","ChangePasswordDemo","_a","_c","_b"],"mappings":"49CAQA,MAAAA,EAAA,IAAA,CACE,KAAA,CAAA,YAAAC,GAAAC,IACA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACA,CAAAC,EAAAC,CAAA,EAAAF,EAAA,SAAA,EAAA,EACA,CAAAG,EAAAC,CAAA,EAAAJ,EAAA,SAAA,EAAA,EACA,CAAAK,EAAAC,CAAA,EAAAN,EAAA,SAAA,EAEAO,EAAAA,UAAA,IAAA,CACE,eAAAC,GAAA,CACE,MAAAC,EAAA,MAAAC,EAAAd,CAAA,EACAU,EAAAG,CAAA,CAA0B,CAE5Bb,EACEY,IAEAF,EAAA,MAAA,CACF,EAAA,CAAAV,CAAA,CAAA,EAGF,MAAAe,EAAA,MAAAC,GAAA,CAGEA,EAAA,eAAA,EACA,GAAA,CACE,GAAAX,IAAAE,EACEU,EAAA,oDACE,QACA,UACFjB,EAAA,CAEA,MAAAkB,EAAA,CAAyD,YAAAb,EACvD,aAAA,wEAEE,SAAAI,GAAA,YAAAA,EAAA,SAC4B,gBAAAP,CACb,EAEnB,MAAAiB,EAAoBD,EAClBlB,CACA,EAAA,KAAA,IAAAiB,EAAA,uBAAA,SAAA,CAAA,EAAA,MAAAG,GAAAH,EAAAG,EAAA,OAAA,QAAA,CAAA,CAGiE,CACrE,OAAAA,EAAA,CAEAH,EAAAG,EAAA,OAAA,QAAA,CAA2C,CAC7C,EAGF,OAAAC,EAAA,MAAA,CAAA,UAAA,iBAAA,SAAAC,EAAA,OAAA,CAAA,SAAAP,EAAA,SAAA,CAGMO,EAAAC,EAAA,CAAA,UAAA,cAAA,SAAA,CACEF,EAAAG,EAAA,CAAA,SAAA,kBAAA,CAAA,EAA2BH,EAC3BI,EAAC,CAAA,KAAA,WACM,SAAAC,GAAAvB,EAAAuB,EAAA,OAAA,KAAA,EACuC,MAAAxB,CACrC,CAAA,CACT,EAAA,EACFoB,EAAAC,EAAA,CAAA,UAAA,cAAA,SAAA,CAEEF,EAAAG,EAAA,CAAA,SAAA,cAAA,CAAA,EAAuBH,EACvBI,EAAC,CAAA,KAAA,WACM,SAAAC,GAAApB,EAAAoB,EAAA,OAAA,KAAA,EACuC,MAAArB,CACrC,CAAA,CACT,EAAA,EACFiB,EAAAC,EAAA,CAAA,UAAA,kBAAA,SAAA,CAEEF,EAAAG,EAAA,CAAA,SAAA,kBAAA,CAAA,EAA2BH,EAC3BI,EAAC,CAAA,KAAA,WACM,SAAAC,GAAAlB,EAAAkB,EAAA,OAAA,KAAA,EAC2C,MAAAnB,CACzC,CAAA,CACT,EAAA,EACFc,EAAAM,EAAA,CAAA,KAAA,SAAA,SAAAZ,EAAA,SAAA,kBAAA,CAGA,CAAA,CAAA,CAAA,CAAA,CAIR,EAEAa,EAAA7B,kHCvFA,MAAgB8B,GAAA,CACd,MAAO,gCACP,UAAW9B,EAEX,SAAU,CAAC,CACb,EAGM+B,EAAkDC,GAASV,EAAAtB,EAAA,CAAgB,GAAGgC,CAAM,CAAA,EAC7EC,EAAqBF,EAAS,KAAK,EAAE,EAElDE,EAAmB,KAAO,CAAA,YAC1BA,EAAmB,WAAa,CAC9B,GAAGA,EAAmB,WACtB,KAAM,CACJ,IAAGC,EAAAD,EAAmB,aAAnB,YAAAC,EAA+B,KAClC,OAAQ,CACN,eAAgB,uCAChB,IAAGC,GAAAC,EAAAH,EAAmB,aAAnB,YAAAG,EAA+B,OAA/B,YAAAD,EAAqC,MAC1C,CACF,CACF"}