{"version":3,"file":"LoginPage.stories-d005d783.js","sources":["../../src/lib/components/styled/LeftRightPanel.tsx","../../src/lib/containers/auth/LoginPage.tsx","../../stories/LoginPage.stories.ts"],"sourcesContent":["import React from 'react'\nimport { Box, BoxProps, Paper, PaperProps, styled } from '@mui/material'\nimport { StyledComponent } from '@emotion/styled'\n\nexport const StyledOuterContainer: StyledComponent<BoxProps> = styled(Box, {\n  label: 'StyledOuterContainer',\n})(() => ({\n  minHeight: '100vh',\n  paddingTop: '50px',\n  paddingBottom: '50px',\n  background:\n    \"linear-gradient(rgba(255,255,255,0), rgba(255,255,255,0)), url('https://s3.amazonaws.com/static.synapse.org/images/SynapseLoginPageBackground.svg')\",\n  backgroundSize: 'cover',\n}))\n\nexport const StyledInnerContainer: StyledComponent<PaperProps> = styled(Paper, {\n  label: 'StyledInnerContainer',\n})(({ theme }) => ({\n  width: '900px',\n  minHeight: '600px',\n  margin: '0 auto',\n  display: 'flex',\n  '& > div:nth-of-type(1), & > div:nth-of-type(2)': {\n    borderRadius: 'inherit',\n    width: '450px',\n  },\n  '& > div:nth-of-type(1)': {\n    backgroundColor: theme.palette.background.paper,\n  },\n  '& > div:nth-of-type(2)': {\n    backgroundColor: theme.palette.grey[200],\n  },\n}))\n\nexport const LeftRightPanel: React.FC<{\n  leftContent: JSX.Element\n  rightContent: JSX.Element\n  className?: string\n}> = ({ leftContent, rightContent, className }) => {\n  return (\n    <StyledOuterContainer className={className}>\n      <StyledInnerContainer>\n        <Box>{leftContent}</Box>\n        <Box>{rightContent}</Box>\n      </StyledInnerContainer>\n    </StyledOuterContainer>\n  )\n}\n","import * as React from 'react'\nimport {\n  Box,\n  Stack,\n  styled,\n  Link,\n  Typography,\n  TypographyProps,\n  useTheme,\n} from '@mui/material'\nimport { LeftRightPanel } from '../../components/styled/LeftRightPanel'\nimport useShowDesktop from '../../utils/hooks/useShowDesktop'\nimport LoginFlowBackButton from './LoginFlowBackButton'\nimport useLogin from '../../utils/hooks/useLogin'\nimport LoginForm from './LoginForm'\nimport { StyledComponent } from '@emotion/styled'\n\nconst LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE = encodeURIComponent(\n  'Lost access to my Synapse account',\n)\nconst LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION = encodeURIComponent(\n  '<Please provide your username and/or email address associated with your account.>',\n)\nconst LOST_ACCOUNT_ACCESS_CONTACT_URL = `https://sagebionetworks.jira.com/servicedesk/customer/portal/9/group/16/create/85?summary=${LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE}&description=${LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION}`\n\nexport type LoginPageProps = {\n  ssoRedirectUrl?: string\n  sessionCallback: () => void // Callback is invoked after login\n}\n\nconst Tagline: StyledComponent<TypographyProps> = styled(Typography, {\n  label: 'Tagline',\n})(({ theme }) => ({\n  marginBottom: theme.spacing(2),\n  font: '300 24px/34px Lato, sans-serif',\n}))\n\nconst BACKUP_CODE_INFO_JSX = (\n  <>\n    Your backup code is a 16-digit code. We generated 10 of these codes for you\n    when you set up 2FA. If you donâ€™t have access to these codes, please{' '}\n    <Link href={LOST_ACCOUNT_ACCESS_CONTACT_URL}>contact us</Link>.\n  </>\n)\n\nexport default function LoginPage(props: LoginPageProps) {\n  const { ssoRedirectUrl, sessionCallback } = props\n  const showDesktop = useShowDesktop(910)\n  const theme = useTheme()\n\n  const {\n    step,\n    onStepChange,\n    submitUsernameAndPassword,\n    submitOneTimePassword,\n    errorMessage,\n    isLoading,\n  } = useLogin(sessionCallback)\n\n  const loginForm = (\n    <Stack\n      alignItems={'stretch'}\n      sx={{ height: '100%', width: '325px', mx: 'auto' }}\n    >\n      {!showDesktop && (\n        <Stack flexDirection={'row'}>\n          <LoginFlowBackButton step={step} onStepChange={onStepChange} />\n        </Stack>\n      )}\n\n      <Box\n        sx={{\n          mb: 4,\n          textAlign: 'center',\n          maxWidth: '90vw',\n        }}\n      >\n        <img\n          alt={'Synapse logo'}\n          src={\n            'https://s3.amazonaws.com/static.synapse.org/images/synapse-logo-blue.svg'\n          }\n        />\n        {!showDesktop && (\n          <Typography variant=\"body1\" align=\"center\" sx={{ my: 1 }}>\n            Organize. Get credit. Collaborate.\n          </Typography>\n        )}\n      </Box>\n      {!showDesktop && step === 'VERIFICATION_CODE' && (\n        <Typography variant={'body1'} align={'center'} sx={{ my: 1 }}>\n          Enter the 6-digit, time-based verification code provided by your\n          authenticator app.\n        </Typography>\n      )}\n      {!showDesktop && step === 'RECOVERY_CODE' && (\n        <Typography variant={'body1'} align={'center'} sx={{ my: 1 }}>\n          {BACKUP_CODE_INFO_JSX}\n        </Typography>\n      )}\n      <LoginForm\n        ssoRedirectUrl={ssoRedirectUrl}\n        step={step}\n        onStepChange={onStepChange}\n        submitUsernameAndPassword={submitUsernameAndPassword}\n        submitOneTimePassword={submitOneTimePassword}\n        errorMessage={errorMessage}\n        isLoading={isLoading}\n      />\n    </Stack>\n  )\n\n  if (showDesktop) {\n    return (\n      <LeftRightPanel\n        leftContent={\n          <>\n            <Box sx={{ py: 10, px: 8, height: '100%', position: 'relative' }}>\n              <LoginFlowBackButton\n                step={step}\n                onStepChange={onStepChange}\n                sx={{\n                  position: 'absolute',\n                  top: theme.spacing(2),\n                  left: theme.spacing(2),\n                }}\n              />\n              {loginForm}\n            </Box>\n          </>\n        }\n        rightContent={\n          <Box\n            sx={{\n              py: 10,\n              height: '100%',\n              background:\n                \"url('https://s3.amazonaws.com/static.synapse.org/images/login-panel-bg.svg') no-repeat right bottom 20px\",\n            }}\n          >\n            <Box\n              sx={{\n                py: 10,\n                px: 9,\n                color: '#1e4964',\n              }}\n            >\n              {step === 'VERIFICATION_CODE' && (\n                <>\n                  <Typography variant=\"headline1\" sx={{ mb: 4 }}>\n                    Enter your verification code\n                  </Typography>\n                  <Typography variant={'headline2'} sx={{ lineHeight: '30px' }}>\n                    Enter the 6-digit, time-based verification code provided by\n                    your authenticator app.\n                  </Typography>\n                </>\n              )}\n              {step === 'RECOVERY_CODE' && (\n                <>\n                  <Typography variant=\"headline1\" sx={{ mb: 4 }}>\n                    Enter your backup code\n                  </Typography>\n                  <Typography variant={'headline2'} sx={{ lineHeight: '30px' }}>\n                    {BACKUP_CODE_INFO_JSX}\n                  </Typography>\n                </>\n              )}\n              {step !== 'VERIFICATION_CODE' && step !== 'RECOVERY_CODE' && (\n                <>\n                  <Tagline variant=\"headline2\">\n                    <strong>Organize</strong> your digital research assets.\n                  </Tagline>\n                  <Tagline variant=\"headline2\">\n                    <strong>Get credit</strong> for your research.\n                  </Tagline>\n                  <Tagline variant=\"headline2\">\n                    <strong>Collaborate</strong> with your colleagues and the\n                    public.\n                  </Tagline>\n                </>\n              )}\n            </Box>\n          </Box>\n        }\n      />\n    )\n  } else {\n    return (\n      <Box\n        sx={{\n          px: 0,\n          py: 12,\n          height: '95vh',\n          background:\n            \"#fff url('https://s3.amazonaws.com/static.synapse.org/images/SynapseMobileLogInFull.svg') 50% 50%\",\n          backgroundSize: 'contain',\n        }}\n      >\n        {loginForm}\n      </Box>\n    )\n  }\n}\n","import { Meta, StoryObj } from '@storybook/react';\nimport LoginPage from '../src/lib/containers/auth/LoginPage';\nimport { sessionChangeHandler } from '../src/lib/containers/StorybookComponentWrapper';\nimport { displayToast } from '../src/lib/containers/ToastMessage';\nconst meta = ({\n  title: 'Authentication/LoginPage',\n  component: LoginPage\n} satisfies Meta);\nexport default meta;\ntype Story = StoryObj<typeof meta>;\nexport const Demo: Story = {\n  args: {\n    sessionCallback: () => {\n      sessionChangeHandler().then(({\n        profile\n      }) => {\n        displayToast(`You are currently logged in as ${profile.userName}`, 'info', {\n          autoCloseInMs: 5000\n        });\n      });\n    }\n  }\n};\nDemo.parameters = {\n  ...Demo.parameters,\n  docs: {\n    ...Demo.parameters?.docs,\n    source: {\n      originalSource: \"{\\n  args: {\\n    sessionCallback: () => {\\n      sessionChangeHandler().then(({\\n        profile\\n      }) => {\\n        displayToast(`You are currently logged in as ${profile.userName}`, 'info', {\\n          autoCloseInMs: 5000\\n        });\\n      });\\n    }\\n  }\\n}\",\n      ...Demo.parameters?.docs?.source\n    }\n  }\n};"],"names":["StyledOuterContainer","styled","Box","StyledInnerContainer","Paper","theme","LeftRightPanel","leftContent","rightContent","className","jsx","jsxs","LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE","LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION","LOST_ACCOUNT_ACCESS_CONTACT_URL","Tagline","Typography","BACKUP_CODE_INFO_JSX","Fragment","Link","LoginPage","props","ssoRedirectUrl","sessionCallback","showDesktop","useShowDesktop","useTheme","step","onStepChange","submitUsernameAndPassword","submitOneTimePassword","errorMessage","isLoading","useLogin","loginForm","Stack","LoginFlowBackButton","LoginForm","meta","Demo","sessionChangeHandler","profile","displayToast","_a","_c","_b"],"mappings":"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"}