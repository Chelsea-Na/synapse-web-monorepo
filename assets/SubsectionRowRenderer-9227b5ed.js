import{a as y,j as e,F as E}from"./jsx-runtime-095bf462.js";import{r as q}from"./index-8db94870.js";import{p as x,g as D}from"./SqlFunctions-a455e0de.js";import{B as A}from"./SynapseConstants-86492207.js";import"./getEndpoint-ac94413e.js";import{z as u,u as M,x as j}from"./SynapseClient-b65fe3d4.js";import{u as K}from"./use-deep-compare-effect.esm-7a830988.js";import{b as L}from"./ConfirmationDialog-94eb763d.js";import{S as O}from"./SkeletonTable-c2ad006d.js";import{T as U}from"./Typography-c5b8eeae.js";const Q=[u.BOOLEAN_LIST,u.DATE_LIST,u.ENTITYID_LIST,u.INTEGER_LIST,u.STRING_LIST],V=({sql:d,searchParams:_,sqlOperator:R,isMarkdown:p=!1,columnLink:l,friendlyValuesMap:g,columnNameIsSectionTitle:h=!1,limit:k,additionalFiltersLocalStorageKey:C})=>{const{accessToken:T}=M(),[o,F]=q.useState(),[b,w]=q.useState();let v=!0;K(()=>(async function(){var a;w(!0);const t=x(d),c=D(C??t,_,R),i={partMask:A,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:d,limit:k,additionalFilters:c}},s=await j.getQueryTableResults(i,T);w(!1);const n=(a=s==null?void 0:s.queryResult)==null?void 0:a.queryResults;n?v&&F(n):console.log("SubsectionRowRenderer: Error getting data")}(),()=>{v=!1}),[d,T,_,R]);const f=r=>{if(!g)return r;const t=g[r];return t||r};return y("div",{className:"SubsectionRowRenderer bootstrap-4-backport",children:[b&&e(O,{numRows:2,numCols:1}),!b&&o&&o.rows.length>0&&o.headers.map((r,t)=>l&&r.name==l.linkColumnName?e(E,{}):y("div",{className:"SubsectionRowRenderer__item",role:"table",children:[e(U,{variant:h?"sectionTitle":"subsectionHeader",role:"heading",children:r.name}),h&&e("hr",{}),e("div",{role:"rowgroup",children:o.rows.map((c,I)=>{const i=c.values[t];if(!i)return e(E,{});let s;if(Q.includes(r.columnType))s=JSON.parse(i).map((a,m)=>y("div",{className:"SubsectionRowRenderer__item__value",role:"row",children:[p&&e(L,{markdown:f(a)}),!p&&e("p",{children:f(a)})]},m));else{let n;const a=f(i);if(p)n=e(L,{markdown:a});else if(l&&l.matchColumnName==r.name){const m=o.headers.findIndex(S=>S.name==l.linkColumnName),N=c.values;N.some(S=>S===null)&&console.warn("Row has null value(s) when no nulls expected"),m>-1?n=e("a",{rel:"noopener noreferrer",target:"_blank",href:N[m],children:a}):n=e("p",{children:a})}else n=e("p",{children:a});s=e("div",{className:"SubsectionRowRenderer__item__value",role:"row",children:n},I)}return s})})]},`${t}`))]})};try{V.displayName="SubsectionRowRenderer",V.__docgenInfo={description:"",displayName:"SubsectionRowRenderer",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},isMarkdown:{defaultValue:{value:"false"},description:"",name:"isMarkdown",required:!1,type:{name:"boolean"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},columnLink:{defaultValue:null,description:"",name:"columnLink",required:!1,type:{name:"ColumnSpecifiedLink"}},friendlyValuesMap:{defaultValue:null,description:"",name:"friendlyValuesMap",required:!1,type:{name:"FriendlyValuesMap"}},columnNameIsSectionTitle:{defaultValue:{value:"false"},description:"",name:"columnNameIsSectionTitle",required:!1,type:{name:"boolean"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},additionalFiltersLocalStorageKey:{defaultValue:null,description:"",name:"additionalFiltersLocalStorageKey",required:!1,type:{name:"string"}}}}}catch{}export{V as S};
//# sourceMappingURL=SubsectionRowRenderer-9227b5ed.js.map
