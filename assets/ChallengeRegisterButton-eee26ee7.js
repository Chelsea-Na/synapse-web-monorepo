import{j as a,a as R}from"./jsx-runtime-095bf462.js";import{r as o}from"./index-8db94870.js";import{d as q}from"./ExitToApp-a639372d.js";import{S as u}from"./SpinnerButton-566fd5cb.js";import{A as C}from"./SynapseConstants-351603e3.js";import"./getEndpoint-ac94413e.js";import{a as B,f as O}from"./SynapseClient-d7c1516f.js";import"./EntityTypeUtils-f74aaf53.js";import{u as j,B as k}from"./useGetEntityChallenge-00e5aec5.js";import{u as N}from"./useGetUserTeams-8726a891.js";import{u as U}from"./useTeamMembers-b25b5e5e.js";const v="",x=({projectId:f,onChallengeError:l,onJoinClick:c,onLeaveClick:m})=>{const{accessToken:p}=B(),[b,y]=o.useState(!1),[_,E]=o.useState(!1),[s,w]=o.useState(),[n,g]=o.useState(),[S,h]=o.useState(!1),[I,L]=o.useState(!1),[T,i]=o.useState(!0),[d,r]=o.useState();return o.useEffect(()=>{if(n){const e=n.ownerId!==C.toString(),t=n.ownerId===C.toString();y(e),E(t)}},[n]),o.useEffect(()=>{g(void 0)},[p]),o.useEffect(()=>{d&&l&&l(d)},[d,l]),O({enabled:!_&&!n,onSettled:(e,t)=>{e&&g(e),t&&(i(!1),r(t))}}),j(f,{enabled:b&&!s,onSettled:(e,t)=>{e&&w(e),t&&(i(!1),r(t))}}),U((s==null?void 0:s.participantTeamId)??v,(n==null?void 0:n.ownerId)??v,{enabled:!!s&&!!n,onSettled:(e,t)=>{e===null&&(h(!1),i(!1)),e!==null&&h(!0),t&&(i(!1),r(t))}}),N((s==null?void 0:s.id)??"0",500,{enabled:!!s&&!!p,onSettled:(e,t)=>{e&&L(e.results.length>0),t&&r(t),i(!1)}}),T?a(u,{showSpinner:!0,children:"Loading..."}):R(k,{children:[(!S||!I)&&a(u,{disableElevation:!0,variant:"contained",color:"secondary",onClick:()=>c?c():void 0,sx:{color:"white",fontSize:"1.12em",textTransform:"none",padding:"4px 18px",fontWeight:400,":hover":{color:"white"},":active":{color:"white"},":visited":{color:"white"}},children:"Register for this Challenge"}),S&&I&&a(u,{disableElevation:!0,variant:"outlined",endIcon:a(q,{}),onClick:()=>m?m():void 0,sx:{borderColor:"white",color:"white",fontSize:"1.12em",textTransform:"none",padding:"4px 18px",fontWeight:400,":hover":{color:"#172430",borderColor:"#172430"}},children:"Leave Challenge"})]})};try{x.displayName="ChallengeRegisterButton",x.__docgenInfo={description:"",displayName:"ChallengeRegisterButton",props:{projectId:{defaultValue:null,description:"",name:"projectId",required:!0,type:{name:"string"}},onChallengeError:{defaultValue:null,description:"",name:"onChallengeError",required:!1,type:{name:"((error: SynapseClientError) => void)"}},onJoinClick:{defaultValue:null,description:"",name:"onJoinClick",required:!1,type:{name:"(() => void)"}},onLeaveClick:{defaultValue:null,description:"",name:"onLeaveClick",required:!1,type:{name:"(() => void)"}}}}}catch{}export{x as C};
//# sourceMappingURL=ChallengeRegisterButton-eee26ee7.js.map
