import{l as c}from"./index-49fe5bbe.js";import{g as w}from"./entityHandlers-a7facfba.js";import{g as E,a as U}from"./userProfileHandlers-d25b369a.js";import{g as A,B as M}from"./getEndpoint-ac94413e.js";import{g as P,a as B,b as $}from"./accessRequirementHandlers-7715d5c7.js";import{g as v}from"./wikiHandlers-8fdbdf66.js";import{a as F,g as x}from"./fileHandlers-8f67d20a.js";import{g as V}from"./researchProjectHandlers-48a5535c.js";import{bL as C,bM as _,ap as m}from"./SynapseClient-c9a5bd80.js";import{m as K,b as D,d as g,M as N}from"./mock_user_profile-e2535b93.js";import{f as r,p as k,b as W}from"./mockProject-2af0e263.js";import{t as L}from"./times-ac139058.js";function q(e){return{id:String(r.number.int()),etag:r.string.uuid(),...e}}function G(e){return{id:String(r.number.int()),activeAuthors:K.map(t=>String(t.id)),createdBy:String(k().id),createdOn:r.date.anytime().toISOString(),etag:r.string.uuid(),isDeleted:!1,isEdited:!1,isPinned:!1,lastActivity:r.date.anytime().toISOString(),messageKey:`${r.number.int()}/${r.number.int()}/${r.string.uuid()}`,modifiedOn:r.date.anytime().toISOString(),numberOfReplies:r.number.int({max:500}),numberOfViews:r.number.int({max:5e3}),title:r.lorem.words({min:2,max:8}),...e}}const z="984321189",b=W.map(e=>q({projectId:e.id})),J=b.flatMap(e=>L(10).map(t=>G({forumId:e.id,projectId:e.projectId}))),l={id:"999",forumId:z,projectId:"123",title:"mockTitle1",createdOn:"2022-09-28",createdBy:D.ownerId,modifiedOn:"2022-09-28",etag:"xxx",messageKey:"xxx",numberOfViews:2,numberOfReplies:3,lastActivity:"2022-09-28",activeAuthors:[D.ownerId,g.ownerId],isEdited:!1,isDeleted:!1,isPinned:!1},Q={...l,id:"888",projectId:"12",title:"mockTitle2",createdBy:g.ownerId,numberOfViews:14,numberOfReplies:3};({...l,createdBy:g.ownerId,threadId:l.id});const h=[...J,l,Q];function X(e){return[c.rest.get(`${e}${C}/:id`,async(t,a,s)=>{let o=404,n={reason:`MSW could not find a mock forum object with ID ${t.params.id}`};const i=b.find(d=>d.id===t.params.id);return i&&(o=200,n=i),a(s.status(o),s.json(n))}),c.rest.get(`${e}${_}/:id`,async(t,a,s)=>{let o=404,n={reason:`MSW could not find a mock discussion thread bundle object with ID ${t.params.id}`};t.params.id==="messageUrl"&&(n={reason:"GET /thread/messageUrl is not yet implemented"});const i=h.find(d=>d.id===t.params.id);return i&&(o=200,n=i),a(s.status(o),s.json(n))})]}function j(e){return{subscriptionId:String(r.number.int({min:1e3,max:9999})),subscriberId:String(N),createdOn:r.date.anytime().toISOString(),...e}}const R=b.map(e=>j({objectId:e.id,objectType:m.FORUM})),S=h.map(e=>j({objectType:m.THREAD,objectId:e.id}));function Y(e){return[c.rest.get(`${e}/repo/v1/subscription/all`,async(t,a,s)=>{const o=t.url.searchParams.get("objectType"),n=t.url.searchParams.get("sortDirection"),i=t.url.searchParams.get("offset"),d=t.url.searchParams.get("limit");let u=[];o===m.FORUM?u=R:o===m.THREAD&&(u=S);const p=u.length;n&&(u=u.sort((O,H)=>{const y=new Date(H.createdOn).getTime()-new Date(O.createdOn).getTime();return n==="ASC"?y:-1*y}));let f=0,I;i&&(f=parseInt(i)),d&&(I=parseInt(d)),u=u.slice(f,f+(I??0));const T={results:u,totalNumberOfResults:p};return a(s.status(200),s.json(T))}),c.rest.post(`${e}/repo/v1/subscription/list`,async(t,a,s)=>{const o=await t.json(),n=o.objectType;let i=[];n===m.FORUM?i=R:n===m.THREAD&&(i=S),i.filter(p=>o.idList.includes(p.subscriptionId));const d=i.length,u={results:i,totalNumberOfResults:d};return a(s.status(200),s.json(u))})]}const Z=e=>[c.rest.options("*",async(t,a,s)=>a(s.status(200))),c.rest.get(`${e}/auth/v1/authenticatedOn`,async(t,a,s)=>a(s.status(200),s.json({authenticatedOn:new Date().toISOString()}))),...w(e),...E(e),U(e,!0,!0),...v(e),...P(e),...B(),...$(e),...F(e),...V(e),...x(e),...X(e),...Y(e)];Z(A(M.REPO_ENDPOINT));export{Z as g};
//# sourceMappingURL=handlers-dfcd1350.js.map
