import{j as t,a as n}from"./jsx-runtime-095bf462.js";import{r as g}from"./index-8db94870.js";import{u as D,aM as T,aR as U,aV as F}from"./SynapseClient-e7496728.js";import{w as H,n as A}from"./SynapseConstants-80104a60.js";import"./getEndpoint-ac94413e.js";import{u as Q}from"./useShowDesktop-4eaeb2a6.js";import{g as c}from"./queryUtils-884dba97.js";import{a as j}from"./useGetQueryResultBundle-ceaf037a.js";import{E as B}from"./ExpandableContent-f545efb6.js";import{Q as k}from"./QueryCount-adbc3c26.js";import{B as I}from"./Button-ff2bc4b7.js";function h({link:r,summary:l,countSql:i,title:o}){return t(B,{title:n("div",{className:"Goals__Mobile__Header",children:[i&&t("span",{className:"Goals__Mobile__Header__Count",children:t(k,{parens:!1,query:{sql:i}})}),n("span",{className:"Goals__Mobile__Header__Title",children:[" ",o," "]})]}),content:n("div",{className:"Goals__Mobile__Content",children:[t("p",{children:l}),t(I,{variant:"contained",color:"secondary",className:"Goals__Mobile__Content__Link",href:r,children:"Explore"})]})})}try{h.displayName="GoalsMobile",h.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}function q({asset:r,link:l,summary:i,countSql:o,title:m}){return n("div",{className:"Goals__Card",children:[t("div",{className:"Goals__Card__header",style:{background:`url('${r}')`},children:n("p",{children:[n("span",{className:"Goals__Card__header__title",children:[" ",m," "]}),o&&t("span",{className:"Goals__Card__header__count",children:t(k,{parens:!1,query:{sql:o}})})]})}),n("div",{className:"Goals__Card__summary",children:[n("p",{children:[" ",i," "]}),t(I,{className:"Goals__Card__summary__link",variant:"contained",color:"secondary",href:l,children:"Explore"})]})]})}try{q.displayName="GoalsDesktop",q.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}const b=r=>{const{entityId:l}=r,{accessToken:i}=D(),[o,m]=g.useState(),[p,G]=g.useState(),C=Q(),v={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:l,partMask:H|A,query:{sql:`select * from ${l} order by ItemOrder`}},{data:e}=j(v);g.useEffect(()=>{(async()=>{try{const d=c("Asset",e),s=(e==null?void 0:e.queryResult.queryResults.rows.map(a=>a.values[d]))??[];if(s.some(a=>a===null)&&console.warn("Row has null value(s) when no nulls expected"),s.length===0)return;const u={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:s.map(a=>({associateObjectId:l,associateObjectType:U.TableEntity,fileHandleId:a}))},f=await F(u,i);G(void 0),m(f.requestedFiles.filter(a=>a.preSignedURL!==void 0).map(a=>a.preSignedURL))}catch(d){console.error("Error on get data",d),G(d)}})()},[l,i,e]);const E=c("TableId",e),_=c("CountSql",e),x=c("Title",e),R=c("Summary",e),w=c("Link",e);return n("div",{className:`Goals${C?"__Desktop":""}`,children:[p&&t(T,{error:p}),e==null?void 0:e.queryResult.queryResults.rows.map((N,d)=>{const s=N.values;s.some(V=>V===null)&&console.warn("Row has null value(s) when no nulls expected");const y=E>-1?s[E]:void 0;let u;_>-1&&s[_]?u=s[_]:y&&(u=`SELECT * FROM ${y}`);const f=s[x],a=s[R],L=s[w],M=(o==null?void 0:o[d])??"",S={countSql:u,title:f,summary:a,link:L,asset:M};return C?t(q,{...S}):t(h,{...S})})]})};try{b.displayName="Goals",b.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}export{b as G};
//# sourceMappingURL=Goals-c4be1ad9.js.map
