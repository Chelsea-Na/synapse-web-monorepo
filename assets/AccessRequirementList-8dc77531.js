var Xv=Object.defineProperty;var Qv=(e,t,n)=>t in e?Xv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var me=(e,t,n)=>(Qv(e,typeof t!="symbol"?t+"":t,n),n);import{j as p,a as O,F as j}from"./jsx-runtime-ad672792.js";import{r as I,R as $}from"./index-f1f749bf.js";import{aD as jp,w as ie,aE as Zv,aF as Xn,aG as Kv,aH as Wp,aI as tc,aJ as Jv,aK as br,aL as ey,aM as ty,aN as nc,aO as ny,Z as Le,aP as ry,T as Gp,e as fs,aQ as ay,G as Yp,y as oy,aR as mu,aS as Pr,aT as Qn,aU as Xp,aV as iy,Y as Qp,aW as sy,aX as ly,aY as rc,aZ as Zp,a1 as Kp,a_ as In,a$ as cy,V as Dn,B as Jp,b0 as eh,b1 as th,b2 as uy,b3 as gu,b4 as nh,b5 as dy,b6 as fy,b7 as py,W as rh,b8 as hy,b9 as my,M as ah,ba as gy,bb as vy,bc as oh,bd as lo,be as ih,bf as yy,bg as by,bh as wy,bi as Cy,bj as Sy,bk as Ey,bl as _y,bm as xy,X as Ny,bn as Iy}from"./SynapseContext-1c9e8220.js";import{P as We,g as Ty,B as ky}from"./getEndpoint-5374ab4d.js";import{u as sh}from"./useGetInfoFromIds-21bef76b.js";import{I as ce,H as Ry,S as Oy,t as Ay}from"./IconSvg-0c61ea2c.js";import{S as qy}from"./StandaloneLoginForm-c2e7ff5f.js";import{d as Ly,c as mn,T as tt}from"./Clear-55e06940.js";import{B as dt}from"./Button-7d415009.js";import{A as lh,T as Py,M as Dy,S as _a,j as Dr,k as Mr,l as ac,m as My,n as Vy,o as oc,p as ic,c as ch,q as sc,r as lc,B as cc,b as uc,s as $y,t as uh,O as ps,u as vu,G as Fy,F as By,v as yu,U as zy,a as Hy}from"./SynapseConstants-c11fd777.js";import{S as co,l as dh}from"./LoadingScreen-c3ef81a7.js";import{u as Uy,U as Mn,a as dc,g as jy}from"./UserCard-503957e2.js";import{A as gn}from"./Alert-84d62a08.js";import{p as Wy,S as fh,D as Gy}from"./RegularExpressions-bc0adf55.js";import{u as Zn}from"./react-intersection-observer.modern-5866bfdc.js";import{u as ph}from"./useInfiniteQuery-81bc7454.js";import{f as wr}from"./DateFormatter-6340bc5a.js";import{d as Xt}from"./dayjs.min-e0adaab4.js";import{S as fc}from"./SkeletonTable-7d243484.js";import{S as hs}from"./Skeleton-3a50b3e0.js";import{T as At}from"./Typography-7519d429.js";import{E as bu}from"./EntityIcon-cf233242.js";import{c as uo,g as Yy}from"./_commonjsHelpers-042e6b4d.js";import{c as fo}from"./_commonjs-dynamic-modules-302442b1.js";import{_ as Xy,a as Qy,b as Zy,k as Ky,c as Jy}from"./uniq-b503d6a4.js";import{r as hh,f as eb}from"./index.browser-7a1de4f7.js";import{f as mh,_ as gh,a as tb,b as nb,c as rb,d as ab,e as ob,g as ib,l as sb,s as lb,F as cb}from"./core.esm-08cdfe54.js";import{b as vn,r as ub,c as db,a as fb,_ as pb,k as pc,d as hb}from"./_baseIteratee-dd2a3782.js";import{b as Vr,D as mb,E as vh,l as gb,v as vb,m as yh,h as yb,i as bh,w as bb,k as wb,F as Cb,C as wh,G as Sb}from"./hasIn-6ae41e3d.js";import{i as Eb,u as _b,p as xb,f as Nb,C as Ib}from"./CustomSelectWidget-ef3541f2.js";import{i as Tb}from"./isString-b52675be.js";import{_ as kb,a as Rb}from"./_baseUniq-7e37c67e.js";import{t as Ob,r as Ab}from"./now-030ccb2b.js";import{m as qb}from"./mapValues-1c647352.js";import{r as Lb}from"./index-96c5f47c.js";import{C as Ch,d as Qt}from"./ToastMessage-8a4a525a.js";import{B as je}from"./Button-5da6eef4.js";import{d as Pb,s as Db}from"./union-43d319b4.js";import{i as Mb}from"./isEqual-97aef6b7.js";import{_ as po}from"./objectWithoutPropertiesLoose-4f48578a.js";import{_ as xe}from"./extends-98964cd2.js";import{a as hc,g as mc,s as Kt,x as Ot,u as gc,c as xa,b as vc,y as Sn}from"./styled-ff065be4.js";import{k as Sh,c as Eh}from"./emotion-react.browser.esm-d0daa96f.js";import{c as Vb,P as $b}from"./factory-83f07b08.js";import{p as yn,g as yc,a as Fb}from"./sqlFunctions-264b8cff.js";import{u as ho}from"./useEntity-3a70b169.js";import{T as Na,N as Bb,I as wu}from"./SynapseTableConstants-942d2b0b.js";import{S as Ro,Q as Kn,a as Jn,u as Vt,b as qt,c as zb,d as Hb,e as bc,N as Ia,f as wc,g as Ub,T as _h,h as jb,E as Wb,i as Gb,j as Yb,k as xh,l as Xb,F as Qb,m as Zb,n as Nh}from"./FacetNav-1a871e5c.js";import{r as Kb}from"./relativeTime-93b00284.js";import{u as Cu}from"./use-deep-compare-effect.esm-2b920fea.js";import{b as Jb,c as ew}from"./useDownloadList-4394037e.js";import{a as Ih,b as tw,u as nw}from"./useGetQueryResultBundle-2327db36.js";import{M as Je,a as rw,b as aw}from"./Modal-6ffa84ac.js";import{i as ow,r as iw,h as sw}from"./queryUtils-bf02e297.js";import{C as re}from"./ColumnType-5116adf5.js";import{i as lw,a as cw,C as uw,b as dw}from"./QueryFilter-bbc0aec9.js";import{E as Cc,I as mo,C as Sc,a as fw,S as pw}from"./ElementWithTooltip-f35725e8.js";import{D as Wt}from"./Dropdown-fe0fb5f2.js";import{Q as hw}from"./QueryCount-c5314da9.js";import{S as mw}from"./SvgIcon-ed1b2f06.js";import{c as sr}from"./cloneDeep-6c099e3c.js";import{S as gw}from"./react-select.esm-9cf201a4.js";import{I as vw}from"./IconList-99054850.js";import{U as yw}from"./UserCardList-16e98235.js";import{u as Th}from"./useAccessRequirements-ed158043.js";import{a as Ec,R as bw}from"./RestrictionInformation-4ed2591e.js";import{D as Vn}from"./DialogTitle-e0a7d646.js";import{S as $r}from"./Stack-60ddb7e2.js";import{B as Fr}from"./Box-b7c6e0f8.js";import{I as Br}from"./IconButton-f574beef.js";import{D as $n,a as go,b as ww}from"./DialogContent-b66fe0a3.js";import{S as Ve}from"./ManagedACTAccessRequirementStatus-9671fe8d.js";import{F as ge}from"./Form-532b074a.js";import{F as Oo}from"./FileUpload-fdcd3952.js";import{U as Cw}from"./UserSearchBox-d93d4d15.js";import{R as Sw}from"./RadioGroup-2b4593e6.js";import{u as kh}from"./useTheme-16c0fb65.js";import{E as ms}from"./EntityLink-97e47fda.js";import{C as Ew}from"./Checkbox-9c5dca81.js";import{B as _w}from"./ButtonBase-4fdac2d3.js";import{e as Qr}from"./_MapCache-c47e0ef4.js";import{u as xw,U as Nw}from"./UserOrTeamBadge-0eef46f6.js";import{S as Iw}from"./SynapseVideo-45ccf3b0.js";var _c=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(_c||{}),Tw=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(Tw||{}),xt=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(xt||{});const kw="org.sagebionetworks.repo.model.file.GoogleCloudFileHandle",Rw="org.sagebionetworks.repo.model.file.S3FileHandle",xc=jp(Rw,kw),Ow="org.sagebionetworks.repo.model.file.ExternalFileHandle",Aw="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",qw="org.sagebionetworks.repo.model.file.ProxyFileHandle",Lw=jp(qw,Aw,Ow),Pw=e=>{const t=I.useRef();return I.useEffect(()=>{t.current=e}),t.current},Dw=e=>Pw(e)!==e;function Mw(e){return hc("MuiCircularProgress",e)}mc("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Vw=["className","color","disableShrink","size","style","thickness","value","variant"];let vo=e=>e,Su,Eu,_u,xu;const Ft=44,$w=Sh(Su||(Su=vo`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Fw=Sh(Eu||(Eu=vo`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Bw=e=>{const{classes:t,variant:n,color:r,disableShrink:a}=e,o={root:["root",n,`color${Ot(r)}`],svg:["svg"],circle:["circle",`circle${Ot(n)}`,a&&"circleDisableShrink"]};return vc(o,Mw,t)},zw=Kt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Ot(n.color)}`]]}})(({ownerState:e,theme:t})=>xe({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Eh(_u||(_u=vo`
      animation: ${0} 1.4s linear infinite;
    `),$w)),Hw=Kt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Uw=Kt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Ot(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>xe({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Eh(xu||(xu=vo`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Fw)),jw=I.forwardRef(function(t,n){const r=gc({props:t,name:"MuiCircularProgress"}),{className:a,color:o="primary",disableShrink:i=!1,size:s=40,style:l,thickness:u=3.6,value:c=0,variant:d="indeterminate"}=r,f=po(r,Vw),m=xe({},r,{color:o,disableShrink:i,size:s,thickness:u,value:c,variant:d}),h=Bw(m),g={},v={},S={};if(d==="determinate"){const _=2*Math.PI*((Ft-u)/2);g.strokeDasharray=_.toFixed(3),S["aria-valuenow"]=Math.round(c),g.strokeDashoffset=`${((100-c)/100*_).toFixed(3)}px`,v.transform="rotate(-90deg)"}return p(zw,xe({className:xa(h.root,a),style:xe({width:s,height:s},v,l),ownerState:m,ref:n,role:"progressbar"},S,f,{children:p(Hw,{className:h.svg,ownerState:m,viewBox:`${Ft/2} ${Ft/2} ${Ft} ${Ft}`,children:p(Uw,{className:h.circle,style:g,ownerState:m,cx:Ft,cy:Ft,r:(Ft-u)/2,fill:"none",strokeWidth:u})})}))}),Ww=jw;function Gw(e){return hc("MuiPagination",e)}mc("MuiPagination",["root","ul","outlined","text"]);const Yw=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Xw(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:a=1,disabled:o=!1,hideNextButton:i=!1,hidePrevButton:s=!1,onChange:l,page:u,showFirstButton:c=!1,showLastButton:d=!1,siblingCount:f=1}=e,m=po(e,Yw),[h,g]=Ly({controlled:u,default:a,name:n,state:"page"}),v=(N,k)=>{u||g(k),l&&l(N,k)},S=(N,k)=>{const A=k-N+1;return Array.from({length:A},(q,L)=>N+L)},_=S(1,Math.min(t,r)),w=S(Math.max(r-t+1,t+1),r),C=Math.max(Math.min(h-f,r-t-f*2-1),t+2),b=Math.min(Math.max(h+f,t+f*2+2),w.length>0?w[0]-2:r-1),y=[...c?["first"]:[],...s?[]:["previous"],..._,...C>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...S(C,b),...b<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...w,...i?[]:["next"],...d?["last"]:[]],E=N=>{switch(N){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return r;default:return null}},x=y.map(N=>typeof N=="number"?{onClick:k=>{v(k,N)},type:"page",page:N,selected:N===h,disabled:o,"aria-current":N===h?"true":void 0}:{onClick:k=>{v(k,E(N))},type:N,page:E(N),selected:!1,disabled:o||N.indexOf("ellipsis")===-1&&(N==="next"||N==="last"?h>=r:h<=1)});return xe({items:x},m)}function Qw(e){return hc("MuiPaginationItem",e)}const Zw=mc("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Ke=Zw,Nu=mn(p("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Iu=mn(p("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Tu=mn(p("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ku=mn(p("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Kw=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Rh=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Ot(n.size)}`],n.variant==="text"&&t[`text${Ot(n.color)}`],n.variant==="outlined"&&t[`outlined${Ot(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},Jw=e=>{const{classes:t,color:n,disabled:r,selected:a,size:o,shape:i,type:s,variant:l}=e,u={root:["root",`size${Ot(o)}`,l,i,n!=="standard"&&`${l}${Ot(n)}`,r&&"disabled",a&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return vc(u,Qw,t)},e0=Kt("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rh})(({theme:e,ownerState:t})=>xe({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Ke.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),t0=Kt(_w,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rh})(({theme:e,ownerState:t})=>xe({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Ke.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ke.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ke.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Sn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Ke.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Sn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Ke.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>xe({},t.variant==="text"&&{[`&.${Ke.selected}`]:xe({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Ke.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Ke.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ke.selected}`]:xe({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Sn(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Sn(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Sn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ke.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Sn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Ke.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),n0=Kt("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>xe({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),r0=I.forwardRef(function(t,n){const r=gc({props:t,name:"MuiPaginationItem"}),{className:a,color:o="standard",component:i,components:s={},disabled:l=!1,page:u,selected:c=!1,shape:d="circular",size:f="medium",slots:m={},type:h="page",variant:g="text"}=r,v=po(r,Kw),S=xe({},r,{color:o,disabled:l,selected:c,shape:d,size:f,type:h,variant:g}),_=kh(),w=Jw(S),b=(_.direction==="rtl"?{previous:m.next||s.next||ku,next:m.previous||s.previous||Tu,last:m.first||s.first||Nu,first:m.last||s.last||Iu}:{previous:m.previous||s.previous||Tu,next:m.next||s.next||ku,first:m.first||s.first||Nu,last:m.last||s.last||Iu})[h];return h==="start-ellipsis"||h==="end-ellipsis"?p(e0,{ref:n,ownerState:S,className:xa(w.root,a),children:"…"}):O(t0,xe({ref:n,ownerState:S,component:i,disabled:l,className:xa(w.root,a)},v,{children:[h==="page"&&u,b?p(n0,{as:b,ownerState:S,className:w.icon}):null]}))}),a0=r0,o0=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],i0=e=>{const{classes:t,variant:n}=e;return vc({root:["root",n],ul:["ul"]},Gw,t)},s0=Kt("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),l0=Kt("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function c0(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const u0=I.forwardRef(function(t,n){const r=gc({props:t,name:"MuiPagination"}),{boundaryCount:a=1,className:o,color:i="standard",count:s=1,defaultPage:l=1,disabled:u=!1,getItemAriaLabel:c=c0,hideNextButton:d=!1,hidePrevButton:f=!1,renderItem:m=x=>p(a0,xe({},x)),shape:h="circular",showFirstButton:g=!1,showLastButton:v=!1,siblingCount:S=1,size:_="medium",variant:w="text"}=r,C=po(r,o0),{items:b}=Xw(xe({},r,{componentName:"Pagination"})),y=xe({},r,{boundaryCount:a,color:i,count:s,defaultPage:l,disabled:u,getItemAriaLabel:c,hideNextButton:d,hidePrevButton:f,renderItem:m,shape:h,showFirstButton:g,showLastButton:v,siblingCount:S,size:_,variant:w}),E=i0(y);return p(s0,xe({"aria-label":"pagination navigation",className:xa(E.root,o),ownerState:y,ref:n},C,{children:p(l0,{className:E.ul,ownerState:y,children:b.map((x,N)=>p("li",{children:m(xe({},x,{color:i,"aria-label":c(x.type,x.page,x.selected),shape:h,size:_,variant:w}))},N))})}))}),d0=u0,f0=mn(p("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckTwoTone"),p0=mn([p("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"},"0"),p("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"},"1")],"LockTwoTone"),h0=mn(p("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"WarningSharp");function m0(e,t){const{accessToken:n,keyFactory:r}=ie(),a={accessRequirementId:e};return ph(r.getApprovedSubmissionInfoQueryKey(a),async o=>await Zv({...a,nextPageToken:o.pageParam},n),{...t,getNextPageParam:o=>o.nextPageToken})}function Oh(e,t,n=lh,r){const{accessToken:a,keyFactory:o}=ie();return Xn(o.getEntityBundleQueryKey(e,t,n),()=>Kv(e,n,t,a),r)}function g0(e,t){const{accessToken:n,keyFactory:r}=ie();return Xn(r.getEntityChildrenQueryKey(e,!1),()=>Wp(e,n),t)}function dq(e,t){const{accessToken:n,keyFactory:r}=ie();return ph(r.getEntityChildrenQueryKey(e,!0),async a=>await Wp({...e,includeTotalChildCount:a.pageParam?!1:e.includeTotalChildCount,nextPageToken:a.pageParam},n,a.signal),{...t,getNextPageParam:a=>a.nextPageToken})}function v0(e,t){const{accessToken:n,keyFactory:r}=ie();return Xn(r.getEntityHeadersQueryKey(e),()=>tc(e,n),t)}function fq(e,t){const{accessToken:n,keyFactory:r}=ie();return Xn(r.getEntityHeaderQueryKey(e),()=>Jv(e,n),t)}function dn({isCompleted:e}){return p("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?p(f0,{}):p(p0,{})})}try{dn.displayName="AccessApprovalCheckMark",dn.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}}}catch{}var Cr={},y0={get exports(){return Cr},set exports(e){Cr=e}},Se={},Fn={},b0={get exports(){return Fn},set exports(e){Fn=e}},bn={};function Ah(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function w0(e,t,n){}function C0(e,t,n){}var S0=/javascript\s*\:/img;function E0(e,t){return S0.test(t)?"":t}bn.whiteList=Ah();bn.getDefaultWhiteList=Ah;bn.onAttr=w0;bn.onIgnoreAttr=C0;bn.safeAttrValue=E0;var _0={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},er=_0;function x0(e,t){e=er.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,a=0,o=0,i="";function s(){if(!r){var c=er.trim(e.slice(a,o)),d=c.indexOf(":");if(d!==-1){var f=er.trim(c.slice(0,d)),m=er.trim(c.slice(d+1));if(f){var h=t(a,i.length,f,m,c);h&&(i+=h+"; ")}}}a=o+1}for(;o<n;o++){var l=e[o];if(l==="/"&&e[o+1]==="*"){var u=e.indexOf("*/",o+2);if(u===-1)break;o=u+1,a=o+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return er.trim(i)}var N0=x0,Zr=bn,I0=N0;function Ru(e){return e==null}function T0(e){var t={};for(var n in e)t[n]=e[n];return t}function qh(e){e=T0(e||{}),e.whiteList=e.whiteList||Zr.whiteList,e.onAttr=e.onAttr||Zr.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Zr.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Zr.safeAttrValue,this.options=e}qh.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,a=n.onAttr,o=n.onIgnoreAttr,i=n.safeAttrValue,s=I0(e,function(l,u,c,d,f){var m=r[c],h=!1;if(m===!0?h=m:typeof m=="function"?h=m(d):m instanceof RegExp&&(h=m.test(d)),h!==!0&&(h=!1),d=i(c,d),!!d){var g={position:u,sourcePosition:l,source:f,isWhite:h};if(h){var v=a(c,d,g);return Ru(v)?c+":"+d:v}else{var v=o(c,d,g);if(!Ru(v))return v}}});return s};var k0=qh;(function(e,t){var n=bn,r=k0;function a(i,s){var l=new r(s);return l.process(i)}t=e.exports=a,t.FilterCSS=r;for(var o in n)t[o]=n[o];typeof window<"u"&&(window.filterCSS=e.exports)})(b0,Fn);var Nc={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},R0=Fn.FilterCSS,O0=Fn.getDefaultWhiteList,Ta=Nc;function Lh(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Ph=new R0;function A0(e,t,n){}function q0(e,t,n){}function L0(e,t,n){}function P0(e,t,n){}function Dh(e){return e.replace(M0,"&lt;").replace(V0,"&gt;")}function D0(e,t,n,r){if(n=zh(n),t==="href"||t==="src"){if(n=Ta.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Kr.lastIndex=0,Kr.test(n))return""}else if(t==="style"){if(Ou.lastIndex=0,Ou.test(n)||(Au.lastIndex=0,Au.test(n)&&(Kr.lastIndex=0,Kr.test(n))))return"";r!==!1&&(r=r||Ph,n=r.process(n))}return n=Hh(n),n}var M0=/</g,V0=/>/g,$0=/"/g,F0=/&quot;/g,B0=/&#([a-zA-Z0-9]*);?/gim,z0=/&colon;?/gim,H0=/&newline;?/gim,Kr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ou=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Au=/u\s*r\s*l\s*\(.*/gi;function Mh(e){return e.replace($0,"&quot;")}function Vh(e){return e.replace(F0,'"')}function $h(e){return e.replace(B0,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Fh(e){return e.replace(z0,":").replace(H0," ")}function Bh(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Ta.trim(t)}function zh(e){return e=Vh(e),e=$h(e),e=Fh(e),e=Bh(e),e}function Hh(e){return e=Mh(e),e=Dh(e),e}function U0(){return""}function j0(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(i){return n?!0:Ta.indexOf(e,i)!==-1}var a=[],o=!1;return{onIgnoreTag:function(i,s,l){if(r(i))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return a.push([o!==!1?o:l.position,c]),o=!1,u}else return o||(o=l.position),"[removed]";else return t(i,s,l)},remove:function(i){var s="",l=0;return Ta.forEach(a,function(u){s+=i.slice(l,u[0]),l=u[1]}),s+=i.slice(l),s}}}function W0(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var a=e.indexOf("-->",r);if(a===-1)break;n=a+3}return t}function G0(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Se.whiteList=Lh();Se.getDefaultWhiteList=Lh;Se.onTag=A0;Se.onIgnoreTag=q0;Se.onTagAttr=L0;Se.onIgnoreTagAttr=P0;Se.safeAttrValue=D0;Se.escapeHtml=Dh;Se.escapeQuote=Mh;Se.unescapeQuote=Vh;Se.escapeHtmlEntities=$h;Se.escapeDangerHtml5Entities=Fh;Se.clearNonPrintableCharacter=Bh;Se.friendlyAttrValue=zh;Se.escapeAttrValue=Hh;Se.onIgnoreTagStripAll=U0;Se.StripTagBody=j0;Se.stripCommentTag=W0;Se.stripBlankChar=G0;Se.cssFilter=Ph;Se.getDefaultCSSWhiteList=O0;var yo={},Ht=Nc;function Y0(e){var t=Ht.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=Ht.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function X0(e){return e.slice(0,2)==="</"}function Q0(e,t,n){var r="",a=0,o=!1,i=!1,s=0,l=e.length,u="",c="";e:for(s=0;s<l;s++){var d=e.charAt(s);if(o===!1){if(d==="<"){o=s;continue}}else if(i===!1){if(d==="<"){r+=n(e.slice(a,s)),o=s,a=s;continue}if(d===">"||s===l-1){r+=n(e.slice(a,o)),c=e.slice(o,s+1),u=Y0(c),r+=t(o,r.length,u,c,X0(c)),a=s+1,o=!1;continue}if(d==='"'||d==="'")for(var f=1,m=e.charAt(s-f);m.trim()===""||m==="=";){if(m==="="){i=d;continue e}m=e.charAt(s-++f)}}else if(d===i){i=!1;continue}}return a<l&&(r+=n(e.substr(a))),r}var Z0=/[^a-zA-Z0-9\\_:.-]/gim;function K0(e,t){var n=0,r=0,a=[],o=!1,i=e.length;function s(f,m){if(f=Ht.trim(f),f=f.replace(Z0,"").toLowerCase(),!(f.length<1)){var h=t(f,m||"");h&&a.push(h)}}for(var l=0;l<i;l++){var u=e.charAt(l),c,d;if(o===!1&&u==="="){o=e.slice(n,l),n=l+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:eC(e,l+1);continue}if(o!==!1&&l===r){if(d=e.indexOf(u,l+1),d===-1)break;c=Ht.trim(e.slice(r+1,d)),s(o,c),o=!1,l=d,n=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if(d=J0(e,l),d===-1){c=Ht.trim(e.slice(n,l)),s(c),o=!1,n=l+1;continue}else{l=d-1;continue}else if(d=tC(e,l-1),d===-1){c=Ht.trim(e.slice(n,l)),c=qu(c),s(o,c),o=!1,n=l+1;continue}else continue}return n<e.length&&(o===!1?s(e.slice(n)):s(o,qu(Ht.trim(e.slice(n))))),Ht.trim(a.join(" "))}function J0(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function eC(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function tC(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function nC(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function qu(e){return nC(e)?e.substr(1,e.length-2):e}yo.parseTag=Q0;yo.parseAttr=K0;var rC=Fn.FilterCSS,lt=Se,Uh=yo,aC=Uh.parseTag,oC=Uh.parseAttr,ga=Nc;function Jr(e){return e==null}function iC(e){var t=ga.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=ga.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=ga.trim(e.slice(0,-1))),{html:e,closing:n}}function sC(e){var t={};for(var n in e)t[n]=e[n];return t}function lC(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function jh(e){e=sC(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=lt.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=lC(e.whiteList||e.allowList):e.whiteList=lt.whiteList,e.onTag=e.onTag||lt.onTag,e.onTagAttr=e.onTagAttr||lt.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||lt.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||lt.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||lt.safeAttrValue,e.escapeHtml=e.escapeHtml||lt.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new rC(e.css))}jh.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,a=n.onTag,o=n.onIgnoreTag,i=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,u=n.escapeHtml,c=t.cssFilter;n.stripBlankChar&&(e=lt.stripBlankChar(e)),n.allowCommentTag||(e=lt.stripCommentTag(e));var d=!1;n.stripIgnoreTagBody&&(d=lt.StripTagBody(n.stripIgnoreTagBody,o),o=d.onIgnoreTag);var f=aC(e,function(m,h,g,v,S){var _={sourcePosition:m,position:h,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(r,g)},w=a(g,v,_);if(!Jr(w))return w;if(_.isWhite){if(_.isClosing)return"</"+g+">";var C=iC(v),b=r[g],y=oC(C.html,function(E,x){var N=ga.indexOf(b,E)!==-1,k=i(g,E,x,N);return Jr(k)?N?(x=l(g,E,x,c),x?E+'="'+x+'"':E):(k=s(g,E,x,N),Jr(k)?void 0:k):k});return v="<"+g,y&&(v+=" "+y),C.closing&&(v+=" /"),v+=">",v}else return w=o(g,v,_),Jr(w)?u(v):w},u);return d&&(f=d.remove(f)),f};var cC=jh;(function(e,t){var n=Se,r=yo,a=cC;function o(s,l){var u=new a(l);return u.process(s)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=a,function(){for(var s in n)t[s]=n[s];for(var l in r)t[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(y0,Cr);const Wh={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function gs(e){let t="pill-xl ";const{align:n="",highlight:r=""}=e,a=n.toLowerCase();a==="left"&&(t+="floatLeft "),a==="right"&&(t+="floatright ");const o=r==="true"?"secondary":"light-secondary";return a==="center"?p("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:p(dt,{href:e.url,className:t,variant:o,children:e.text})}):p("span",{className:"bootstrap-4-backport",children:p(dt,{href:e.url,className:t,variant:o,children:e.text})})}try{gs.displayName="MarkdownButton",gs.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}}}catch{}async function uC(e,t,n){const r=new Set;try{let a=await br(n,e,t);for(;ey(a);){if(r.has(a.id))throw new Error("Link forms a cycle.");r.add(a.id),a=await br(n,a.linksTo.targetId,a.linksTo.targetVersionNumber)}return a}catch(a){throw new Error(`${e} could not be resolved.
${a.message}`)}}function dC(e,t,n){const{accessToken:r}=ie();return Xn(["resolveLinkEntity",e,t],()=>uC(e,t,r),n)}function fC(e,t,n){const{accessToken:r,keyFactory:a}=ie();return Xn(a.getIsUserMemberOfTeamQueryKey(e,t),()=>ty(e,t,r),n)}function pC(e){const{rawHtml:t,isLoading:n,isTrusted:r}=e;return I.useMemo(()=>{if(!n)return r?t:Cr(t,Wh)},[n,r,t])}function vs(e){const{createdByUserId:t,rawHtml:n}=e,r=I.useRef(null),[a,o]=I.useState(100),{data:i,isLoading:s}=fC(Py,t),l=()=>{if(r!=null&&r.current&&(r!=null&&r.current.contentWindow)){let d=r.current.contentWindow.document.body.scrollHeight;d<450&&(d=450),(!a||Math.abs(d-a)>70)&&o(d+50)}};I.useEffect(()=>{setInterval(()=>{l()},500)},[n]);const c=pC({rawHtml:n,isLoading:s,isTrusted:!!i});return s?p(co,{}):O(j,{children:[n!==c&&p(gn,{variant:"info",dismissible:!1,show:!0,transition:!1,children:"Limited rendering only."}),p("iframe",{ref:r,srcDoc:c,height:`${a}px`,style:{border:0,width:"100%"}})]})}try{vs.displayName="HtmlPreview",vs.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}}}catch{}var Ce=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(Ce||{});const hC=30*Dy;function ka(e){const{fileHandle:t,fileHandleAssociation:n,previewType:r}=e,a={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:o,isLoading:i}=Uy(t,a,hC,{useErrorBoundary:!0});return i?p(co,{}):r===Ce.HTML?p(vs,{rawHtml:o,createdByUserId:t.createdBy}):(r!==Ce.NONE&&console.warn(`Rendering a preview of type ${r} is not supported in Portals`),p(j,{}))}try{ka.displayName="FileHandleContentRenderer",ka.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}}}catch{}const Gh=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],mC=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],gC=[".ogv",".ogg"],vC=[...mC,...gC,".webm"],yC=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],bC=[".md",".markdown",".rmd"];function wC(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function CC(e){if(!xc(e))return Ce.NONE;const t=wC(e.fileName);return t&&vC.includes(t)?Ce.VIDEO:t===".ipynb"?Ce.IPYNB:Gh.includes(e.contentType)?Ce.IMAGE:e.contentType==="text/html"?Ce.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?Ce.PDF:t&&yC.includes(t)?Ce.CODE:t&&bC.includes(t)?Ce.MARKDOWN:e.contentType==="image/tiff"?Ce.TIFF:Ce.NONE}function SC(e,t){const n=e.contentType;return xc(e)?Gh.includes(e.contentType)?Ce.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?Ce.ZIP:Ce.CSV:n.toLowerCase()==="text/tab-separated-values"?Ce.TAB:Ce.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?Ce.PDF:Ce.NONE:Ce.NONE}function ys(e){const{bundle:t}=e,{accessToken:n}=ie(),r=!!n;if(!nc(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const a=t.entity.dataFileHandleId,o=t.fileHandles.find(s=>s.id===a);if(!o&&!r)return p(gn,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:p(ny,{})});if(o){const s=CC(o);if(s!==Ce.NONE)return p(ka,{fileHandle:o,fileHandleAssociation:{fileHandleId:a,associateObjectId:t.entity.id,associateObjectType:Le.FileEntity},previewType:s})}const i=t.fileHandles.find(s=>xc(s)&&s.isPreview);if(i&&o){const s=SC(i,o);if(s!==Ce.NONE)return p(ka,{fileHandle:i,fileHandleAssociation:{fileHandleId:i.id,associateObjectId:t.entity.id,associateObjectType:Le.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{ys.displayName="FileEntityPreview",ys.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle"}}}}}catch{}function bs(e){const{entityId:t,versionNumber:n}=e,{data:r,isLoading:a}=dC(t,n),o=r&&nc(r),{data:i,isLoading:s}=Oh(r==null?void 0:r.id,r==null?void 0:r.versionNumber,lh,{enabled:!!o,useErrorBoundary:!0});if(a||s)return p(co,{});if(o)return p(ys,{bundle:i});throw new Error(`${t} is not a File and cannot be previewed.`)}try{bs.displayName="EntityPreview",bs.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function ws(e){const t=Wy(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt(e.versionNumber??""),r=t.targetId,a=Number.isNaN(n)?t.targetVersionNumber:n;return p(bs,{entityId:r,versionNumber:a})}try{ws.displayName="MarkdownEntityPreview",ws.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}}}catch{}const Cs=({info:e})=>p(j,{children:e&&O("p",{className:"SubmissionInfoCard",children:[p("strong",{children:" Project Lead: "})," ",p("span",{children:e.projectLead})," ",p("br",{}),p("strong",{children:" Institution: "})," ",p("span",{children:e.institution})," ",p("br",{}),p("strong",{children:" Data Access Request Submitted By: "})," ",p(Mn,{ownerId:e.submittedBy,size:_a})," ",p("br",{}),O("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",wr(Xt(e.modifiedOn),"M/D/YYYY"),"):"]}),p(Xe,{markdown:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>O("div",{children:[p(Mn,{ownerId:t.userId,size:_a})," ",t.type]},`${t.userId}-${t.type}`))]})}),Ra=()=>O("p",{className:"SubmissionInfoCard",children:[p(fc,{numCols:1,numRows:4}),p(hs,{variant:"rectangular",width:"100%",height:80})]});try{Cs.displayName="SubmissionInfoCard",Cs.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}}}catch{}try{Ra.displayName="LoadingSubmissionInfoCard",Ra.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}}}catch{}const Ss=e=>{const{accessRequirementId:t}=e,{ref:n,inView:r}=Zn(),{data:a,status:o,isLoading:i,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:u}=m0(t,{useErrorBoundary:!0});I.useEffect(()=>{o==="success"&&!l&&s&&u&&r&&u()},[o,s,l,u,r]);const c=(a==null?void 0:a.pages.flatMap(d=>d.results))??[];return O(j,{children:[c.length>0&&O("div",{className:"IDUReport",children:[c.map(d=>O($.Fragment,{children:[p(Cs,{info:d}),p("hr",{})]},JSON.stringify(d))),p("div",{ref:n})]}),(i||l)&&O(j,{children:[p(Ra,{}),p(Ra,{})]})]})};try{Ss.displayName="IDUReport",Ss.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}}}catch{}function Es(e){const{accessRestrictionId:t}=e;return p(Ss,{accessRequirementId:t})}try{Es.displayName="MarkdownIDUReport",Es.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}}}catch{}function EC(e){let t;const n=new Set,r=(u,c)=>{const d=typeof u=="function"?u(t):u;if(d!==t){const f=t;t=c?d:Object.assign({},t,d),n.forEach(m=>m(t,f))}},a=()=>t,o=(u,c=a,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(t);function m(){const h=c(t);if(!d(f,h)){const g=f;u(f=h,g)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:a,subscribe:(u,c,d)=>c||d?o(u,c,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=e(r,a,l),l}const _C=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Lu=_C?I.useEffect:I.useLayoutEffect;function xC(e){const t=typeof e=="function"?EC(e):e,n=(r=t.getState,a=Object.is)=>{const[,o]=I.useReducer(v=>v+1,0),i=t.getState(),s=I.useRef(i),l=I.useRef(r),u=I.useRef(a),c=I.useRef(!1),d=I.useRef();d.current===void 0&&(d.current=r(i));let f,m=!1;(s.current!==i||l.current!==r||u.current!==a||c.current)&&(f=r(i),m=!a(d.current,f)),Lu(()=>{m&&(d.current=f),s.current=i,l.current=r,u.current=a,c.current=!1});const h=I.useRef(i);Lu(()=>{const v=()=>{try{const _=t.getState(),w=l.current(_);u.current(d.current,w)||(s.current=_,d.current=w,o())}catch{c.current=!0,o()}},S=t.subscribe(v);return t.getState()!==h.current&&v(),S},[]);const g=m?f:d.current;return I.useDebugValue(g),g};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const a=r.length<=0;return{value:r.shift(),done:a}}}},n}function NC(){const e=I.createContext(void 0);return{Provider:({initialStore:a,createStore:o,children:i})=>{const s=I.useRef();return s.current||(a&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),o||(o=()=>a)),s.current=o()),I.createElement(e.Provider,{value:s.current},i)},useStore:(a,o=Object.is)=>{const i=I.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(a,o)},useStoreApi:()=>{const a=I.useContext(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return I.useMemo(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe,destroy:a.destroy}),[a])}}}var IC={value:()=>{}};function bo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new va(n)}function va(e){this._=e}function TC(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}va.prototype=bo.prototype={constructor:va,on:function(e,t){var n=this._,r=TC(e+"",n),a,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((a=(e=r[o]).type)&&(a=kC(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(a=(e=r[o]).type)n[a]=Pu(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Pu(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new va(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,o;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};function kC(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function Pu(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=IC,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var _s="http://www.w3.org/1999/xhtml";const Du={svg:"http://www.w3.org/2000/svg",xhtml:_s,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Du.hasOwnProperty(t)?{space:Du[t],local:e}:e}function RC(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_s&&t.documentElement.namespaceURI===_s?t.createElement(e):t.createElementNS(n,e)}}function OC(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yh(e){var t=wo(e);return(t.local?OC:RC)(t)}function AC(){}function Ic(e){return e==null?AC:function(){return this.querySelector(e)}}function qC(e){typeof e!="function"&&(e=Ic(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=new Array(i),l,u,c=0;c<i;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Ge(r,this._parents)}function LC(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function PC(){return[]}function Xh(e){return e==null?PC:function(){return this.querySelectorAll(e)}}function DC(e){return function(){return LC(e.apply(this,arguments))}}function MC(e){typeof e=="function"?e=DC(e):e=Xh(e);for(var t=this._groups,n=t.length,r=[],a=[],o=0;o<n;++o)for(var i=t[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&(r.push(e.call(l,l.__data__,u,i)),a.push(l));return new Ge(r,a)}function Qh(e){return function(){return this.matches(e)}}function Zh(e){return function(t){return t.matches(e)}}var VC=Array.prototype.find;function $C(e){return function(){return VC.call(this.children,e)}}function FC(){return this.firstElementChild}function BC(e){return this.select(e==null?FC:$C(typeof e=="function"?e:Zh(e)))}var zC=Array.prototype.filter;function HC(){return Array.from(this.children)}function UC(e){return function(){return zC.call(this.children,e)}}function jC(e){return this.selectAll(e==null?HC:UC(typeof e=="function"?e:Zh(e)))}function WC(e){typeof e!="function"&&(e=Qh(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=[],l,u=0;u<i;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Ge(r,this._parents)}function Kh(e){return new Array(e.length)}function GC(){return new Ge(this._enter||this._groups.map(Kh),this._parents)}function Oa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Oa.prototype={constructor:Oa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function YC(e){return function(){return e}}function XC(e,t,n,r,a,o){for(var i=0,s,l=t.length,u=o.length;i<u;++i)(s=t[i])?(s.__data__=o[i],r[i]=s):n[i]=new Oa(e,o[i]);for(;i<l;++i)(s=t[i])&&(a[i]=s)}function QC(e,t,n,r,a,o,i){var s,l,u=new Map,c=t.length,d=o.length,f=new Array(c),m;for(s=0;s<c;++s)(l=t[s])&&(f[s]=m=i.call(l,l.__data__,s,t)+"",u.has(m)?a[s]=l:u.set(m,l));for(s=0;s<d;++s)m=i.call(e,o[s],s,o)+"",(l=u.get(m))?(r[s]=l,l.__data__=o[s],u.delete(m)):n[s]=new Oa(e,o[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(a[s]=l)}function ZC(e){return e.__data__}function KC(e,t){if(!arguments.length)return Array.from(this,ZC);var n=t?QC:XC,r=this._parents,a=this._groups;typeof e!="function"&&(e=YC(e));for(var o=a.length,i=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=a[u],f=d.length,m=JC(e.call(c,c&&c.__data__,u,r)),h=m.length,g=s[u]=new Array(h),v=i[u]=new Array(h),S=l[u]=new Array(f);n(c,d,g,v,S,m,t);for(var _=0,w=0,C,b;_<h;++_)if(C=g[_]){for(_>=w&&(w=_+1);!(b=v[w])&&++w<h;);C._next=b||null}}return i=new Ge(i,r),i._enter=s,i._exit=l,i}function JC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eS(){return new Ge(this._exit||this._groups.map(Kh),this._parents)}function tS(e,t,n){var r=this.enter(),a=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?o.remove():n(o),r&&a?r.merge(a).order():a}function nS(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,o=r.length,i=Math.min(a,o),s=new Array(a),l=0;l<i;++l)for(var u=n[l],c=r[l],d=u.length,f=s[l]=new Array(d),m,h=0;h<d;++h)(m=u[h]||c[h])&&(f[h]=m);for(;l<a;++l)s[l]=n[l];return new Ge(s,this._parents)}function rS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,o=r[a],i;--a>=0;)(i=r[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function aS(e){e||(e=oS);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i=n[o],s=i.length,l=a[o]=new Array(s),u,c=0;c<s;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new Ge(a,this._parents).order()}function oS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function iS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sS(){return Array.from(this)}function lS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null}function cS(){let e=0;for(const t of this)++e;return e}function uS(){return!this.node()}function dS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],o=0,i=a.length,s;o<i;++o)(s=a[o])&&e.call(s,s.__data__,o,a);return this}function fS(e){return function(){this.removeAttribute(e)}}function pS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hS(e,t){return function(){this.setAttribute(e,t)}}function mS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yS(e,t){var n=wo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pS:fS:typeof t=="function"?n.local?vS:gS:n.local?mS:hS)(n,t))}function Jh(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bS(e){return function(){this.style.removeProperty(e)}}function wS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function CS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function SS(e,t,n){return arguments.length>1?this.each((t==null?bS:typeof t=="function"?CS:wS)(e,t,n??"")):Bn(this.node(),e)}function Bn(e,t){return e.style.getPropertyValue(t)||Jh(e).getComputedStyle(e,null).getPropertyValue(t)}function ES(e){return function(){delete this[e]}}function _S(e,t){return function(){this[e]=t}}function xS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function NS(e,t){return arguments.length>1?this.each((t==null?ES:typeof t=="function"?xS:_S)(e,t)):this.node()[e]}function em(e){return e.trim().split(/^|\s+/)}function Tc(e){return e.classList||new tm(e)}function tm(e){this._node=e,this._names=em(e.getAttribute("class")||"")}tm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function nm(e,t){for(var n=Tc(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function rm(e,t){for(var n=Tc(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function IS(e){return function(){nm(this,e)}}function TS(e){return function(){rm(this,e)}}function kS(e,t){return function(){(t.apply(this,arguments)?nm:rm)(this,e)}}function RS(e,t){var n=em(e+"");if(arguments.length<2){for(var r=Tc(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?kS:t?IS:TS)(n,t))}function OS(){this.textContent=""}function AS(e){return function(){this.textContent=e}}function qS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function LS(e){return arguments.length?this.each(e==null?OS:(typeof e=="function"?qS:AS)(e)):this.node().textContent}function PS(){this.innerHTML=""}function DS(e){return function(){this.innerHTML=e}}function MS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function VS(e){return arguments.length?this.each(e==null?PS:(typeof e=="function"?MS:DS)(e)):this.node().innerHTML}function $S(){this.nextSibling&&this.parentNode.appendChild(this)}function FS(){return this.each($S)}function BS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zS(){return this.each(BS)}function HS(e){var t=typeof e=="function"?e:Yh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function US(){return null}function jS(e,t){var n=typeof e=="function"?e:Yh(e),r=t==null?US:typeof t=="function"?t:Ic(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function WS(){var e=this.parentNode;e&&e.removeChild(this)}function GS(){return this.each(WS)}function YS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function QS(e){return this.select(e?XS:YS)}function ZS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function KS(e){return function(t){e.call(this,t,this.__data__)}}function JS(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function eE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,o;n<a;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function tE(e,t,n){return function(){var r=this.__on,a,o=KS(t);if(r){for(var i=0,s=r.length;i<s;++i)if((a=r[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=n),a.value=t;return}}this.addEventListener(e.type,o,n),a={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(a):this.__on=[a]}}function nE(e,t,n){var r=JS(e+""),a,o=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(a=0,c=s[l];a<o;++a)if((i=r[a]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?tE:eE,a=0;a<o;++a)this.each(s(r[a],t,n));return this}function am(e,t,n){var r=Jh(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function rE(e,t){return function(){return am(this,e,t)}}function aE(e,t){return function(){return am(this,e,t.apply(this,arguments))}}function oE(e,t){return this.each((typeof t=="function"?aE:rE)(e,t))}function*iE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length,i;a<o;++a)(i=r[a])&&(yield i)}var om=[null];function Ge(e,t){this._groups=e,this._parents=t}function zr(){return new Ge([[document.documentElement]],om)}function sE(){return this}Ge.prototype=zr.prototype={constructor:Ge,select:qC,selectAll:MC,selectChild:BC,selectChildren:jC,filter:WC,data:KC,enter:GC,exit:eS,join:tS,merge:nS,selection:sE,order:rS,sort:aS,call:iS,nodes:sS,node:lS,size:cS,empty:uS,each:dS,attr:yS,style:SS,property:NS,classed:RS,text:LS,html:VS,raise:FS,lower:zS,append:HS,insert:jS,remove:GS,clone:QS,datum:ZS,on:nE,dispatch:oE,[Symbol.iterator]:iE};function ct(e){return typeof e=="string"?new Ge([[document.querySelector(e)]],[document.documentElement]):new Ge([[e]],om)}function lE(e){let t;for(;t=e.sourceEvent;)e=t;return e}function gt(e,t){if(e=lE(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const cE={passive:!1},Sr={capture:!0,passive:!1};function Ao(e){e.stopImmediatePropagation()}function On(e){e.preventDefault(),e.stopImmediatePropagation()}function im(e){var t=e.document.documentElement,n=ct(e).on("dragstart.drag",On,Sr);"onselectstart"in t?n.on("selectstart.drag",On,Sr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sm(e,t){var n=e.document.documentElement,r=ct(e).on("dragstart.drag",null);t&&(r.on("click.drag",On,Sr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ea=e=>()=>e;function xs(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:o,x:i,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}xs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function uE(e){return!e.ctrlKey&&!e.button}function dE(){return this.parentNode}function fE(e,t){return t??{x:e.x,y:e.y}}function pE(){return navigator.maxTouchPoints||"ontouchstart"in this}function hE(){var e=uE,t=dE,n=fE,r=pE,a={},o=bo("start","drag","end"),i=0,s,l,u,c,d=0;function f(C){C.on("mousedown.drag",m).filter(r).on("touchstart.drag",v).on("touchmove.drag",S,cE).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(C,b){if(!(c||!e.call(this,C,b))){var y=w(this,t.call(this,C,b),C,b,"mouse");y&&(ct(C.view).on("mousemove.drag",h,Sr).on("mouseup.drag",g,Sr),im(C.view),Ao(C),u=!1,s=C.clientX,l=C.clientY,y("start",C))}}function h(C){if(On(C),!u){var b=C.clientX-s,y=C.clientY-l;u=b*b+y*y>d}a.mouse("drag",C)}function g(C){ct(C.view).on("mousemove.drag mouseup.drag",null),sm(C.view,u),On(C),a.mouse("end",C)}function v(C,b){if(e.call(this,C,b)){var y=C.changedTouches,E=t.call(this,C,b),x=y.length,N,k;for(N=0;N<x;++N)(k=w(this,E,C,b,y[N].identifier,y[N]))&&(Ao(C),k("start",C,y[N]))}}function S(C){var b=C.changedTouches,y=b.length,E,x;for(E=0;E<y;++E)(x=a[b[E].identifier])&&(On(C),x("drag",C,b[E]))}function _(C){var b=C.changedTouches,y=b.length,E,x;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),E=0;E<y;++E)(x=a[b[E].identifier])&&(Ao(C),x("end",C,b[E]))}function w(C,b,y,E,x,N){var k=o.copy(),A=gt(N||y,b),q,L,T;if((T=n.call(C,new xs("beforestart",{sourceEvent:y,target:f,identifier:x,active:i,x:A[0],y:A[1],dx:0,dy:0,dispatch:k}),E))!=null)return q=T.x-A[0]||0,L=T.y-A[1]||0,function D(R,M,z){var B=A,F;switch(R){case"start":a[x]=D,F=i++;break;case"end":delete a[x],--i;case"drag":A=gt(z||M,b),F=i;break}k.call(R,C,new xs(R,{sourceEvent:M,subject:T,target:f,identifier:x,active:F,x:A[0]+q,y:A[1]+L,dx:A[0]-B[0],dy:A[1]-B[1],dispatch:k}),E)}}return f.filter=function(C){return arguments.length?(e=typeof C=="function"?C:ea(!!C),f):e},f.container=function(C){return arguments.length?(t=typeof C=="function"?C:ea(C),f):t},f.subject=function(C){return arguments.length?(n=typeof C=="function"?C:ea(C),f):n},f.touchable=function(C){return arguments.length?(r=typeof C=="function"?C:ea(!!C),f):r},f.on=function(){var C=o.on.apply(o,arguments);return C===o?f:C},f.clickDistance=function(C){return arguments.length?(d=(C=+C)*C,f):Math.sqrt(d)},f}function kc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Hr(){}var Er=.7,Aa=1/Er,An="\\s*([+-]?\\d+)\\s*",_r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mE=/^#([0-9a-f]{3,8})$/,gE=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),vE=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),yE=new RegExp(`^rgba\\(${An},${An},${An},${_r}\\)$`),bE=new RegExp(`^rgba\\(${yt},${yt},${yt},${_r}\\)$`),wE=new RegExp(`^hsl\\(${_r},${yt},${yt}\\)$`),CE=new RegExp(`^hsla\\(${_r},${yt},${yt},${_r}\\)$`),Mu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kc(Hr,xr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vu,formatHex:Vu,formatHex8:SE,formatHsl:EE,formatRgb:$u,toString:$u});function Vu(){return this.rgb().formatHex()}function SE(){return this.rgb().formatHex8()}function EE(){return cm(this).formatHsl()}function $u(){return this.rgb().formatRgb()}function xr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=mE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Fu(t):n===3?new $e(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ta(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ta(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gE.exec(e))?new $e(t[1],t[2],t[3],1):(t=vE.exec(e))?new $e(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yE.exec(e))?ta(t[1],t[2],t[3],t[4]):(t=bE.exec(e))?ta(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wE.exec(e))?Hu(t[1],t[2]/100,t[3]/100,1):(t=CE.exec(e))?Hu(t[1],t[2]/100,t[3]/100,t[4]):Mu.hasOwnProperty(e)?Fu(Mu[e]):e==="transparent"?new $e(NaN,NaN,NaN,0):null}function Fu(e){return new $e(e>>16&255,e>>8&255,e&255,1)}function ta(e,t,n,r){return r<=0&&(e=t=n=NaN),new $e(e,t,n,r)}function _E(e){return e instanceof Hr||(e=xr(e)),e?(e=e.rgb(),new $e(e.r,e.g,e.b,e.opacity)):new $e}function Ns(e,t,n,r){return arguments.length===1?_E(e):new $e(e,t,n,r??1)}function $e(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}kc($e,Ns,lm(Hr,{brighter(e){return e=e==null?Aa:Math.pow(Aa,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Er:Math.pow(Er,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $e(rn(this.r),rn(this.g),rn(this.b),qa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bu,formatHex:Bu,formatHex8:xE,formatRgb:zu,toString:zu}));function Bu(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function xE(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function zu(){const e=qa(this.opacity);return`${e===1?"rgb(":"rgba("}${rn(this.r)}, ${rn(this.g)}, ${rn(this.b)}${e===1?")":`, ${e})`}`}function qa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tn(e){return e=rn(e),(e<16?"0":"")+e.toString(16)}function Hu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ut(e,t,n,r)}function cm(e){if(e instanceof ut)return new ut(e.h,e.s,e.l,e.opacity);if(e instanceof Hr||(e=xr(e)),!e)return new ut;if(e instanceof ut)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,l=(o+a)/2;return s?(t===o?i=(n-r)/s+(n<r)*6:n===o?i=(r-t)/s+2:i=(t-n)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new ut(i,s,l,e.opacity)}function NE(e,t,n,r){return arguments.length===1?cm(e):new ut(e,t,n,r??1)}function ut(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kc(ut,NE,lm(Hr,{brighter(e){return e=e==null?Aa:Math.pow(Aa,e),new ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Er:Math.pow(Er,e),new ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new $e(qo(e>=240?e-240:e+120,a,r),qo(e,a,r),qo(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new ut(Uu(this.h),na(this.s),na(this.l),qa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qa(this.opacity);return`${e===1?"hsl(":"hsla("}${Uu(this.h)}, ${na(this.s)*100}%, ${na(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Uu(e){return e=(e||0)%360,e<0?e+360:e}function na(e){return Math.max(0,Math.min(1,e||0))}function qo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const um=e=>()=>e;function IE(e,t){return function(n){return e+n*t}}function TE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function kE(e){return(e=+e)==1?dm:function(t,n){return n-t?TE(t,n,e):um(isNaN(t)?n:t)}}function dm(e,t){var n=t-e;return n?IE(e,n):um(isNaN(e)?t:e)}const ju=function e(t){var n=kE(t);function r(a,o){var i=n((a=Ns(a)).r,(o=Ns(o)).r),s=n(a.g,o.g),l=n(a.b,o.b),u=dm(a.opacity,o.opacity);return function(c){return a.r=i(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r}(1);function Ut(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Is=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lo=new RegExp(Is.source,"g");function RE(e){return function(){return e}}function OE(e){return function(t){return e(t)+""}}function AE(e,t){var n=Is.lastIndex=Lo.lastIndex=0,r,a,o,i=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Is.exec(e))&&(a=Lo.exec(t));)(o=a.index)>n&&(o=t.slice(n,o),s[i]?s[i]+=o:s[++i]=o),(r=r[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,l.push({i,x:Ut(r,a)})),n=Lo.lastIndex;return n<t.length&&(o=t.slice(n),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?OE(l[0].x):RE(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var Wu=180/Math.PI,Ts={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fm(e,t,n,r,a,o){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*Wu,skewX:Math.atan(l)*Wu,scaleX:i,scaleY:s}}var ra;function qE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ts:fm(t.a,t.b,t.c,t.d,t.e,t.f)}function LE(e){return e==null||(ra||(ra=document.createElementNS("http://www.w3.org/2000/svg","g")),ra.setAttribute("transform",e),!(e=ra.transform.baseVal.consolidate()))?Ts:(e=e.matrix,fm(e.a,e.b,e.c,e.d,e.e,e.f))}function pm(e,t,n,r){function a(u){return u.length?u.pop()+" ":""}function o(u,c,d,f,m,h){if(u!==d||c!==f){var g=m.push("translate(",null,t,null,n);h.push({i:g-4,x:Ut(u,d)},{i:g-2,x:Ut(c,f)})}else(d||f)&&m.push("translate("+d+t+f+n)}function i(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(a(d)+"rotate(",null,r)-2,x:Ut(u,c)})):c&&d.push(a(d)+"rotate("+c+r)}function s(u,c,d,f){u!==c?f.push({i:d.push(a(d)+"skewX(",null,r)-2,x:Ut(u,c)}):c&&d.push(a(d)+"skewX("+c+r)}function l(u,c,d,f,m,h){if(u!==d||c!==f){var g=m.push(a(m)+"scale(",null,",",null,")");h.push({i:g-4,x:Ut(u,d)},{i:g-2,x:Ut(c,f)})}else(d!==1||f!==1)&&m.push(a(m)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,f),i(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(m){for(var h=-1,g=f.length,v;++h<g;)d[(v=f[h]).i]=v.x(m);return d.join("")}}}var PE=pm(qE,"px, ","px)","deg)"),DE=pm(LE,", ",")",")"),ME=1e-12;function Gu(e){return((e=Math.exp(e))+1/e)/2}function VE(e){return((e=Math.exp(e))-1/e)/2}function $E(e){return((e=Math.exp(2*e))-1)/(e+1)}const FE=function e(t,n,r){function a(o,i){var s=o[0],l=o[1],u=o[2],c=i[0],d=i[1],f=i[2],m=c-s,h=d-l,g=m*m+h*h,v,S;if(g<ME)S=Math.log(f/u)/t,v=function(E){return[s+E*m,l+E*h,u*Math.exp(t*E*S)]};else{var _=Math.sqrt(g),w=(f*f-u*u+r*g)/(2*u*n*_),C=(f*f-u*u-r*g)/(2*f*n*_),b=Math.log(Math.sqrt(w*w+1)-w),y=Math.log(Math.sqrt(C*C+1)-C);S=(y-b)/t,v=function(E){var x=E*S,N=Gu(b),k=u/(n*_)*(N*$E(t*x+b)-VE(b));return[s+k*m,l+k*h,u*N/Gu(t*x+b)]}}return v.duration=S*1e3*t/Math.SQRT2,v}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,l=s*s;return e(i,s,l)},a}(Math.SQRT2,2,4);var zn=0,lr=0,tr=0,hm=1e3,La,cr,Pa=0,fn=0,Co=0,Nr=typeof performance=="object"&&performance.now?performance:Date,mm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rc(){return fn||(mm(BE),fn=Nr.now()+Co)}function BE(){fn=0}function Da(){this._call=this._time=this._next=null}Da.prototype=gm.prototype={constructor:Da,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rc():+n)+(t==null?0:+t),!this._next&&cr!==this&&(cr?cr._next=this:La=this,cr=this),this._call=e,this._time=n,ks()},stop:function(){this._call&&(this._call=null,this._time=1/0,ks())}};function gm(e,t,n){var r=new Da;return r.restart(e,t,n),r}function zE(){Rc(),++zn;for(var e=La,t;e;)(t=fn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zn}function Yu(){fn=(Pa=Nr.now())+Co,zn=lr=0;try{zE()}finally{zn=0,UE(),fn=0}}function HE(){var e=Nr.now(),t=e-Pa;t>hm&&(Co-=t,Pa=e)}function UE(){for(var e,t=La,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:La=n);cr=e,ks(r)}function ks(e){if(!zn){lr&&(lr=clearTimeout(lr));var t=e-fn;t>24?(e<1/0&&(lr=setTimeout(Yu,e-Nr.now()-Co)),tr&&(tr=clearInterval(tr))):(tr||(Pa=Nr.now(),tr=setInterval(HE,hm)),zn=1,mm(Yu))}}function Xu(e,t,n){var r=new Da;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var jE=bo("start","end","cancel","interrupt"),WE=[],vm=0,Qu=1,Rs=2,ya=3,Zu=4,Os=5,ba=6;function So(e,t,n,r,a,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;GE(e,n,{name:t,index:r,group:a,on:jE,tween:WE,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vm})}function Oc(e,t){var n=ft(e,t);if(n.state>vm)throw new Error("too late; already scheduled");return n}function Ct(e,t){var n=ft(e,t);if(n.state>ya)throw new Error("too late; already running");return n}function ft(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function GE(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=gm(o,0,n.time);function o(u){n.state=Qu,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,d,f,m;if(n.state!==Qu)return l();for(c in r)if(m=r[c],m.name===n.name){if(m.state===ya)return Xu(i);m.state===Zu?(m.state=ba,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[c]):+c<t&&(m.state=ba,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[c])}if(Xu(function(){n.state===ya&&(n.state=Zu,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Rs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rs){for(n.state=ya,a=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(m=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=m);a.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Os,1),d=-1,f=a.length;++d<f;)a[d].call(e,c);n.state===Os&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ba,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function wa(e,t){var n=e.__transition,r,a,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}a=r.state>Rs&&r.state<Os,r.state=ba,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function YE(e){return this.each(function(){wa(this,e)})}function XE(e,t){var n,r;return function(){var a=Ct(this,e),o=a.tween;if(o!==n){r=n=o;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}a.tween=r}}function QE(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var o=Ct(this,e),i=o.tween;if(i!==r){a=(r=i).slice();for(var s={name:t,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=s;break}l===u&&a.push(s)}o.tween=a}}function ZE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ft(this.node(),n).tween,a=0,o=r.length,i;a<o;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((t==null?XE:QE)(n,e,t))}function Ac(e,t,n){var r=e._id;return e.each(function(){var a=Ct(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return ft(a,r).value[t]}}function ym(e,t){var n;return(typeof t=="number"?Ut:t instanceof xr?ju:(n=xr(t))?(t=n,ju):AE)(e,t)}function KE(e){return function(){this.removeAttribute(e)}}function JE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function e_(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function t_(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function n_(e,t,n){var r,a,o;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s)))}}function r_(e,t,n){var r,a,o;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s)))}}function a_(e,t){var n=wo(e),r=n==="transform"?DE:ym;return this.attrTween(e,typeof t=="function"?(n.local?r_:n_)(n,r,Ac(this,"attr."+e,t)):t==null?(n.local?JE:KE)(n):(n.local?t_:e_)(n,r,t))}function o_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function i_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function s_(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&i_(e,o)),n}return a._value=t,a}function l_(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&o_(e,o)),n}return a._value=t,a}function c_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=wo(e);return this.tween(n,(r.local?s_:l_)(r,t))}function u_(e,t){return function(){Oc(this,e).delay=+t.apply(this,arguments)}}function d_(e,t){return t=+t,function(){Oc(this,e).delay=t}}function f_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?u_:d_)(t,e)):ft(this.node(),t).delay}function p_(e,t){return function(){Ct(this,e).duration=+t.apply(this,arguments)}}function h_(e,t){return t=+t,function(){Ct(this,e).duration=t}}function m_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?p_:h_)(t,e)):ft(this.node(),t).duration}function g_(e,t){if(typeof t!="function")throw new Error;return function(){Ct(this,e).ease=t}}function v_(e){var t=this._id;return arguments.length?this.each(g_(t,e)):ft(this.node(),t).ease}function y_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ct(this,e).ease=n}}function b_(e){if(typeof e!="function")throw new Error;return this.each(y_(this._id,e))}function w_(e){typeof e!="function"&&(e=Qh(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=[],l,u=0;u<i;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Lt(r,this._parents,this._name,this._id)}function C_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),s=0;s<o;++s)for(var l=t[s],u=n[s],c=l.length,d=i[s]=new Array(c),f,m=0;m<c;++m)(f=l[m]||u[m])&&(d[m]=f);for(;s<r;++s)i[s]=t[s];return new Lt(i,this._parents,this._name,this._id)}function S_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function E_(e,t,n){var r,a,o=S_(t)?Oc:Ct;return function(){var i=o(this,e),s=i.on;s!==r&&(a=(r=s).copy()).on(t,n),i.on=a}}function __(e,t){var n=this._id;return arguments.length<2?ft(this.node(),n).on.on(e):this.each(E_(n,e,t))}function x_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function N_(){return this.on("end.remove",x_(this._id))}function I_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ic(e));for(var r=this._groups,a=r.length,o=new Array(a),i=0;i<a;++i)for(var s=r[i],l=s.length,u=o[i]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,So(u[f],t,n,f,u,ft(c,n)));return new Lt(o,this._parents,t,n)}function T_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xh(e));for(var r=this._groups,a=r.length,o=[],i=[],s=0;s<a;++s)for(var l=r[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),m,h=ft(c,n),g=0,v=f.length;g<v;++g)(m=f[g])&&So(m,t,n,g,f,h);o.push(f),i.push(c)}return new Lt(o,i,t,n)}var k_=zr.prototype.constructor;function R_(){return new k_(this._groups,this._parents)}function O_(e,t){var n,r,a;return function(){var o=Bn(this,e),i=(this.style.removeProperty(e),Bn(this,e));return o===i?null:o===n&&i===r?a:a=t(n=o,r=i)}}function bm(e){return function(){this.style.removeProperty(e)}}function A_(e,t,n){var r,a=n+"",o;return function(){var i=Bn(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}function q_(e,t,n){var r,a,o;return function(){var i=Bn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Bn(this,e))),i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s))}}function L_(e,t){var n,r,a,o="style."+t,i="end."+o,s;return function(){var l=Ct(this,e),u=l.on,c=l.value[o]==null?s||(s=bm(t)):void 0;(u!==n||a!==c)&&(r=(n=u).copy()).on(i,a=c),l.on=r}}function P_(e,t,n){var r=(e+="")=="transform"?PE:ym;return t==null?this.styleTween(e,O_(e,r)).on("end.style."+e,bm(e)):typeof t=="function"?this.styleTween(e,q_(e,r,Ac(this,"style."+e,t))).each(L_(this._id,e)):this.styleTween(e,A_(e,r,t),n).on("end.style."+e,null)}function D_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function M_(e,t,n){var r,a;function o(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&D_(e,i,n)),r}return o._value=t,o}function V_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,M_(e,t,n??""))}function $_(e){return function(){this.textContent=e}}function F_(e){return function(){var t=e(this);this.textContent=t??""}}function B_(e){return this.tween("text",typeof e=="function"?F_(Ac(this,"text",e)):$_(e==null?"":e+""))}function z_(e){return function(t){this.textContent=e.call(this,t)}}function H_(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&z_(a)),t}return r._value=e,r}function U_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,H_(e))}function j_(){for(var e=this._name,t=this._id,n=wm(),r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],s=i.length,l,u=0;u<s;++u)if(l=i[u]){var c=ft(l,t);So(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Lt(r,this._parents,e,n)}function W_(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(o,i){var s={value:i},l={value:function(){--a===0&&o()}};n.each(function(){var u=Ct(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),a===0&&o()})}var G_=0;function Lt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function wm(){return++G_}var Et=zr.prototype;Lt.prototype={constructor:Lt,select:I_,selectAll:T_,selectChild:Et.selectChild,selectChildren:Et.selectChildren,filter:w_,merge:C_,selection:R_,transition:j_,call:Et.call,nodes:Et.nodes,node:Et.node,size:Et.size,empty:Et.empty,each:Et.each,on:__,attr:a_,attrTween:c_,style:P_,styleTween:V_,text:B_,textTween:U_,remove:N_,tween:ZE,delay:f_,duration:m_,ease:v_,easeVarying:b_,end:W_,[Symbol.iterator]:Et[Symbol.iterator]};function Y_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var X_={time:null,delay:0,duration:250,ease:Y_};function Q_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Z_(e){var t,n;e instanceof Lt?(t=e._id,e=e._name):(t=wm(),(n=X_).time=Rc(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&So(l,e,t,u,i,n||Q_(l,t));return new Lt(r,this._parents,e,t)}zr.prototype.interrupt=YE;zr.prototype.transition=Z_;const aa=e=>()=>e;function K_(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function It(e,t,n){this.k=e,this.x=t,this.y=n}It.prototype={constructor:It,scale:function(e){return e===1?this:new It(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new It(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var an=new It(1,0,0);It.prototype;function Po(e){e.stopImmediatePropagation()}function nr(e){e.preventDefault(),e.stopImmediatePropagation()}function J_(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ex(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ku(){return this.__zoom||an}function tx(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function nx(){return navigator.maxTouchPoints||"ontouchstart"in this}function rx(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function ax(){var e=J_,t=ex,n=rx,r=tx,a=nx,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=FE,u=bo("start","zoom","end"),c,d,f,m=500,h=150,g=0,v=10;function S(T){T.property("__zoom",Ku).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",A).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(T,D,R,M){var z=T.selection?T.selection():T;z.property("__zoom",Ku),T!==z?b(T,D,R,M):z.interrupt().each(function(){y(this,arguments).event(M).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},S.scaleBy=function(T,D,R,M){S.scaleTo(T,function(){var z=this.__zoom.k,B=typeof D=="function"?D.apply(this,arguments):D;return z*B},R,M)},S.scaleTo=function(T,D,R,M){S.transform(T,function(){var z=t.apply(this,arguments),B=this.__zoom,F=R==null?C(z):typeof R=="function"?R.apply(this,arguments):R,W=B.invert(F),Z=typeof D=="function"?D.apply(this,arguments):D;return n(w(_(B,Z),F,W),z,i)},R,M)},S.translateBy=function(T,D,R,M){S.transform(T,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),i)},null,M)},S.translateTo=function(T,D,R,M,z){S.transform(T,function(){var B=t.apply(this,arguments),F=this.__zoom,W=M==null?C(B):typeof M=="function"?M.apply(this,arguments):M;return n(an.translate(W[0],W[1]).scale(F.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof R=="function"?-R.apply(this,arguments):-R),B,i)},M,z)};function _(T,D){return D=Math.max(o[0],Math.min(o[1],D)),D===T.k?T:new It(D,T.x,T.y)}function w(T,D,R){var M=D[0]-R[0]*T.k,z=D[1]-R[1]*T.k;return M===T.x&&z===T.y?T:new It(T.k,M,z)}function C(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function b(T,D,R,M){T.on("start.zoom",function(){y(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(M).end()}).tween("zoom",function(){var z=this,B=arguments,F=y(z,B).event(M),W=t.apply(z,B),Z=R==null?C(W):typeof R=="function"?R.apply(z,B):R,P=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),V=z.__zoom,U=typeof D=="function"?D.apply(z,B):D,G=l(V.invert(Z).concat(P/V.k),U.invert(Z).concat(P/U.k));return function(H){if(H===1)H=U;else{var X=G(H),K=P/X[2];H=new It(K,Z[0]-X[0]*K,Z[1]-X[1]*K)}F.zoom(null,H)}})}function y(T,D,R){return!R&&T.__zooming||new E(T,D)}function E(T,D){this.that=T,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,D),this.taps=0}E.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,D){return this.mouse&&T!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var D=ct(this.that).datum();u.call(T,this.that,new K_(T,{sourceEvent:this.sourceEvent,target:S,type:T,transform:this.that.__zoom,dispatch:u}),D)}};function x(T,...D){if(!e.apply(this,arguments))return;var R=y(this,D).event(T),M=this.__zoom,z=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,r.apply(this,arguments)))),B=gt(T);if(R.wheel)(R.mouse[0][0]!==B[0]||R.mouse[0][1]!==B[1])&&(R.mouse[1]=M.invert(R.mouse[0]=B)),clearTimeout(R.wheel);else{if(M.k===z)return;R.mouse=[B,M.invert(B)],wa(this),R.start()}nr(T),R.wheel=setTimeout(F,h),R.zoom("mouse",n(w(_(M,z),R.mouse[0],R.mouse[1]),R.extent,i));function F(){R.wheel=null,R.end()}}function N(T,...D){if(f||!e.apply(this,arguments))return;var R=T.currentTarget,M=y(this,D,!0).event(T),z=ct(T.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",P,!0),B=gt(T,R),F=T.clientX,W=T.clientY;im(T.view),Po(T),M.mouse=[B,this.__zoom.invert(B)],wa(this),M.start();function Z(V){if(nr(V),!M.moved){var U=V.clientX-F,G=V.clientY-W;M.moved=U*U+G*G>g}M.event(V).zoom("mouse",n(w(M.that.__zoom,M.mouse[0]=gt(V,R),M.mouse[1]),M.extent,i))}function P(V){z.on("mousemove.zoom mouseup.zoom",null),sm(V.view,M.moved),nr(V),M.event(V).end()}}function k(T,...D){if(e.apply(this,arguments)){var R=this.__zoom,M=gt(T.changedTouches?T.changedTouches[0]:T,this),z=R.invert(M),B=R.k*(T.shiftKey?.5:2),F=n(w(_(R,B),M,z),t.apply(this,D),i);nr(T),s>0?ct(this).transition().duration(s).call(b,F,M,T):ct(this).call(S.transform,F,M,T)}}function A(T,...D){if(e.apply(this,arguments)){var R=T.touches,M=R.length,z=y(this,D,T.changedTouches.length===M).event(T),B,F,W,Z;for(Po(T),F=0;F<M;++F)W=R[F],Z=gt(W,this),Z=[Z,this.__zoom.invert(Z),W.identifier],z.touch0?!z.touch1&&z.touch0[2]!==Z[2]&&(z.touch1=Z,z.taps=0):(z.touch0=Z,B=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),B&&(z.taps<2&&(d=Z[0],c=setTimeout(function(){c=null},m)),wa(this),z.start())}}function q(T,...D){if(this.__zooming){var R=y(this,D).event(T),M=T.changedTouches,z=M.length,B,F,W,Z;for(nr(T),B=0;B<z;++B)F=M[B],W=gt(F,this),R.touch0&&R.touch0[2]===F.identifier?R.touch0[0]=W:R.touch1&&R.touch1[2]===F.identifier&&(R.touch1[0]=W);if(F=R.that.__zoom,R.touch1){var P=R.touch0[0],V=R.touch0[1],U=R.touch1[0],G=R.touch1[1],H=(H=U[0]-P[0])*H+(H=U[1]-P[1])*H,X=(X=G[0]-V[0])*X+(X=G[1]-V[1])*X;F=_(F,Math.sqrt(H/X)),W=[(P[0]+U[0])/2,(P[1]+U[1])/2],Z=[(V[0]+G[0])/2,(V[1]+G[1])/2]}else if(R.touch0)W=R.touch0[0],Z=R.touch0[1];else return;R.zoom("touch",n(w(F,W,Z),R.extent,i))}}function L(T,...D){if(this.__zooming){var R=y(this,D).event(T),M=T.changedTouches,z=M.length,B,F;for(Po(T),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),B=0;B<z;++B)F=M[B],R.touch0&&R.touch0[2]===F.identifier?delete R.touch0:R.touch1&&R.touch1[2]===F.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(F=gt(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<v)){var W=ct(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return S.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:aa(+T),S):r},S.filter=function(T){return arguments.length?(e=typeof T=="function"?T:aa(!!T),S):e},S.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:aa(!!T),S):a},S.extent=function(T){return arguments.length?(t=typeof T=="function"?T:aa([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),S):t},S.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],S):[o[0],o[1]]},S.translateExtent=function(T){return arguments.length?(i[0][0]=+T[0][0],i[1][0]=+T[1][0],i[0][1]=+T[0][1],i[1][1]=+T[1][1],S):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},S.constrain=function(T){return arguments.length?(n=T,S):n},S.duration=function(T){return arguments.length?(s=+T,S):s},S.interpolate=function(T){return arguments.length?(l=T,S):l},S.on=function(){var T=u.on.apply(u,arguments);return T===u?S:T},S.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,S):Math.sqrt(g)},S.tapDistance=function(T){return arguments.length?(v=+T,S):v},S}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function As(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cm(e,t){if(e){if(typeof e=="string")return As(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return As(e,t)}}function ox(e){if(Array.isArray(e))return e}function ix(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,i,s;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(l){o=!0,s=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function sx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e,t){return ox(e)||ix(e,t)||Cm(e,t)||sx()}var Hn;(function(e){e.Strict="strict",e.Loose="loose"})(Hn||(Hn={}));var Ju;(function(e){e.Lines="lines",e.Dots="dots"})(Ju||(Ju={}));var qn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(qn||(qn={}));var Nt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Nt||(Nt={}));var Ir;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ir||(Ir={}));var Q;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Q||(Q={}));var qc=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},Ln=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},Sm=function(t,n){return{x:Ln(t.x,n[0][0],n[1][0]),y:Ln(t.y,n[0][1],n[1][1])}},Em=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},lx=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},Ma=function(t){var n=t.x,r=t.y,a=t.width,o=t.height;return{x:n,y:r,x2:n+a,y2:r+o}},cx=function(t){var n=t.x,r=t.y,a=t.x2,o=t.y2;return{x:n,y:r,width:a-n,height:o-r}},_m=function(t){return!isNaN(t)&&isFinite(t)},Oe=Symbol("internals");function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function td(e,t){var n=e.find(function(u){return u.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,a=t.position.y+t.height-n.height;if(r>0||a>0||t.position.x<0||t.position.y<0){var o,i;if(n.style=ur({},n.style)||{},n.style.width=(o=n.style.width)!==null&&o!==void 0?o:n.width,n.style.height=(i=n.style.height)!==null&&i!==void 0?i:n.height,r>0&&(n.style.width+=r),a>0&&(n.style.height+=a),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function xm(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,a){var o=e.find(function(l){return l.id===a.id});if(o)switch(o.type){case"select":return r.push(ur(ur({},a),{},{selected:o.selected})),r;case"position":{var i=ur({},a);return typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&td(r,i),r.push(i),r}case"dimensions":{var s=ur({},a);return typeof o.dimensions<"u"&&(s.width=o.dimensions.width,s.height=o.dimensions.height),s.expandParent&&td(r,s),r.push(s),r}case"remove":return r}return r.push(a),r},n)}function Nm(e,t){return xm(e,t)}function ux(e,t){return xm(e,t)}var jt=function(t,n){return{id:t,type:"select",selected:n}};function Tn(e,t){return e.reduce(function(n,r){var a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(jt(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(jt(r.id,!1))),n},[])}function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Im(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var rd=function(t,n,r){var a=n.querySelectorAll(t);if(!a||!a.length)return null;var o=Array.from(a),i=n.getBoundingClientRect();return o.map(function(s){var l=s.getBoundingClientRect();return Im({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-i.left)/r,y:(l.top-i.top)/r},qc(s))})};function rr(e,t,n){return n===void 0?n:function(r){var a=t().nodeInternals.get(e);n(r,Im({},a))}}function Tm(e){var t=e.id,n=e.store,r=n.getState(),a=r.addSelectedNodes,o=r.unselectNodesAndEdges,i=r.multiSelectionActive,s=r.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&i&&o({nodes:[l]}):a([t])}function ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ad(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ad(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var dx=function(t){return"id"in t&&"source"in t&&"target"in t},fx=function(t){var n=t.source,r=t.sourceHandle,a=t.target,o=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(a).concat(o||"")},qs=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(a){return"".concat(a,"=").concat(t[a])}).join("&"))},px=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},hx=function(t,n){if(!t.source||!t.target)return n;var r;return dx(t)?r=hr({},t):r=hr(hr({},t),{},{id:fx(t)}),px(r,n)?n:n.concat(r)},km=function(t,n,r,a){var o=t.x,i=t.y,s=le(n,3),l=s[0],u=s[1],c=s[2],d=le(a,2),f=d[0],m=d[1],h={x:(o-l)/c,y:(i-u)/c};return r?{x:f*Math.round(h.x/f),y:m*Math.round(h.y/m)}:h},Lc=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,a){var o=a.positionAbsolute,i=a.position,s=a.width,l=a.height;return lx(r,Ma({x:o?o.x:i.x,y:o?o.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cx(n)},Rm=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],a=le(r,3),o=a[0],i=a[1],s=a[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=Ma({x:(n.x-o)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),d=[];return t.forEach(function(f){var m=f.positionAbsolute,h=f.width,g=f.height,v=f.selectable,S=v===void 0?!0:v;if(u&&!S)return!1;var _=Ma(hr(hr({},m),{},{width:h||0,height:g||0})),w=Math.max(0,Math.min(c.x2,_.x2)-Math.max(c.x,_.x)),C=Math.max(0,Math.min(c.y2,_.y2)-Math.max(c.y,_.y)),b=Math.ceil(w*C),y=typeof h>"u"||typeof g>"u"||h===null||g===null,E=l&&b>0,x=(h||0)*(g||0),N=y||E||b>=x;N&&d.push(f)}),d},Pc=function(t,n){var r=t.map(function(a){return a.id});return n.filter(function(a){return r.includes(a.source)||r.includes(a.target)})},Om=function(t,n,r,a,o){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=r/(t.height*(1+i)),u=Math.min(s,l),c=Ln(u,a,o),d=t.x+t.width/2,f=t.y+t.height/2,m=n/2-d*c,h=r/2-f*c;return[m,h,c]},en=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?od(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Am(e,t,n,r){var a,o,i,s,l,u,c,d,f,m,h,g;if(!e.parentNode)return r;var v=t.get(e.parentNode);return Am(v,t,n,{x:((a=r.x)!==null&&a!==void 0?a:0)+((o=(i=v.position)===null||i===void 0?void 0:i.x)!==null&&o!==void 0?o:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((l=(u=v.position)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0),z:((c=(d=v[Oe])===null||d===void 0?void 0:d.z)!==null&&c!==void 0?c:0)>((f=r.z)!==null&&f!==void 0?f:0)?(m=(h=v[Oe])===null||h===void 0?void 0:h.z)!==null&&m!==void 0?m:0:(g=r.z)!==null&&g!==void 0?g:0})}function Do(e,t){var n=new Map,r={};return e.forEach(function(a){var o,i=_m(a.zIndex)?a.zIndex:a.selected?1e3:0,s=t.get(a.id),l=kn(kn({width:s==null?void 0:s.width,height:s==null?void 0:s.height},a),{},{positionAbsolute:{x:a.position.x,y:a.position.y}});a.parentNode&&(l.parentNode=a.parentNode,r[a.parentNode]=!0),Object.defineProperty(l,Oe,{enumerable:!1,value:{handleBounds:s==null||(o=s[Oe])===null||o===void 0?void 0:o.handleBounds,z:i}}),n.set(a.id,l)}),n.forEach(function(a){if(a.parentNode&&!n.has(a.parentNode))throw new Error("Parent node ".concat(a.parentNode," not found"));if(a.parentNode||r[a.id]){var o,i,s=Am(a,n,r,kn(kn({},a.position),{},{z:(o=(i=a[Oe])===null||i===void 0?void 0:i.z)!==null&&o!==void 0?o:0})),l=s.x,u=s.y,c=s.z;a.positionAbsolute={x:l,y:u},a[Oe].z=c,r[a.id]&&(a[Oe].isParent=!0)}}),n}function qm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,a=n.width,o=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,u=n.d3Selection,c=n.fitViewOnInitDone,d=n.fitViewOnInit;if((t.initial&&!c&&d||!t.initial)&&l&&u){var f=Array.from(r.values()).filter(function(x){return t.includeHiddenNodes?x.width&&x.height:!x.hidden}),m=f.every(function(x){return x.width&&x.height});if(f.length>0&&m){var h,g,v,S=Lc(f),_=Om(S,a,o,(h=t.minZoom)!==null&&h!==void 0?h:i,(g=t.maxZoom)!==null&&g!==void 0?g:s,(v=t.padding)!==null&&v!==void 0?v:.1),w=le(_,3),C=w[0],b=w[1],y=w[2],E=an.translate(C,b).scale(y);return typeof t.duration=="number"&&t.duration>0?l.transform(en(u,t.duration),E):l.transform(u,E),!0}}return!1}function mx(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var a;t.set(r.id,kn(kn({},r),{},(a={},fe(a,Oe,r[Oe]),fe(a,"selected",n.selected),a)))}}),new Map(t)}function gx(e,t){return t.map(function(n){var r=e.find(function(a){return a.id===n.id});return r&&(n.selected=r.selected),n})}function oa(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,a=e.set,o=r(),i=o.nodeInternals,s=o.edges,l=o.onNodesChange,u=o.onEdgesChange,c=o.hasDefaultNodes,d=o.hasDefaultEdges;t!=null&&t.length&&(c&&a({nodeInternals:mx(t,i)}),l==null||l(t)),n!=null&&n.length&&(d&&a({edges:gx(n,s)}),u==null||u(n))}var Ls=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],id={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ls,nodeExtent:Ls,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Hn.Strict,domNode:null,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.17",connectionStartHandle:null,connectOnClick:!0};function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Dc=NC(),Lm=Dc.Provider,Te=Dc.useStore,De=Dc.useStoreApi,Pm=function(){return xC(function(t,n){return ht(ht({},id),{},{setNodes:function(a){t({nodeInternals:Do(a,n().nodeInternals)})},setEdges:function(a){var o=n(),i=o.defaultEdgeOptions,s=i===void 0?{}:i;t({edges:a.map(function(l){return ht(ht({},s),l)})})},setDefaultNodesAndEdges:function(a,o){var i=typeof a<"u",s=typeof o<"u",l=i?Do(a,new Map):new Map,u=s?o:[];t({nodeInternals:l,edges:u,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(a){var o=n(),i=o.onNodesChange,s=o.nodeInternals,l=o.fitViewOnInit,u=o.fitViewOnInitDone,c=o.fitViewOnInitOptions,d=o.domNode,f=d==null?void 0:d.querySelector(".react-flow__viewport");if(f){var m=window.getComputedStyle(f),h=new window.DOMMatrixReadOnly(m.transform),g=h.m22,v=a.reduce(function(_,w){var C=s.get(w.id);if(C){var b=qc(w.nodeElement),y=!!(b.width&&b.height&&(C.width!==b.width||C.height!==b.height||w.forceUpdate));y&&(s.set(C.id,ht(ht({},C),{},fe({},Oe,ht(ht({},C[Oe]),{},{handleBounds:{source:rd(".source",w.nodeElement,g),target:rd(".target",w.nodeElement,g)}})),b)),_.push({id:C.id,type:"dimensions",dimensions:b}))}return _},[]),S=u||l&&!u&&qm(n,ht({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:S}),(v==null?void 0:v.length)>0&&(i==null||i(v))}},updateNodePositions:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,u=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var d=a.map(function(h){var g={id:h.id,type:"position",dragging:i};return o&&(g.positionAbsolute=h.positionAbsolute,g.position=h.position),g});if(d!=null&&d.length){if(c){var f=Nm(d,Array.from(u.values())),m=Do(f,u);t({nodeInternals:m})}l==null||l(d)}}},addSelectedNodes:function(a){var o=n(),i=o.multiSelectionActive,s=o.nodeInternals,l=o.edges,u,c=null;i?u=a.map(function(d){return jt(d,!0)}):(u=Tn(Array.from(s.values()),a),c=Tn(l,[])),oa({changedNodes:u,changedEdges:c,get:n,set:t})},addSelectedEdges:function(a){var o=n(),i=o.multiSelectionActive,s=o.edges,l=o.nodeInternals,u,c=null;i?u=a.map(function(d){return jt(d,!0)}):(u=Tn(s,a),c=Tn(Array.from(l.values()),[])),oa({changedNodes:c,changedEdges:u,get:n,set:t})},unselectNodesAndEdges:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.nodes,i=a.edges,s=n(),l=s.nodeInternals,u=s.edges,c=o||Array.from(l.values()),d=i||u,f=c.map(function(h){return h.selected=!1,jt(h.id,!1)}),m=d.map(function(h){return jt(h.id,!1)});oa({changedNodes:f,changedEdges:m,get:n,set:t})},setMinZoom:function(a){var o=n(),i=o.d3Zoom,s=o.maxZoom;i==null||i.scaleExtent([a,s]),t({minZoom:a})},setMaxZoom:function(a){var o=n(),i=o.d3Zoom,s=o.minZoom;i==null||i.scaleExtent([s,a]),t({maxZoom:a})},setTranslateExtent:function(a){var o=n(),i=o.d3Zoom;i==null||i.translateExtent(a),t({translateExtent:a})},resetSelectedElements:function(){var a=n(),o=a.nodeInternals,i=a.edges,s=Array.from(o.values()),l=s.filter(function(c){return c.selected}).map(function(c){return jt(c.id,!1)}),u=i.filter(function(c){return c.selected}).map(function(c){return jt(c.id,!1)});oa({changedNodes:l,changedEdges:u,get:n,set:t})},setNodeExtent:function(a){var o=n(),i=o.nodeInternals;i.forEach(function(s){s.positionAbsolute=Sm(s.position,a)}),t({nodeExtent:a,nodeInternals:new Map(i)})},reset:function(){return t(ht({},id))}})})};function at(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=at(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function Ye(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function vx(e){if(Array.isArray(e))return As(e)}function yx(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bx(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(e){return vx(e)||yx(e)||Cm(e)||bx()}var wx={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},viewportInitialized:!1},Cx=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},Sx=function(){var t=De(),n=Te(Cx,Ye),r=n.d3Zoom,a=n.d3Selection,o=I.useMemo(function(){return a&&r?{zoomIn:function(s){return r.scaleBy(en(a,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(en(a,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return r.scaleTo(en(a,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var u,c,d,f=le(t.getState().transform,3),m=f[0],h=f[1],g=f[2],v=an.translate((u=s.x)!==null&&u!==void 0?u:m,(c=s.y)!==null&&c!==void 0?c:h).scale((d=s.zoom)!==null&&d!==void 0?d:g);r.transform(en(a,l==null?void 0:l.duration),v)},getViewport:function(){var s=le(t.getState().transform,3),l=s[0],u=s[1],c=s[2];return{x:l,y:u,zoom:c}},fitView:function(s){return qm(t.getState,s)},setCenter:function(s,l,u){var c=t.getState(),d=c.width,f=c.height,m=c.maxZoom,h=typeof(u==null?void 0:u.zoom)<"u"?u.zoom:m,g=d/2-s*h,v=f/2-l*h,S=an.translate(g,v).scale(h);r.transform(en(a,u==null?void 0:u.duration),S)},fitBounds:function(s,l){var u,c=t.getState(),d=c.width,f=c.height,m=c.minZoom,h=c.maxZoom,g=Om(s,d,f,m,h,(u=l==null?void 0:l.padding)!==null&&u!==void 0?u:.1),v=le(g,3),S=v[0],_=v[1],w=v[2],C=an.translate(S,_).scale(w);r.transform(en(a,l==null?void 0:l.duration),C)},project:function(s){var l=t.getState(),u=l.transform,c=l.snapToGrid,d=l.snapGrid;return km(s,u,c,d)},viewportInitialized:!0}:wx},[r,a]);return o};function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mc(){var e=Sx(),t=De(),n=I.useCallback(function(){var d=t.getState(),f=d.nodeInternals,m=Array.from(f.values());return m.map(function(h){return En({},h)})},[]),r=I.useCallback(function(d){var f=t.getState(),m=f.nodeInternals;return m.get(d)},[]),a=I.useCallback(function(){var d=t.getState(),f=d.edges,m=f===void 0?[]:f;return m.map(function(h){return En({},h)})},[]),o=I.useCallback(function(d){var f=t.getState(),m=f.edges,h=m===void 0?[]:m;return h.find(function(g){return g.id===d})},[]),i=I.useCallback(function(d){var f=t.getState(),m=f.nodeInternals,h=f.setNodes,g=f.hasDefaultNodes,v=f.onNodesChange,S=Array.from(m.values()),_=typeof d=="function"?d(S):d;if(g)h(_);else if(v){var w=_.length===0?S.map(function(C){return{type:"remove",id:C.id}}):_.map(function(C){return{item:C,type:"reset"}});v(w)}},[]),s=I.useCallback(function(d){var f=t.getState(),m=f.edges,h=m===void 0?[]:m,g=f.setEdges,v=f.hasDefaultEdges,S=f.onEdgesChange,_=typeof d=="function"?d(h):d;if(v)g(_);else if(S){var w=_.length===0?h.map(function(C){return{type:"remove",id:C.id}}):_.map(function(C){return{item:C,type:"reset"}});S(w)}},[]),l=I.useCallback(function(d){var f=Array.isArray(d)?d:[d],m=t.getState(),h=m.nodeInternals,g=m.setNodes,v=m.hasDefaultNodes,S=m.onNodesChange;if(v){var _=Array.from(h.values()),w=[].concat(_,on(f));g(w)}else if(S){var C=f.map(function(b){return{item:b,type:"add"}});S(C)}},[]),u=I.useCallback(function(d){var f=Array.isArray(d)?d:[d],m=t.getState(),h=m.edges,g=h===void 0?[]:h,v=m.setEdges,S=m.hasDefaultEdges,_=m.onEdgesChange;if(S)v([].concat(on(g),on(f)));else if(_){var w=f.map(function(C){return{item:C,type:"add"}});_(w)}},[]),c=I.useCallback(function(){var d=t.getState(),f=d.nodeInternals,m=d.edges,h=m===void 0?[]:m,g=d.transform,v=Array.from(f.values()),S=le(g,3),_=S[0],w=S[1],C=S[2];return{nodes:v.map(function(b){return En({},b)}),edges:h.map(function(b){return En({},b)}),viewport:{x:_,y:w,zoom:C}}},[]);return I.useMemo(function(){return En(En({},e),{},{getNodes:n,getNode:r,getEdges:a,getEdge:o,setNodes:i,setEdges:s,addNodes:l,addEdges:u,toObject:c})},[e,n,r,a,o,i,s,l,u,c])}function Ex(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Eo(e,t){if(e==null)return{};var n=Ex(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _x(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},$.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function xx(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},$.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Nx(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},$.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Ix(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},$.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Tx(){return $.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},$.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}var kx=["children","className"];function cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Rx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ia=function(t){var n=t.children,r=t.className,a=Eo(t,kx);return $.createElement("button",Rx({type:"button",className:at(["react-flow__controls-button",r])},a),n)},Ox=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Dm=function(t){var n=t.style,r=t.showZoom,a=r===void 0?!0:r,o=t.showFitView,i=o===void 0?!0:o,s=t.showInteractive,l=s===void 0?!0:s,u=t.fitViewOptions,c=t.onZoomIn,d=t.onZoomOut,f=t.onFitView,m=t.onInteractiveChange,h=t.className,g=t.children,v=De(),S=I.useState(!1),_=le(S,2),w=_[0],C=_[1],b=Te(Ox),y=Mc(),E=y.zoomIn,x=y.zoomOut,N=y.fitView;if(I.useEffect(function(){C(!0)},[]),!w)return null;var k=function(){E==null||E(),c==null||c()},A=function(){x==null||x(),d==null||d()},q=function(){N==null||N(u),f==null||f()},L=function(){v.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),m==null||m(!b)};return $.createElement("div",{className:at(["react-flow__controls",h]),style:n},a&&$.createElement($.Fragment,null,$.createElement(ia,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in"},$.createElement(_x,null)),$.createElement(ia,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out"},$.createElement(xx,null))),i&&$.createElement(ia,{className:"react-flow__controls-fitview",onClick:q,title:"fit view","aria-label":"fit view"},$.createElement(Nx,null)),l&&$.createElement(ia,{className:"react-flow__controls-interactive",onClick:L,title:"toggle interactivity","aria-label":"toggle interactivity"},b?$.createElement(Tx,null):$.createElement(Ix,null)),g)};Dm.displayName="Controls";var Ax=I.memo(Dm),qx=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function Lx(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&qx.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var a="".concat(r).split("-");return $.createElement("div",{className:at(["react-flow__attribution"].concat(on(a))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing"},$.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer"},"React Flow"))}var Px=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Dx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Mx=function(t){var n=t.x,r=t.y,a=t.label,o=t.labelStyle,i=o===void 0?{}:o,s=t.labelShowBg,l=s===void 0?!0:s,u=t.labelBgStyle,c=u===void 0?{}:u,d=t.labelBgPadding,f=d===void 0?[2,4]:d,m=t.labelBgBorderRadius,h=m===void 0?2:m,g=t.children,v=t.className,S=Eo(t,Px),_=I.useRef(null),w=I.useState({x:0,y:0,width:0,height:0}),C=le(w,2),b=C[0],y=C[1],E=at(["react-flow__edge-textwrapper",v]);return I.useEffect(function(){if(_.current){var x=_.current.getBBox();y({x:x.x,y:x.y,width:x.width,height:x.height})}},[a]),typeof a>"u"||!a?null:$.createElement("g",Dx({transform:"translate(".concat(n-b.width/2," ").concat(r-b.height/2,")"),className:E},S),l&&$.createElement("rect",{width:b.width+2*f[0],x:-f[0],y:-f[1],height:b.height+2*f[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),$.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:_,style:i},a),g)},Vx=I.memo(Mx),_o=function(e){var t=e.path,n=e.centerX,r=e.centerY,a=e.label,o=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,u=e.labelBgBorderRadius,c=e.style,d=e.markerEnd,f=e.markerStart,m=a?$.createElement(Vx,{x:n,y:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null;return $.createElement($.Fragment,null,$.createElement("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:d,markerStart:f}),m)};function Va(e){var t=e.pos,n=e.x1,r=e.y1,a=e.x2,o=e.y2,i,s;switch(t){case Q.Left:case Q.Right:i=.5*(n+a),s=r;break;case Q.Top:case Q.Bottom:i=n,s=.5*(r+o);break}return[i,s]}function Mm(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Q.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Q.Top:s,u=Va({pos:a,x1:t,y1:n,x2:o,y2:i}),c=le(u,2),d=c[0],f=c[1],m=Va({pos:l,x1:o,y1:i,x2:t,y2:n}),h=le(m,2),g=h[0],v=h[1];return"M".concat(t,",").concat(n," C").concat(d,",").concat(f," ").concat(g,",").concat(v," ").concat(o,",").concat(i)}function $x(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Q.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Q.Top:s,u=Va({pos:a,x1:t,y1:n,x2:o,y2:i}),c=le(u,2),d=c[0],f=c[1],m=Va({pos:l,x1:o,y1:i,x2:t,y2:n}),h=le(m,2),g=h[0],v=h[1],S=t*.125+d*.375+g*.375+o*.125,_=n*.125+f*.375+v*.375+i*.125,w=Math.abs(S-t),C=Math.abs(_-n);return[S,_,w,C]}var Vm=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.sourcePosition,i=o===void 0?Q.Bottom:o,s=e.targetPosition,l=s===void 0?Q.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,m=e.labelBgPadding,h=e.labelBgBorderRadius,g=e.style,v=e.markerEnd,S=e.markerStart,_={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:a,targetPosition:l},w=Mm(_),C=$x(_),b=le(C,2),y=b[0],E=b[1];return $.createElement(_o,{path:w,centerX:y,centerY:E,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:v,markerStart:S})});function dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var fd=[Q.Left,Q.Right],$m=function(t){var n=t.sourceX,r=t.sourceY,a=t.targetX,o=t.targetY,i=t.sourcePosition,s=i===void 0?Q.Bottom:i,l=t.targetPosition,u=l===void 0?Q.Top:l,c=fd.includes(s),d=fd.includes(u),f=c&&!d||d&&!c;if(f){var m=c?Math.abs(a-n):0,h=n>a?n-m:n+m,g=c?0:Math.abs(o-r),v=r<o?r+g:r-g;return[h,v,m,g]}var S=Math.abs(a-n)/2,_=a<n?a+S:a-S,w=Math.abs(o-r)/2,C=o<r?o+w:o-w;return[_,C,S,w]};function ar(e,t,n){return n===void 0?n:function(r){var a=t().edges.find(function(o){return o.id===e});n(r,Fx({},a))}}var Mo=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},Vo=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},$o=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Fo=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},Bo=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},zo=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},Ho=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Uo=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function Ps(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Q.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Q.Top:s,u=e.borderRadius,c=u===void 0?5:u,d=e.centerX,f=e.centerY,m=$m({sourceX:t,sourceY:n,targetX:o,targetY:i}),h=le(m,4),g=h[0],v=h[1],S=h[2],_=h[3],w=Math.min(c,Math.abs(o-t)),C=Math.min(c,Math.abs(i-n)),b=Math.min(w,C,S,_),y=[Q.Left,Q.Right],E=typeof d<"u"?d:g,x=typeof f<"u"?f:v,N=null,k=null;return t<=o?(N=n<=i?Mo(t,x,b):zo(t,x,b),k=n<=i?Uo(o,x,b):Fo(o,x,b)):(N=n<i?$o(t,x,b):Ho(t,x,b),k=n<i?Bo(o,x,b):Vo(o,x,b)),y.includes(a)&&y.includes(l)?t<=o?(N=n<=i?Uo(E,n,b):Fo(E,n,b),k=n<=i?Mo(E,i,b):zo(E,i,b)):(a===Q.Right&&l===Q.Left||a===Q.Left&&l===Q.Right||a===Q.Left&&l===Q.Left)&&(N=n<=i?Bo(E,n,b):Vo(E,n,b),k=n<=i?$o(E,i,b):Ho(E,i,b)):y.includes(a)&&!y.includes(l)?(t<=o?N=n<=i?Uo(o,n,b):Fo(o,n,b):N=n<=i?Bo(o,n,b):Vo(o,n,b),k=""):!y.includes(a)&&y.includes(l)&&(t<=o?N=n<=i?Mo(t,i,b):zo(t,i,b):N=n<=i?$o(t,i,b):Ho(t,i,b),k=""),"M ".concat(t,",").concat(n).concat(N).concat(k,"L ").concat(o,",").concat(i)}var Vc=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.sourcePosition,m=f===void 0?Q.Bottom:f,h=e.targetPosition,g=h===void 0?Q.Top:h,v=e.markerEnd,S=e.markerStart,_=e.borderRadius,w=_===void 0?5:_,C=$m({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:m,targetPosition:g}),b=le(C,2),y=b[0],E=b[1],x=Ps({sourceX:t,sourceY:n,sourcePosition:m,targetX:r,targetY:a,targetPosition:g,borderRadius:w});return $.createElement(_o,{path:x,centerX:y,centerY:E,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:v,markerStart:S})});function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fm=I.memo(function(e){return $.createElement(Vc,hd(hd({},e),{},{borderRadius:0}))}),Bm=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.markerEnd,m=e.markerStart,h=Math.abs(a-n)/2,g=a<n?a+h:a-h,v=Math.abs(r-t)/2,S=r<t?r+v:r-v,_="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(a);return $.createElement(_o,{path:_,centerX:S,centerY:g,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:f,markerStart:m})});function sa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function $a(e){var t=e.pos,n=e.x1,r=e.y1,a=e.x2,o=e.y2,i=e.c,s,l;switch(t){case Q.Left:s=n-sa(n-a,i),l=r;break;case Q.Right:s=n+sa(a-n,i),l=r;break;case Q.Top:s=n,l=r-sa(r-o,i);break;case Q.Bottom:s=n,l=r+sa(o-r,i);break}return[s,l]}function zm(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Q.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Q.Top:s,u=e.curvature,c=u===void 0?.25:u,d=$a({pos:a,x1:t,y1:n,x2:o,y2:i,c}),f=le(d,2),m=f[0],h=f[1],g=$a({pos:l,x1:o,y1:i,x2:t,y2:n,c}),v=le(g,2),S=v[0],_=v[1];return"M".concat(t,",").concat(n," C").concat(m,",").concat(h," ").concat(S,",").concat(_," ").concat(o,",").concat(i)}function Bx(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?Q.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?Q.Top:s,u=e.curvature,c=u===void 0?.25:u,d=$a({pos:a,x1:t,y1:n,x2:o,y2:i,c}),f=le(d,2),m=f[0],h=f[1],g=$a({pos:l,x1:o,y1:i,x2:t,y2:n,c}),v=le(g,2),S=v[0],_=v[1],w=t*.125+m*.375+S*.375+o*.125,C=n*.125+h*.375+_*.375+i*.125,b=Math.abs(w-t),y=Math.abs(C-n);return[w,C,b,y]}var Ds=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.sourcePosition,i=o===void 0?Q.Bottom:o,s=e.targetPosition,l=s===void 0?Q.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,m=e.labelBgPadding,h=e.labelBgBorderRadius,g=e.style,v=e.markerEnd,S=e.markerStart,_=e.curvature,w={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:a,targetPosition:l,curvature:_},C=zm(w),b=Bx(w),y=le(b,2),E=y[0],x=y[1];return $.createElement(_o,{path:C,centerX:E,centerY:x,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:v,markerStart:S})}),$c=I.createContext(null),zx=$c.Provider;$c.Consumer;function Ms(e,t,n,r,a,o,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,u=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||u)){c.isHoveringHandle=!0;var d=s.getAttribute("data-nodeid"),f=s.getAttribute("data-handleid"),m=n?{source:d,sourceHandle:f,target:r,targetHandle:a}:{source:r,sourceHandle:a,target:d,targetHandle:f};c.connection=m;var h=t===Hn.Strict?n&&u||!n&&l:!0;h&&(c.isValid=o(m))}return c}function jo(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Hm(e){var t=e.event,n=e.handleId,r=e.nodeId,a=e.onConnect,o=e.isTarget,i=e.getState,s=e.setState,l=e.isValidConnection,u=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,d=t.target.closest(".react-flow"),f=Em(t.target);if(!f)return;var m=f.elementFromPoint(t.clientX,t.clientY),h=m==null?void 0:m.classList.contains("target"),g=m==null?void 0:m.classList.contains("source");if(!d||!h&&!g&&!u)return;var v=i(),S=v.onConnectStart,_=v.connectionMode,w=u||(h?"target":"source"),C=d.getBoundingClientRect(),b;s({connectionPosition:{x:t.clientX-C.left,y:t.clientY-C.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:w}),S==null||S(t,{nodeId:r,handleId:n,handleType:w});function y(x){s({connectionPosition:{x:x.clientX-C.left,y:x.clientY-C.top}});var N=Ms(x,_,o,r,n,l,f),k=N.connection,A=N.elementBelow,q=N.isValid,L=N.isHoveringHandle;if(!L)return jo(b);k.source!==k.target&&A&&(jo(b),b=A,A.classList.add("react-flow__handle-connecting"),A.classList.toggle("react-flow__handle-valid",q))}function E(x){var N=i(),k=N.onConnectStop,A=N.onConnectEnd,q=Ms(x,_,o,r,n,l,f),L=q.connection,T=q.isValid;k==null||k(x),T&&(a==null||a(L)),A==null||A(x),u&&c&&c(x),jo(b),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),f.removeEventListener("mousemove",y),f.removeEventListener("mouseup",E)}f.addEventListener("mousemove",y),f.addEventListener("mouseup",E)}var Hx=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?md(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ux=function(){return!0},jx=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Um=I.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,a=e.position,o=a===void 0?Q.Top:a,i=e.isValidConnection,s=i===void 0?Ux:i,l=e.isConnectable,u=l===void 0?!0:l,c=e.id,d=e.onConnect,f=e.children,m=e.className,h=e.onMouseDown,g=Eo(e,Hx),v=De(),S=I.useContext($c),_=Te(jx,Ye),w=_.connectionStartHandle,C=_.connectOnClick,b=c||null,y=r==="target",E=function(A){var q=v.getState(),L=q.defaultEdgeOptions,T=q.onConnect,D=q.hasDefaultEdges,R=Wo(Wo({},L),A);if(D){var M=v.getState(),z=M.edges;v.setState({edges:hx(R,z)})}T==null||T(R),d==null||d(R)},x=function(A){A.button===0&&Hm({event:A,handleId:b,nodeId:S,onConnect:E,isTarget:y,getState:v.getState,setState:v.setState,isValidConnection:s}),h==null||h(A)},N=function(A){var q=v.getState(),L=q.onClickConnectStart,T=q.onClickConnectStop,D=q.onClickConnectEnd,R=q.connectionMode;if(!w){L==null||L(A,{nodeId:S,handleId:b,handleType:r}),v.setState({connectionStartHandle:{nodeId:S,type:r,handleId:b}});return}var M=Em(A.target),z=Ms(A,R,w.type==="target",w.nodeId,w.handleId||null,s,M),B=z.connection,F=z.isValid;T==null||T(A),F&&E(B),D==null||D(A),v.setState({connectionStartHandle:null})};return $.createElement("div",Wo({"data-handleid":b,"data-nodeid":S,"data-handlepos":o,className:at(["react-flow__handle","react-flow__handle-".concat(o),"nodrag",m,{source:!y,target:y,connectable:u,connecting:(w==null?void 0:w.nodeId)===S&&(w==null?void 0:w.handleId)===b&&(w==null?void 0:w.type)===r}]),onMouseDown:x,onClick:C?N:void 0,ref:t},g),f)});Um.displayName="Handle";var Fa=I.memo(Um),jm=function(t){var n=t.data,r=t.isConnectable,a=t.targetPosition,o=a===void 0?Q.Top:a,i=t.sourcePosition,s=i===void 0?Q.Bottom:i;return $.createElement($.Fragment,null,$.createElement(Fa,{type:"target",position:o,isConnectable:r}),n==null?void 0:n.label,$.createElement(Fa,{type:"source",position:s,isConnectable:r}))};jm.displayName="DefaultNode";var Vs=I.memo(jm),Wm=function(t){var n=t.data,r=t.isConnectable,a=t.sourcePosition,o=a===void 0?Q.Bottom:a;return $.createElement($.Fragment,null,n==null?void 0:n.label,$.createElement(Fa,{type:"source",position:o,isConnectable:r}))};Wm.displayName="InputNode";var Gm=I.memo(Wm),Ym=function(t){var n=t.data,r=t.isConnectable,a=t.targetPosition,o=a===void 0?Q.Top:a;return $.createElement($.Fragment,null,$.createElement(Fa,{type:"target",position:o,isConnectable:r}),n==null?void 0:n.label)};Ym.displayName="OutputNode";var Xm=I.memo(Ym),Wx=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},Gx=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),a=n.selectedNodes.map(function(s){return s.id}),o=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return Ye(r,a)&&Ye(o,i)};function Yx(e){var t=e.onSelectionChange,n=Te(Wx,Gx),r=n.selectedNodes,a=n.selectedEdges;return I.useEffect(function(){t({nodes:r,edges:a})},[r,a]),null}var Xx=I.memo(Yx),Qx=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Bt(e,t){I.useEffect(function(){typeof e<"u"&&t(e)},[e])}function ye(e,t,n){I.useEffect(function(){typeof t<"u"&&n(fe({},e,t))},[t])}var Zx=function(t){var n=t.nodes,r=t.edges,a=t.defaultNodes,o=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,u=t.onConnectEnd,c=t.onClickConnectStart,d=t.onClickConnectStop,f=t.onClickConnectEnd,m=t.nodesDraggable,h=t.nodesConnectable,g=t.minZoom,v=t.maxZoom,S=t.nodeExtent,_=t.onNodesChange,w=t.onEdgesChange,C=t.elementsSelectable,b=t.connectionMode,y=t.snapGrid,E=t.snapToGrid,x=t.translateExtent,N=t.connectOnClick,k=t.defaultEdgeOptions,A=t.fitView,q=t.fitViewOptions,L=t.onNodesDelete,T=t.onEdgesDelete,D=t.onNodeDrag,R=t.onNodeDragStart,M=t.onNodeDragStop,z=t.onSelectionDrag,B=t.onSelectionDragStart,F=t.onSelectionDragStop,W=Te(Qx,Ye),Z=W.setNodes,P=W.setEdges,V=W.setDefaultNodesAndEdges,U=W.setMinZoom,G=W.setMaxZoom,H=W.setTranslateExtent,X=W.setNodeExtent,K=W.reset,Y=De();return I.useEffect(function(){return V(a,o),function(){K()}},[]),ye("defaultEdgeOptions",k,Y.setState),ye("connectionMode",b,Y.setState),ye("onConnect",i,Y.setState),ye("onConnectStart",s,Y.setState),ye("onConnectStop",l,Y.setState),ye("onConnectEnd",u,Y.setState),ye("onClickConnectStart",c,Y.setState),ye("onClickConnectStop",d,Y.setState),ye("onClickConnectEnd",f,Y.setState),ye("nodesDraggable",m,Y.setState),ye("nodesConnectable",h,Y.setState),ye("elementsSelectable",C,Y.setState),ye("snapToGrid",E,Y.setState),ye("snapGrid",y,Y.setState),ye("onNodesChange",_,Y.setState),ye("onEdgesChange",w,Y.setState),ye("connectOnClick",N,Y.setState),ye("fitViewOnInit",A,Y.setState),ye("fitViewOnInitOptions",q,Y.setState),ye("onNodesDelete",L,Y.setState),ye("onEdgesDelete",T,Y.setState),ye("onNodeDrag",D,Y.setState),ye("onNodeDragStart",R,Y.setState),ye("onNodeDragStop",M,Y.setState),ye("onSelectionDrag",z,Y.setState),ye("onSelectionDragStart",B,Y.setState),ye("onSelectionDragStop",F,Y.setState),Bt(n,Z),Bt(r,P),Bt(a,Z),Bt(o,P),Bt(g,U),Bt(v,G),Bt(x,H),Bt(S,X),null},Kx=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",Jx=Kx,e1=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",t1=e1,n1=function(t,n,r){return r===Q.Left?t-n:r===Q.Right?t+n:t},r1=function(t,n,r){return r===Q.Top?t-n:r===Q.Bottom?t+n:t},gd=function(t){var n=t.className,r=t.position,a=t.centerX,o=t.centerY,i=t.radius,s=i===void 0?10:i;return $.createElement("circle",{className:at(["react-flow__edgeupdater",n]),cx:n1(a,s,r),cy:r1(o,s,r),r:s,stroke:"transparent",fill:"transparent"})},_n=function(e){var t=function(r){var a=r.id,o=r.className,i=r.type,s=r.data,l=r.onClick,u=r.onEdgeDoubleClick,c=r.selected,d=r.animated,f=r.label,m=r.labelStyle,h=r.labelShowBg,g=r.labelBgStyle,v=r.labelBgPadding,S=r.labelBgBorderRadius,_=r.style,w=r.source,C=r.target,b=r.sourceX,y=r.sourceY,E=r.targetX,x=r.targetY,N=r.sourcePosition,k=r.targetPosition,A=r.elementsSelectable,q=r.hidden,L=r.sourceHandleId,T=r.targetHandleId,D=r.onContextMenu,R=r.onMouseEnter,M=r.onMouseMove,z=r.onMouseLeave,B=r.edgeUpdaterRadius,F=r.onEdgeUpdate,W=r.onEdgeUpdateStart,Z=r.onEdgeUpdateEnd,P=r.markerEnd,V=r.markerStart,U=r.rfId,G=I.useState(!1),H=le(G,2),X=H[0],K=H[1],Y=De(),de=function(Ie){var se=Y.getState(),Ze=se.edges,Re=se.addSelectedEdges,st=Ze.find(function(St){return St.id===a});A&&(Y.setState({nodesSelectionActive:!1}),Re([a])),l==null||l(Ie,st)},pe=ar(a,Y.getState,u),Ee=ar(a,Y.getState,D),we=ar(a,Y.getState,R),_e=ar(a,Y.getState,M),ke=ar(a,Y.getState,z),Me=function(Ie,se){var Ze=se?C:w,Re=(se?T:L)||null,st=se?"target":"source",St=function(){return!0},To=se,Cn=Y.getState().edges.find(function($t){return $t.id===a});W==null||W(Ie,Cn,st);var ko=Z?function($t){return Z($t,Cn,st)}:void 0,Gr=function(Yr){return F==null?void 0:F(Cn,Yr)};Hm({event:Ie,handleId:Re,nodeId:Ze,onConnect:Gr,isTarget:To,getState:Y.getState,setState:Y.setState,isValidConnection:St,elementEdgeUpdaterType:st,onEdgeUpdateEnd:ko})},Ae=function(Ie){return Me(Ie,!0)},qe=function(Ie){return Me(Ie,!1)},ve=function(){return K(!0)},Ne=function(){return K(!1)},Qe=I.useMemo(function(){return"url(#".concat(qs(V,U),")")},[V,U]),ne=I.useMemo(function(){return"url(#".concat(qs(P,U),")")},[P,U]);if(q)return null;var oe=!A&&!l,te=typeof F<"u",he=at(["react-flow__edge","react-flow__edge-".concat(i),o,{selected:c,animated:d,inactive:oe,updating:X}]);return $.createElement("g",{className:he,onClick:de,onDoubleClick:pe,onContextMenu:Ee,onMouseEnter:we,onMouseMove:_e,onMouseLeave:ke},$.createElement(e,{id:a,source:w,target:C,selected:c,animated:d,label:f,labelStyle:m,labelShowBg:h,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:S,data:s,style:_,sourceX:b,sourceY:y,targetX:E,targetY:x,sourcePosition:N,targetPosition:k,sourceHandleId:L,targetHandleId:T,markerStart:Qe,markerEnd:ne,"data-testid":"rf__edge-".concat(a)}),te&&$.createElement("g",{onMouseDown:Ae,onMouseEnter:ve,onMouseOut:Ne},$.createElement(gd,{position:N,centerX:b,centerY:y,radius:B})),te&&$.createElement("g",{onMouseDown:qe,onMouseEnter:ve,onMouseOut:Ne},$.createElement(gd,{position:k,centerX:E,centerY:x,radius:B})))};return t.displayName="EdgeWrapper",I.memo(t)};function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a1(e){var t={default:_n(e.default||Ds),straight:_n(e.bezier||Bm),step:_n(e.step||Fm),smoothstep:_n(e.step||Vc),simplebezier:_n(e.simplebezier||Vm)},n={},r=Object.keys(e).filter(function(a){return!["default","bezier"].includes(a)}).reduce(function(a,o){return a[o]=_n(e[o]||Ds),a},n);return yd(yd({},t),r)}function bd(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,a=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case Q.Top:return{x:r+o/2,y:a};case Q.Right:return{x:r+o,y:a+i/2};case Q.Bottom:return{x:r+o/2,y:a+i};case Q.Left:return{x:r,y:a+i/2}}}function wd(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var o1=function(t,n,r,a,o,i){var s=bd(r,t,n),l=bd(i,a,o);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function i1(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,a=e.sourceHeight,o=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,u=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+o),y2:Math.max(t.y+a,n.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var d=Ma({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),f=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),m=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y)),h=Math.ceil(f*m);return h>0}function Cd(e,t){var n,r,a,o,i,s=e.get(t),l=(s==null||(n=s[Oe])===null||n===void 0?void 0:n.handleBounds)||null,u=!s||!l||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((a=s.positionAbsolute)===null||a===void 0?void 0:a.y)>"u";return[{x:(s==null||(o=s.positionAbsolute)===null||o===void 0?void 0:o.x)||0,y:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!u]}var s1=typeof document<"u"?document:null,Ba=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:s1},n=I.useState(!1),r=le(n,2),a=r[0],o=r[1],i=I.useRef(new Set([])),s=I.useMemo(function(){if(e!==null){var d=Array.isArray(e)?e:[e],f=d.filter(function(h){return typeof h=="string"}).map(function(h){return h.split("+")}),m=f.reduce(function(h,g){return h.concat.apply(h,on(g))},[]);return[f,m]}return[[],[]]},[e]),l=le(s,2),u=l[0],c=l[1];return I.useEffect(function(){if(e!==null){var d,f,m=function(S){if(_d(S))return!1;var _=Ed(S.code,c);i.current.add(S[_]),Sd(u,i.current,!1)&&(S.preventDefault(),o(!0))},h=function(S){if(_d(S))return!1;var _=Ed(S.code,c);Sd(u,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(S[_])},g=function(){i.current.clear(),o(!1)};return t==null||(d=t.target)===null||d===void 0||d.addEventListener("keydown",m),t==null||(f=t.target)===null||f===void 0||f.addEventListener("keyup",h),window.addEventListener("blur",g),function(){var v,S;t==null||(v=t.target)===null||v===void 0||v.removeEventListener("keydown",m),t==null||(S=t.target)===null||S===void 0||S.removeEventListener("keyup",h),window.removeEventListener("blur",g)}}},[e,o]),a};function Sd(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(a){return t.has(a)})})}function Ed(e,t){return t.includes(e)?"code":"key"}function _d(e){var t,n=((t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))}var l1=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},c1=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=De(),a=Te(l1,Ye),o=a.onNodesChange,i=a.onEdgesChange,s=Ba(t),l=Ba(n);I.useEffect(function(){var u=r.getState(),c=u.nodeInternals,d=u.edges,f=u.hasDefaultNodes,m=u.hasDefaultEdges,h=u.onNodesDelete,g=u.onEdgesDelete,v=Array.from(c.values()),S=v.reduce(function(x,N){return(!N.selected&&N.parentNode&&x.find(function(k){return k.id===N.parentNode})||N.selected)&&x.push(N),x},[]),_=d.filter(function(x){return x.selected});if(s&&(S||_)){var w=Pc(S,d),C=[].concat(on(_),on(w)),b=C.reduce(function(x,N){return x.includes(N.id)||x.push(N.id),x},[]);if((m||f)&&(m&&r.setState({edges:d.filter(function(x){return!b.includes(x.id)})}),f&&(S.forEach(function(x){c.delete(x.id)}),r.setState({nodeInternals:new Map(c)}))),b.length>0&&(g==null||g(C),i)){var y=b.map(function(x){return{id:x,type:"remove"}});i(y)}if(S.length>0&&(h==null||h(S),o)){var E=S.map(function(x){return{id:x.id,type:"remove"}});o(E)}r.setState({nodesSelectionActive:!1})}},[s,o,i]),I.useEffect(function(){r.setState({multiSelectionActive:l})},[l])};function u1(e){var t=De();I.useEffect(function(){var n,r=function(){if(e.current){var o=qc(e.current);t.setState({width:o.width||500,height:o.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var d1=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Go=function(t){return{x:t.x,y:t.y,zoom:t.k}},la=function(t,n){return t.target.closest(".".concat(n))},f1=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},p1=function(t){var n=t.onMove,r=t.onMoveStart,a=t.onMoveEnd,o=t.zoomOnScroll,i=o===void 0?!0:o,s=t.zoomOnPinch,l=s===void 0?!0:s,u=t.panOnScroll,c=u===void 0?!1:u,d=t.panOnScrollSpeed,f=d===void 0?.5:d,m=t.panOnScrollMode,h=m===void 0?qn.Free:m,g=t.zoomOnDoubleClick,v=g===void 0?!0:g,S=t.selectionKeyPressed,_=t.elementsSelectable,w=t.panOnDrag,C=w===void 0?!0:w,b=t.translateExtent,y=t.minZoom,E=t.maxZoom,x=t.defaultZoom,N=x===void 0?1:x,k=t.defaultPosition,A=k===void 0?[0,0]:k,q=t.zoomActivationKeyCode,L=t.preventScrolling,T=L===void 0?!0:L,D=t.children,R=t.noWheelClassName,M=t.noPanClassName,z=De(),B=I.useRef(!1),F=I.useRef(null),W=I.useRef({x:0,y:0,zoom:0}),Z=Te(f1,Ye),P=Z.d3Zoom,V=Z.d3Selection,U=Z.d3ZoomHandler,G=Ba(q);return u1(F),I.useEffect(function(){if(F.current){var H,X=ax().scaleExtent([y,E]).translateExtent(b),K=ct(F.current).call(X),Y=Ln(A[0],b[0][0],b[1][0]),de=Ln(A[1],b[0][1],b[1][1]),pe=Ln(N,y,E),Ee=an.translate(Y,de).scale(pe);X.transform(K,Ee),z.setState({d3Zoom:X,d3Selection:K,d3ZoomHandler:K.on("wheel.zoom"),transform:[Y,de,pe],domNode:(H=K.node())===null||H===void 0?void 0:H.closest(".react-flow")})}},[]),I.useEffect(function(){V&&P&&(c&&!G?V.on("wheel",function(H){if(la(H,R))return!1;H.preventDefault(),H.stopImmediatePropagation();var X=V.property("__zoom").k||1;if(H.ctrlKey&&l){var K=gt(H),Y=-H.deltaY*(H.deltaMode===1?.05:H.deltaMode?1:.002)*10,de=X*Math.pow(2,Y);P.scaleTo(V,de,K);return}var pe=H.deltaMode===1?20:1,Ee=h===qn.Vertical?0:H.deltaX*pe,we=h===qn.Horizontal?0:H.deltaY*pe;P.translateBy(V,-(Ee/X)*f,-(we/X)*f)}).on("wheel.zoom",null):typeof U<"u"&&V.on("wheel",function(H){if(!T||la(H,R))return null;H.preventDefault()}).on("wheel.zoom",U))},[c,h,V,P,U,G,l,T,R]),I.useEffect(function(){P&&(S&&!B.current?P.on("zoom",null):S||P.on("zoom",function(H){if(z.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),n){var X=Go(H.transform);n(H.sourceEvent,X)}}))},[S,P,n]),I.useEffect(function(){P&&P.on("start",function(H){if(B.current=!0,r){var X=Go(H.transform);W.current=X,r(H.sourceEvent,X)}})},[P,r]),I.useEffect(function(){P&&P.on("end",function(H){if(B.current=!1,a&&d1(W.current,H.transform)){var X=Go(H.transform);W.current=X,a(H.sourceEvent,X)}})},[P,a]),I.useEffect(function(){P&&P.filter(function(H){var X=G||i,K=l&&H.ctrlKey;return!C&&!X&&!c&&!v&&!l||S||!v&&H.type==="dblclick"||la(H,R)&&H.type==="wheel"||la(H,M)&&H.type!=="wheel"||!l&&H.ctrlKey&&H.type==="wheel"||!X&&!c&&!K&&H.type==="wheel"||!C&&(H.type==="mousedown"||H.type==="touchstart")?!1:(!H.ctrlKey||H.type==="wheel")&&!H.button})},[P,i,l,c,v,C,S,_,G]),$.createElement("div",{className:"react-flow__renderer react-flow__container",ref:F},D)};function xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Id(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var h1=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Td={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},m1=I.memo(function(e){var t=e.selectionKeyPressed,n=De(),r=I.useRef(0),a=I.useRef(0),o=I.useRef(),i=I.useState(Td),s=le(i,2),l=s[0],u=s[1],c=Te(h1,Ye),d=c.userSelectionActive,f=c.elementsSelectable,m=d||t;if(!f||!m)return null;var h=function(){u(Td),n.setState({userSelectionActive:!1}),r.current=0,a.current=0},g=function(C){var b=C.target.closest(".react-flow");o.current=b.getBoundingClientRect();var y=Id(C,o.current);u({width:0,height:0,startX:y.x,startY:y.y,x:y.x,y:y.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},v=function(C){var b,y;if(!(!t||!l.draw||!o.current)){var E=Id(C,o.current),x=(b=l.startX)!==null&&b!==void 0?b:0,N=(y=l.startY)!==null&&y!==void 0?y:0,k=Nd(Nd({},l),{},{x:E.x<x?E.x:x,y:E.y<N?E.y:N,width:Math.abs(E.x-x),height:Math.abs(E.y-N)}),A=n.getState(),q=A.nodeInternals,L=A.edges,T=A.transform,D=A.onNodesChange,R=A.onEdgesChange,M=Array.from(q.values()),z=Rm(q,k,T,!1,!0),B=Pc(z,L).map(function(P){return P.id}),F=z.map(function(P){return P.id});if(r.current!==F.length){r.current=F.length;var W=Tn(M,F);W.length&&(D==null||D(W))}if(a.current!==B.length){a.current=B.length;var Z=Tn(L,B);Z.length&&(R==null||R(Z))}u(k)}},S=function(){n.setState({nodesSelectionActive:r.current>0}),h()},_=function(){n.setState({nodesSelectionActive:!1}),h()};return $.createElement("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:g,onMouseMove:v,onMouseUp:S,onMouseLeave:_},l.draw&&$.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}}))});function kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qm(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:Qm(n,t):!1}function Od(e,t,n){var r=e;do{var a;if((a=r)!==null&&a!==void 0&&a.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function g1(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!Qm(r,e))}).map(function(r){var a,o,i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((a=(o=r.positionAbsolute)===null||o===void 0?void 0:o.x)!==null&&a!==void 0?a:0),y:t.y-((i=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function v1(e,t,n,r,a,o){var i=le(r,2),s=i[0],l=i[1],u=e.extent||o,c={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&(c.x=s*Math.round(c.x/s),c.y=l*Math.round(c.y/l)),e.extent==="parent")if(e.parentNode&&e.width&&e.height){var d=a.get(e.parentNode);u=d!=null&&d.positionAbsolute&&d!==null&&d!==void 0&&d.width&&d!==null&&d!==void 0&&d.height?[[d.positionAbsolute.x,d.positionAbsolute.y],[d.positionAbsolute.x+d.width-e.width,d.positionAbsolute.y+d.height-e.height]]:u}else u=o;else if(e.extent&&e.parentNode){var f,m,h,g,v=a.get(e.parentNode),S=(f=v==null||(m=v.positionAbsolute)===null||m===void 0?void 0:m.x)!==null&&f!==void 0?f:0,_=(h=v==null||(g=v.positionAbsolute)===null||g===void 0?void 0:g.y)!==null&&h!==void 0?h:0;u=[[e.extent[0][0]+S,e.extent[0][1]+_],[e.extent[1][0]+S,e.extent[1][1]+_]]}var w={x:0,y:0};if(e.parentNode){var C,b,y,E,x=a.get(e.parentNode);w={x:(C=x==null||(b=x.positionAbsolute)===null||b===void 0?void 0:b.x)!==null&&C!==void 0?C:0,y:(y=x==null||(E=x.positionAbsolute)===null||E===void 0?void 0:E.y)!==null&&y!==void 0?y:0}}return e.positionAbsolute=u?Sm(c,u):c,e.position={x:e.positionAbsolute.x-w.x,y:e.positionAbsolute.y-w.y},e}function Yo(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,a=n.map(function(o){var i=r.get(o.id);return Rd(Rd({},i),{},{position:o.position,positionAbsolute:o.positionAbsolute})});return[t?a.find(function(o){return o.id===t}):a[0],a]}function Xo(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function Zm(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,a=e.noDragClassName,o=e.handleSelector,i=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,u=I.useState(!1),c=le(u,2),d=c[0],f=c[1],m=De(),h=I.useRef(),g=I.useRef({x:null,y:null}),v=I.useCallback(function(S){var _=S.sourceEvent,w=m.getState(),C=w.transform,b=w.snapGrid,y=w.snapToGrid,E=_.touches?_.touches[0].clientX:_.clientX,x=_.touches?_.touches[0].clientY:_.clientY,N=km({x:E,y:x},C,y,b);return N},[]);return I.useEffect(function(){if(t!=null&&t.current){var S=ct(t.current);if(r)S.on(".drag",null);else{var _=hE().on("start",function(w){var C=m.getState(),b=C.nodeInternals,y=C.multiSelectionActive,E=C.unselectNodesAndEdges,x=C.onNodeDragStart,N=C.onSelectionDragStart,k=i?x:Xo(N);if(!l&&!y&&i){var A;(A=b.get(i))!==null&&A!==void 0&&A.selected||E()}i&&s&&l&&Tm({id:i,store:m});var q=v(w);if(g.current=q,h.current=g1(b,q,i),k&&h.current){var L=Yo({nodeId:i,dragItems:h.current,nodeInternals:b}),T=le(L,2),D=T[0],R=T[1];k(w.sourceEvent,D,R)}}).on("drag",function(w){var C=m.getState(),b=C.updateNodePositions,y=C.snapToGrid,E=C.snapGrid,x=C.nodeInternals,N=C.nodeExtent,k=C.onNodeDrag,A=C.onSelectionDrag,q=v(w);if((g.current.x!==q.x||g.current.y!==q.y)&&h.current){g.current=q,h.current=h.current.map(function(z){return v1(z,q,y,E,x,N)});var L=i?k:Xo(A);if(b(h.current,!0,!0),f(!0),L){var T=Yo({nodeId:i,dragItems:h.current,nodeInternals:x}),D=le(T,2),R=D[0],M=D[1];L(w.sourceEvent,R,M)}}w.on("end",function(z){if(f(!1),h.current){var B=m.getState(),F=B.updateNodePositions,W=B.nodeInternals,Z=B.onNodeDragStop,P=B.onSelectionDragStop,V=i?Z:Xo(P);if(F(h.current,!1,!1),V){var U=Yo({nodeId:i,dragItems:h.current,nodeInternals:W}),G=le(U,2),H=G[0],X=G[1];V(z.sourceEvent,H,X)}}})}).filter(function(w){var C=w.target,b=!w.button&&(!a||!Od(C,".".concat(a),t))&&(!o||Od(C,o,t));return b});return S.call(_),function(){S.on(".drag",null)}}}},[t,r,a,o,s,m,i,l,v]),d}function Ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function y1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ad(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var b1=function(t){return y1({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},Lc(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},w1=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return Lc(n)};function C1(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=De(),a=Te(b1,Ye),o=a.transformString,i=a.userSelectionActive,s=Te(w1,Ye),l=s.width,u=s.height,c=s.x,d=s.y,f=I.useRef(null);if(Zm({nodeRef:f}),i||!l||!u)return null;var m=t?function(h){var g=Array.from(r.getState().nodeInternals.values()).filter(function(v){return v.selected});t(h,g)}:void 0;return $.createElement("div",{className:at(["react-flow__nodesselection","react-flow__container",n]),style:{transform:o}},$.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,style:{width:l,height:u,top:d,left:c}}))}var S1=I.memo(C1),E1=function(t){return t.nodesSelectionActive},Km=function(t){var n=t.children,r=t.onPaneClick,a=t.onPaneContextMenu,o=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,u=t.onMoveEnd,c=t.selectionKeyCode,d=t.multiSelectionKeyCode,f=t.zoomActivationKeyCode,m=t.elementsSelectable,h=t.zoomOnScroll,g=t.zoomOnPinch,v=t.panOnScroll,S=t.panOnScrollSpeed,_=t.panOnScrollMode,w=t.zoomOnDoubleClick,C=t.panOnDrag,b=t.translateExtent,y=t.minZoom,E=t.maxZoom,x=t.defaultZoom,N=t.defaultPosition,k=t.preventScrolling,A=t.onSelectionContextMenu,q=t.noWheelClassName,L=t.noPanClassName,T=De(),D=Te(E1),R=Ba(c);c1({deleteKeyCode:i,multiSelectionKeyCode:d});var M=function(W){r==null||r(W),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},z=a?function(F){return a(F)}:void 0,B=o?function(F){return o(F)}:void 0;return $.createElement(p1,{onMove:s,onMoveStart:l,onMoveEnd:u,selectionKeyPressed:R,elementsSelectable:m,zoomOnScroll:h,zoomOnPinch:g,panOnScroll:v,panOnScrollSpeed:S,panOnScrollMode:_,zoomOnDoubleClick:w,panOnDrag:C,translateExtent:b,minZoom:y,maxZoom:E,defaultZoom:x,defaultPosition:N,zoomActivationKeyCode:f,preventScrolling:k,noWheelClassName:q,noPanClassName:L},n,$.createElement(m1,{selectionKeyPressed:R}),D&&$.createElement(S1,{onSelectionContextMenu:A,noPanClassName:L}),$.createElement("div",{className:"react-flow__pane react-flow__container",onClick:M,onContextMenu:z,onWheel:B}))};Km.displayName="FlowRenderer";var _1=I.memo(Km);function x1(e){var t=Te(I.useCallback(function(n){return e?Rm(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var N1=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},Jm=function(t){var n=Te(N1,Ye),r=n.nodesDraggable,a=n.nodesConnectable,o=n.elementsSelectable,i=n.updateNodeDimensions,s=x1(t.onlyRenderVisibleElements),l=I.useRef(),u=I.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(d){var f=d.map(function(m){return{id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}});i(f)});return l.current=c,c},[]);return I.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),$.createElement("div",{className:"react-flow__nodes react-flow__container"},s.map(function(c){var d,f,m,h,g,v,S,_=c.type||"default";t.nodeTypes[_]||(_="default");var w=t.nodeTypes[_]||t.nodeTypes.default,C=!!(c.draggable||r&&typeof c.draggable>"u"),b=!!(c.selectable||o&&typeof c.selectable>"u"),y=!!(c.connectable||a&&typeof c.connectable>"u");return $.createElement(w,{key:c.id,id:c.id,className:c.className,style:c.style,type:_,data:c.data,sourcePosition:c.sourcePosition||Q.Bottom,targetPosition:c.targetPosition||Q.Top,hidden:c.hidden,xPos:(d=(f=c.positionAbsolute)===null||f===void 0?void 0:f.x)!==null&&d!==void 0?d:0,yPos:(m=(h=c.positionAbsolute)===null||h===void 0?void 0:h.y)!==null&&m!==void 0?m:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:C,isSelectable:b,isConnectable:y,resizeObserver:u,dragHandle:c.dragHandle,zIndex:(g=(v=c[Oe])===null||v===void 0?void 0:v.z)!==null&&g!==void 0?g:0,isParent:!!((S=c[Oe])!==null&&S!==void 0&&S.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height})}))};Jm.displayName="NodeRenderer";var I1=I.memo(Jm),xn;function qd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var T1=(xn={},fe(xn,Q.Left,Q.Right),fe(xn,Q.Right,Q.Left),fe(xn,Q.Top,Q.Bottom),fe(xn,Q.Bottom,Q.Top),xn),k1=function(e){var t,n,r,a,o,i=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,u=e.connectionLineType,c=u===void 0?Nt.Bezier:u,d=e.isConnectable,f=e.CustomConnectionLineComponent,m=Te(I.useCallback(function(B){return{fromNode:B.nodeInternals.get(i),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2]}},[i]),Ye),h=m.fromNode,g=m.handleId,v=m.toX,S=m.toY,_=h==null||(t=h[Oe])===null||t===void 0?void 0:t.handleBounds;if(!h||!d||!(_!=null&&_[s]))return null;var w=_[s],C=g?w.find(function(B){return B.id===g}):w[0],b=C?C.x+C.width/2:((n=h==null?void 0:h.width)!==null&&n!==void 0?n:0)/2,y=C?C.y+C.height/2:(r=h==null?void 0:h.height)!==null&&r!==void 0?r:0,E=((h==null||(a=h.positionAbsolute)===null||a===void 0?void 0:a.x)||0)+b,x=((h==null||(o=h.positionAbsolute)===null||o===void 0?void 0:o.y)||0)+y,N=C==null?void 0:C.position;if(!N)return null;var k=T1[N],A,q,L,T,D,R;switch(s){case"source":A=E,q=x,L=N,T=v,D=S,R=k;break;case"target":A=v,q=S,L=k,T=E,D=x,R=N;break}if(f)return $.createElement("g",{className:"react-flow__connection"},$.createElement(f,{connectionLineType:c,connectionLineStyle:l,fromNode:h,fromHandle:C,fromX:E,fromY:x,toX:v,toY:S,fromPosition:N,toPosition:k,sourcePosition:L,targetPosition:R,sourceNode:h,sourceHandle:C,targetX:T,targetY:D,sourceX:A,sourceY:q}));var M="",z={sourceX:A,sourceY:q,sourcePosition:L,targetX:T,targetY:D,targetPosition:R};return c===Nt.Bezier?M=zm(z):c===Nt.Step?M=Ps(Ld(Ld({},z),{},{borderRadius:0})):c===Nt.SmoothStep?M=Ps(z):c===Nt.SimpleBezier?M=Mm(z):M="M".concat(A,",").concat(q," ").concat(T,",").concat(D),$.createElement("g",{className:"react-flow__connection"},$.createElement("path",{d:M,className:"react-flow__connection-path",style:l}))};function $s(e){return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$s(e)}var ca,R1=function(t){var n=t.color,r=n===void 0?"none":n,a=t.strokeWidth,o=a===void 0?1:a;return $.createElement("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,fill:"none",points:"-5,-4 0,0 -5,4"})},O1=function(t){var n=t.color,r=n===void 0?"none":n,a=t.strokeWidth,o=a===void 0?1:a;return $.createElement("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},Pd=(ca={},fe(ca,Ir.Arrow,R1),fe(ca,Ir.ArrowClosed,O1),ca);function A1(e){var t=I.useMemo(function(){var n=Pd.hasOwnProperty(e);return n?Pd[e]:function(){return null}},[e]);return t}function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function q1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var L1=function(t){var n=t.id,r=t.type,a=t.color,o=t.width,i=o===void 0?12.5:o,s=t.height,l=s===void 0?12.5:s,u=t.markerUnits,c=u===void 0?"strokeWidth":u,d=t.strokeWidth,f=t.orient,m=f===void 0?"auto":f,h=A1(r);return $.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:m,refX:"0",refY:"0"},$.createElement(h,{color:a,strokeWidth:d}))},P1=function(t){var n=t.defaultColor,r=t.rfId;return function(a){var o=[];return a.edges.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&$s(l)==="object"){var u=qs(l,r);o.includes(u)||(i.push(q1({id:u,color:l.color||n},l)),o.push(u))}}),i},[]).sort(function(i,s){return i.id.localeCompare(s.id)})}},eg=function(t){var n=t.defaultColor,r=t.rfId,a=Te(I.useCallback(P1({defaultColor:n,rfId:r}),[n,r]),function(o,i){return!(o.length!==i.length||o.some(function(s,l){return s.id!==i[l].id}))});return $.createElement("defs",null,a.map(function(o){return $.createElement(L1,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})}))};eg.displayName="MarkerDefinitions";var D1=I.memo(eg),M1=[{level:0,isMaxLevel:!0,edges:[]}];function V1(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,a=e.reduce(function(i,s){var l=_m(s.zIndex),u=l?s.zIndex:0;if(n){var c,d,f,m;u=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(d=c[Oe])===null||d===void 0?void 0:d.z)||0,((f=t.get(s.target))===null||f===void 0||(m=f[Oe])===null||m===void 0?void 0:m.z)||0)}return i[u]?i[u].push(s):i[u]=[s],r=u>r?u:r,i},{}),o=Object.entries(a).map(function(i){var s=le(i,2),l=s[0],u=s[1],c=+l;return{edges:u,level:c,isMaxLevel:c===r}});return o.length===0?M1:o}function $1(e,t,n){var r=Te(I.useCallback(function(a){return e?a.edges.filter(function(o){var i=t.get(o.source),s=t.get(o.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&i1({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:a.width,height:a.height,transform:a.transform})}):a.edges},[e,t]));return V1(r,t,n)}var F1=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},tg=function(t){var n=Te(F1,Ye),r=n.connectionNodeId,a=n.connectionHandleType,o=n.nodesConnectable,i=n.elementsSelectable,s=n.width,l=n.height,u=n.connectionMode,c=n.nodeInternals,d=$1(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var f=t.connectionLineType,m=t.defaultMarkerColor,h=t.connectionLineStyle,g=t.connectionLineComponent,v=t.connectionLineContainerStyle,S=r&&a;return $.createElement($.Fragment,null,d.map(function(_){var w=_.level,C=_.edges,b=_.isMaxLevel;return $.createElement("svg",{key:w,style:{zIndex:w},width:s,height:l,className:"react-flow__edges react-flow__container"},b&&$.createElement(D1,{defaultColor:m,rfId:t.rfId}),$.createElement("g",null,C.map(function(y){var E=Cd(c,y.source),x=le(E,3),N=x[0],k=x[1],A=x[2],q=Cd(c,y.target),L=le(q,3),T=L[0],D=L[1],R=L[2];if(!A||!R)return null;var M=y.type||"default";t.edgeTypes[M]||(console.warn('[React Flow]: Edge type "'.concat(M,'" not found. Using fallback type "default". Help: https://reactflow.dev/error#300')),M="default");var z=t.edgeTypes[M]||t.edgeTypes.default,B=u===Hn.Strict?D.target:D.target||D.source,F=wd(k.source,y.sourceHandle||null),W=wd(B,y.targetHandle||null),Z=(F==null?void 0:F.position)||Q.Bottom,P=(W==null?void 0:W.position)||Q.Top;if(!F||!W)return null;var V=o1(N,F,Z,T,W,P),U=V.sourceX,G=V.sourceY,H=V.targetX,X=V.targetY;return $.createElement(z,{key:y.id,id:y.id,className:at([y.className,t.noPanClassName]),type:M,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:U,sourceY:G,targetX:H,targetY:X,sourcePosition:Z,targetPosition:P,elementsSelectable:i,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId})})))}),S&&$.createElement("svg",{style:v,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},$.createElement(k1,{connectionNodeId:r,connectionHandleType:a,connectionLineStyle:h,connectionLineType:f,isConnectable:o,CustomConnectionLineComponent:g})))};tg.displayName="EdgeRenderer";var B1=I.memo(tg),z1=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function H1(e){var t=e.children,n=Te(z1);return $.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}function U1(e){var t=Mc(),n=I.useRef(!1);I.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var ng=function(t){var n=t.nodeTypes,r=t.edgeTypes,a=t.onMove,o=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,u=t.onEdgeClick,c=t.onNodeDoubleClick,d=t.onEdgeDoubleClick,f=t.onNodeMouseEnter,m=t.onNodeMouseMove,h=t.onNodeMouseLeave,g=t.onNodeContextMenu,v=t.onSelectionContextMenu,S=t.connectionLineType,_=t.connectionLineStyle,w=t.connectionLineComponent,C=t.connectionLineContainerStyle,b=t.selectionKeyCode,y=t.multiSelectionKeyCode,E=t.zoomActivationKeyCode,x=t.deleteKeyCode,N=t.onlyRenderVisibleElements,k=t.elementsSelectable,A=t.selectNodesOnDrag,q=t.translateExtent,L=t.minZoom,T=t.maxZoom,D=t.defaultZoom,R=t.defaultPosition,M=t.preventScrolling,z=t.defaultMarkerColor,B=t.zoomOnScroll,F=t.zoomOnPinch,W=t.panOnScroll,Z=t.panOnScrollSpeed,P=t.panOnScrollMode,V=t.zoomOnDoubleClick,U=t.panOnDrag,G=t.onPaneClick,H=t.onPaneScroll,X=t.onPaneContextMenu,K=t.onEdgeUpdate,Y=t.onEdgeContextMenu,de=t.onEdgeMouseEnter,pe=t.onEdgeMouseMove,Ee=t.onEdgeMouseLeave,we=t.edgeUpdaterRadius,_e=t.onEdgeUpdateStart,ke=t.onEdgeUpdateEnd,Me=t.noDragClassName,Ae=t.noWheelClassName,qe=t.noPanClassName,ve=t.elevateEdgesOnSelect,Ne=t.id;return U1(s),$.createElement(_1,{onPaneClick:G,onPaneContextMenu:X,onPaneScroll:H,deleteKeyCode:x,selectionKeyCode:b,multiSelectionKeyCode:y,zoomActivationKeyCode:E,elementsSelectable:k,onMove:a,onMoveStart:o,onMoveEnd:i,zoomOnScroll:B,zoomOnPinch:F,zoomOnDoubleClick:V,panOnScroll:W,panOnScrollSpeed:Z,panOnScrollMode:P,panOnDrag:U,translateExtent:q,minZoom:L,maxZoom:T,defaultZoom:D,defaultPosition:R,onSelectionContextMenu:v,preventScrolling:M,noDragClassName:Me,noWheelClassName:Ae,noPanClassName:qe},$.createElement(H1,null,$.createElement(B1,{edgeTypes:r,onEdgeClick:u,onEdgeDoubleClick:d,connectionLineType:S,connectionLineStyle:_,connectionLineComponent:w,connectionLineContainerStyle:C,onEdgeUpdate:K,onlyRenderVisibleElements:N,onEdgeContextMenu:Y,onEdgeMouseEnter:de,onEdgeMouseMove:pe,onEdgeMouseLeave:Ee,onEdgeUpdateStart:_e,onEdgeUpdateEnd:ke,edgeUpdaterRadius:we,defaultMarkerColor:z,noPanClassName:qe,elevateEdgesOnSelect:!!ve,rfId:Ne}),$.createElement(I1,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:h,onNodeContextMenu:g,selectNodesOnDrag:A,onlyRenderVisibleElements:N,noPanClassName:qe,noDragClassName:Me})))};ng.displayName="GraphView";var j1=I.memo(ng),rg=function(){return null};rg.displayName="GroupNode";function Md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Md(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Md(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var or=function(e){var t=function(r){var a=r.id,o=r.type,i=r.data,s=r.xPos,l=r.yPos,u=r.selected,c=r.onClick,d=r.onMouseEnter,f=r.onMouseMove,m=r.onMouseLeave,h=r.onContextMenu,g=r.onDoubleClick,v=r.style,S=r.className,_=r.isDraggable,w=r.isSelectable,C=r.isConnectable,b=r.selectNodesOnDrag,y=r.sourcePosition,E=r.targetPosition,x=r.hidden,N=r.resizeObserver,k=r.dragHandle,A=r.zIndex,q=r.isParent,L=r.noPanClassName,T=r.noDragClassName,D=r.initialized,R=De(),M=I.useRef(null),z=I.useRef(y),B=I.useRef(E),F=I.useRef(o),W=w||_||c||d||f||m,Z=rr(a,R.getState,d),P=rr(a,R.getState,f),V=rr(a,R.getState,m),U=rr(a,R.getState,h),G=rr(a,R.getState,g),H=function(Y){if(w&&(!b||!_)&&Tm({id:a,store:R}),c){var de=R.getState().nodeInternals.get(a);c(Y,Vd({},de))}};I.useEffect(function(){if(M.current&&!x){var K=M.current;return N==null||N.observe(K),function(){return N==null?void 0:N.unobserve(K)}}},[x]),I.useEffect(function(){var K=F.current!==o,Y=z.current!==y,de=B.current!==E;M.current&&(K||Y||de)&&(K&&(F.current=o),Y&&(z.current=y),de&&(B.current=E),R.getState().updateNodeDimensions([{id:a,nodeElement:M.current,forceUpdate:!0}]))},[a,o,y,E]);var X=Zm({nodeRef:M,disabled:x||!_,noDragClassName:T,handleSelector:k,nodeId:a,isSelectable:w,selectNodesOnDrag:b});return x?null:$.createElement("div",{className:at(["react-flow__node","react-flow__node-".concat(o),L,S,{selected:u,selectable:w,parent:q}]),ref:M,style:Vd({zIndex:A,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:W?"all":"none",visibility:D?"visible":"hidden"},v),onMouseEnter:Z,onMouseMove:P,onMouseLeave:V,onContextMenu:U,onClick:H,onDoubleClick:G,"data-testid":"rf__node-".concat(a),"data-id":a},$.createElement(zx,{value:a},$.createElement(e,{id:a,data:i,type:o,xPos:s,yPos:l,selected:u,isConnectable:C,sourcePosition:y,targetPosition:E,dragging:X,dragHandle:k,zIndex:A})))};return t.displayName="NodeWrapper",I.memo(t)};function $d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$d(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$d(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W1(e){var t={input:or(e.input||Gm),default:or(e.default||Vs),output:or(e.output||Xm),group:or(e.group||rg)},n={},r=Object.keys(e).filter(function(a){return!["input","default","output","group"].includes(a)}).reduce(function(a,o){return a[o]=or(e[o]||Vs),a},n);return Fd(Fd({},t),r)}function Bd(e,t){I.useRef(null);var n=I.useMemo(function(){return t(e)},[e]);return n}function zd(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var ag=function(t){var n=t.children,r=!0;try{De()}catch{r=!1}return r?$.createElement($.Fragment,null,n):$.createElement(Lm,{createStore:Pm},n)};ag.displayName="ReactFlowWrapper";var G1=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function Hd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hd(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}zd(Jx),zd(t1);var Y1={input:Gm,default:Vs,output:Xm},X1={default:Ds,straight:Bm,step:Fm,smoothstep:Vc,simplebezier:Vm},Q1=[15,15],Z1=[0,0],og=I.forwardRef(function(e,t){var n=e.nodes,r=e.edges,a=e.defaultNodes,o=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?Y1:s,u=e.edgeTypes,c=u===void 0?X1:u,d=e.onNodeClick,f=e.onEdgeClick,m=e.onInit,h=e.onMove,g=e.onMoveStart,v=e.onMoveEnd,S=e.onConnect,_=e.onConnectStart,w=e.onConnectStop,C=e.onConnectEnd,b=e.onClickConnectStart,y=e.onClickConnectStop,E=e.onClickConnectEnd,x=e.onNodeMouseEnter,N=e.onNodeMouseMove,k=e.onNodeMouseLeave,A=e.onNodeContextMenu,q=e.onNodeDoubleClick,L=e.onNodeDragStart,T=e.onNodeDrag,D=e.onNodeDragStop,R=e.onNodesDelete,M=e.onEdgesDelete,z=e.onSelectionChange,B=e.onSelectionDragStart,F=e.onSelectionDrag,W=e.onSelectionDragStop,Z=e.onSelectionContextMenu,P=e.connectionMode,V=P===void 0?Hn.Strict:P,U=e.connectionLineType,G=U===void 0?Nt.Bezier:U,H=e.connectionLineStyle,X=e.connectionLineComponent,K=e.connectionLineContainerStyle,Y=e.deleteKeyCode,de=Y===void 0?"Backspace":Y,pe=e.selectionKeyCode,Ee=pe===void 0?"Shift":pe,we=e.multiSelectionKeyCode,_e=we===void 0?"Meta":we,ke=e.zoomActivationKeyCode,Me=ke===void 0?"Meta":ke,Ae=e.snapToGrid,qe=Ae===void 0?!1:Ae,ve=e.snapGrid,Ne=ve===void 0?Q1:ve,Qe=e.onlyRenderVisibleElements,ne=Qe===void 0?!1:Qe,oe=e.selectNodesOnDrag,te=oe===void 0?!0:oe,he=e.nodesDraggable,J=e.nodesConnectable,Ie=e.elementsSelectable,se=e.minZoom,Ze=se===void 0?.5:se,Re=e.maxZoom,st=Re===void 0?2:Re,St=e.defaultZoom,To=St===void 0?1:St,Cn=e.defaultPosition,ko=Cn===void 0?Z1:Cn,Gr=e.translateExtent,$t=Gr===void 0?Ls:Gr,Yr=e.preventScrolling,fv=Yr===void 0?!0:Yr,pv=e.nodeExtent,eu=e.defaultMarkerColor,hv=eu===void 0?"#b1b1b7":eu,tu=e.zoomOnScroll,mv=tu===void 0?!0:tu,nu=e.zoomOnPinch,gv=nu===void 0?!0:nu,ru=e.panOnScroll,vv=ru===void 0?!1:ru,au=e.panOnScrollSpeed,yv=au===void 0?.5:au,ou=e.panOnScrollMode,bv=ou===void 0?qn.Free:ou,iu=e.zoomOnDoubleClick,wv=iu===void 0?!0:iu,su=e.panOnDrag,Cv=su===void 0?!0:su,Sv=e.onPaneClick,Ev=e.onPaneScroll,_v=e.onPaneContextMenu,xv=e.children,Nv=e.onEdgeUpdate,Iv=e.onEdgeContextMenu,Tv=e.onEdgeDoubleClick,kv=e.onEdgeMouseEnter,Rv=e.onEdgeMouseMove,Ov=e.onEdgeMouseLeave,Av=e.onEdgeUpdateStart,qv=e.onEdgeUpdateEnd,lu=e.edgeUpdaterRadius,Lv=lu===void 0?10:lu,Pv=e.onNodesChange,Dv=e.onEdgesChange,cu=e.noDragClassName,Mv=cu===void 0?"nodrag":cu,uu=e.noWheelClassName,Vv=uu===void 0?"nowheel":uu,du=e.noPanClassName,$v=du===void 0?"nopan":du,fu=e.fitView,Fv=fu===void 0?!1:fu,Bv=e.fitViewOptions,pu=e.connectOnClick,zv=pu===void 0?!0:pu,Hv=e.attributionPosition,Uv=e.proOptions,jv=e.defaultEdgeOptions,hu=e.elevateEdgesOnSelect,Wv=hu===void 0?!1:hu,Xr=Eo(e,G1),Gv=Bd(l,W1),Yv=Bd(c,a1);return $.createElement("div",Ud(Ud({},Xr),{},{ref:t,className:at(["react-flow",i])}),$.createElement(ag,null,$.createElement(j1,{onInit:m,onMove:h,onMoveStart:g,onMoveEnd:v,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:x,onNodeMouseMove:N,onNodeMouseLeave:k,onNodeContextMenu:A,onNodeDoubleClick:q,nodeTypes:Gv,edgeTypes:Yv,connectionLineType:G,connectionLineStyle:H,connectionLineComponent:X,connectionLineContainerStyle:K,selectionKeyCode:Ee,deleteKeyCode:de,multiSelectionKeyCode:_e,zoomActivationKeyCode:Me,onlyRenderVisibleElements:ne,selectNodesOnDrag:te,translateExtent:$t,minZoom:Ze,maxZoom:st,defaultZoom:To,defaultPosition:ko,preventScrolling:fv,zoomOnScroll:mv,zoomOnPinch:gv,zoomOnDoubleClick:wv,panOnScroll:vv,panOnScrollSpeed:yv,panOnScrollMode:bv,panOnDrag:Cv,onPaneClick:Sv,onPaneScroll:Ev,onPaneContextMenu:_v,onSelectionContextMenu:Z,onEdgeUpdate:Nv,onEdgeContextMenu:Iv,onEdgeDoubleClick:Tv,onEdgeMouseEnter:kv,onEdgeMouseMove:Rv,onEdgeMouseLeave:Ov,onEdgeUpdateStart:Av,onEdgeUpdateEnd:qv,edgeUpdaterRadius:Lv,defaultMarkerColor:hv,noDragClassName:Mv,noWheelClassName:Vv,noPanClassName:$v,elevateEdgesOnSelect:Wv,id:Xr==null?void 0:Xr.id}),$.createElement(Zx,{nodes:n,edges:r,defaultNodes:a,defaultEdges:o,onConnect:S,onConnectStart:_,onConnectStop:w,onConnectEnd:C,onClickConnectStart:b,onClickConnectStop:y,onClickConnectEnd:E,nodesDraggable:he,nodesConnectable:J,elementsSelectable:Ie,minZoom:Ze,maxZoom:st,nodeExtent:pv,onNodesChange:Pv,onEdgesChange:Dv,snapToGrid:qe,snapGrid:Ne,connectionMode:V,translateExtent:$t,connectOnClick:zv,defaultEdgeOptions:jv,fitView:Fv,fitViewOptions:Bv,onNodesDelete:R,onEdgesDelete:M,onNodeDragStart:L,onNodeDrag:T,onNodeDragStop:D,onSelectionDrag:F,onSelectionDragStart:B,onSelectionDragStop:W}),z&&$.createElement(Xx,{onSelectionChange:z}),xv,$.createElement(Lx,{proOptions:Uv,position:Hv})))});og.displayName="ReactFlow";var ig=function(t){var n=t.children;return $.createElement(Lm,{createStore:Pm},n)};ig.displayName="ReactFlowProvider";function sg(e){return function(t){var n=I.useState(t),r=le(n,2),a=r[0],o=r[1],i=I.useCallback(function(s){return o(function(l){return e(s,l)})},[]);return[a,o,i]}}var K1=sg(Nm),J1=sg(ux);const Fs=e=>{const{data:t}=ry(e.modifiedBy),n=wr(Xt(e.modifiedOn)),{name:r,description:a}=e;return I.useMemo(()=>O(j,{children:[r&&p(tt,{title:r,placement:"top",enterNextDelay:200,children:p("span",{children:p(At,{variant:"smallText1",className:"name",children:r})})}),a&&p(tt,{title:a,placement:"top",enterNextDelay:200,children:p("span",{children:p(At,{variant:"smallText1",className:"description",children:a})})}),t&&p(dc,{userProfile:t}),p("div",{children:n})]}),[r,a,t,n])};try{Fs.displayName="ActivityNodeLabel",Fs.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}}}catch{}const eN=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),Bs=e=>{const{entityHeader:t}=e;if(t){const n=Gp(t==null?void 0:t.type);if(n==fs.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const a=t.name.slice(r);if(eN.has(a.toLowerCase()))return p(ce,{icon:"code"})}}else return p(bu,{type:n,includeTooltip:!1})}return p(bu,{type:fs.FILE,includeTooltip:!1})};try{Bs.displayName="ProvenanceEntityIcon",Bs.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}}}catch{}const zs=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return I.useMemo(()=>O(j,{children:[p("div",{children:p(Bs,{entityHeader:e})}),O(j,{children:[p("div",{children:p(tt,{title:e.name,placement:"top",enterNextDelay:300,children:p("a",{href:`${We.PORTAL}#!Synapse:${n}`,children:e.name})})}),ay(Gp(e.type))&&O("div",{children:[O("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&p("div",{children:"(old version)"})]})]})]}),[e,n])};try{zs.displayName="EntityNodeLabel",zs.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}}}catch{}var Hs={},tN={get exports(){return Hs},set exports(e){Hs=e}};(function(e,t){(function(n,r){typeof fo=="function"?e.exports=r():n.pluralize=r()})(uo,function(){var n=[],r=[],a={},o={},i={};function s(g){return typeof g=="string"?new RegExp("^"+g+"$","i"):g}function l(g,v){return g===v?v:g===g.toLowerCase()?v.toLowerCase():g===g.toUpperCase()?v.toUpperCase():g[0]===g[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function u(g,v){return g.replace(/\$(\d{1,2})/g,function(S,_){return v[_]||""})}function c(g,v){return g.replace(v[0],function(S,_){var w=u(v[1],arguments);return l(S===""?g[_-1]:S,w)})}function d(g,v,S){if(!g.length||a.hasOwnProperty(g))return v;for(var _=S.length;_--;){var w=S[_];if(w[0].test(v))return c(v,w)}return v}function f(g,v,S){return function(_){var w=_.toLowerCase();return v.hasOwnProperty(w)?l(_,w):g.hasOwnProperty(w)?l(_,g[w]):d(w,_,S)}}function m(g,v,S,_){return function(w){var C=w.toLowerCase();return v.hasOwnProperty(C)?!0:g.hasOwnProperty(C)?!1:d(C,C,S)===C}}function h(g,v,S){var _=v===1?h.singular(g):h.plural(g);return(S?v+" ":"")+_}return h.plural=f(i,o,n),h.isPlural=m(i,o,n),h.singular=f(o,i,r),h.isSingular=m(o,i,r),h.addPluralRule=function(g,v){n.push([s(g),v])},h.addSingularRule=function(g,v){r.push([s(g),v])},h.addUncountableRule=function(g){if(typeof g=="string"){a[g.toLowerCase()]=!0;return}h.addPluralRule(g,"$0"),h.addSingularRule(g,"$0")},h.addIrregularRule=function(g,v){v=v.toLowerCase(),g=g.toLowerCase(),i[g]=v,o[v]=g},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(g){return h.addIrregularRule(g[0],g[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(g){return h.addPluralRule(g[0],g[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(g){return h.addSingularRule(g[0],g[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(tN);const nN=Hs,Us=e=>{const{itemCount:t}=e;return I.useMemo(()=>p(j,{children:O("a",{children:["Show ",t," ",nN("item",t),"…"]})}),[t])};try{Us.displayName="ExpandGraphNodeLabel",Us.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}}}catch{}const rN=/^(.+?\.)?github\.com$/,aN=/^(.+?\.)?githubusercontent\.com$/,js=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:a}=r;return(a.match(rN)||a.match(aN))&&(n="github"),p(ce,{icon:n})};try{js.displayName="ProvenanceExternalIcon",js.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const Ws=e=>I.useMemo(()=>O(j,{children:[p("div",{children:p(js,{url:e.url})}),p(tt,{title:e.name,placement:"top",enterNextDelay:300,children:p("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{Ws.displayName="ExternalGraphNodeLabel",Ws.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}}}catch{}var Qo,jd;function oN(){if(jd)return Qo;jd=1;var e=Xy,t=4;function n(r){return e(r,t)}return Qo=n,Qo}var za={},iN={get exports(){return za},set exports(e){za=e}},Wd;function lg(){return Wd||(Wd=1,function(e){e.exports=mh}(iN)),za}var Zo,Gd;function sN(){if(Gd)return Zo;Gd=1;var e=gh;function t(n,r){var a=[];return e(n,function(o,i,s){r(o,i,s)&&a.push(o)}),a}return Zo=t,Zo}var Ko,Yd;function cg(){if(Yd)return Ko;Yd=1;var e=ub(),t=sN(),n=vn,r=Vr;function a(o,i){var s=r(o)?e:t;return s(o,n(i))}return Ko=a,Ko}var Jo,Xd;function lN(){if(Xd)return Jo;Xd=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,a){return r!=null&&t.call(r,a)}return Jo=n,Jo}var ei,Qd;function ug(){if(Qd)return ei;Qd=1;var e=lN(),t=mb;function n(r,a){return r!=null&&t(r,a,e)}return ei=n,ei}var ti,Zd;function dg(){if(Zd)return ti;Zd=1;function e(t){return t===void 0}return ti=e,ti}var ni,Kd;function fg(){if(Kd)return ni;Kd=1;var e=vh,t=vn,n=tb,r=Vr;function a(o,i){var s=r(o)?e:n;return s(o,t(i))}return ni=a,ni}var ri,Jd;function cN(){if(Jd)return ri;Jd=1;function e(t,n,r,a){var o=-1,i=t==null?0:t.length;for(a&&i&&(r=t[++o]);++o<i;)r=n(r,t[o],o,t);return r}return ri=e,ri}var ai,ef;function uN(){if(ef)return ai;ef=1;function e(t,n,r,a,o){return o(t,function(i,s,l){r=a?(a=!1,i):n(r,i,s,l)}),r}return ai=e,ai}var oi,tf;function pg(){if(tf)return oi;tf=1;var e=cN(),t=gh,n=vn,r=uN(),a=Vr;function o(i,s,l){var u=a(i)?e:r,c=arguments.length<3;return u(i,n(s),l,c,t)}return oi=o,oi}var ii,nf;function dN(){if(nf)return ii;nf=1;var e=db,t=e("length");return ii=t,ii}var si,rf;function fN(){if(rf)return si;rf=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,o="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+a+o+"]");function l(u){return s.test(u)}return si=l,si}var li,af;function pN(){if(af)return li;af=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,o="\\ufe0e\\ufe0f",i="["+e+"]",s="["+a+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",h=u+"?",g="["+o+"]?",v="(?:"+m+"(?:"+[c,d,f].join("|")+")"+g+h+")*",S=g+h+v,_="(?:"+[c+s+"?",s,d,f,i].join("|")+")",w=RegExp(l+"(?="+l+")|"+_+S,"g");function C(b){for(var y=w.lastIndex=0;w.test(b);)++y;return y}return li=C,li}var ci,of;function hN(){if(of)return ci;of=1;var e=dN(),t=fN(),n=pN();function r(a){return t(a)?n(a):e(a)}return ci=r,ci}var ui,sf;function mN(){if(sf)return ui;sf=1;var e=gb,t=vb,n=yh,r=Tb,a=hN(),o="[object Map]",i="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?a(l):l.length;var u=t(l);return u==o||u==i?l.size:e(l).length}return ui=s,ui}var di,lf;function gN(){if(lf)return di;lf=1;var e=Qy,t=Zy,n=fb,r=vn,a=pb,o=Vr,i=yb,s=bh,l=bb,u=wb;function c(d,f,m){var h=o(d),g=h||i(d)||u(d);if(f=r(f),m==null){var v=d&&d.constructor;g?m=h?new v:[]:l(d)?m=s(v)?t(a(d)):{}:m={}}return(g?e:n)(d,function(S,_,w){return f(m,S,_,w)}),m}return di=c,di}var fi,cf;function vN(){if(cf)return fi;cf=1;var e=vh;function t(n,r){return e(r,function(a){return n[a]})}return fi=t,fi}var pi,uf;function hg(){if(uf)return pi;uf=1;var e=vN(),t=pc;function n(r){return r==null?[]:e(r,t(r))}return pi=n,pi}var hi,df;function ot(){if(df)return hi;df=1;var e;if(typeof fo=="function")try{e={clone:oN(),constant:hh(),each:lg(),filter:cg(),has:ug(),isArray:Vr,isEmpty:Eb,isFunction:bh,isUndefined:dg(),keys:pc,map:fg(),reduce:pg(),size:mN(),transform:gN(),union:_b,values:hg()}}catch{}return e||(e=window._),hi=e,hi}var mi,ff;function Fc(){if(ff)return mi;ff=1;var e=ot();mi=a;var t="\0",n="\0",r="";function a(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},a.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},a.prototype.setNodes=function(c,d){var f=arguments,m=this;return e.each(c,function(h){f.length>1?m.setNode(h,d):m.setNode(h)}),this},a.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return e.has(this._nodes,c)},a.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},a.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},a.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},a.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},a.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},a.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(g,v){c(v)&&d.setNode(v,g)}),e.each(this._edgeObjs,function(g){d.hasNode(g.v)&&d.hasNode(g.w)&&d.setEdge(g,f.edge(g))});var m={};function h(g){var v=f.parent(g);return v===void 0||d.hasNode(v)?(m[g]=v,v):v in m?m[v]:h(v)}return this._isCompound&&e.each(d.nodes(),function(g){d.setParent(g,h(g))}),d},a.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(c,d){var f=this,m=arguments;return e.reduce(c,function(h,g){return m.length>1?f.setEdge(h,g,d):f.setEdge(h,g),g}),this},a.prototype.setEdge=function(){var c,d,f,m,h=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,d=g.w,f=g.name,arguments.length===2&&(m=arguments[1],h=!0)):(c=g,d=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],h=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var v=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,v))return h&&(this._edgeLabels[v]=m),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[v]=h?m:this._defaultEdgeLabelFn(c,d,f);var S=l(this._isDirected,c,d,f);return c=S.v,d=S.w,Object.freeze(S),this._edgeObjs[v]=S,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][v]=S,this._out[c][v]=S,this._edgeCount++,this},a.prototype.edge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[m]},a.prototype.hasEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,m)},a.prototype.removeEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),h=this._edgeObjs[m];return h&&(c=h.v,d=h.w,delete this._edgeLabels[m],delete this._edgeObjs[m],i(this._preds[d],c),i(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},a.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var m=e.values(f);return d?e.filter(m,function(h){return h.v===d}):m}},a.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var m=e.values(f);return d?e.filter(m,function(h){return h.w===d}):m}},a.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function o(c,d){c[d]?c[d]++:c[d]=1}function i(c,d){--c[d]||delete c[d]}function s(c,d,f,m){var h=""+d,g=""+f;if(!c&&h>g){var v=h;h=g,g=v}return h+r+g+r+(e.isUndefined(m)?t:m)}function l(c,d,f,m){var h=""+d,g=""+f;if(!c&&h>g){var v=h;h=g,g=v}var S={v:h,w:g};return m&&(S.name=m),S}function u(c,d){return s(c,d.v,d.w,d.name)}return mi}var gi,pf;function yN(){return pf||(pf=1,gi="2.1.8"),gi}var vi,hf;function bN(){return hf||(hf=1,vi={Graph:Fc(),version:yN()}),vi}var yi,mf;function wN(){if(mf)return yi;mf=1;var e=ot(),t=Fc();yi={write:n,read:o};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:a(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var l=i.node(s),u=i.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function a(i){return e.map(i.edges(),function(s){var l=i.edge(s),u={v:s.v,w:s.w};return e.isUndefined(s.name)||(u.name=s.name),e.isUndefined(l)||(u.value=l),u})}function o(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(i.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return yi}var bi,gf;function CN(){if(gf)return bi;gf=1;var e=ot();bi=t;function t(n){var r={},a=[],o;function i(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){o=[],i(s),o.length&&a.push(o)}),a}return bi}var wi,vf;function mg(){if(vf)return wi;vf=1;var e=ot();wi=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var o=this._arr,i=o.length;return a[n]=i,o.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var a=this._keyIndices[n];if(r>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+r);this._arr[a].priority=r,this._decrease(a)},t.prototype._heapify=function(n){var r=this._arr,a=2*n,o=a+1,i=n;a<r.length&&(i=r[a].priority<r[i].priority?a:i,o<r.length&&(i=r[o].priority<r[i].priority?o:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,a=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<a));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var a=this._arr,o=this._keyIndices,i=a[n],s=a[r];a[n]=s,a[r]=i,o[s.key]=n,o[i.key]=r},wi}var Ci,yf;function gg(){if(yf)return Ci;yf=1;var e=ot(),t=mg();Ci=r;var n=e.constant(1);function r(o,i,s,l){return a(o,String(i),s||n,l||function(u){return o.outEdges(u)})}function a(o,i,s,l){var u={},c=new t,d,f,m=function(h){var g=h.v!==d?h.v:h.w,v=u[g],S=s(h),_=f.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+S);_<v.distance&&(v.distance=_,v.predecessor=d,c.decrease(g,_))};for(o.nodes().forEach(function(h){var g=h===i?0:Number.POSITIVE_INFINITY;u[h]={distance:g},c.add(h,g)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return Ci}var Si,bf;function SN(){if(bf)return Si;bf=1;var e=gg(),t=ot();Si=n;function n(r,a,o){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,a,o)},{})}return Si}var Ei,wf;function vg(){if(wf)return Ei;wf=1;var e=ot();Ei=t;function t(n){var r=0,a=[],o={},i=[];function s(l){var u=o[l]={onStack:!0,lowlink:r,index:r++};if(a.push(l),n.successors(l).forEach(function(f){e.has(o,f)?o[f].onStack&&(u.lowlink=Math.min(u.lowlink,o[f].index)):(s(f),u.lowlink=Math.min(u.lowlink,o[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=a.pop(),o[d].onStack=!1,c.push(d);while(l!==d);i.push(c)}}return n.nodes().forEach(function(l){e.has(o,l)||s(l)}),i}return Ei}var _i,Cf;function EN(){if(Cf)return _i;Cf=1;var e=ot(),t=vg();_i=n;function n(r){return e.filter(t(r),function(a){return a.length>1||a.length===1&&r.hasEdge(a[0],a[0])})}return _i}var xi,Sf;function _N(){if(Sf)return xi;Sf=1;var e=ot();xi=n;var t=e.constant(1);function n(a,o,i){return r(a,o||t,i||function(s){return a.outEdges(s)})}function r(a,o,i){var s={},l=a.nodes();return l.forEach(function(u){s[u]={},s[u][u]={distance:0},l.forEach(function(c){u!==c&&(s[u][c]={distance:Number.POSITIVE_INFINITY})}),i(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=o(c);s[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=s[u];l.forEach(function(d){var f=s[d];l.forEach(function(m){var h=f[u],g=c[m],v=f[m],S=h.distance+g.distance;S<v.distance&&(v.distance=S,v.predecessor=g.predecessor)})})}),s}return xi}var Ni,Ef;function yg(){if(Ef)return Ni;Ef=1;var e=ot();Ni=t,t.CycleException=n;function t(r){var a={},o={},i=[];function s(l){if(e.has(o,l))throw new n;e.has(a,l)||(o[l]=!0,a[l]=!0,e.each(r.predecessors(l),s),delete o[l],i.push(l))}if(e.each(r.sinks(),s),e.size(a)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,Ni}var Ii,_f;function xN(){if(_f)return Ii;_f=1;var e=yg();Ii=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Ii}var Ti,xf;function bg(){if(xf)return Ti;xf=1;var e=ot();Ti=t;function t(r,a,o){e.isArray(a)||(a=[a]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(a,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,o==="post",l,i,s)}),s}function n(r,a,o,i,s,l){e.has(i,a)||(i[a]=!0,o||l.push(a),e.each(s(a),function(u){n(r,u,o,i,s,l)}),o&&l.push(a))}return Ti}var ki,Nf;function NN(){if(Nf)return ki;Nf=1;var e=bg();ki=t;function t(n,r){return e(n,r,"post")}return ki}var Ri,If;function IN(){if(If)return Ri;If=1;var e=bg();Ri=t;function t(n,r){return e(n,r,"pre")}return Ri}var Oi,Tf;function TN(){if(Tf)return Oi;Tf=1;var e=ot(),t=Fc(),n=mg();Oi=r;function r(a,o){var i=new t,s={},l=new n,u;function c(f){var m=f.v===u?f.w:f.v,h=l.priority(m);if(h!==void 0){var g=o(f);g<h&&(s[m]=u,l.decrease(m,g))}}if(a.nodeCount()===0)return i;e.each(a.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),i.setNode(f)}),l.decrease(a.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(s,u))i.setEdge(u,s[u]);else{if(d)throw new Error("Input graph is not connected: "+a);d=!0}a.nodeEdges(u).forEach(c)}return i}return Oi}var Ai,kf;function kN(){return kf||(kf=1,Ai={components:CN(),dijkstra:gg(),dijkstraAll:SN(),findCycles:EN(),floydWarshall:_N(),isAcyclic:xN(),postorder:NN(),preorder:IN(),prim:TN(),tarjan:vg(),topsort:yg()}),Ai}var qi,Rf;function RN(){if(Rf)return qi;Rf=1;var e=bN();return qi={Graph:e.Graph,json:wN(),alg:kN(),version:e.version},qi}var Ha;if(typeof fo=="function")try{Ha=RN()}catch{}Ha||(Ha=window.graphlib);var pt=Ha,Li,Of;function ON(){if(Of)return Li;Of=1;var e=vn,t=yh,n=pc;function r(a){return function(o,i,s){var l=Object(o);if(!t(o)){var u=e(i);o=n(o),i=function(d){return u(l[d],d,l)}}var c=a(o,i,s);return c>-1?l[u?o[c]:c]:void 0}}return Li=r,Li}var Pi,Af;function wg(){if(Af)return Pi;Af=1;var e=Ob,t=1/0,n=17976931348623157e292;function r(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var o=a<0?-1:1;return o*n}return a===a?a:0}return Pi=r,Pi}var Di,qf;function AN(){if(qf)return Di;qf=1;var e=wg();function t(n){var r=e(n),a=r%1;return r===r?a?r-a:r:0}return Di=t,Di}var Mi,Lf;function qN(){if(Lf)return Mi;Lf=1;var e=kb,t=vn,n=AN(),r=Math.max;function a(o,i,s){var l=o==null?0:o.length;if(!l)return-1;var u=s==null?0:n(s);return u<0&&(u=r(l+u,0)),e(o,t(i),u)}return Mi=a,Mi}var Vi,Pf;function LN(){if(Pf)return Vi;Pf=1;var e=ON(),t=qN(),n=e(t);return Vi=n,Vi}var $i,Df;function PN(){if(Df)return $i;Df=1;var e=hb,t=nb,n=Ky;function r(a,o){return a==null?a:e(a,t(o),n)}return $i=r,$i}var Fi,Mf;function Bc(){if(Mf)return Fi;Mf=1;var e=Cb;function t(n,r,a){for(var o=-1,i=n.length;++o<i;){var s=n[o],l=r(s);if(l!=null&&(u===void 0?l===l&&!e(l):a(l,u)))var u=l,c=s}return c}return Fi=t,Fi}var Bi,Vf;function DN(){if(Vf)return Bi;Vf=1;function e(t,n){return t>n}return Bi=e,Bi}var zi,$f;function MN(){if($f)return zi;$f=1;var e=Bc(),t=DN(),n=wh;function r(a){return a&&a.length?e(a,n,t):void 0}return zi=r,zi}var Hi,Ff;function VN(){if(Ff)return Hi;Ff=1;var e=ab,t=rb,n=t(function(r,a,o){e(r,a,o)});return Hi=n,Hi}var Ui,Bf;function Cg(){if(Bf)return Ui;Bf=1;function e(t,n){return t<n}return Ui=e,Ui}var ji,zf;function $N(){if(zf)return ji;zf=1;var e=Bc(),t=Cg(),n=wh;function r(a){return a&&a.length?e(a,n,t):void 0}return ji=r,ji}var Wi,Hf;function FN(){if(Hf)return Wi;Hf=1;var e=Bc(),t=vn,n=Cg();function r(a,o){return a&&a.length?e(a,t(o),n):void 0}return Wi=r,Wi}var Gi,Uf;function BN(){if(Uf)return Gi;Uf=1;var e=Math.ceil,t=Math.max;function n(r,a,o,i){for(var s=-1,l=t(e((a-r)/(o||1)),0),u=Array(l);l--;)u[i?l:++s]=r,r+=o;return u}return Gi=n,Gi}var Yi,jf;function zN(){if(jf)return Yi;jf=1;var e=BN(),t=ob,n=wg();function r(a){return function(o,i,s){return s&&typeof s!="number"&&t(o,i,s)&&(i=s=void 0),o=n(o),i===void 0?(i=o,o=0):i=n(i),s=s===void 0?o<i?1:-1:n(s),e(o,i,s,a)}}return Yi=r,Yi}var Xi,Wf;function HN(){if(Wf)return Xi;Wf=1;var e=zN(),t=e();return Xi=t,Xi}var Qi,Gf;function UN(){if(Gf)return Qi;Gf=1;var e=Sb,t=0;function n(r){var a=++t;return e(r)+a}return Qi=n,Qi}var Zi,Yf;function jN(){if(Yf)return Zi;Yf=1;function e(t,n,r){for(var a=-1,o=t.length,i=n.length,s={};++a<o;){var l=a<i?n[a]:void 0;r(s,t[a],l)}return s}return Zi=e,Zi}var Ki,Xf;function WN(){if(Xf)return Ki;Xf=1;var e=Rb,t=jN();function n(r,a){return t(r||[],a||[],e)}return Ki=n,Ki}var Ua;if(typeof fo=="function")try{Ua={cloneDeep:Jy,constant:hh(),defaults:ib,each:lg(),filter:cg(),find:LN(),flatten:eb,forEach:mh,forIn:PN(),has:ug(),isUndefined:dg(),last:sb,map:fg(),mapValues:qb,max:MN(),merge:VN(),min:$N(),minBy:FN(),now:Ab(),pick:xb,range:HN(),reduce:pg(),sortBy:lb,uniqueId:UN(),values:hg(),zipObject:WN()}}catch{}Ua||(Ua=window._);var be=Ua,GN=xo;function xo(){var e={};e._next=e._prev=e,this._sentinel=e}xo.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Sg(t),t};xo.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Sg(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};xo.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,YN)),n=n._prev;return"["+e.join(", ")+"]"};function Sg(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function YN(e,t){if(e!=="_next"&&e!=="_prev")return t}var Tt=be,XN=pt.Graph,QN=GN,ZN=JN,KN=Tt.constant(1);function JN(e,t){if(e.nodeCount()<=1)return[];var n=tI(e,t||KN),r=eI(n.graph,n.buckets,n.zeroIdx);return Tt.flatten(Tt.map(r,function(a){return e.outEdges(a.v,a.w)}),!0)}function eI(e,t,n){for(var r=[],a=t[t.length-1],o=t[0],i;e.nodeCount();){for(;i=o.dequeue();)Ji(e,t,n,i);for(;i=a.dequeue();)Ji(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(Ji(e,t,n,i,!0));break}}}return r}function Ji(e,t,n,r,a){var o=a?[]:void 0;return Tt.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),l=e.node(i.v);a&&o.push({v:i.v,w:i.w}),l.out-=s,Gs(t,n,l)}),Tt.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),l=i.w,u=e.node(l);u.in-=s,Gs(t,n,u)}),e.removeNode(r.v),o}function tI(e,t){var n=new XN,r=0,a=0;Tt.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),Tt.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,u=t(s),c=l+u;n.setEdge(s.v,s.w,c),a=Math.max(a,n.node(s.v).out+=u),r=Math.max(r,n.node(s.w).in+=u)});var o=Tt.range(a+r+3).map(function(){return new QN}),i=r+1;return Tt.forEach(n.nodes(),function(s){Gs(o,i,n.node(s))}),{graph:n,buckets:o,zeroIdx:i}}function Gs(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var nn=be,nI=ZN,rI={run:aI,undo:iI};function aI(e){var t=e.graph().acyclicer==="greedy"?nI(e,n(e)):oI(e);nn.forEach(t,function(r){var a=e.edge(r);e.removeEdge(r),a.forwardName=r.name,a.reversed=!0,e.setEdge(r.w,r.v,a,nn.uniqueId("rev"))});function n(r){return function(a){return r.edge(a).weight}}}function oI(e){var t=[],n={},r={};function a(o){nn.has(r,o)||(r[o]=!0,n[o]=!0,nn.forEach(e.outEdges(o),function(i){nn.has(n,i.w)?t.push(i):a(i.w)}),delete n[o])}return nn.forEach(e.nodes(),a),t}function iI(e){nn.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ue=be,Eg=pt.Graph,ze={addDummyNode:_g,simplify:sI,asNonCompoundGraph:lI,successorWeights:cI,predecessorWeights:uI,intersectRect:dI,buildLayerMatrix:fI,normalizeRanks:pI,removeEmptyRanks:hI,addBorderNode:mI,maxRank:xg,partition:gI,time:vI,notime:yI};function _g(e,t,n,r){var a;do a=ue.uniqueId(r);while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function sI(e){var t=new Eg().setGraph(e.graph());return ue.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},a=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+a.weight,minlen:Math.max(r.minlen,a.minlen)})}),t}function lI(e){var t=new Eg({multigraph:e.isMultigraph()}).setGraph(e.graph());return ue.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function cI(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.outEdges(n),function(a){r[a.w]=(r[a.w]||0)+e.edge(a).weight}),r});return ue.zipObject(e.nodes(),t)}function uI(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.inEdges(n),function(a){r[a.v]=(r[a.v]||0)+e.edge(a).weight}),r});return ue.zipObject(e.nodes(),t)}function dI(e,t){var n=e.x,r=e.y,a=t.x-n,o=t.y-r,i=e.width/2,s=e.height/2;if(!a&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(o)*i>Math.abs(a)*s?(o<0&&(s=-s),l=s*a/o,u=s):(a<0&&(i=-i),l=i,u=i*o/a),{x:n+l,y:r+u}}function fI(e){var t=ue.map(ue.range(xg(e)+1),function(){return[]});return ue.forEach(e.nodes(),function(n){var r=e.node(n),a=r.rank;ue.isUndefined(a)||(t[a][r.order]=n)}),t}function pI(e){var t=ue.min(ue.map(e.nodes(),function(n){return e.node(n).rank}));ue.forEach(e.nodes(),function(n){var r=e.node(n);ue.has(r,"rank")&&(r.rank-=t)})}function hI(e){var t=ue.min(ue.map(e.nodes(),function(o){return e.node(o).rank})),n=[];ue.forEach(e.nodes(),function(o){var i=e.node(o).rank-t;n[i]||(n[i]=[]),n[i].push(o)});var r=0,a=e.graph().nodeRankFactor;ue.forEach(n,function(o,i){ue.isUndefined(o)&&i%a!==0?--r:r&&ue.forEach(o,function(s){e.node(s).rank+=r})})}function mI(e,t,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),_g(e,"border",a,t)}function xg(e){return ue.max(ue.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ue.isUndefined(n))return n}))}function gI(e,t){var n={lhs:[],rhs:[]};return ue.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function vI(e,t){var n=ue.now();try{return t()}finally{console.log(e+" time: "+(ue.now()-n)+"ms")}}function yI(e,t){return t()}var Ng=be,bI=ze,wI={run:CI,undo:EI};function CI(e){e.graph().dummyChains=[],Ng.forEach(e.edges(),function(t){SI(e,t)})}function SI(e,t){var n=t.v,r=e.node(n).rank,a=t.w,o=e.node(a).rank,i=t.name,s=e.edge(t),l=s.labelRank;if(o!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<o;++d,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},u=bI.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,u,{weight:s.weight},i),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,a,{weight:s.weight},i)}}function EI(e){Ng.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,a;for(e.setEdge(n.edgeObj,r);n.dummy;)a=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=a,n=e.node(t)})}var ua=be,No={longestPath:_I,slack:xI};function _I(e){var t={};function n(r){var a=e.node(r);if(ua.has(t,r))return a.rank;t[r]=!0;var o=ua.min(ua.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),a.rank=o}ua.forEach(e.sources(),n)}function xI(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var ja=be,NI=pt.Graph,Wa=No.slack,Ig=II;function II(e){var t=new NI({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var a,o;TI(t,e)<r;)a=kI(t,e),o=t.hasNode(a.v)?Wa(e,a):-Wa(e,a),RI(t,e,o);return t}function TI(e,t){function n(r){ja.forEach(t.nodeEdges(r),function(a){var o=a.v,i=r===o?a.w:o;!e.hasNode(i)&&!Wa(t,a)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return ja.forEach(e.nodes(),n),e.nodeCount()}function kI(e,t){return ja.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Wa(t,n)})}function RI(e,t,n){ja.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Pt=be,OI=Ig,AI=No.slack,qI=No.longestPath,LI=pt.alg.preorder,PI=pt.alg.postorder,DI=ze.simplify,MI=wn;wn.initLowLimValues=Hc;wn.initCutValues=zc;wn.calcCutValue=Tg;wn.leaveEdge=Rg;wn.enterEdge=Og;wn.exchangeEdges=Ag;function wn(e){e=DI(e),qI(e);var t=OI(e);Hc(t),zc(t,e);for(var n,r;n=Rg(t);)r=Og(t,e,n),Ag(t,e,n,r)}function zc(e,t){var n=PI(e,e.nodes());n=n.slice(0,n.length-1),Pt.forEach(n,function(r){VI(e,t,r)})}function VI(e,t,n){var r=e.node(n),a=r.parent;e.edge(n,a).cutvalue=Tg(e,t,n)}function Tg(e,t,n){var r=e.node(n),a=r.parent,o=!0,i=t.edge(n,a),s=0;return i||(o=!1,i=t.edge(a,n)),s=i.weight,Pt.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==a){var d=u===o,f=t.edge(l).weight;if(s+=d?f:-f,FI(e,n,c)){var m=e.edge(n,c).cutvalue;s+=d?-m:m}}}),s}function Hc(e,t){arguments.length<2&&(t=e.nodes()[0]),kg(e,{},1,t)}function kg(e,t,n,r,a){var o=n,i=e.node(r);return t[r]=!0,Pt.forEach(e.neighbors(r),function(s){Pt.has(t,s)||(n=kg(e,t,n,s,r))}),i.low=o,i.lim=n++,a?i.parent=a:delete i.parent,n}function Rg(e){return Pt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Og(e,t,n){var r=n.v,a=n.w;t.hasEdge(r,a)||(r=n.w,a=n.v);var o=e.node(r),i=e.node(a),s=o,l=!1;o.lim>i.lim&&(s=i,l=!0);var u=Pt.filter(t.edges(),function(c){return l===Qf(e,e.node(c.v),s)&&l!==Qf(e,e.node(c.w),s)});return Pt.minBy(u,function(c){return AI(t,c)})}function Ag(e,t,n,r){var a=n.v,o=n.w;e.removeEdge(a,o),e.setEdge(r.v,r.w,{}),Hc(e),zc(e,t),$I(e,t)}function $I(e,t){var n=Pt.find(e.nodes(),function(a){return!t.node(a).parent}),r=LI(e,n);r=r.slice(1),Pt.forEach(r,function(a){var o=e.node(a).parent,i=t.edge(a,o),s=!1;i||(i=t.edge(o,a),s=!0),t.node(a).rank=t.node(o).rank+(s?i.minlen:-i.minlen)})}function FI(e,t,n){return e.hasEdge(t,n)}function Qf(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var BI=No,qg=BI.longestPath,zI=Ig,HI=MI,UI=jI;function jI(e){switch(e.graph().ranker){case"network-simplex":Zf(e);break;case"tight-tree":GI(e);break;case"longest-path":WI(e);break;default:Zf(e)}}var WI=qg;function GI(e){qg(e),zI(e)}function Zf(e){HI(e)}var Ys=be,YI=XI;function XI(e){var t=ZI(e);Ys.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),a=r.edgeObj,o=QI(e,t,a.v,a.w),i=o.path,s=o.lca,l=0,u=i[l],c=!0;n!==a.w;){if(r=e.node(n),c){for(;(u=i[l])!==s&&e.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<i.length-1&&e.node(u=i[l+1]).minRank<=r.rank;)l++;u=i[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function QI(e,t,n,r){var a=[],o=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),a.push(l);while(l&&(t[l].low>i||s>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)o.push(l);return{path:a.concat(o.reverse()),lca:u}}function ZI(e){var t={},n=0;function r(a){var o=n;Ys.forEach(e.children(a),r),t[a]={low:o,lim:n++}}return Ys.forEach(e.children(),r),t}var kt=be,Xs=ze,KI={run:JI,cleanup:nT};function JI(e){var t=Xs.addDummyNode(e,"root",{},"_root"),n=eT(e),r=kt.max(kt.values(n))-1,a=2*r+1;e.graph().nestingRoot=t,kt.forEach(e.edges(),function(i){e.edge(i).minlen*=a});var o=tT(e)+1;kt.forEach(e.children(),function(i){Lg(e,t,a,o,r,n,i)}),e.graph().nodeRankFactor=a}function Lg(e,t,n,r,a,o,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var l=Xs.addBorderNode(e,"_bt"),u=Xs.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(l,i),c.borderTop=l,e.setParent(u,i),c.borderBottom=u,kt.forEach(s,function(d){Lg(e,t,n,r,a,o,d);var f=e.node(d),m=f.borderTop?f.borderTop:d,h=f.borderBottom?f.borderBottom:d,g=f.borderTop?r:2*r,v=m!==h?1:a-o[i]+1;e.setEdge(l,m,{weight:g,minlen:v,nestingEdge:!0}),e.setEdge(h,u,{weight:g,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,l,{weight:0,minlen:a+o[i]})}function eT(e){var t={};function n(r,a){var o=e.children(r);o&&o.length&&kt.forEach(o,function(i){n(i,a+1)}),t[r]=a}return kt.forEach(e.children(),function(r){n(r,1)}),t}function tT(e){return kt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function nT(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,kt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var es=be,rT=ze,aT=oT;function oT(e){function t(n){var r=e.children(n),a=e.node(n);if(r.length&&es.forEach(r,t),es.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,i=a.maxRank+1;o<i;++o)Kf(e,"borderLeft","_bl",n,a,o),Kf(e,"borderRight","_br",n,a,o)}}es.forEach(e.children(),t)}function Kf(e,t,n,r,a,o){var i={width:0,height:0,rank:o,borderType:t},s=a[t][o-1],l=rT.addDummyNode(e,"border",i,n);a[t][o]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var vt=be,iT={adjust:sT,undo:lT};function sT(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Pg(e)}function lT(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&cT(e),(t==="lr"||t==="rl")&&(uT(e),Pg(e))}function Pg(e){vt.forEach(e.nodes(),function(t){Jf(e.node(t))}),vt.forEach(e.edges(),function(t){Jf(e.edge(t))})}function Jf(e){var t=e.width;e.width=e.height,e.height=t}function cT(e){vt.forEach(e.nodes(),function(t){ts(e.node(t))}),vt.forEach(e.edges(),function(t){var n=e.edge(t);vt.forEach(n.points,ts),vt.has(n,"y")&&ts(n)})}function ts(e){e.y=-e.y}function uT(e){vt.forEach(e.nodes(),function(t){ns(e.node(t))}),vt.forEach(e.edges(),function(t){var n=e.edge(t);vt.forEach(n.points,ns),vt.has(n,"x")&&ns(n)})}function ns(e){var t=e.x;e.x=e.y,e.y=t}var _t=be,dT=fT;function fT(e){var t={},n=_t.filter(e.nodes(),function(s){return!e.children(s).length}),r=_t.max(_t.map(n,function(s){return e.node(s).rank})),a=_t.map(_t.range(r+1),function(){return[]});function o(s){if(!_t.has(t,s)){t[s]=!0;var l=e.node(s);a[l.rank].push(s),_t.forEach(e.successors(s),o)}}var i=_t.sortBy(n,function(s){return e.node(s).rank});return _t.forEach(i,o),a}var zt=be,pT=hT;function hT(e,t){for(var n=0,r=1;r<t.length;++r)n+=mT(e,t[r-1],t[r]);return n}function mT(e,t,n){for(var r=zt.zipObject(n,zt.map(n,function(u,c){return c})),a=zt.flatten(zt.map(t,function(u){return zt.sortBy(zt.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var i=2*o-1;o-=1;var s=zt.map(new Array(i),function(){return 0}),l=0;return zt.forEach(a.forEach(function(u){var c=u.pos+o;s[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*d})),l}var ep=be,gT=vT;function vT(e,t){return ep.map(t,function(n){var r=e.inEdges(n);if(r.length){var a=ep.reduce(r,function(o,i){var s=e.edge(i),l=e.node(i.v);return{sum:o.sum+s.weight*l.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:n}})}var He=be,yT=bT;function bT(e,t){var n={};He.forEach(e,function(a,o){var i=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};He.isUndefined(a.barycenter)||(i.barycenter=a.barycenter,i.weight=a.weight)}),He.forEach(t.edges(),function(a){var o=n[a.v],i=n[a.w];!He.isUndefined(o)&&!He.isUndefined(i)&&(i.indegree++,o.out.push(n[a.w]))});var r=He.filter(n,function(a){return!a.indegree});return wT(r)}function wT(e){var t=[];function n(o){return function(i){i.merged||(He.isUndefined(i.barycenter)||He.isUndefined(o.barycenter)||i.barycenter>=o.barycenter)&&CT(o,i)}}function r(o){return function(i){i.in.push(o),--i.indegree===0&&e.push(i)}}for(;e.length;){var a=e.pop();t.push(a),He.forEach(a.in.reverse(),n(a)),He.forEach(a.out,r(a))}return He.map(He.filter(t,function(o){return!o.merged}),function(o){return He.pick(o,["vs","i","barycenter","weight"])})}function CT(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var dr=be,ST=ze,ET=_T;function _T(e,t){var n=ST.partition(e,function(c){return dr.has(c,"barycenter")}),r=n.lhs,a=dr.sortBy(n.rhs,function(c){return-c.i}),o=[],i=0,s=0,l=0;r.sort(xT(!!t)),l=tp(o,a,l),dr.forEach(r,function(c){l+=c.vs.length,o.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,l=tp(o,a,l)});var u={vs:dr.flatten(o,!0)};return s&&(u.barycenter=i/s,u.weight=s),u}function tp(e,t,n){for(var r;t.length&&(r=dr.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function xT(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Gt=be,NT=gT,IT=yT,TT=ET,kT=Dg;function Dg(e,t,n,r){var a=e.children(t),o=e.node(t),i=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,l={};i&&(a=Gt.filter(a,function(h){return h!==i&&h!==s}));var u=NT(e,a);Gt.forEach(u,function(h){if(e.children(h.v).length){var g=Dg(e,h.v,n,r);l[h.v]=g,Gt.has(g,"barycenter")&&OT(h,g)}});var c=IT(u,n);RT(c,l);var d=TT(c,r);if(i&&(d.vs=Gt.flatten([i,d.vs,s],!0),e.predecessors(i).length)){var f=e.node(e.predecessors(i)[0]),m=e.node(e.predecessors(s)[0]);Gt.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+m.order)/(d.weight+2),d.weight+=2}return d}function RT(e,t){Gt.forEach(e,function(n){n.vs=Gt.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function OT(e,t){Gt.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var fr=be,AT=pt.Graph,qT=LT;function LT(e,t,n){var r=PT(e),a=new AT({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return fr.forEach(e.nodes(),function(o){var i=e.node(o),s=e.parent(o);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(a.setNode(o),a.setParent(o,s||r),fr.forEach(e[n](o),function(l){var u=l.v===o?l.w:l.v,c=a.edge(u,o),d=fr.isUndefined(c)?0:c.weight;a.setEdge(u,o,{weight:e.edge(l).weight+d})}),fr.has(i,"minRank")&&a.setNode(o,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),a}function PT(e){for(var t;e.hasNode(t=fr.uniqueId("_root")););return t}var DT=be,MT=VT;function VT(e,t,n){var r={},a;DT.forEach(n,function(o){for(var i=e.parent(o),s,l;i;){if(s=e.parent(i),s?(l=r[s],r[s]=i):(l=a,a=i),l&&l!==i){t.setEdge(l,i);return}i=s}})}var Yt=be,$T=dT,FT=pT,BT=kT,zT=qT,HT=MT,UT=pt.Graph,np=ze,jT=WT;function WT(e){var t=np.maxRank(e),n=rp(e,Yt.range(1,t+1),"inEdges"),r=rp(e,Yt.range(t-1,-1,-1),"outEdges"),a=$T(e);ap(e,a);for(var o=Number.POSITIVE_INFINITY,i,s=0,l=0;l<4;++s,++l){GT(s%2?n:r,s%4>=2),a=np.buildLayerMatrix(e);var u=FT(e,a);u<o&&(l=0,i=Yt.cloneDeep(a),o=u)}ap(e,i)}function rp(e,t,n){return Yt.map(t,function(r){return zT(e,r,n)})}function GT(e,t){var n=new UT;Yt.forEach(e,function(r){var a=r.graph().root,o=BT(r,a,n,t);Yt.forEach(o.vs,function(i,s){r.node(i).order=s}),HT(r,n,o.vs)})}function ap(e,t){Yt.forEach(t,function(n){Yt.forEach(n,function(r,a){e.node(r).order=a})})}var ee=be,YT=pt.Graph,XT=ze,QT={positionX:JT,findType1Conflicts:Mg,findType2Conflicts:Vg,addConflict:Uc,hasConflict:$g,verticalAlignment:Fg,horizontalCompaction:Bg,alignCoordinates:Hg,findSmallestWidthAlignment:zg,balance:Ug};function Mg(e,t){var n={};function r(a,o){var i=0,s=0,l=a.length,u=ee.last(o);return ee.forEach(o,function(c,d){var f=ZT(e,c),m=f?e.node(f).order:l;(f||c===u)&&(ee.forEach(o.slice(s,d+1),function(h){ee.forEach(e.predecessors(h),function(g){var v=e.node(g),S=v.order;(S<i||m<S)&&!(v.dummy&&e.node(h).dummy)&&Uc(n,g,h)})}),s=d+1,i=m)}),o}return ee.reduce(t,r),n}function Vg(e,t){var n={};function r(o,i,s,l,u){var c;ee.forEach(ee.range(i,s),function(d){c=o[d],e.node(c).dummy&&ee.forEach(e.predecessors(c),function(f){var m=e.node(f);m.dummy&&(m.order<l||m.order>u)&&Uc(n,f,c)})})}function a(o,i){var s=-1,l,u=0;return ee.forEach(i,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(i,u,d,s,l),u=d,s=l)}r(i,u,i.length,l,o.length)}),i}return ee.reduce(t,a),n}function ZT(e,t){if(e.node(t).dummy)return ee.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Uc(e,t,n){if(t>n){var r=t;t=n,n=r}var a=e[t];a||(e[t]=a={}),a[n]=!0}function $g(e,t,n){if(t>n){var r=t;t=n,n=r}return ee.has(e[t],n)}function Fg(e,t,n,r){var a={},o={},i={};return ee.forEach(t,function(s){ee.forEach(s,function(l,u){a[l]=l,o[l]=l,i[l]=u})}),ee.forEach(t,function(s){var l=-1;ee.forEach(s,function(u){var c=r(u);if(c.length){c=ee.sortBy(c,function(g){return i[g]});for(var d=(c.length-1)/2,f=Math.floor(d),m=Math.ceil(d);f<=m;++f){var h=c[f];o[u]===u&&l<i[h]&&!$g(n,u,h)&&(o[h]=u,o[u]=a[u]=a[h],l=i[h])}}})}),{root:a,align:o}}function Bg(e,t,n,r,a){var o={},i=KT(e,t,n,a),s=a?"borderLeft":"borderRight";function l(d,f){for(var m=i.nodes(),h=m.pop(),g={};h;)g[h]?d(h):(g[h]=!0,m.push(h),m=m.concat(f(h))),h=m.pop()}function u(d){o[d]=i.inEdges(d).reduce(function(f,m){return Math.max(f,o[m.v]+i.edge(m))},0)}function c(d){var f=i.outEdges(d).reduce(function(h,g){return Math.min(h,o[g.w]-i.edge(g))},Number.POSITIVE_INFINITY),m=e.node(d);f!==Number.POSITIVE_INFINITY&&m.borderType!==s&&(o[d]=Math.max(o[d],f))}return l(u,i.predecessors.bind(i)),l(c,i.successors.bind(i)),ee.forEach(r,function(d){o[d]=o[n[d]]}),o}function KT(e,t,n,r){var a=new YT,o=e.graph(),i=ek(o.nodesep,o.edgesep,r);return ee.forEach(t,function(s){var l;ee.forEach(s,function(u){var c=n[u];if(a.setNode(c),l){var d=n[l],f=a.edge(d,c);a.setEdge(d,c,Math.max(i(e,u,l),f||0))}l=u})}),a}function zg(e,t){return ee.minBy(ee.values(t),function(n){var r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return ee.forIn(n,function(o,i){var s=tk(e,i)/2;r=Math.max(o+s,r),a=Math.min(o-s,a)}),r-a})}function Hg(e,t){var n=ee.values(t),r=ee.min(n),a=ee.max(n);ee.forEach(["u","d"],function(o){ee.forEach(["l","r"],function(i){var s=o+i,l=e[s],u;if(l!==t){var c=ee.values(l);u=i==="l"?r-ee.min(c):a-ee.max(c),u&&(e[s]=ee.mapValues(l,function(d){return d+u}))}})})}function Ug(e,t){return ee.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var a=ee.sortBy(ee.map(e,r));return(a[1]+a[2])/2})}function JT(e){var t=XT.buildLayerMatrix(e),n=ee.merge(Mg(e,t),Vg(e,t)),r={},a;ee.forEach(["u","d"],function(i){a=i==="u"?t:ee.values(t).reverse(),ee.forEach(["l","r"],function(s){s==="r"&&(a=ee.map(a,function(d){return ee.values(d).reverse()}));var l=(i==="u"?e.predecessors:e.successors).bind(e),u=Fg(e,a,n,l),c=Bg(e,a,u.root,u.align,s==="r");s==="r"&&(c=ee.mapValues(c,function(d){return-d})),r[i+s]=c})});var o=zg(e,r);return Hg(r,o),Ug(r,e.graph().align)}function ek(e,t,n){return function(r,a,o){var i=r.node(a),s=r.node(o),l=0,u;if(l+=i.width/2,ee.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":u=-i.width/2;break;case"r":u=i.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(i.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,ee.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function tk(e,t){return e.node(t).width}var pr=be,jg=ze,nk=QT.positionX,rk=ak;function ak(e){e=jg.asNonCompoundGraph(e),ok(e),pr.forEach(nk(e),function(t,n){e.node(n).x=t})}function ok(e){var t=jg.buildLayerMatrix(e),n=e.graph().ranksep,r=0;pr.forEach(t,function(a){var o=pr.max(pr.map(a,function(i){return e.node(i).height}));pr.forEach(a,function(i){e.node(i).y=r+o/2}),r+=o+n})}var ae=be,op=rI,ip=wI,ik=UI,sk=ze.normalizeRanks,lk=YI,ck=ze.removeEmptyRanks,sp=KI,uk=aT,lp=iT,dk=jT,fk=rk,Zt=ze,pk=pt.Graph,hk=mk;function mk(e,t){var n=t&&t.debugTiming?Zt.time:Zt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return Nk(e)});n("  runLayout",function(){gk(r,n)}),n("  updateInputGraph",function(){vk(e,r)})})}function gk(e,t){t("    makeSpaceForEdgeLabels",function(){Ik(e)}),t("    removeSelfEdges",function(){Dk(e)}),t("    acyclic",function(){op.run(e)}),t("    nestingGraph.run",function(){sp.run(e)}),t("    rank",function(){ik(Zt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){Tk(e)}),t("    removeEmptyRanks",function(){ck(e)}),t("    nestingGraph.cleanup",function(){sp.cleanup(e)}),t("    normalizeRanks",function(){sk(e)}),t("    assignRankMinMax",function(){kk(e)}),t("    removeEdgeLabelProxies",function(){Rk(e)}),t("    normalize.run",function(){ip.run(e)}),t("    parentDummyChains",function(){lk(e)}),t("    addBorderSegments",function(){uk(e)}),t("    order",function(){dk(e)}),t("    insertSelfEdges",function(){Mk(e)}),t("    adjustCoordinateSystem",function(){lp.adjust(e)}),t("    position",function(){fk(e)}),t("    positionSelfEdges",function(){Vk(e)}),t("    removeBorderNodes",function(){Pk(e)}),t("    normalize.undo",function(){ip.undo(e)}),t("    fixupEdgeLabelCoords",function(){qk(e)}),t("    undoCoordinateSystem",function(){lp.undo(e)}),t("    translateGraph",function(){Ok(e)}),t("    assignNodeIntersects",function(){Ak(e)}),t("    reversePoints",function(){Lk(e)}),t("    acyclic.undo",function(){op.undo(e)})}function vk(e,t){ae.forEach(e.nodes(),function(n){var r=e.node(n),a=t.node(n);r&&(r.x=a.x,r.y=a.y,t.children(n).length&&(r.width=a.width,r.height=a.height))}),ae.forEach(e.edges(),function(n){var r=e.edge(n),a=t.edge(n);r.points=a.points,ae.has(a,"x")&&(r.x=a.x,r.y=a.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var yk=["nodesep","edgesep","ranksep","marginx","marginy"],bk={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},wk=["acyclicer","ranker","rankdir","align"],Ck=["width","height"],Sk={width:0,height:0},Ek=["minlen","weight","width","height","labeloffset"],_k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},xk=["labelpos"];function Nk(e){var t=new pk({multigraph:!0,compound:!0}),n=as(e.graph());return t.setGraph(ae.merge({},bk,rs(n,yk),ae.pick(n,wk))),ae.forEach(e.nodes(),function(r){var a=as(e.node(r));t.setNode(r,ae.defaults(rs(a,Ck),Sk)),t.setParent(r,e.parent(r))}),ae.forEach(e.edges(),function(r){var a=as(e.edge(r));t.setEdge(r,ae.merge({},_k,rs(a,Ek),ae.pick(a,xk)))}),t}function Ik(e){var t=e.graph();t.ranksep/=2,ae.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function Tk(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),a=e.node(t.w),o={rank:(a.rank-r.rank)/2+r.rank,e:t};Zt.addDummyNode(e,"edge-proxy",o,"_ep")}})}function kk(e){var t=0;ae.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ae.max(t,r.maxRank))}),e.graph().maxRank=t}function Rk(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Ok(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,a=0,o=e.graph(),i=o.marginx||0,s=o.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,m=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-m/2),a=Math.max(a,d+m/2)}ae.forEach(e.nodes(),function(u){l(e.node(u))}),ae.forEach(e.edges(),function(u){var c=e.edge(u);ae.has(c,"x")&&l(c)}),t-=i,r-=s,ae.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ae.forEach(e.edges(),function(u){var c=e.edge(u);ae.forEach(c.points,function(d){d.x-=t,d.y-=r}),ae.has(c,"x")&&(c.x-=t),ae.has(c,"y")&&(c.y-=r)}),o.width=n-t+i,o.height=a-r+s}function Ak(e){ae.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),a=e.node(t.w),o,i;n.points?(o=n.points[0],i=n.points[n.points.length-1]):(n.points=[],o=a,i=r),n.points.unshift(Zt.intersectRect(r,o)),n.points.push(Zt.intersectRect(a,i))})}function qk(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(ae.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Lk(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function Pk(e){ae.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),a=e.node(n.borderBottom),o=e.node(ae.last(n.borderLeft)),i=e.node(ae.last(n.borderRight));n.width=Math.abs(i.x-o.x),n.height=Math.abs(a.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),ae.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function Dk(e){ae.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Mk(e){var t=Zt.buildLayerMatrix(e);ae.forEach(t,function(n){var r=0;ae.forEach(n,function(a,o){var i=e.node(a);i.order=o+r,ae.forEach(i.selfEdges,function(s){Zt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function Vk(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),a=r.x+r.width/2,o=r.y,i=n.x-a,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:a+2*i/3,y:o-s},{x:a+5*i/6,y:o-s},{x:a+i,y:o},{x:a+5*i/6,y:o+s},{x:a+2*i/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function rs(e,t){return ae.mapValues(ae.pick(e,t),Number)}function as(e){var t={};return ae.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var da=be,$k=ze,Fk=pt.Graph,Bk={debugOrdering:zk};function zk(e){var t=$k.buildLayerMatrix(e),n=new Fk({compound:!0,multigraph:!0}).setGraph({});return da.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),da.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),da.forEach(t,function(r,a){var o="layer"+a;n.setNode(o,{rank:"same"}),da.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var Hk="0.8.5",Wg={graphlib:pt,layout:hk,debug:Bk,util:{time:ze.time,notime:ze.notime},version:Hk},cp=function(t){return t.reduce(function(n,r){var a=r[0],o=r[1];return n[a]=o,n},{})},up=typeof window<"u"&&window.document&&window.document.createElement?I.useLayoutEffect:I.useEffect,Fe="top",nt="bottom",rt="right",Be="left",jc="auto",Ur=[Fe,nt,rt,Be],Un="start",Tr="end",Uk="clippingParents",Gg="viewport",ir="popper",jk="reference",dp=Ur.reduce(function(e,t){return e.concat([t+"-"+Un,t+"-"+Tr])},[]),Yg=[].concat(Ur,[jc]).reduce(function(e,t){return e.concat([t,t+"-"+Un,t+"-"+Tr])},[]),Wk="beforeRead",Gk="read",Yk="afterRead",Xk="beforeMain",Qk="main",Zk="afterMain",Kk="beforeWrite",Jk="write",eR="afterWrite",tR=[Wk,Gk,Yk,Xk,Qk,Zk,Kk,Jk,eR];function wt(e){return e?(e.nodeName||"").toLowerCase():null}function it(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pn(e){var t=it(e).Element;return e instanceof t||e instanceof Element}function et(e){var t=it(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Wc(e){if(typeof ShadowRoot>"u")return!1;var t=it(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function nR(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},a=t.attributes[n]||{},o=t.elements[n];!et(o)||!wt(o)||(Object.assign(o.style,r),Object.keys(a).forEach(function(i){var s=a[i];s===!1?o.removeAttribute(i):o.setAttribute(i,s===!0?"":s)}))})}function rR(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var a=t.elements[r],o=t.attributes[r]||{},i=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=i.reduce(function(l,u){return l[u]="",l},{});!et(a)||!wt(a)||(Object.assign(a.style,s),Object.keys(o).forEach(function(l){a.removeAttribute(l)}))})}}const aR={name:"applyStyles",enabled:!0,phase:"write",fn:nR,effect:rR,requires:["computeStyles"]};function bt(e){return e.split("-")[0]}var sn=Math.max,Ga=Math.min,jn=Math.round;function Qs(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Xg(){return!/^((?!chrome|android).)*safari/i.test(Qs())}function Wn(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),a=1,o=1;t&&et(e)&&(a=e.offsetWidth>0&&jn(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&jn(r.height)/e.offsetHeight||1);var i=pn(e)?it(e):window,s=i.visualViewport,l=!Xg()&&n,u=(r.left+(l&&s?s.offsetLeft:0))/a,c=(r.top+(l&&s?s.offsetTop:0))/o,d=r.width/a,f=r.height/o;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Gc(e){var t=Wn(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Qg(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Wc(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Dt(e){return it(e).getComputedStyle(e)}function oR(e){return["table","td","th"].indexOf(wt(e))>=0}function Jt(e){return((pn(e)?e.ownerDocument:e.document)||window.document).documentElement}function Io(e){return wt(e)==="html"?e:e.assignedSlot||e.parentNode||(Wc(e)?e.host:null)||Jt(e)}function fp(e){return!et(e)||Dt(e).position==="fixed"?null:e.offsetParent}function iR(e){var t=/firefox/i.test(Qs()),n=/Trident/i.test(Qs());if(n&&et(e)){var r=Dt(e);if(r.position==="fixed")return null}var a=Io(e);for(Wc(a)&&(a=a.host);et(a)&&["html","body"].indexOf(wt(a))<0;){var o=Dt(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function jr(e){for(var t=it(e),n=fp(e);n&&oR(n)&&Dt(n).position==="static";)n=fp(n);return n&&(wt(n)==="html"||wt(n)==="body"&&Dt(n).position==="static")?t:n||iR(e)||t}function Yc(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function mr(e,t,n){return sn(e,Ga(t,n))}function sR(e,t,n){var r=mr(e,t,n);return r>n?n:r}function Zg(){return{top:0,right:0,bottom:0,left:0}}function Kg(e){return Object.assign({},Zg(),e)}function Jg(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var lR=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Kg(typeof t!="number"?t:Jg(t,Ur))};function cR(e){var t,n=e.state,r=e.name,a=e.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,s=bt(n.placement),l=Yc(s),u=[Be,rt].indexOf(s)>=0,c=u?"height":"width";if(!(!o||!i)){var d=lR(a.padding,n),f=Gc(o),m=l==="y"?Fe:Be,h=l==="y"?nt:rt,g=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],v=i[l]-n.rects.reference[l],S=jr(o),_=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,w=g/2-v/2,C=d[m],b=_-f[c]-d[h],y=_/2-f[c]/2+w,E=mr(C,y,b),x=l;n.modifiersData[r]=(t={},t[x]=E,t.centerOffset=E-y,t)}}function uR(e){var t=e.state,n=e.options,r=n.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Qg(t.elements.popper,a)&&(t.elements.arrow=a))}const dR={name:"arrow",enabled:!0,phase:"main",fn:cR,effect:uR,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Gn(e){return e.split("-")[1]}var fR={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pR(e){var t=e.x,n=e.y,r=window,a=r.devicePixelRatio||1;return{x:jn(t*a)/a||0,y:jn(n*a)/a||0}}function pp(e){var t,n=e.popper,r=e.popperRect,a=e.placement,o=e.variation,i=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=i.x,m=f===void 0?0:f,h=i.y,g=h===void 0?0:h,v=typeof c=="function"?c({x:m,y:g}):{x:m,y:g};m=v.x,g=v.y;var S=i.hasOwnProperty("x"),_=i.hasOwnProperty("y"),w=Be,C=Fe,b=window;if(u){var y=jr(n),E="clientHeight",x="clientWidth";if(y===it(n)&&(y=Jt(n),Dt(y).position!=="static"&&s==="absolute"&&(E="scrollHeight",x="scrollWidth")),y=y,a===Fe||(a===Be||a===rt)&&o===Tr){C=nt;var N=d&&y===b&&b.visualViewport?b.visualViewport.height:y[E];g-=N-r.height,g*=l?1:-1}if(a===Be||(a===Fe||a===nt)&&o===Tr){w=rt;var k=d&&y===b&&b.visualViewport?b.visualViewport.width:y[x];m-=k-r.width,m*=l?1:-1}}var A=Object.assign({position:s},u&&fR),q=c===!0?pR({x:m,y:g}):{x:m,y:g};if(m=q.x,g=q.y,l){var L;return Object.assign({},A,(L={},L[C]=_?"0":"",L[w]=S?"0":"",L.transform=(b.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",L))}return Object.assign({},A,(t={},t[C]=_?g+"px":"",t[w]=S?m+"px":"",t.transform="",t))}function hR(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=r===void 0?!0:r,o=n.adaptive,i=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:bt(t.placement),variation:Gn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,pp(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,pp(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const mR={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hR,data:{}};var fa={passive:!0};function gR(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,o=a===void 0?!0:a,i=r.resize,s=i===void 0?!0:i,l=it(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,fa)}),s&&l.addEventListener("resize",n.update,fa),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,fa)}),s&&l.removeEventListener("resize",n.update,fa)}}const vR={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gR,data:{}};var yR={left:"right",right:"left",bottom:"top",top:"bottom"};function Ca(e){return e.replace(/left|right|bottom|top/g,function(t){return yR[t]})}var bR={start:"end",end:"start"};function hp(e){return e.replace(/start|end/g,function(t){return bR[t]})}function Xc(e){var t=it(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Qc(e){return Wn(Jt(e)).left+Xc(e).scrollLeft}function wR(e,t){var n=it(e),r=Jt(e),a=n.visualViewport,o=r.clientWidth,i=r.clientHeight,s=0,l=0;if(a){o=a.width,i=a.height;var u=Xg();(u||!u&&t==="fixed")&&(s=a.offsetLeft,l=a.offsetTop)}return{width:o,height:i,x:s+Qc(e),y:l}}function CR(e){var t,n=Jt(e),r=Xc(e),a=(t=e.ownerDocument)==null?void 0:t.body,o=sn(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=sn(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+Qc(e),l=-r.scrollTop;return Dt(a||n).direction==="rtl"&&(s+=sn(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:i,x:s,y:l}}function Zc(e){var t=Dt(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function ev(e){return["html","body","#document"].indexOf(wt(e))>=0?e.ownerDocument.body:et(e)&&Zc(e)?e:ev(Io(e))}function gr(e,t){var n;t===void 0&&(t=[]);var r=ev(e),a=r===((n=e.ownerDocument)==null?void 0:n.body),o=it(r),i=a?[o].concat(o.visualViewport||[],Zc(r)?r:[]):r,s=t.concat(i);return a?s:s.concat(gr(Io(i)))}function Zs(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function SR(e,t){var n=Wn(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function mp(e,t,n){return t===Gg?Zs(wR(e,n)):pn(t)?SR(t,n):Zs(CR(Jt(e)))}function ER(e){var t=gr(Io(e)),n=["absolute","fixed"].indexOf(Dt(e).position)>=0,r=n&&et(e)?jr(e):e;return pn(r)?t.filter(function(a){return pn(a)&&Qg(a,r)&&wt(a)!=="body"}):[]}function _R(e,t,n,r){var a=t==="clippingParents"?ER(e):[].concat(t),o=[].concat(a,[n]),i=o[0],s=o.reduce(function(l,u){var c=mp(e,u,r);return l.top=sn(c.top,l.top),l.right=Ga(c.right,l.right),l.bottom=Ga(c.bottom,l.bottom),l.left=sn(c.left,l.left),l},mp(e,i,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function tv(e){var t=e.reference,n=e.element,r=e.placement,a=r?bt(r):null,o=r?Gn(r):null,i=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(a){case Fe:l={x:i,y:t.y-n.height};break;case nt:l={x:i,y:t.y+t.height};break;case rt:l={x:t.x+t.width,y:s};break;case Be:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var u=a?Yc(a):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case Un:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Tr:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function kr(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=r===void 0?e.placement:r,o=n.strategy,i=o===void 0?e.strategy:o,s=n.boundary,l=s===void 0?Uk:s,u=n.rootBoundary,c=u===void 0?Gg:u,d=n.elementContext,f=d===void 0?ir:d,m=n.altBoundary,h=m===void 0?!1:m,g=n.padding,v=g===void 0?0:g,S=Kg(typeof v!="number"?v:Jg(v,Ur)),_=f===ir?jk:ir,w=e.rects.popper,C=e.elements[h?_:f],b=_R(pn(C)?C:C.contextElement||Jt(e.elements.popper),l,c,i),y=Wn(e.elements.reference),E=tv({reference:y,element:w,strategy:"absolute",placement:a}),x=Zs(Object.assign({},w,E)),N=f===ir?x:y,k={top:b.top-N.top+S.top,bottom:N.bottom-b.bottom+S.bottom,left:b.left-N.left+S.left,right:N.right-b.right+S.right},A=e.modifiersData.offset;if(f===ir&&A){var q=A[a];Object.keys(k).forEach(function(L){var T=[rt,nt].indexOf(L)>=0?1:-1,D=[Fe,nt].indexOf(L)>=0?"y":"x";k[L]+=q[D]*T})}return k}function xR(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=n.boundary,o=n.rootBoundary,i=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Yg:l,c=Gn(r),d=c?s?dp:dp.filter(function(h){return Gn(h)===c}):Ur,f=d.filter(function(h){return u.indexOf(h)>=0});f.length===0&&(f=d);var m=f.reduce(function(h,g){return h[g]=kr(e,{placement:g,boundary:a,rootBoundary:o,padding:i})[bt(g)],h},{});return Object.keys(m).sort(function(h,g){return m[h]-m[g]})}function NR(e){if(bt(e)===jc)return[];var t=Ca(e);return[hp(e),t,hp(t)]}function IR(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,o=a===void 0?!0:a,i=n.altAxis,s=i===void 0?!0:i,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,h=m===void 0?!0:m,g=n.allowedAutoPlacements,v=t.options.placement,S=bt(v),_=S===v,w=l||(_||!h?[Ca(v)]:NR(v)),C=[v].concat(w).reduce(function(V,U){return V.concat(bt(U)===jc?xR(t,{placement:U,boundary:c,rootBoundary:d,padding:u,flipVariations:h,allowedAutoPlacements:g}):U)},[]),b=t.rects.reference,y=t.rects.popper,E=new Map,x=!0,N=C[0],k=0;k<C.length;k++){var A=C[k],q=bt(A),L=Gn(A)===Un,T=[Fe,nt].indexOf(q)>=0,D=T?"width":"height",R=kr(t,{placement:A,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),M=T?L?rt:Be:L?nt:Fe;b[D]>y[D]&&(M=Ca(M));var z=Ca(M),B=[];if(o&&B.push(R[q]<=0),s&&B.push(R[M]<=0,R[z]<=0),B.every(function(V){return V})){N=A,x=!1;break}E.set(A,B)}if(x)for(var F=h?3:1,W=function(U){var G=C.find(function(H){var X=E.get(H);if(X)return X.slice(0,U).every(function(K){return K})});if(G)return N=G,"break"},Z=F;Z>0;Z--){var P=W(Z);if(P==="break")break}t.placement!==N&&(t.modifiersData[r]._skip=!0,t.placement=N,t.reset=!0)}}const TR={name:"flip",enabled:!0,phase:"main",fn:IR,requiresIfExists:["offset"],data:{_skip:!1}};function gp(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function vp(e){return[Fe,rt,nt,Be].some(function(t){return e[t]>=0})}function kR(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,i=kr(t,{elementContext:"reference"}),s=kr(t,{altBoundary:!0}),l=gp(i,r),u=gp(s,a,o),c=vp(l),d=vp(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const RR={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:kR};function OR(e,t,n){var r=bt(e),a=[Be,Fe].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,i=o[0],s=o[1];return i=i||0,s=(s||0)*a,[Be,rt].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}function AR(e){var t=e.state,n=e.options,r=e.name,a=n.offset,o=a===void 0?[0,0]:a,i=Yg.reduce(function(c,d){return c[d]=OR(d,t.rects,o),c},{}),s=i[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=i}const qR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:AR};function LR(e){var t=e.state,n=e.name;t.modifiersData[n]=tv({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const PR={name:"popperOffsets",enabled:!0,phase:"read",fn:LR,data:{}};function DR(e){return e==="x"?"y":"x"}function MR(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,o=a===void 0?!0:a,i=n.altAxis,s=i===void 0?!1:i,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,m=f===void 0?!0:f,h=n.tetherOffset,g=h===void 0?0:h,v=kr(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),S=bt(t.placement),_=Gn(t.placement),w=!_,C=Yc(S),b=DR(C),y=t.modifiersData.popperOffsets,E=t.rects.reference,x=t.rects.popper,N=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,k=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,q={x:0,y:0};if(y){if(o){var L,T=C==="y"?Fe:Be,D=C==="y"?nt:rt,R=C==="y"?"height":"width",M=y[C],z=M+v[T],B=M-v[D],F=m?-x[R]/2:0,W=_===Un?E[R]:x[R],Z=_===Un?-x[R]:-E[R],P=t.elements.arrow,V=m&&P?Gc(P):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Zg(),G=U[T],H=U[D],X=mr(0,E[R],V[R]),K=w?E[R]/2-F-X-G-k.mainAxis:W-X-G-k.mainAxis,Y=w?-E[R]/2+F+X+H+k.mainAxis:Z+X+H+k.mainAxis,de=t.elements.arrow&&jr(t.elements.arrow),pe=de?C==="y"?de.clientTop||0:de.clientLeft||0:0,Ee=(L=A==null?void 0:A[C])!=null?L:0,we=M+K-Ee-pe,_e=M+Y-Ee,ke=mr(m?Ga(z,we):z,M,m?sn(B,_e):B);y[C]=ke,q[C]=ke-M}if(s){var Me,Ae=C==="x"?Fe:Be,qe=C==="x"?nt:rt,ve=y[b],Ne=b==="y"?"height":"width",Qe=ve+v[Ae],ne=ve-v[qe],oe=[Fe,Be].indexOf(S)!==-1,te=(Me=A==null?void 0:A[b])!=null?Me:0,he=oe?Qe:ve-E[Ne]-x[Ne]-te+k.altAxis,J=oe?ve+E[Ne]+x[Ne]-te-k.altAxis:ne,Ie=m&&oe?sR(he,ve,J):mr(m?he:Qe,ve,m?J:ne);y[b]=Ie,q[b]=Ie-ve}t.modifiersData[r]=q}}const VR={name:"preventOverflow",enabled:!0,phase:"main",fn:MR,requiresIfExists:["offset"]};function $R(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function FR(e){return e===it(e)||!et(e)?Xc(e):$R(e)}function BR(e){var t=e.getBoundingClientRect(),n=jn(t.width)/e.offsetWidth||1,r=jn(t.height)/e.offsetHeight||1;return n!==1||r!==1}function zR(e,t,n){n===void 0&&(n=!1);var r=et(t),a=et(t)&&BR(t),o=Jt(t),i=Wn(e,a,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((wt(t)!=="body"||Zc(o))&&(s=FR(t)),et(t)?(l=Wn(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Qc(o))),{x:i.left+s.scrollLeft-l.x,y:i.top+s.scrollTop-l.y,width:i.width,height:i.height}}function HR(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function a(o){n.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&a(l)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||a(o)}),r}function UR(e){var t=HR(e);return tR.reduce(function(n,r){return n.concat(t.filter(function(a){return a.phase===r}))},[])}function jR(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function WR(e){var t=e.reduce(function(n,r){var a=n[r.name];return n[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var yp={placement:"bottom",modifiers:[],strategy:"absolute"};function bp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function GR(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,a=t.defaultOptions,o=a===void 0?yp:a;return function(s,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},yp,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(S){var _=typeof S=="function"?S(c.options):S;g(),c.options=Object.assign({},o,c.options,_),c.scrollParents={reference:pn(s)?gr(s):s.contextElement?gr(s.contextElement):[],popper:gr(l)};var w=UR(WR([].concat(r,c.options.modifiers)));return c.orderedModifiers=w.filter(function(C){return C.enabled}),h(),m.update()},forceUpdate:function(){if(!f){var S=c.elements,_=S.reference,w=S.popper;if(bp(_,w)){c.rects={reference:zR(_,jr(w),c.options.strategy==="fixed"),popper:Gc(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var C=0;C<c.orderedModifiers.length;C++){if(c.reset===!0){c.reset=!1,C=-1;continue}var b=c.orderedModifiers[C],y=b.fn,E=b.options,x=E===void 0?{}:E,N=b.name;typeof y=="function"&&(c=y({state:c,options:x,name:N,instance:m})||c)}}}},update:jR(function(){return new Promise(function(v){m.forceUpdate(),v(c)})}),destroy:function(){g(),f=!0}};if(!bp(s,l))return m;m.setOptions(u).then(function(v){!f&&u.onFirstUpdate&&u.onFirstUpdate(v)});function h(){c.orderedModifiers.forEach(function(v){var S=v.name,_=v.options,w=_===void 0?{}:_,C=v.effect;if(typeof C=="function"){var b=C({state:c,name:S,instance:m,options:w}),y=function(){};d.push(b||y)}})}function g(){d.forEach(function(v){return v()}),d=[]}return m}}var YR=[vR,PR,mR,aR,qR,TR,VR,dR,RR],XR=GR({defaultModifiers:YR}),QR=typeof Element<"u",ZR=typeof Map=="function",KR=typeof Set=="function",JR=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Sa(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Sa(e[r],t[r]))return!1;return!0}var o;if(ZR&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!Sa(r.value[1],t.get(r.value[0])))return!1;return!0}if(KR&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(JR&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;if(QR&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((a[r]==="_owner"||a[r]==="__v"||a[r]==="__o")&&e.$$typeof)&&!Sa(e[a[r]],t[a[r]]))return!1;return!0}return e!==e&&t!==t}var eO=function(t,n){try{return Sa(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},tO=[],nO=function(t,n,r){r===void 0&&(r={});var a=I.useRef(null),o={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||tO},i=I.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],l=i[1],u=I.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(m){var h=m.state,g=Object.keys(h.elements);Lb.flushSync(function(){l({styles:cp(g.map(function(v){return[v,h.styles[v]||{}]})),attributes:cp(g.map(function(v){return[v,h.attributes[v]]}))})})},requires:["computeStyles"]}},[]),c=I.useMemo(function(){var f={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[u,{name:"applyStyles",enabled:!1}])};return eO(a.current,f)?a.current||f:(a.current=f,f)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,u]),d=I.useRef();return up(function(){d.current&&d.current.setOptions(c)},[c]),up(function(){if(!(t==null||n==null)){var f=r.createPopper||XR,m=f(t,n,c);return d.current=m,function(){m.destroy(),d.current=null}}},[t,n,r.createPopper]),{state:d.current?d.current.state:null,styles:s.styles,attributes:s.attributes,update:d.current?d.current.update:null,forceUpdate:d.current?d.current.forceUpdate:null}};const Ks=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:a,strategy:o,style:i})=>{n=n??"bottom-start";const[s,l]=I.useState(!1),[u,c]=I.useState(null),[d,f]=I.useState(null),[m,h]=I.useState(null),{styles:g,attributes:v}=nO(u,d,{placement:n,strategy:o,modifiers:[{name:"arrow",options:{element:m}},{name:"offset",options:{offset:[0,10]}}]}),S=p(Ch,{in:s,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:O("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...i,...g.popper},ref:f,...v.popper,children:[p(At,{variant:"body1",children:p(Xe,{...t})}),O("div",{className:"TooltipButtonContainer",children:[a&&p(je,{color:"primary",variant:"contained",onClick:()=>{a.onClick(),a.closePopoverOnClick&&l(!1)},children:a.content}),r&&p(je,{variant:"outlined",onClick:()=>l(!1),children:"Close"})]}),p("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:g.arrow})]})});return O(j,{children:[p("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>l(_=>!_),ref:c,children:e}),S]})};try{Ks.displayName="MarkdownPopover",Ks.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}}}catch{}const hn=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:a=""})=>p(j,{children:p(Ks,{contentProps:{markdown:e},placement:n,actionButton:t?{content:p(j,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:p(Ry,{className:`HelpButton ${a}`})})});try{hn.displayName="HelpPopover",hn.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const rO=()=>O(j,{children:[p(At,{variant:"smallText1",className:"description",children:"Undefined"}),p(hn,{placement:"top",markdownText:`Provenance tracks the relationship 
          between data, code and analytical results.`,helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),Js=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return I.useMemo(()=>O(j,{children:[p("div",{children:p(ce,{icon:"fileOutlined"})}),p("span",{children:n})]}),[n])};try{Js.displayName="EntityPlaceholderNodeLabel",Js.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var Pe=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(Pe||{});const Ya=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=p(zs,{...n});break;case"EntityPlaceholderNode":r=p(Js,{...n});break;case"ExternalNode":r=p(Ws,{...n});break;case"ActivityNode":r=p(Fs,{...n});break;case"ExpandNode":r=p(Us,{...n});break;case"UndefinedNode":r=p(rO,{});break;default:r=O("p",{children:["Unrecognized node type: ",t]});break}const a={label:r,props:n,type:t};return{id:Mt(e),position:{x:100,y:100},data:a,connectable:!1,draggable:!1,className:`${t}`}},nv=(e,t)=>{const n=Mt(e),r=Mt(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:Nt.SimpleBezier,markerEnd:{type:Ir.ArrowClosed}}},Mt=e=>{const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${n.versionNumber??"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${n.targetVersionNumber??"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${n.entityHeader.versionNumber??"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${n.versionNumber??"latest"}`}},Nn=new Wg.graphlib.Graph;Nn.setDefaultEdgeLabel(()=>({}));const wp=e=>e.data.type=="ExpandNode"?30:100,Cp=e=>e.data.type=="ExpandNode"?30:172,aO=(e,t,n)=>{const r=n==="LR";return Nn.setGraph({rankdir:n}),e.forEach(a=>{Nn.setNode(a.id,{width:Cp(a),height:wp(a)})}),t.forEach(a=>{Nn.setEdge(a.source,a.target)}),Wg.layout(Nn),e.forEach(a=>{const o=Nn.node(a.id);return a.targetPosition=r?Q.Left:Q.Top,a.sourcePosition=r?Q.Right:Q.Bottom,a.position={x:o.x-Cp(a)/2,y:o.y-wp(a)/2},a}),{nodes:e,edges:t}},Sp=(e,t)=>Pb(e,t,Mb).length==0;try{Ya.displayName="getProvenanceNode",Ya.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}try{Mt.displayName="getNodeId",Mt.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}const oO="org.sagebionetworks.repo.model.provenance.UsedEntity",Ep=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(a=>t.id==a.id&&t.versionNumber==a.versionNumber))!==void 0},rv=(e,t)=>t.find(r=>r.id===Mt(e))===void 0,iO=(e,t)=>{const n={type:Pe.ENTITY,data:e};return t.find(r=>r.id===Mt(n))},sO=(e,t,n)=>n.find(a=>a.source===Mt(e)&&a.target===Mt(t))===void 0,Wr=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:a}=e;rv(t,r)&&r.push(Ya(t)),sO(t,n,a)&&a.push(nv(t,n))},lO=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:a}=e,o={type:Pe.ACTIVITY,data:t},i={type:Pe.ENTITY,data:n};Wr({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},cO=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:a}=e,o={type:Pe.EXPAND,data:{itemCount:n,entityHeader:t}},i={type:Pe.ENTITY,data:t};Wr({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},uO=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:Pe.ENTITY_PLACEHOLDER,data:t},i={type:Pe.ACTIVITY,data:n};Wr({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},dO=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,a={type:Pe.UNDEFINED,data:t},o={type:Pe.ENTITY,data:t};Wr({newNodeProps:a,existingNodeProps:o,nodesCopy:n,edgesCopy:r})},fO=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:Pe.ACTIVITY,data:n},i={type:Pe.EXTERNAL,data:t};Wr({newNodeProps:i,existingNodeProps:o,nodesCopy:r,edgesCopy:a})},pO=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:Pe.ENTITY,data:t};if(rv(o,r)&&(r.push(Ya(o)),n)){const i={type:Pe.ACTIVITY,data:n};a.push(nv(o,i))}},os=400,is=.85,hO=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:a=[],onNodesChangedListener:o,onEdgesChangedListener:i}=e,{accessToken:s}=ie(),[l,u]=$.useState(r),[c,d]=$.useState(a),[f,m,h]=K1([]),[g,v,S]=J1([]),[_,w]=I.useState(),C=oy(),{data:b,isSuccess:y}=v0(t,{useErrorBoundary:!0});if(y&&b&&b.totalNumberOfResults==0){const D=t.map(R=>R.targetId).join(",");C(`Unable to load provenance for the given Synapse IDs: ${D}`)}const E=b==null?void 0:b.results,[x,N]=$.useState(!1),k=Mc(),A=I.useCallback((D,R)=>{w(R)},[]),q=I.useCallback(async D=>{var F;const{entityHeader:R,nodesCopy:M,edgesCopy:z,usedInActivity:B}=D;pO({entityHeader:R,activity:B,nodesCopy:M,edgesCopy:z});try{const W=await mu(R.id,R.versionNumber,s);(!Ep({entityHeader:R,rootEntityHeaders:E})||W.used&&W.used.length>=os)&&cO({entityHeader:R,itemCount:(F=W.used)==null?void 0:F.length,nodesCopy:M,edgesCopy:z})}catch(W){console.error(W),Ep({entityHeader:R,rootEntityHeaders:E})&&dO({entityHeader:R,nodesCopy:M,edgesCopy:z})}},[s,E]);I.useEffect(()=>{!x&&f.length>0&&setTimeout(()=>{if(E){const D=iO(E[0],f);if(D){const R=k.getZoom(),M=R>is?is:R;k==null||k.setCenter(D.position.x+150,D.position.y-30,{zoom:M,duration:0})}N(!0)}})},[x,f,k,E]);const L=I.useCallback(async D=>{const{entityHeader:R,nodesCopy:M,edgesCopy:z}=D;try{const B=await mu(R.id,R.versionNumber,s);if(lO({activity:B,entityHeader:R,nodesCopy:M,edgesCopy:z}),B.used&&B.used.length<os){const F=[];B.used.forEach(U=>{U.concreteType==oO?F.push(U.reference):fO({usedURL:U,activity:B,nodesCopy:M,edgesCopy:z})});const W=await tc(F,s),{results:Z}=W;F.filter(U=>Z.find(G=>G.id==U.targetId)==null).forEach(U=>{uO({ref:U,activity:B,nodesCopy:M,edgesCopy:z})});const V=[];Z.forEach(U=>{V.push(q({entityHeader:U,nodesCopy:M,edgesCopy:z,usedInActivity:B}))}),await Promise.allSettled(V)}}catch(B){console.error(B)}},[s,q]);I.useEffect(()=>{if(E&&l.length==0){const D=[...l],R=[...c],M=[];E.forEach(z=>{const B=q({entityHeader:z,nodesCopy:D,edgesCopy:R});M.push(B);const F=L({entityHeader:z,nodesCopy:D,edgesCopy:R});M.push(F)}),Promise.allSettled(M).finally(()=>{u(D),d(R)})}},[q,C,L,E,t,c,l]),I.useEffect(()=>{const D=_==null?void 0:_.data;if(_&&(D==null?void 0:D.type)==Pe.EXPAND){const R=D.props;if(R.itemCount>os){Qt("Web visualization does not support expanding this many items at this time.","danger");return}else{D.label=p(Ww,{size:30});const M=l.filter(F=>F.id!=_.id),z=Pc([_],c)[0],B=c.filter(F=>F!=z);L({entityHeader:R.entityHeader,nodesCopy:M,edgesCopy:B}).finally(()=>{u(M),d(B)})}w(void 0)}},[_,l,c,L]),I.useEffect(()=>{const{nodes:D,edges:R}=aO(l,c,"TB");Sp(D,f)||(m(D),o&&o(D)),Sp(R,g)||(v(R),i&&i(R))},[l,c,f,g,m,v,x,k,t,o,i]);const T=I.useCallback(D=>{D&&typeof D.deltaX<"u"&&typeof D.deltaY<"u"&&window.scrollTo(window.scrollX+D.deltaX,window.scrollY+D.deltaY)},[]);return p("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:p(og,{defaultZoom:is,nodes:f,edges:g,onNodeClick:A,onNodesChange:h,onEdgesChange:S,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:T,children:p(Ax,{})})})},el=e=>p(Yp,{children:p(ig,{children:p(hO,{...e})})});try{el.displayName="ProvenanceGraph",el.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}}}catch{}function tl(e){const{entityList:t,displayHeightPx:n}=e,r=t.split(",").map(o=>{const i=o.split("/version/");return{targetId:i[0],targetVersionNumber:i.length>1?parseInt(i[1]):void 0}}),a=n?`${n}px`:void 0;return p(el,{entityRefs:r,containerHeight:a})}try{tl.displayName="MarkdownProvenanceGraph",tl.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}}}catch{}class Rr extends I.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&br(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:Le.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){Qn({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(a=>{const{preSignedURL:o}=a.requestedFiles.filter(i=>i.fileHandleId===n)[0];this.setState({preSignedURL:o})}).catch(a=>{console.error("Error on getting image ",a)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(o=>o.fileName===t)[0],a=[{associateObjectId:this.props.wikiId,associateObjectType:Le.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(a,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let a="auto";t.scale&&t.scale!=="100"&&(a=`${Number(t.scale)}%`);const o=n.toLowerCase();let i="";o==="left"&&(i="floatLeft"),o==="right"&&(i="floatright"),o==="center"&&(i="align-center");const s={width:a,height:a};return this.state.preSignedURL?p(I.Fragment,{children:p("img",{alt:r,className:"img-fluid  "+i,src:this.state.preSignedURL,style:s})}):null}}me(Rr,"contextType",Pr);try{Rr.displayName="SynapseImage",Rr.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}}}catch{}const Or=$.createContext(void 0),nl=({children:e,wikiContext:t})=>p(Or.Provider,{value:t,children:e}),_p=Or.Consumer;function av(){return I.useContext(Or)??{}}try{Or.displayName="SynapseWikiContext",Or.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}}}catch{}try{nl.displayName="SynapseWikiContextProvider",nl.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}}}catch{}try{_p.displayName="SynapseWikiContextConsumer",_p.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}}}catch{}function rl(e){const{wikiId:t,wikiPage:n,fileHandles:r}=av();return e.fileName?r?p(Rr,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):p(j,{}):e.synapseId?p(Rr,{params:e,synapseId:e.synapseId}):p(j,{})}try{rl.displayName="MarkdownSynapseImage",rl.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}}}catch{}const mO=Vb($b);class Xa extends I.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Dr,entityId:yn(t),query:{sql:t}};Xp(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var m,h;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:a,xaxistype:o,showlegend:i}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),u={showlegend:i,title:t};n&&(u.xaxis={title:n}),o&&(u.xaxis={...u.xaxis,xaxistype:o.toLowerCase()}),r&&(u.yaxis={title:r});const c=[],d=l?"v":"h",f=((m=s.queryData.queryResult)==null?void 0:m.queryResults.headers)??[];for(let g=0;g<f.length-1;g+=1)c[g]={orientation:d,name:f[g+1].name,type:a.toLowerCase(),x:[],y:[]};for(const g of((h=s.queryData.queryResult)==null?void 0:h.queryResults.rows)??[])for(let v=1;v<g.values.length;v+=1){const S=g.values;c[v-1].x.push(S[0]),c[v-1].y.push(S[v])}return p(mO,{layout:u,data:c})}render(){return this.state.isLoaded?this.showPlot():null}}me(Xa,"contextType",Pr);try{Xa.displayName="SynapsePlot",Xa.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}}}catch{}function al(e){const{ownerId:t,wikiId:n,wikiPage:r}=av();return p(Xa,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{al.displayName="MarkdownSynapsePlot",al.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}}}catch{}const gO=200,xp="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",Np="ESTIMATED_DOWNLOAD_SPEED",vO="syn12600511",yO=e=>new Promise((t,n)=>{const r=localStorage.getItem(xp),a=localStorage.getItem(Np);if(r&&a&&new Date().getTime()<Number(r)){t(Number(a));return}br(e,vO).then(o=>{const i=o,l={includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:i.id,associateObjectType:Le.FileEntity,fileHandleId:i.dataFileHandleId}]};Qn(l,e).then(u=>{const c=u.requestedFiles[0].preSignedURL,d=u.requestedFiles[0].fileHandle,f=new Date().getTime();return iy(d,c).then(()=>{const m=d.contentSize/((new Date().getTime()-f-gO)/1e3),h=new Date().getTime();localStorage.setItem(xp,(h+1e3*60*5).toString()),localStorage.setItem(Np,m.toString()),t(m)})})}).catch(o=>n(o))});var ol={},bO={get exports(){return ol},set exports(e){ol=e}};(function(e,t){(function(n,r){e.exports=r()})(uo,function(){var n,r,a=1e3,o=6e4,i=36e5,s=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,c=2592e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f={years:u,months:c,days:s,hours:i,minutes:o,seconds:a,milliseconds:1,weeks:6048e5},m=function(b){return b instanceof C},h=function(b,y,E){return new C(b,E,y.$l)},g=function(b){return r.p(b)+"s"},v=function(b){return b<0},S=function(b){return v(b)?Math.ceil(b):Math.floor(b)},_=function(b){return Math.abs(b)},w=function(b,y){return b?v(b)?{negative:!0,format:""+_(b)+y}:{negative:!1,format:""+b+y}:{negative:!1,format:""}},C=function(){function b(E,x,N){var k=this;if(this.$d={},this.$l=N,E===void 0&&(this.$ms=0,this.parseFromMilliseconds()),x)return h(E*f[g(x)],this);if(typeof E=="number")return this.$ms=E,this.parseFromMilliseconds(),this;if(typeof E=="object")return Object.keys(E).forEach(function(L){k.$d[g(L)]=E[L]}),this.calMilliseconds(),this;if(typeof E=="string"){var A=E.match(d);if(A){var q=A.slice(2).map(function(L){return L!=null?Number(L):0});return this.$d.years=q[0],this.$d.months=q[1],this.$d.weeks=q[2],this.$d.days=q[3],this.$d.hours=q[4],this.$d.minutes=q[5],this.$d.seconds=q[6],this.calMilliseconds(),this}}return this}var y=b.prototype;return y.calMilliseconds=function(){var E=this;this.$ms=Object.keys(this.$d).reduce(function(x,N){return x+(E.$d[N]||0)*f[N]},0)},y.parseFromMilliseconds=function(){var E=this.$ms;this.$d.years=S(E/u),E%=u,this.$d.months=S(E/c),E%=c,this.$d.days=S(E/s),E%=s,this.$d.hours=S(E/i),E%=i,this.$d.minutes=S(E/o),E%=o,this.$d.seconds=S(E/a),E%=a,this.$d.milliseconds=E},y.toISOString=function(){var E=w(this.$d.years,"Y"),x=w(this.$d.months,"M"),N=+this.$d.days||0;this.$d.weeks&&(N+=7*this.$d.weeks);var k=w(N,"D"),A=w(this.$d.hours,"H"),q=w(this.$d.minutes,"M"),L=this.$d.seconds||0;this.$d.milliseconds&&(L+=this.$d.milliseconds/1e3);var T=w(L,"S"),D=E.negative||x.negative||k.negative||A.negative||q.negative||T.negative,R=A.format||q.format||T.format?"T":"",M=(D?"-":"")+"P"+E.format+x.format+k.format+R+A.format+q.format+T.format;return M==="P"||M==="-P"?"P0D":M},y.toJSON=function(){return this.toISOString()},y.format=function(E){var x=E||"YYYY-MM-DDTHH:mm:ss",N={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return x.replace(l,function(k,A){return A||String(N[k])})},y.as=function(E){return this.$ms/f[g(E)]},y.get=function(E){var x=this.$ms,N=g(E);return N==="milliseconds"?x%=1e3:x=N==="weeks"?S(x/f[N]):this.$d[N],x===0?0:x},y.add=function(E,x,N){var k;return k=x?E*f[g(x)]:m(E)?E.$ms:h(E,this).$ms,h(this.$ms+k*(N?-1:1),this)},y.subtract=function(E,x){return this.add(E,x,!0)},y.locale=function(E){var x=this.clone();return x.$l=E,x},y.clone=function(){return h(this.$ms,this)},y.humanize=function(E){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!E)},y.milliseconds=function(){return this.get("milliseconds")},y.asMilliseconds=function(){return this.as("milliseconds")},y.seconds=function(){return this.get("seconds")},y.asSeconds=function(){return this.as("seconds")},y.minutes=function(){return this.get("minutes")},y.asMinutes=function(){return this.as("minutes")},y.hours=function(){return this.get("hours")},y.asHours=function(){return this.as("hours")},y.days=function(){return this.get("days")},y.asDays=function(){return this.as("days")},y.weeks=function(){return this.get("weeks")},y.asWeeks=function(){return this.as("weeks")},y.months=function(){return this.get("months")},y.asMonths=function(){return this.as("months")},y.years=function(){return this.get("years")},y.asYears=function(){return this.as("years")},b}();return function(b,y,E){n=E,r=E().$utils(),E.duration=function(k,A){var q=E.locale();return h(k,{$l:q},A)},E.isDuration=m;var x=y.prototype.add,N=y.prototype.subtract;y.prototype.add=function(k,A){return m(k)&&(k=k.asMilliseconds()),x.bind(this)(k,A)},y.prototype.subtract=function(k,A){return m(k)&&(k=k.asMilliseconds()),N.bind(this)(k,A)}}})})(bO);const wO=ol;Xt.extend(wO);Xt.extend(Kb);function il(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=ie(),[a,o]=I.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:i,downloadSpeed:s}=a;I.useEffect(()=>{r&&yO(r).then(h=>{o({isLoading:!1,downloadSpeed:h})})},[r]);const l=i||s===0||!n?0:n/s,u=l===0,c=u?"":Xt.duration({seconds:l}).humanize(),d=t===0,f=d?"SRC-inactive":"SRC-primary-text-color",m=u?"SRC-inactive":"SRC-primary-text-color";return O("span",{className:"download-details-container",children:[O("span",{children:[p("span",{className:f,children:p(ce,{icon:"file"})}),d?p(Ro,{width:50}):O(j,{children:[" ",t," files "]})]}),n&&p(tt,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Na,placement:"top",children:O("span",{"data-testid":"numBytesUI",children:[p("span",{className:m,children:p(ce,{icon:"database"})}),u?p(Ro,{width:50}):Qp(n)]})}),n&&p(tt,{title:"This is an estimate of how long package download will take.",enterNextDelay:Na,placement:"top",children:O("span",{"data-testid":"downloadTimeEstimateUI",children:[p("span",{className:m,children:p(ce,{icon:"clock"})}),i&&t>0?p(Ro,{width:50}):c]})})]})}try{il.displayName="DownloadDetails",il.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}}}catch{}async function CO(e,t,n,r,a){try{const o={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await ly(o,e),Qt("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:a}}),t(),[0,""]}catch(o){return Qt("danger",void 0,o.reason),t(),[0,""]}}const vr={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:O(j,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",p("br",{}),"If you don’t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:O(j,{children:["Please ",p(sy,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},SO=e=>{switch(e.status){case 0:case 1:return O("div",{children:[p("span",{className:"spinner white"}),p("span",{className:"spinner__text",children:vr[e.status].infoText})]});case 4:return p(j,{children:vr[e.status].infoText});case 2:case 3:return O(j,{children:[p(il,{numFiles:e.fileCount,numBytes:e.fileSize}),p("span",{className:"download-confirmation-infoText",children:vr[e.status].infoText})]});default:return p(j,{})}},sl=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:a})=>{const{accessToken:o,downloadCartPageUrl:i}=ie(),{showDownloadConfirmation:s=!0}=a??{},[l,u]=I.useState(o?0:4),[c,d]=I.useState(0),[f,m]=I.useState(),{data:h,refetch:g}=Jb(),v=e(),[S,_]=I.useState(!1),w=I.useCallback((q,L,T)=>{if(o&&T){const D=T.totalNumberOfFiles>0,R=q??0;u(D?3:2),d(R),m(L)}},[o]),{data:C,isSuccess:b}=g0({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[fs.FILE]});Cu(()=>{b&&C&&h&&w(C.totalChildCount,C.sumFileSizesBytes,h)},[w,t,b,C,h]);const y=Mr|ac,E={...v,partMask:y},{data:x}=Ih(E);Cu(()=>{var q,L;if(x&&h){const T=(q=x.sumFileSizes)==null?void 0:q.greaterThan;w(x.queryCount,T||(L=x.sumFileSizes)==null?void 0:L.sumFileSizesBytes,h)}},[w,v,x,h]);const N=n?()=>n():()=>{r&&r(q=>({...q,showDownloadConfirmation:!1}))},k=async()=>{if(!o)u(4);else{u(1);const T=(await CO(o,N,v,t,()=>_(!0)))[0];u(T),g()}};S&&(window.location.href=i);const A=a==null?void 0:a.showFacetFilter;return p(j,{children:O(gn,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${vr[l].className} ${s?"":"hidden"}
          ${A?Kn:Jn}
        `,children:[p(SO,{status:l,fileCount:c,fileSize:f}),O("div",{className:"download-confirmation-action",children:[l!==1&&p("button",{className:"btn btn-link",onClick:N,children:vr[l].closeText}),(l===2||l===3)&&p("button",{type:"button",className:"btn btn-primary",onClick:()=>{k()},children:"Add"})]})]})})};try{sl.displayName="DownloadConfirmation",sl.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}}}catch{}const ss=3,Qa=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Vt(),{topLevelControlsState:{showSearchBar:a,showFacetFilter:o}}=qt(),[i,s]=I.useState(""),l=I.useRef(null),u=d=>{var f;if(d.preventDefault(),i.trim().length<ss)(f=l.current)==null||f.setCustomValidity(`Search term must have a minimum of ${ss} characters`);else{const m=r(),{additionalFilters:h=[]}=m.query,g={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:i};if(h.find(S=>S.concreteType==g.concreteType&&S.searchExpression==g.searchExpression))return;h.push(g),m.query.additionalFilters=h,n(m),s("")}},c=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return p("div",{className:`QueryWrapperSearchInput ${o?Kn:Jn}`,children:p(rc,{in:a,timeout:{enter:300,exit:300},children:O("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[O("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:u,children:[p("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:p(ce,{icon:"search"})}),p("input",{ref:l,minLength:ss,onChange:c,placeholder:"Enter Search Terms",value:i,type:"text"}),i.length>0&&p("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:p(ce,{icon:"close"})})]}),p("div",{className:"QueryWrapperSearchInput__helppopover",children:p(hn,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{Qa.displayName="FullTextSearch",Qa.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const ll="First line is the columns names.",cl="Include row metadata (Row Id and Row Version).",Za="Comma Separated Values (CSV)",Ip="Tab Separated Values (TSV)",EO={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:Za,title:Za},{const:Ip,title:Ip}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[ll,cl]},uniqueItems:!0}}},_O={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},xO={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},NO={},IO=[EO,xO],TO=[_O,NO];class Yn extends I.Component{constructor(n){super(n);me(this,"handleSubmit",n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()});me(this,"handleDownloadSetup",n=>{this.setState({isLoading:!0});const{formData:r}=n,a=r["File Type"],o=r.Contents,{queryBundleRequest:i,getLastQueryRequest:s}=this.props,l=a===Za?",":"	",u=o.includes(ll),c=o.includes(cl),d=i??s(),f=d.query.sql,m={sql:f,entityId:yn(f),selectedFacets:d.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:u,includeRowIdAndRowVersion:c,csvTableDescriptor:{separator:l},additionalFilters:d.query.additionalFilters};Zp(m,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})});me(this,"onDownload",()=>{const{data:n}=this.state;Kp(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})});me(this,"handleChange",n=>{const{formData:r}=n;this.setState({formData:r})});this.state={isLoading:!1,step:0,formData:{"File Type":Za,Contents:[ll,cl]}}}render(){const n={position:"absolute",top:10,right:10,zIndex:10},r={height:50,width:50,backgroundSize:50};return p(Je,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:O(Je.Body,{children:[p("button",{style:n,onClick:this.props.onClose,children:p(ce,{icon:"close"})}),O(cb,{schema:IO[this.state.step],uiSchema:TO[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&p("div",{className:"SRC-centerAndJustifyContent",children:O("div",{className:"SRC-center-text",children:[p("p",{children:" Creating the File "}),p("div",{style:r,className:"spinner"}),p("p",{children:" Loading... "})]})}),O("div",{style:{textAlign:"right"},children:[p(dt,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),p(dt,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}me(Yn,"contextType",Pr);try{Yn.displayName="ModalDownload",Yn.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}}}catch{}function Ka(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:a,componentIndex:o,shouldDeepLink:i}=e,[s,l]=I.useState(void 0),{entityId:u,versionNumber:c,getInitQueryRequest:d,getLastQueryRequest:f,setQuery:m,resetQuery:h,removeQueryFilter:g,removeValueFromQueryFilter:v,removeSelectedFacet:S,removeValueFromSelectedFacet:_}=zb({initQueryRequest:t,componentIndex:o,shouldDeepLink:i,onQueryChange:n}),w=I.useMemo(()=>f(),[f]),{data:C,hasNextPage:b,fetchPreviousPage:y,fetchNextPage:E,isFetchingNextPage:x,isLoading:N,error:k,isPreviousData:A}=tw(w,{keepPreviousData:!0},l),q=N||A,{data:L}=ho(u,c),[T,D]=I.useState(0);async function R(){if(!b)throw new Error("Called appendNextPageToResults when there is no next page");await E(),D("ALL")}async function M(){if(!b)throw new Error("Called goToNextPage when there is no next page");if(T==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await E(),D(T+1)}const z=T!=="ALL"&&T>0;async function B(){if(T==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!z)throw new Error("Called goToNextPage when there is no next page");await y(),D(T-1)}const F=I.useMemo(()=>{var X,K,Y;if(!(C==null||C.pages.length===0||C.pages[0].responseBody==null))return T==="ALL"?{...C==null?void 0:C.pages[0].responseBody,queryResult:{...(X=C==null?void 0:C.pages[0].responseBody)==null?void 0:X.queryResult,queryResults:{...(Y=(K=C==null?void 0:C.pages[0].responseBody)==null?void 0:K.queryResult)==null?void 0:Y.queryResults,rows:C.pages.flatMap(de=>{var pe;return(pe=de.responseBody.queryResult)==null?void 0:pe.queryResults.rows})??[]}}}:C==null?void 0:C.pages[T].responseBody},[T,C]);I.useEffect(()=>{F&&r&&r(JSON.stringify(F))},[F,r]);const W=F?ow(F.facets,F.selectColumns):!0,Z=I.useMemo(()=>iw(F,a),[F,a]),P=I.useMemo(()=>{const X=f();return sw(X.query,a)},[f,a]),V=I.useCallback(X=>{var K;return((K=F==null?void 0:F.columnModels)==null?void 0:K.find(Y=>Y.name===X))??null},[F==null?void 0:F.columnModels]),U={data:Z,isLoadingNewPage:x,hasNextPage:!!b,hasPreviousPage:z,isLoadingNewBundle:q,getLastQueryRequest:f,getInitQueryRequest:d,error:k,entity:L,executeQueryRequest:m,isFacetsAvailable:W,asyncJobStatus:s,appendNextPageToResults:R,goToNextPage:M,goToPreviousPage:B,hasResettableFilters:P,resetQuery:h,removeQueryFilter:g,removeValueFromQueryFilter:v,removeSelectedFacet:S,removeValueFromSelectedFacet:_,lockedColumn:a,getColumnModel:V},{children:G}=e;return p(Hb,{queryContext:U,children:p("div",{className:`SRC-wrapper ${q||x?"SRC-logo-cursor":""} ${W?"has-facets":""}`,children:G})})}try{Ka.displayName="InfiniteQueryWrapper",Ka.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}}}catch{}class Ja extends $.Component{constructor(n){super(n);me(this,"searchFormRef");me(this,"radioFormRef");me(this,"handleClickOutsideForm",n=>{var r,a;!((r=this.searchFormRef.current)!=null&&r.contains(n==null?void 0:n.target))&&!((a=this.radioFormRef.current)!=null&&a.contains(n==null?void 0:n.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))});me(this,"search",n=>{var f,m,h,g,v,S;n.preventDefault();const{searchText:r}=this.state;let{columnName:a}=this.state;const{searchable:o,lockedColumn:i}=this.props;if(a==="")if(o)a=o.filter(_=>_!==(i==null?void 0:i.columnName))[0];else{const _=(h=(m=(f=this.props.queryContext)==null?void 0:f.data)==null?void 0:m.columnModels)==null?void 0:h.filter(w=>w.name!==(i==null?void 0:i.columnName)).filter(w=>this.isSupportedColumn(w));a=(_==null?void 0:_[0].name)??""}this.setState({show:!1});const{executeQueryRequest:s,getLastQueryRequest:l}=this.props.queryContext,u=l(),{additionalFilters:c=[]}=u.query,d=c.findIndex(_=>!!(lw(_)||cw(_)&&_.columnName===a));if(d===-1){const _=(S=(v=(g=this.props.queryContext)==null?void 0:g.data)==null?void 0:v.columnModels)==null?void 0:S.filter(w=>w.name===a)[0];if(_!=null&&_.columnType.endsWith("_LIST")){const w={columnName:a,function:uw.HAS_LIKE,values:[`%${r}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};c.push(w)}else{const w={columnName:a,operator:dw.LIKE,values:[`%${r}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};c.push(w)}}else c[d].values.push(`%${r}%`);u.query.additionalFilters=c,s(u)});me(this,"handleChange",n=>{this.setState({searchText:n.currentTarget.value})});me(this,"isSupportedColumn",n=>{switch(n==null?void 0:n.columnType){case re.FILEHANDLEID:case re.ENTITYID:case re.DATE:case re.DATE_LIST:case re.USERID:return!1;default:return!0}});me(this,"isSupportedColumnAndInProps",n=>{if(this.isSupportedColumn(n)){const{searchable:r}=this.props;return r==null?void 0:r.some(a=>a===(n==null?void 0:n.name))}return!1});this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:this.props.defaultColumn??""},this.searchFormRef=$.createRef(),this.radioFormRef=$.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(n){var r,a,o,i,s;!((r=n.queryVisualizationContext)!=null&&r.topLevelControlsState.showSearchBar)&&((a=this.props.queryVisualizationContext)!=null&&a.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(s=(i=(o=this.searchFormRef)==null?void 0:o.current)==null?void 0:i.querySelector("input"))==null||s.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var f;const{searchable:n,lockedColumn:r,queryContext:{data:a},queryVisualizationContext:{topLevelControlsState:o,getColumnDisplayName:i}}=this.props,{searchText:s,show:l,columnName:u}=this.state;let c=[];n?c=n.map(m=>{var h;return(h=a==null?void 0:a.columnModels)==null?void 0:h.find(g=>g.name===m)}).filter(this.isSupportedColumnAndInProps).map(m=>m.name):a!=null&&a.columnModels&&(c=(f=a.columnModels)==null?void 0:f.filter(this.isSupportedColumn).map(m=>m.name)),c.length&&(r!=null&&r.columnName)&&(c=c.filter(m=>m!==(r==null?void 0:r.columnName)));const d=o==null?void 0:o.showFacetFilter;return O("div",{className:`QueryWrapperSearchInput ${d?Kn:Jn}`,children:[p(rc,{in:o==null?void 0:o.showSearchBar,children:O("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[p("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:p(ce,{icon:"search"})}),p("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:s,type:"text"}),this.state.searchText.length>0&&p("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:p(ce,{icon:"close"})})]})}),p("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:p(Ch,{in:l,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:O("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[p("p",{className:"deemphasized",children:p("i",{children:" Search In Field: "})}),c.map((m,h)=>{const g=i(m);return p("div",{className:"radio",children:p("label",{children:O("span",{children:[p("input",{id:m,type:"radio",value:m,checked:u===""&&h===0||u===m,onClick:()=>{var S,_,w;(w=(_=(S=this.searchFormRef)==null?void 0:S.current)==null?void 0:_.querySelector("input"))==null||w.focus(),this.setState({columnName:m})}}),p("span",{children:g})]})})},`search-field-${m}-${h}`)})]})})})]})}}try{Ja.displayName="Search",Ja.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}}}catch{}const kO="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",RO="https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries",eo=({helpMessage:e=kO,helpUrl:t=RO})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Vt(),{topLevelControlsState:{showSqlEditor:a,showFacetFilter:o}}=qt(),[i,s]=I.useState(""),l=I.useRef(null);I.useEffect(()=>{var d;if(a){const f=r().query.sql;s(f),(d=l.current)==null||d.focus()}},[a,r]);const u=d=>{d.preventDefault();const f=r();f.query.sql=i,f.query.offset=0,f.query.additionalFilters=[],f.query.selectedFacets=[],n(f)},c=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return p("div",{className:`QueryWrapperSqlEditorInput ${o?Kn:Jn}`,children:p(rc,{in:a,timeout:{enter:300,exit:300},children:O("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[O("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:u,children:[p(Oy,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),p("input",{ref:l,onChange:c,placeholder:"Enter Query",value:i,type:"text"})]}),p("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:p(hn,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{eo.displayName="SqlEditor",eo.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const ul=e=>O(Je,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[p(Je.Header,{closeButton:!0,children:p("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),O(rw,{children:[p("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),O("p",{children:["To find out more see ",p("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),p("span",{children:" and "}),p("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),O(aw,{children:[p(dt,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),p(dt,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{ul.displayName="DownloadLoginModal",ul.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const dl=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:a,rNotes:o,rCode:i,cliNotes:s,cliCode:l,helpMarkdown:u,helpUrl:c})=>{let d;l?d="Command Line":a?d="Python":d="R";const[f,m]=I.useState(d),h=O("p",{children:["Installation instructions are available at our"," ",p("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return O(Je,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[p(Je.Header,{closeButton:!0,children:O(Je.Title,{children:[t," ",u&&p(hn,{markdownText:u,helpUrl:c})]})}),O(Je.Body,{children:[O("div",{className:"Tabs",children:[l&&p("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("Command Line")},"aria-selected":f==="Command Line",children:"Command Line"}),i&&p("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("R")},"aria-selected":f==="R",children:"R"}),a&&p("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("Python")},"aria-selected":f==="Python",children:"Python"})]}),O("div",{className:"TabContent",children:[f==="Command Line"&&O(j,{children:[p("p",{children:s}),h,O("pre",{children:[" ",l," "]})]}),f==="R"&&O(j,{children:[p("p",{children:o}),h,p("pre",{children:i})]}),f==="Python"&&O(j,{children:[p("p",{children:r}),h,p("pre",{children:a})]})]})]}),p(Je.Footer,{children:p(dt,{variant:"primary",onClick:n,children:"OK"})})]})};try{dl.displayName="ProgrammaticInstructionsModal",dl.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}function fl({queryBundleRequest:e,onHide:t}){var d;const[n,r]=I.useState("..."),{data:a,isLoading:o,isPreviousData:i}=nw({...e,partMask:My},{keepPreviousData:!0,useErrorBoundary:!0}),s=(d=a==null?void 0:a.responseBody)==null?void 0:d.combinedSql,l=o||i;I.useEffect(()=>{if(s&&!l){const f=s.toUpperCase().indexOf("FROM SYN"),m=`SELECT * ${s.substring(f)}`;r(m)}},[s,l]);const u=I.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),c=I.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return p(dl,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:p(j,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${u}"`,rNotes:O(j,{children:["This R code will download file annotations only. Use"," ",O("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${c}")
read.table(query$filepath, sep = ",")`,pythonNotes:O(j,{children:["This Python code will download file annotations only. Use"," ",p("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${c}")
query.asDataFrame()`})}try{fl.displayName="ProgrammaticOptions",fl.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const OO="Add To Download Cart",pl=e=>{const{accessToken:t}=ie(),{entity:n,data:r,getLastQueryRequest:a}=Vt(),o=a(),[i,s]=I.useState(!1),[l,u]=I.useState(!1),[c,d]=I.useState(!1),{onDownloadFiles:f,darkTheme:m=!0}=e,h=n&&(In(n)&&cy(n)||Dn(n)),g=n&&Dn(n)&&n.isLatestVersion;return O(I.Fragment,{children:[O(Wt,{as:"span",children:[p(Cc,{tooltipText:"Download Options",size:"lg",darkTheme:m,icon:"download"}),O(Wt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[p(Wt.Item,{onClick:()=>{u(!0)},children:"Export Table"}),h&&p(tt,{title:g?"A draft version of a dataset cannot be added to the Download Cart":null,placement:"left",enterNextDelay:300,describeChild:!0,children:p(Wt.Item,{role:"button",className:g?"ignoreLink":void 0,disabled:g,style:g?{pointerEvents:"auto"}:{},onClick:()=>t?f():s(!0),children:OO})}),p(tt,{title:g?"A draft version of a dataset cannot be downloaded programmatically":null,placement:"left",enterNextDelay:300,describeChild:!0,children:p(Wt.Item,{className:g?"ignoreLink":void 0,disabled:g,style:g?{pointerEvents:"auto"}:{},onClick:()=>d(!0),children:"Programmatic Options"})})]})]}),i&&p(ul,{showModal:i,onHide:()=>s(!1)}),l&&p(Yn,{onClose:()=>u(!1),queryBundleRequest:o}),c&&r&&p(fl,{onHide:()=>d(!1),queryBundleRequest:o})]})};try{pl.displayName="DownloadOptions",pl.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const AO="addAndRemoveColumns",hl=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:a}=e,{getColumnDisplayName:o}=qt(),[i,s]=I.useState(!1),l=(u,c,d)=>{d.source==="rootClose"?s(!1):s(!0)};return O(Wt,{as:"span",onToggle:(u,c,d)=>l(u,c,d),show:i,drop:"down",children:[p(Cc,{tooltipText:"Show/Hide Columns",icon:a?"columnsdark":"columns",darkTheme:a}),p(Wt.Menu,{id:`${AO}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(u=>{const{name:c}=u,d=n.includes(c),f={width:"11px",marginRight:"10px",visibility:d?void 0:"hidden"},m=d?"SRC-primary-text-color":"";return O(Wt.Item,{onClick:()=>r(c),children:[p("span",{className:m,style:f,children:p(ce,{icon:"check",sx:{width:"14px"}})}),o(c)]},c)})})]})};try{hl.displayName="ColumnSelection",hl.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const qO="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",LO="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",ml=({entity:e})=>{var a;const t=e&&Dn(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:Mr},{data:r}=Ih(n,{enabled:t});if(t&&r&&e){const o=r.queryCount,i=((a=e.items)==null?void 0:a.length)??0;if(o===i)return p(j,{});const s=i-o;let l="";return e.isLatestVersion?l=qO:l=LO,O(At,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[p(h0,{className:"SRC-color-warning",style:{fontSize:"16px"}}),s.toLocaleString()+" Unavailable",p(hn,{className:"SRC-margin-left-5",markdownText:l,placement:"right"})]})}else return p(j,{})};try{ml.displayName="MissingQueryResultsWarning",ml.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function PO(e,t){const{accessToken:n}=ie(),r=",",a=!0,o=!1,i=e.query.sql;return async()=>{try{const l=`SELECT CONCAT('drs://repo-prod.prod.sagebase.org/syn', id, '.', currentVersion) AS drs_uri, name as file_name, ${t==null?void 0:t.map(m=>m.name).join(",")} FROM ${i.slice(i.toLowerCase().indexOf("from")+4+1)}`,u={sql:l,entityId:yn(l),selectedFacets:e.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:a,includeRowIdAndRowVersion:o,csvTableDescriptor:{separator:r},additionalFilters:e.query.additionalFilters},c=await Zp(u,n),d=await Kp(c.resultsFileHandleId,n),f=`https://cavatica.sbgenomics.com/import-redirect/drs/csv/?URL=${encodeURIComponent(d)}`;window.open(f,"_blank")}catch(s){Qt(s.reason,"danger")}}}const gl=e=>O(mw,{...e,height:20,viewBox:"0 0 828 828",children:[p("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.861 124.107C429.221 125.451 426.3 126.325 423.211 126.618L415.557 269.363C425.193 272.363 432.244 281.226 432.538 291.777L546.545 306.978C547.637 304.478 549.14 302.198 550.968 300.223L431.861 124.107ZM440.166 117.167L559.852 294.141C562.599 293.058 565.591 292.463 568.722 292.463C570.453 292.463 572.141 292.645 573.769 292.99L610.725 206.16C604.806 201.75 600.973 194.698 600.973 186.75C600.973 185.26 601.107 183.801 601.365 182.386L441.299 115.545C440.943 116.102 440.565 116.643 440.166 117.167ZM592.91 316.651C592.91 308.875 589.241 301.955 583.538 297.53L620.577 210.504C622.062 210.789 623.594 210.938 625.161 210.938C626.63 210.938 628.069 210.807 629.466 210.556L731.473 433.838C730.391 434.8 729.396 435.857 728.5 436.997L590.583 327.017C592.076 323.875 592.91 320.361 592.91 316.651ZM583.917 335.473C581.689 337.273 579.135 338.687 576.358 339.61L583.089 517.099C590.244 517.108 596.671 520.225 601.094 525.171L724.074 457.849C723.597 455.954 723.344 453.97 723.344 451.927C723.344 450.256 723.513 448.625 723.836 447.049L583.917 335.473ZM728.974 467.442L606.306 534.593C606.917 536.719 607.244 538.965 607.244 541.287C607.244 548.415 604.161 554.822 599.256 559.249L641.245 621.527C643.538 620.712 645.991 620.232 648.544 620.149L730.593 469.194C730.025 468.637 729.485 468.052 728.974 467.442ZM583.056 565.476C585.404 565.476 587.675 565.141 589.822 564.517L632.158 627.31C631.966 627.503 631.778 627.699 631.594 627.899L410.195 538.521L559.218 545.414C561.176 556.807 571.104 565.476 583.056 565.476ZM398.804 545.534C396.287 548.348 393.122 550.569 389.543 551.963L409.137 701.286C417.873 701.562 425.441 706.471 429.464 713.637L625.468 648.181C625.267 646.925 625.162 645.637 625.162 644.324C625.162 641.892 625.521 639.543 626.189 637.329L398.804 545.534ZM562.043 339.906C563.203 340.239 564.398 340.487 565.622 340.643L572.407 519.563C566.319 522.552 561.672 528.026 559.786 534.662L404.882 527.497C404.474 522.293 402.419 517.552 399.238 513.794L562.043 339.906ZM410.775 316.532C419.563 315.66 426.967 310.086 430.436 302.36L544.551 317.575C544.802 324.26 547.766 330.252 552.374 334.479L390.572 507.295C390.475 507.252 390.377 507.209 390.279 507.167C390.238 507.15 390.198 507.133 390.158 507.116L390.076 507.082C390.033 507.064 389.99 507.046 389.947 507.028L389.865 506.995L389.777 506.959L410.775 316.532ZM379.129 505.281L400.089 315.201C392.761 312.535 387.086 306.428 385.018 298.835L257.588 294.164C256.151 297.414 254.02 300.287 251.382 302.596L371.2 507.193C373.659 506.132 376.329 505.468 379.129 505.281ZM259.627 283.465L384.573 288.044C386.438 277.936 394.588 270.031 404.819 268.531L412.502 125.228C410.883 124.629 409.345 123.86 407.91 122.945L256.526 272.5C258.369 275.76 259.478 279.489 259.627 283.465ZM362.471 513.594L241.899 307.711C240.201 308.179 238.428 308.466 236.602 308.551L212.287 436.373C220.668 440.173 226.498 448.613 226.498 458.415C226.498 459.246 226.456 460.068 226.374 460.879L359.809 517.332C360.578 516.001 361.471 514.75 362.471 513.594ZM398.548 703.346L378.889 553.531C372.829 553.065 367.395 550.367 363.407 546.257L210.476 626.279C210.993 628.246 211.268 630.31 211.268 632.439C211.268 633.973 211.125 635.474 210.852 636.929L387.408 713.365C389.959 708.957 393.861 705.428 398.548 703.346ZM205.482 616.74L357.805 537.036C357.01 534.64 356.58 532.077 356.58 529.415C356.58 528.832 356.601 528.255 356.641 527.683L222.907 471.103C219.186 477.13 212.894 481.402 205.56 482.387L197.048 610.394C200.309 611.871 203.185 614.051 205.482 616.74ZM178.121 458.415C178.121 469.164 185.133 478.276 194.832 481.425L186.398 608.26C184.797 608.304 183.234 608.504 181.725 608.845L94.2764 412.358C95.9686 411.18 97.5031 409.79 98.8419 408.229L179.06 451.717C178.449 453.844 178.121 456.091 178.121 458.415ZM184.274 442.296C188.584 437.476 194.798 434.395 201.734 434.233L226.002 306.661C217.341 302.979 211.268 294.394 211.268 284.389C211.268 275.81 215.734 268.274 222.469 263.98L194.346 201.663C193.431 201.768 192.501 201.822 191.558 201.822C189.935 201.822 188.349 201.662 186.816 201.357L94.3034 372.649C100.563 377.021 104.658 384.279 104.658 392.494C104.658 394.639 104.379 396.719 103.855 398.699L184.274 442.296ZM235.456 260.201C234.505 260.201 233.567 260.256 232.644 260.363L204.526 198.055C211.271 193.763 215.746 186.221 215.746 177.633C215.746 177.057 215.726 176.486 215.687 175.92L399.494 113.808C399.759 114.312 400.042 114.805 400.341 115.286L249.271 264.532C245.355 261.802 240.592 260.201 235.456 260.201ZM172.016 613.512C166.455 617.944 162.891 624.775 162.891 632.439C162.891 645.798 173.72 656.628 187.079 656.628C195.062 656.628 202.141 652.761 206.547 646.798L384.232 723.723C384.191 724.297 384.17 724.877 384.17 725.462C384.17 738.821 395 749.651 408.359 749.651C421.718 749.651 432.547 738.821 432.547 725.462C432.547 724.963 432.532 724.466 432.502 723.974L629.521 658.179C633.894 664.427 641.145 668.513 649.351 668.513C662.71 668.513 673.539 657.683 673.539 644.324C673.539 634.62 667.825 626.25 659.577 622.397L739.776 474.845C742.211 475.669 744.82 476.115 747.533 476.115C760.891 476.115 771.721 465.286 771.721 451.927C771.721 438.568 760.891 427.738 747.533 427.738C745.247 427.738 743.036 428.055 740.94 428.648L639.371 206.326C645.418 201.929 649.35 194.799 649.35 186.75C649.35 173.391 638.52 162.561 625.161 162.561C617.133 162.561 610.018 166.472 605.618 172.493L444.924 105.391C445.034 104.455 445.09 103.503 445.09 102.538C445.09 89.179 434.26 78.3494 420.901 78.3494C407.543 78.3494 396.713 89.179 396.713 102.538C396.713 102.819 396.718 103.099 396.727 103.378L212.553 165.614C208.382 158.343 200.542 153.445 191.558 153.445C178.199 153.445 167.369 164.274 167.369 177.633C167.369 185.513 171.137 192.513 176.97 196.93L84.2531 368.6C83.0204 368.406 81.7569 368.306 80.4698 368.306C67.1108 368.306 56.2812 379.135 56.2812 392.494C56.2812 405.853 67.1108 416.683 80.4698 416.683C81.7672 416.683 83.0407 416.581 84.2827 416.384L172.016 613.512Z",fill:"url(#paint0_linear_271_30503)"}),p("defs",{children:O("linearGradient",{id:"paint0_linear_271_30503",x1:"163.941",y1:"159.14",x2:"682.43",y2:"676.053",gradientUnits:"userSpaceOnUse",children:[p("stop",{stopColor:"#9E5AA4"}),p("stop",{offset:"0.526649",stopColor:"#7387C2"}),p("stop",{offset:"1",stopColor:"#11AADE"})]})})]});try{gl.displayName="Cavatica",gl.__docgenInfo={description:"",displayName:"Cavatica",props:{children:{defaultValue:null,description:"Node passed into the SVG element.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SvgIconClasses> & Partial<ClassNameMap<never>>)"}},color:{defaultValue:{value:"'inherit'"},description:`The color of the component.
It supports both default and custom theme colors, which can be added as shown in the
[palette customization guide](https://mui.com/material-ui/customization/palette/#adding-new-colors).
You can use the \`htmlColor\` prop to apply a color attribute to the SVG element.`,name:"color",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"action"'},{value:'"disabled"'},{value:'"inherit"'},{value:'"info"'},{value:'"warning"'},{value:'"success"'},{value:'"primary"'},{value:'"secondary"'}]}},fontSize:{defaultValue:{value:"'medium'"},description:"The fontSize applied to the icon. Defaults to 24px, but can be configure to inherit font size.",name:"fontSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"inherit"'},{value:'"medium"'},{value:'"large"'}]}},htmlColor:{defaultValue:null,description:"Applies a color attribute to the SVG element.",name:"htmlColor",required:!1,type:{name:"string"}},inheritViewBox:{defaultValue:{value:"false"},description:"If `true`, the root node will inherit the custom `component`'s viewBox and the `viewBox`\nprop will be ignored.\nUseful when you want to reference a custom `component` and have `SvgIcon` pass that\n`component`'s viewBox to the root node.",name:"inheritViewBox",required:!1,type:{name:"boolean"}},shapeRendering:{defaultValue:null,description:`The shape-rendering attribute. The behavior of the different options is described on the
[MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering).
If you are having issues with blurry icons you should investigate this prop.`,name:"shapeRendering",required:!1,type:{name:"string"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},titleAccess:{defaultValue:null,description:`Provides a human-readable title for the element that contains it.
https://www.w3.org/TR/SVG-access/#Equivalent`,name:"titleAccess",required:!1,type:{name:"string"}},viewBox:{defaultValue:{value:"'0 0 24 24'"},description:`Allows you to redefine what the coordinates without units mean inside an SVG element.
For example, if the SVG element is 500 (width) by 200 (height),
and you pass viewBox="0 0 50 20",
this means that the coordinates inside the SVG will go from the top left corner (0,0)
to bottom right (50,20) and each unit will be worth 10px.`,name:"viewBox",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: SVGSVGElement | null) => void) | RefObject<SVGSVGElement> | null"}}}}}catch{}const DO=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:Vy,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],to=e=>{var A;const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:a=!1,hideFacetFilterControl:o=!1,hideQueryCount:i=!1,hideSqlEditorControl:s=!0,customControls:l,showExportToCavatica:u=!1}=e,{data:c,entity:d,executeQueryRequest:f,getLastQueryRequest:m,getInitQueryRequest:h,lockedColumn:g}=Vt(),v=PO(m(),(A=c==null?void 0:c.queryResult)==null?void 0:A.queryResults.headers),{topLevelControlsState:S,setTopLevelControlsState:_,columnsToShowInTable:w,selectedRowIndices:C,setColumnsToShowInTable:b}=qt(),y=q=>{const L={[q]:!S[q]};q==="showSearchBar"&&(L.showDownloadConfirmation=!1),q==="showDownloadConfirmation"&&(L.showSearchBar=!1),_(T=>({...T,...L}))},E=()=>{f(m())},x=I.useMemo(()=>{const q=h();return{sql:q.query.sql,selectedFacets:(q.query.selectedFacets??[]).filter(L=>L.columnName===(g==null?void 0:g.columnName)),additionalFilters:(q.query.additionalFilters??[]).filter(L=>"columnName"in L?L.columnName===(g==null?void 0:g.columnName):!0)}},[h,g==null?void 0:g.columnName]),N=q=>{let L=sr(w);L.includes(q)?L=L.filter(T=>T!==q):L.push(q),b(L)},k=S==null?void 0:S.showFacetFilter;return p("div",{className:`TopLevelControls ${k?Kn:Jn}`,"data-testid":"TopLevelControls",children:O("div",{children:[O("div",{className:"TopLevelControls__querycount",children:[t&&O(j,{children:[O(At,{variant:"sectionTitle",role:"heading",children:[t," ",!i&&p(hw,{query:x,parens:!0})]}),!i&&d&&p(ml,{entity:d})]}),!o&&O("a",{onClick:()=>y("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[p(mo,{type:S.showFacetFilter?"close":"filter"}),O("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[S.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),O("div",{className:"TopLevelControls__actions",children:[l&&l.map(q=>O("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${q.classNames??""}`,style:{marginRight:"5px"},type:"button",onClick:()=>q.onClick({data:c,selectedRowIndices:C,refresh:E}),children:[q.icon," ",q.buttonText]},q.buttonText)),u&&O(je,{variant:"text",onClick:()=>{v()},children:[p(gl,{sx:{mr:1}})," Send to Cavatica"]}),DO.map(q=>{const{key:L,icon:T,tooltipText:D}=q;return L==="showDownloadConfirmation"&&r||L==="showFacetVisualization"&&a||L==="showSqlEditor"&&s?p($.Fragment,{},L):L==="showDownloadConfirmation"?p(pl,{darkTheme:!0,onDownloadFiles:()=>y(L)},L):p(Cc,{tooltipText:D,callbackFn:()=>y(L),darkTheme:!0,icon:T},L)}),n&&p(hl,{headers:c==null?void 0:c.selectColumns,isColumnSelected:w,toggleColumnSelection:N,darkTheme:!0})]})]})})};try{to.displayName="TopLevelControls",to.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}}}}}catch{}const vl=({sortConfig:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:r}=e,a=Vt(),{getLastQueryRequest:o,executeQueryRequest:i}=a,{getColumnDisplayName:s}=qt(),[l,u]=I.useState(t),[c,d]=I.useState(n),f=r.map(h=>({value:h,label:s(h)})),m=h=>{const g=o();let v="ASC";h===l&&(v=c==="ASC"?"DESC":"ASC");const S=h?[{column:h,direction:v}]:void 0;g.query.sort=S,i(g),u(h),d(v)};return O("div",{className:"QuerySortSelector bootstrap-4-backport",children:[p(At,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),p(gw,{className:"react-select-container SRC-inlineBlock",value:Nb(l,f),options:f,onChange:h=>m(h==null?void 0:h.value),components:{Control:Ib},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{vl.displayName="QuerySortSelector",vl.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}}}catch{}var Rt=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(Rt||{});const Tp=e=>{const t=yn(e.sql),n=yc(e.searchParams,e.sqlOperator),{sortConfig:r,columnAliases:a}=e,o=r?[{column:r.defaultColumn,direction:r.defaultDirection}]:void 0,i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:e.sql,limit:e.limit??oc,sort:o,additionalFilters:n},partMask:Dr|Mr|ic|ch|sc|lc|ac|cc};return p(Ka,{...e,initQueryRequest:i,children:O(bc,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:a,noContentPlaceholderType:e.noContentPlaceholderType??Ia.STATIC,children:[r&&p(vl,{sortConfig:r}),p(ao,{...e}),p(wc,{children:s=>p(Jp,{error:s==null?void 0:s.error})})]})})};try{Tp.displayName="CardContainerLogic",Tp.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}}}catch{}const yl=({type:e,title:t,subTitle:n="",description:r,values:a,secondaryLabelLimit:o,isAlignToLeftNav:i,descriptionConfig:s,href:l,target:u,rgbIndex:c,icon:d})=>{const f=document.querySelector('meta[name="description"]'),[m]=I.useState(document.title),[h]=I.useState(f?f.getAttribute("content"):"");return I.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(f==null||f.setAttribute("content",r||n)),function(){document.title=m,f==null||f.setAttribute("content",h)})),p("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:p("div",{className:"container-fluid container-full-width",children:p("div",{className:"row",children:p("div",{className:"col-md-offset-1 col-md-10",children:O("div",{className:"SRC-portalCardMain",children:[d,O("div",{style:{width:"100%"},children:[O("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[p("div",{className:"SRC-type",children:e}),p("div",{children:p("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?p("a",{target:u,href:l,className:"highlight-link",children:t}):O("span",{children:[" ",t," "]})})}),n&&O("div",{className:"SRC-author",children:[" ",n," "]}),r&&p("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?p(Xe,{markdown:r}):r})]}),p("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),p("div",{className:"SRC-cardContent",children:a&&p(Sc,{isHeader:!0,secondaryLabelLimit:o,values:a})})]})]})})})})})};try{yl.displayName="HeaderCard",yl.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}}}catch{}const bl=e=>{var u;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:a}=e,{accessToken:o}=ie(),[i,s]=I.useState();I.useEffect(()=>{a===void 0&&(async()=>s(await Qn({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},o)))()},[o,a,t]);let l;return i&&(l=(u=i.requestedFiles[0].fileHandle)==null?void 0:u.fileName),O("button",{onClick:()=>{o&&t&&eh(t.fileHandleId,o,t.associateObjectType,t.associateObjectId,r).then(c=>{window.open(c,"_blank")}).catch(c=>{console.error("Error on retrieving file handle url ",c)})},className:`SRC-primary-text-color ${uc}`,type:"button",style:{padding:0},children:[a??l??t.fileHandleId,n&&p(ce,{icon:"download"})]})};try{bl.displayName="FileHandleLink",bl.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}}}catch{}const wl=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:a}=ie(),[o,i]=I.useState(),{ref:s,inView:l}=Zn({triggerOnce:!0,rootMargin:"500px 0px"});return I.useEffect(()=>{(()=>{t&&n&&r&&l&&eh(t,a,r,n,!1).then(c=>{i(c)}).catch(c=>{console.error("Error on retrieving file handle url ",c)})})()},[l,t,n,a,r]),p("span",{ref:s,children:o&&p("img",{src:o,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{wl.displayName="ImageFileHandle",wl.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}}}catch{}const Kc=400,MO="SRC-short-description",VO="SRC-long-description",Cl=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<Kc&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},$O=(e,t,n)=>{let r;return e&&t&&(th(e)?r={fileHandleId:t,associateObjectId:(e==null?void 0:e.id)??"",associateObjectType:Le.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:Le.FileEntity})),r},ln=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const a=(n==null?void 0:n.find(i=>i.name===e))||(r==null?void 0:r.find(i=>i.name===e));if(a==null?void 0:a.columnType.endsWith("_LIST")){let i=t,s;try{return s=JSON.parse(i),i=s.join(", "),{strList:s,str:i,columnModelType:a==null?void 0:a.columnType}}catch(l){console.error("Could not parse multivalue string ",i," caught err ",l)}}return{str:t,columnModelType:a==null?void 0:a.columnType}},FO=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),Sl=e=>{const{synapseId:t,version:n}=e;return O("span",{children:[n,"  ",p("a",{target:Rt.NEW_WINDOW,rel:"noopener noreferrer",href:`${We.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},no=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:a,columnModels:o,isHeader:i,className:s,rowData:l,rowId:u}=e;if(!t)return p(j,{children:t});const{strList:c,str:d,columnModelType:f}=ln({columnName:n,value:t,selectColumns:a,columnModels:o});if(!d)return p(j,{children:d});let m=s;const h={};if(i&&(m=s==null?void 0:s.concat(" ","SRC-lightLink")),f===re.USERID_LIST&&c)return p(j,{children:c.map((v,S)=>O("span",{children:[p(Mn,{ownerId:v,size:_a,className:m}),S<c.length-1&&",  "]},v))});if(f===re.USERID&&d)return p(Mn,{ownerId:d,size:_a,className:m});if(!r)return d.match(fh)?p("a",{target:Rt.NEW_WINDOW,rel:"noopener noreferrer",href:`${We.PORTAL}#!Synapse:${d}`,className:m,children:d}):p(j,{children:d});let g;if(r.isMarkdown)c?g=p(j,{children:c.map((v,S)=>O("span",{children:[p(Xe,{renderInline:!0,markdown:v},v),S<c.length-1&&",  "]},v))}):g=p(Xe,{renderInline:!0,markdown:t});else{const v=c||d.split(",");let S;if("target"in r&&(S=r.target),"linkColumnName"in r){const _=FO(r.linkColumnName,a,o);if(_==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),g=p(j,{children:t});else{const w=l[_];uy(w)?g=p(j,{children:t}):g=p(j,{children:v.map((C,b)=>O($.Fragment,{children:[p("a",{href:w??void 0,target:S??Rt.NEW_WINDOW,rel:"noopener noreferrer",className:m,style:h,children:C},C),b<v.length-1&&p("span",{style:{marginRight:4},children:", "})]},C))})}}else g=p(j,{children:v.map((_,w)=>{const{baseURL:C,URLColumnName:b,wrapValueWithParens:y}=r,E=r.overrideValueWithRowID?`syn${u}`:_,x=y?`(${E})`:E,N=`/${C}?${b}=${x}`;return O($.Fragment,{children:[p("a",{href:N,className:m,style:h,target:S??Rt.CURRENT_WINDOW,children:_},_),w<v.length-1&&p("span",{style:{marginRight:4},children:", "})]},_)})})}return r.tooltipText?p(tt,{title:r.tooltipText,enterNextDelay:300,children:p("span",{children:g})}):g};function BO(e,t,n,r){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:a,URLColumnName:o,overrideLinkURLColumnName:i,overrideValueWithRowID:s}=e;if(i&&n[i]){const u=n[i],c=t[u];if(c)return c}const l=n[a];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${a}`);else{const u=s?`syn${r}`:t[l];if(u)return`/${e.baseURL}?${o}=${u}`}}}function kp(e,t,n,r,a){e=e.trim();let o=e,i=Rt.CURRENT_WINDOW;e.match(fh)?o=`${We.PORTAL}#!Synapse:${e}`:e.match(Gy)?(i=Rt.NEW_WINDOW,o=`https://dx.doi.org/${e}`):t?t&&(o=BO(t,n,r,a)??"",o.includes("/DetailsPage")&&(i=Rt.NEW_WINDOW)):i=Rt.NEW_WINDOW;const s=(t==null?void 0:t.target)??i;return{href:o,target:s}}function El(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:a}=e;let o=t;a!=null&&a.isMarkdown&&(o=p(Xe,{markdown:o}));const i=n||(a==null?void 0:a.showFullDescriptionByDefault);return p("div",{className:i?"":"SRC-hidden",children:p("span",{"data-search-handle":r,className:`SRC-font-size-base ${VO}`,children:o})})}function _l(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:a,toggleShowMore:o}=e;return a!=null&&a.showFullDescriptionByDefault?p(j,{}):O("div",{className:n?"SRC-hidden":"",children:[p("span",{"data-search-handle":r,className:`SRC-font-size-base ${MO} SRC-short-description`,children:Cl(t).previewText}),t.length>=Kc&&p("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:o,children:"...Show More"})]})}class ro extends $.Component{constructor(n){super(n);me(this,"getCutoff",n=>{let r="";const a=n.split(" ");let o=0;for(;r.length<Kc&&o<a.length;)r+=`${a[o]} `,o+=1;return r=r.trim(),{previewText:r}});me(this,"toggleShowMore",()=>{this.setState({hasClickedShowMore:!0})});me(this,"renderTitle",({href:n,target:r,titleSearchHandle:a,title:o})=>n?p("a",{"data-search-handle":a,target:r,href:n,className:"highlight-link",children:o}):O("span",{"data-search-handle":a,children:[" ",o," "]}));this.state={hasClickedShowMore:!1}}render(){var pe;const{schema:n,data:r,rowId:a,genericCardSchema:o,secondaryLabelLimit:i,selectColumns:s,columnModels:l,iconOptions:u,useTypeColumnForIcon:c=!1,isHeader:d=!1,titleLinkConfig:f,ctaLinkConfig:m,labelLinkConfig:h,descriptionConfig:g,rgbIndex:v,columnIconOptions:S,queryContext:{entity:_},queryVisualizationContext:{getColumnDisplayName:w}}=this.props,C=o,{hasClickedShowMore:b}=this.state,{link:y="",type:E}=C,x=r[n[C.title]];let N=C.subTitle&&r[n[C.subTitle]];N=(C==null?void 0:C.subTitle)&&ln({value:N,columnName:C==null?void 0:C.subTitle,selectColumns:s,columnModels:l}).str;const k=r[n[C.description||""]],A=r[n[C.icon||""]],q=r[n[C.dataTypeIconNames||""]],L=r[n[C.imageFileHandleColumnName||""]],T=l==null?void 0:l.find(Ee=>C.link===Ee.name),D=T==null?void 0:T.columnType,R=r[n[y]]||"",{href:M,target:z}=kp(R,f,r,n,a),B=[],{secondaryLabels:F=[]}=C,W=_&&!th(_);for(let Ee=0;Ee<F.length;Ee+=1){const we=F[Ee];let _e=r[n[we]],ke;if(_e){if(W&&we==="currentVersion"){const Ae=r[n.id];_e=Sl({synapseId:Ae,version:_e}),ke="Version"}else{const Ae=h==null?void 0:h.find(qe=>qe.matchColumnName===we);_e=p(no,{value:_e,columnName:we,labelLink:Ae,isHeader:d,selectColumns:s,columnModels:l,rowData:r}),ke=w(we)}const Me=[ke,_e,we];B.push(Me)}}const P=$O(_,L||R,r[n.id]),V=B.length>0,U={marginTop:d?"0px":void 0,marginBottom:d?"0px":void 0,paddingBottom:V||L?void 0:"15px"},G=O(j,{children:[!c&&L&&p("div",{className:"SRC-imageThumbnail",style:{padding:C.thumbnailRequiresPadding?"21px":void 0},children:P&&p(wl,{fileHandleAssociation:P})}),!c&&!L&&p("div",{className:"SRC-cardThumbnail",children:p(mo,{iconOptions:u,value:A,type:E})}),c&&p("div",{className:"SRC-cardThumbnail",children:p(ce,{icon:Ay[r[n.type]]})})]});if(d)return p(yl,{descriptionConfig:g,title:x,subTitle:N,description:k,type:E,icon:G,values:B,href:M,target:z,isAlignToLeftNav:!0,secondaryLabelLimit:i,rgbIndex:v});const H=w(C.title),X=w(C.subTitle),K=w(C.description);let Y,de;if(m){const Ee=r[n[m.link]]||"",{href:we,target:_e}=kp(Ee,void 0,r,n,a);Y=we,de=_e}return O("div",{style:U,className:"SRC-portalCard",children:[O("div",{className:"SRC-portalCardMain",children:[G,O("div",{className:"SRC-cardContent",children:[p("div",{className:"SRC-type",children:E}),((pe=S==null?void 0:S.columns)==null?void 0:pe.dataType)&&(q==null?void 0:q.length)&&p("div",{style:{marginTop:"20px"},children:p(vw,{iconConfigs:S.columns.dataType,iconNames:JSON.parse(q),useBackground:!0,useTheme:!0})}),p("div",{children:p("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!f&&D===re.FILEHANDLEID&&P?p(bl,{fileHandleAssociation:P,showDownloadIcon:E!==$y,displayValue:x}):this.renderTitle({href:M,target:z,titleSearchHandle:H,title:x})})}),N&&p("div",{"data-search-handle":X,className:"SRC-author",children:N}),k&&p(_l,{description:k,hasClickedShowMore:b,descriptionSubTitle:K,descriptionConfig:g,toggleShowMore:this.toggleShowMore}),k&&p(El,{description:k,hasClickedShowMore:b,descriptionSubTitle:K,descriptionConfig:g}),m&&Y&&de&&p("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:p("a",{target:de,rel:"noopener noreferrer",href:Y,children:m.text})})]})]}),V&&p(Sc,{isHeader:!1,secondaryLabelLimit:i,values:B,columnIconOptions:S,className:`${L?"hasImage":"hasIcon"}`})]})}}me(ro,"contextType",Pr);try{El.displayName="LongDescription",El.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}}}catch{}try{_l.displayName="ShortDescription",_l.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}}}catch{}try{Cl.displayName="getCutoff",Cl.__docgenInfo={description:"",displayName:"getCutoff",props:{}}}catch{}try{ln.displayName="getValueOrMultiValue",ln.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{Sl.displayName="VersionLabel",Sl.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}}}catch{}try{no.displayName="SynapseCardLabel",no.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}}}catch{}try{ro.displayName="GenericCard",ro.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}}}catch{}class Ar extends I.Component{constructor(n){super(n);me(this,"handleLinkClick",n=>r=>{r.preventDefault(),window.open(`${We.PORTAL}#!Synapse:${n}`,"_blank")});this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:r,selectColumns:a,columnModels:o}=this.props,i=n[r.datasetName],s=n[r.summary],l=ln({columnName:"tumorType",value:n[r.tumorType],selectColumns:a,columnModels:o}).str,u=ln({columnName:"diseaseFocus",value:n[r.diseaseFocus],selectColumns:a,columnModels:o}).str,c=n[r.id],d=n[r.fundingAgency],f=n[r.fileCount],m=Qp(n[r.fileSize]),h=[["FUNDER",ln({columnName:"fundingAgency",value:d,selectColumns:a,columnModels:o}).str],["SIZE",m],["FILES",f]];return O("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[O("div",{className:"SRC-cardThumbnail",children:[p(mo,{type:uh}),p("div",{children:m})]}),O("div",{className:"SRC-cardContent SRC-dataset",children:[p("div",{className:"SRC-type",children:"Dataset "}),p("div",{children:p("h3",{children:p("a",{target:"_self",href:`${We.PORTAL}#!Synapse:${c}`,children:i})})}),O("div",{className:"SRC-description-dataset",children:[p("p",{className:"SRC-description-text",children:s}),p("div",{className:"SRC-cardAction bootstrap-4-backport",children:p(dt,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(c),variant:"secondary",children:"Download Dataset"})})]}),p("div",{className:"SRC-cardAnnotations",children:p(fw,{chips:[l,u]})})]}),p(Sc,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:h})]})}}try{Ar.displayName="Dataset",Ar.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}class xl extends I.Component{constructor(n){super(n);me(this,"handleLinkClick",n=>r=>{r.preventDefault(),window.open(n,"_blank")});this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:r}=this.props,a=n[r.organizationName],o=n[r.organizationPath],i=n[r.summary],s=n[r.website],l=n[r.logo];let u=s.replace("https://","");u=u.replace("http://",""),u.charAt(u.length-1)==="/"&&(u=u.substring(0,u.length-1));const c=window.location.hash.substring(1)===o,d={};let f;return c?d.paddingBottom="42px":f=p("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:p(dt,{className:"pill-xl",href:o,variant:"secondary",children:"View Funded Research"})}),O("div",{className:"SRC-portalCard SRC-typeFunder ",style:d,children:[O("div",{className:"SRC-cardContent",children:[p("div",{className:"SRC-type",children:"Organization"}),l&&p("div",{className:"SRC-cardThumbnail",children:p("img",{alt:"funder logo",className:"SRC-logo",src:l})}),p("div",{children:O("h3",{children:[c&&a,!c&&p("a",{href:o,children:a})]})}),p("div",{className:"SRC-website",children:p("a",{rel:"noopener noreferrer",target:"_blank",href:s,children:u})}),p("div",{className:"SRC-description",children:i})]}),f]})}}try{xl.displayName="Funder",xl.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}try{Ar.displayName="Dataset",Ar.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}const Nl=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],a=e[t.time],o=e[t.timeUnits],i=e[t.text],s=e[t.tag];return O("div",{className:"SRC-portalCard ObservationCard",children:[O("div",{className:"ObservationCard__submitter",children:[!r&&p("div",{children:n}),r&&p(Mn,{size:"SMALL USER CARD",ownerId:r})]}),a&&O("div",{className:"ObservationCard__time",children:[p(ce,{icon:"time"}),O("span",{children:[`${a} ${o}`,Number(a)>1?"s":""]})]}),p("div",{className:"ObservationCard__text",children:p(pw,{summary:i})}),p("div",{className:"ObservationCard__tags",children:s&&p("span",{className:"SRC-tag",children:s})})]})},Il=()=>O("div",{className:"SRC-portalCard ObservationCard",children:[p("div",{className:"ObservationCard__submitter",children:p("span",{children:p(hs,{width:"100px"})})}),p("div",{className:"ObservationCard__time",children:p(ce,{icon:"time"})}),p("div",{className:"ObservationCard__text",children:p(fc,{numCols:1,numRows:4})}),p("div",{className:"ObservationCard__tags",children:p(hs,{width:"80px"})})]});try{Nl.displayName="ObservationCard",Nl.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}}}catch{}try{Il.displayName="LoadingObservationCard",Il.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}}}catch{}function zO(e){const{propsToPass:t,type:n}=e;switch(n){case uh:return p(Ar,{...t});case By:return p(xl,{...t});case Fy:return p(ro,{...t});case ps:return p(Nl,{...t});default:return p("div",{})}}const ao=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:a,secondaryLabelLimit:o=3,title:i,...s}=e,l=Ub(),{NoContentPlaceholder:u}=qt(),{data:c,appendNextPageToResults:d,hasNextPage:f}=l,m=qt(),h=c!=null&&c.queryResult.queryResults.tableId?[c==null?void 0:c.queryResult.queryResults.tableId]:[],g=sh({ids:h,type:"ENTITY_HEADER"});if(c){if(c&&c.queryResult.queryResults.rows.length===0)return p(u,{})}else return O("div",{children:[a&&r===ps&&p(Il,{}),a&&r!==ps&&dh]});const v={};c.queryResult.queryResults.headers.forEach((w,C)=>{v[w.name]=C});const S=f&&p("div",{className:"SRC-viewMore bootstrap-4-backport",children:p(dt,{variant:"secondary",className:"pill-xl",onClick:()=>{d()},children:"View More"})});let _;if(r===vu){const w=c.queryResult.queryResults.headers.findIndex(b=>b.columnType===re.USERID);if(w===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const C=c.queryResult.queryResults.rows.map(b=>b.values[w]);_=p(yw,{data:c,list:C,size:vu})}else{const w=c.queryResult.queryResults.rows;_=w.length?w.map((C,b)=>{const E={key:JSON.stringify(C.values),type:r,schema:v,isHeader:t,secondaryLabelLimit:o,rowId:C.rowId,data:C.values,selectColumns:c.selectColumns,columnModels:c.columnModels,tableEntityConcreteType:g[0]&&g[0].type,tableId:c==null?void 0:c.queryResult.queryResults.tableId,queryContext:l,queryVisualizationContext:m,...s};return p(zO,{propsToPass:E,type:r},C.rowId??b)}):p(j,{})}return O("div",{role:"list",children:[i&&p("h2",{className:"SRC-card-overview-title",children:i}),!i&&n&&p(_h,{frontText:"Displaying"}),_,S]})};try{ao.displayName="CardContainer",ao.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}}}catch{}var Tl={},HO={get exports(){return Tl},set exports(e){Tl=e}};(function(e,t){(function(r,a){e.exports=a()})(uo,()=>(()=>{var n={887:i=>{i.exports=function(l){for(var u=5381,c=l.length;c;)u=33*u^l.charCodeAt(--c);return u>>>0}}},r={};function a(i){var s=r[i];if(s!==void 0)return s.exports;var l=r[i]={exports:{}};return n[i](l,l.exports,a),l.exports}a.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return a.d(s,{a:s}),s},a.d=(i,s)=>{for(var l in s)a.o(s,l)&&!a.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:s[l]})},a.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var o={};return(()=>{a.r(o),a.d(o,{default:()=>v});var i=a(887),s=a.n(i);function l(S){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},l(S)}function u(S,_){for(var w=0;w<_.length;w++){var C=_[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,m(C.key),C)}}function c(S,_,w){return _&&u(S.prototype,_),w&&u(S,w),Object.defineProperty(S,"prototype",{writable:!1}),S}function d(S,_){if(!(S instanceof _))throw new TypeError("Cannot call a class as a function")}function f(S,_,w){return(_=m(_))in S?Object.defineProperty(S,_,{value:w,enumerable:!0,configurable:!0,writable:!0}):S[_]=w,S}function m(S){var _=function(C,b){if(l(C)!=="object"||C===null)return C;var y=C[Symbol.toPrimitive];if(y!==void 0){var E=y.call(C,b||"default");if(l(E)!=="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(C)}(S,"string");return l(_)==="symbol"?_:String(_)}var h,g=(h=0,function(){return h++}),v=c(function S(_){var w=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d(this,S),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(b){return w.init(b)}),f(this,"onResize",function(){var b=w.tb;if(b.classList.remove(w.RESIZABLE),b.opt.fixed){b.tableWidth=Number(window.getComputedStyle(b).width.replace(/px/,"")).valueOf();for(var y=0,E=0;E<b.columnCnt;E++)y+=b.columns[E].w;for(var x=0;x<b.columnCnt;x++)b.columns[x].style.width=Math.round(1e3*b.columns[x].w/y)/10+"%",b.columns[x].locked=!0,b.opt.currentWidths[x]=Number(window.getComputedStyle(b.columns[x]).width.replace(/px/,"")).valueOf()}else w.applyBounds(),b.opt.resizeMode==="flex"&&b.opt.serialize&&w.serializeStore();b.classList.add(w.RESIZABLE),w.syncGrips()}),f(this,"onGripMouseDown",function(b){var y=b.target.parentNode.data,E=w.tb,x=E.grips[y.i],N=b.touches;if(x.ox=N?N[0].pageX:b.pageX,x.l=x.offsetLeft,x.x=x.l,w.createStyle(document.querySelector("head"),"*{cursor:"+E.opt.dragCursor+"!important}"),document.addEventListener("touchmove",w.onGripDrag),document.addEventListener("mousemove",w.onGripDrag),document.addEventListener("touchend",w.onGripDragOver),document.addEventListener("mouseup",w.onGripDragOver),x.classList.add(E.opt.draggingClass),w.grip=x,E.columns[y.i].locked)for(var k,A=0;A<E.columnCnt;A++)(k=E.columns[A]).locked=!1,k.w=Number(window.getComputedStyle(k).width.replace(/px/,"")).valueOf();b.preventDefault()}),f(this,"onGripDrag",function(b){var y=w.grip;if(y){var E=y.t,x=b.touches,N=(x?x[0].pageX:b.pageX)-y.ox+y.l,k=E.opt.minWidth,A=y.i,q=1.5*E.cellSpace+k+E.borderSpace,L=A===E.columnCnt-1,T=A?E.grips[A-1].offsetLeft+E.cellSpace+k:q,D=E.opt.fixed?A===E.columnCnt-1?E.tableWidth-q:E.grips[A+1].offsetLeft-E.cellSpace-k:1/0;if(N=Math.max(T,Math.min(D,N)),y.x=N,y.style.left=N+w.PX,L&&(y.w=E.columns[A].w+N-y.l),E.opt.liveDrag){L?(E.columns[A].style.width=y.w+w.PX,!E.opt.fixed&&E.opt.overflow?E.style.minWidth=E.tableWidth+N-y.l+w.PX:E.tableWidth=Number(window.getComputedStyle(E).width.replace(/px/,"")).valueOf()):w.syncCols(E,A,!1,E.opt),w.syncGrips();var R=E.opt.onDrag;R&&R(b)}b.preventDefault()}}),f(this,"onGripDragOver",function(b){var y=w.grip;document.removeEventListener("touchend",w.onGripDragOver),document.removeEventListener("mouseup",w.onGripDragOver),document.removeEventListener("touchmove",w.onGripDrag),document.removeEventListener("mousemove",w.onGripDrag);var E=document.querySelector("head").lastChild;if(E.parentNode.removeChild(E),y){if(y.classList.remove(y.t.opt.draggingClass),y.x-y.l!=0){var x=y.t,N=x.opt.onResize,k=y.i;if(k===x.columnCnt-1){var A=x.columns[k];A.style.width=y.w+w.PX,A.w=y.w}else w.syncCols(x,k,!0,x.opt);x.opt.fixed||w.applyBounds(),w.syncGrips(),N&&N(b),x.opt.serialize&&w.serializeStore()}w.grip=null}}),f(this,"init",function(b){if(b.disable)return w.destroy();var y=w.tb,E=y.getAttribute(w.ID)||w.RESIZABLE+g();if(!y.matches("table")||y.extended&&!b.partialRefresh)return null;var x=document.querySelector("head");if(w.createStyle(x," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),b.hoverCursor&&b.hoverCursor!=="col-resize"){var N=".grip-handle .grip-resizable:hover{cursor:"+b.hoverCursor+"!important}";w.createStyle(x,N)}y.setAttribute(w.ID,E);var k=y.opt;y.opt=w.extendOptions(b);var A=w.getTableHeaders(y);if(w.extendTable(A),b.remoteTable&&b.remoteTable.matches("table")){var q=w.getTableHeaders(y.opt.remoteTable);A.length===q.length?w.extendRemoteTable(y.opt.remoteTable,q,y):console.warn("column count for remote table did not match")}return k}),f(this,"applyBounds",function(){var b=w.tb,y=b.columns.map(function(E){return window.getComputedStyle(E).width});b.style.width=window.getComputedStyle(b).width,b.tableWidth=Number(b.style.width.replace(/px/,"")).valueOf(),b.classList.remove(w.FLEX),b.columns.forEach(function(E,x){E.style.width=y[x];var N=Number(y[x].replace(/px/,"")).valueOf();E.w=N,b.opt.currentWidths[x]=N}),b.classList.add(w.FLEX)}),f(this,"serializeStore",function(){var b=w.store,y=w.tb;b[y.getAttribute(w.ID)]="";for(var E=0,x=0;x<y.columns.length;x++){var N=window.getComputedStyle(y.columns[x]).width.replace(/px/,"");b[y.getAttribute(w.ID)]+=N+";",E+=Number(N).valueOf()}b[y.getAttribute(w.ID)]+=E.toString(),y.opt.fixed||(b[y.getAttribute(w.ID)]+=";"+window.getComputedStyle(y).width.replace(/px/,""))}),f(this,"syncGrips",function(){var b=w.tb;b.gripContainer.style.width=b.tableWidth+w.PX;for(var y=0;y<b.columnCnt;y++){var E=b.columns[y],x=E.getBoundingClientRect(),N=b.getBoundingClientRect();b.grips[y].style.left=x.left-N.left+E.offsetWidth+b.cellSpace/2+w.PX,b.grips[y].style.height=(b.opt.headerOnly?b.columns[0].offsetHeight:b.offsetHeight)+w.PX}}),f(this,"destroy",function(){var b=w.tb,y=b.getAttribute(w.ID);return y?(w.store[y]="",b.classList.remove(w.RESIZABLE),b.classList.remove(w.FLEX),b.remote&&(b.remote.classList.remove(w.RESIZABLE),b.remote.classList.remove(w.FLEX)),b.gripContainer&&b.gripContainer.parentNode&&b.gripContainer.parentNode.removeChild(b.gripContainer),delete b.extended,b.opt):null}),f(this,"createStyle",function(b,y){var E=s()(y).toString(),x=b.querySelectorAll("style"),N=Array.from(x).filter(function(A){return A.gripid===E});if(!N.length){var k=document.createElement("style");k.type="text/css",k.gripid=E,k.styleSheet?k.styleSheet.cssText=y:k.appendChild(document.createTextNode(y)),b.appendChild(k)}}),f(this,"extendOptions",function(b){var y=Object.assign({},S.DEFAULTS,b);switch(y.fixed=!0,y.overflow=!1,y.resizeMode){case"flex":y.fixed=!1;break;case"overflow":y.fixed=!1,y.overflow=!0}return y}),f(this,"getTableHeaders",function(b){var y="#"+b.id,E=Array.from(b.querySelectorAll(y+">thead>tr:nth-of-type(1)>th"));return(E=E.concat(Array.from(b.querySelectorAll(y+">thead>tr:nth-of-type(1)>td")))).length||(E=(E=(E=(E=Array.from(b.querySelectorAll(y+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(b.querySelectorAll(y+">tr:nth-of-type(1)>th")))).concat(Array.from(b.querySelectorAll(y+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(b.querySelectorAll(y+">tr:nth-of-type(1)>td")))),w.filterInvisible(E,!1)}),f(this,"filterInvisible",function(b,y){return b.filter(function(E){var x=y?-1:E.offsetWidth,N=y?-1:E.offsetHeight;return!(x===0&&N===0||E.style&&E.style.display&&window.getComputedStyle(E).display==="none")})}),f(this,"extendTable",function(b){var y=w.tb;y.opt.removePadding&&y.classList.add("grip-padding"),y.classList.add(w.RESIZABLE),y.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),y.grips=[],y.columns=[],y.tableWidth=Number(window.getComputedStyle(y).width.replace(/px/,"")).valueOf(),y.gripContainer=y.previousElementSibling,y.opt.marginLeft&&(y.gripContainer.style.marginLeft=y.opt.marginLeft),y.opt.marginRight&&(y.gripContainer.style.marginRight=y.opt.marginRight),y.cellSpace=parseInt(w.legacyIE?y.cellSpacing||y.currentStyle.borderSpacing:window.getComputedStyle(y).borderSpacing.split(" ")[0].replace(/px/,""))||2,y.borderSpace=parseInt(w.legacyIE?y.border||y.currentStyle.borderLeftWidth:window.getComputedStyle(y).borderLeftWidth.replace(/px/,""))||1,y.extended=!0,w.createGrips(b)}),f(this,"extendRemoteTable",function(b,y,E){E.opt.removePadding&&b.classList.add("grip-padding"),b.classList.add(w.RESIZABLE),b.getAttribute(w.ID)||b.setAttribute(w.ID,E.getAttribute(w.ID)+"remote"),b.columns=[],y.forEach(function(N,k){var A=y[k];A.w=E.columns[k].w,A.style.width=A.w+w.PX,A.removeAttribute("width"),b.columns.push(A)}),b.tableWidth=E.tableWidth,b.cellSpace=E.cellSpace,b.borderSpace=E.borderSpace;var x=Array.from(b.querySelectorAll("col"));b.columnGrp=w.filterInvisible(x,!0),b.columnGrp.forEach(function(N,k){N.removeAttribute("width"),N.style.width=E.columnGrp[k].style.width}),E.remote=b}),f(this,"createGrips",function(b){var y=w.tb;y.columnGrp=w.filterInvisible(Array.from(y.querySelectorAll("col")),!0),y.columnGrp.forEach(function(N){N.removeAttribute("width")}),y.columnCnt=b.length;var E=!1;w.store[y.getAttribute(w.ID)]&&(w.deserializeStore(b),E=!0),b.forEach(function(N,k){var A=b[k],q=y.opt.disabledColumns.indexOf(k)!==-1;w.createDiv(y.gripContainer,"grip-handle");var L=y.gripContainer.lastChild;!q&&y.opt.gripInnerHtml&&(L.innerHTML=y.opt.gripInnerHtml),w.createDiv(L,w.RESIZABLE),k===y.columnCnt-1&&(L.classList.add("grip-lastgrip"),y.opt.fixed&&(L.innerHTML="")),L.addEventListener("touchstart",w.onGripMouseDown,{capture:!0,passive:!0}),L.addEventListener("mousedown",w.onGripMouseDown,!0),q?L.classList.add("grip-disabledgrip"):(L.classList.remove("grip-disabledgrip"),L.addEventListener("touchstart",w.onGripMouseDown,{capture:!0,passive:!0}),L.addEventListener("mousedown",w.onGripMouseDown,!0)),L.t=y,L.i=k,y.opt.widths[k]?A.w=y.opt.widths[k]:A.w=E?Number(A.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(A).width.replace(/px/,"")).valueOf(),y.opt.currentWidths[k]=A.w,A.style.width=A.w+w.PX,A.removeAttribute("width"),L.data={i:k,t:y.getAttribute(w.ID),last:k===y.columnCnt-1},y.grips.push(L),y.columns.push(A)});var x=Array.from(y.querySelectorAll("td"));x.concat(Array.from(y.querySelectorAll("th"))),(x=(x=x.filter(function(N){for(var k=0;k<b.length;k++)if(b[k]===N)return!1;return!0})).filter(function(N){return!(N.querySelectorAll("table th").length||N.querySelectorAll("table td").length)})).forEach(function(N){N.removeAttribute("width")}),y.opt.fixed||(y.removeAttribute("width"),y.classList.add(w.FLEX)),w.syncGrips()}),f(this,"deserializeStore",function(b){var y=w.tb;if(y.columnGrp.forEach(function(k){k.removeAttribute("width")}),y.opt.flush)w.store[y.getAttribute(w.ID)]="";else{var E=w.store[y.getAttribute(w.ID)].split(";"),x=E[y.columnCnt+1];!y.opt.fixed&&x&&(y.style.width=x+w.PX,y.opt.overflow&&(y.style.minWidth=x+w.PX,y.tableWidth=Number(x).valueOf()));for(var N=0;N<y.columnCnt;N++)b[N].style.width=E[N]+w.PX,y.columnGrp[N]&&(y.columnGrp[N].style.width=100*Number(E[N]).valueOf()/Number(E[y.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(b,y,E){var x=document.createElement("div");x.classList.add(y),E&&(x.innerHTML=E),b.appendChild(x)}),f(this,"syncCols",function(b,y,E,x){var N=b.remote,k=w.grip.x-w.grip.l,A=b.columns[y],q=b.columns[y+1];if(A&&q){var L=A.w+k,T=q.w-k,D=L+w.PX;if(A.style.width=D,b.columnGrp[y]&&b.columnGrp[y].style.width&&(b.columnGrp[y].style.width=D),N&&(N.columns[y].style.width=D,N.columnGrp[y]&&N.columnGrp[y].style.width&&(N.columnGrp[y].style.width=D)),x.fixed){var R=T+w.PX;q.style.width=R,b.columnGrp[y+1]&&b.columnGrp[y+1].style.width&&(b.columnGrp[y+1].style.width=R),N&&(N.columns[y+1].style.width=R,N.columnGrp[y+1]&&N.columnGrp[y+1].style.width&&(N.columnGrp[y+1].style.width=R))}else x.overflow&&(b.style.minWidth=b.tableWidth+k+w.PX);E&&(A.w=L,q.w=x.fixed?T:q.w,N&&(N.columns[y].w=L,N.columns[y+1].w=x.fixed?T:q.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=_,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(C)});v.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],currentWidths:[],serialize:!0,onDrag:null,onResize:null}})(),o})())})(HO);const UO=Yy(Tl),kl=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=ie(),a=!!r,{data:o}=ho(t,n),{mutate:i}=ew({onSuccess:()=>{Qt(`${(o==null?void 0:o.name)??t} was successfully added to your Download Cart.`,"success")},onError:s=>{Qt(`Unable to add the file to your Download Cart. ${s.reason}`,"danger")}});return a?p(j,{children:p(tt,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:p("a",{"data-testid":"AddToDownloadListV2",onClick:()=>{i({entityId:t,entityVersionNumber:n})},className:"ignoreLink",children:p(ce,{icon:"addToCart"})})})}):p(j,{})};try{kl.displayName="AddToDownloadListV2",kl.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var oo={},jO={get exports(){return oo},set exports(e){oo=e}};(function(e,t){(function(n,r){var a="1.0.33",o="",i="?",s="function",l="undefined",u="object",c="string",d="major",f="model",m="name",h="type",g="vendor",v="version",S="architecture",_="console",w="mobile",C="tablet",b="smarttv",y="wearable",E="embedded",x=350,N="Amazon",k="Apple",A="ASUS",q="BlackBerry",L="Browser",T="Chrome",D="Edge",R="Firefox",M="Google",z="Huawei",B="LG",F="Microsoft",W="Motorola",Z="Opera",P="Samsung",V="Sharp",U="Sony",G="Xiaomi",H="Zebra",X="Facebook",K=function(ne,oe){var te={};for(var he in ne)oe[he]&&oe[he].length%2===0?te[he]=oe[he].concat(ne[he]):te[he]=ne[he];return te},Y=function(ne){for(var oe={},te=0;te<ne.length;te++)oe[ne[te].toUpperCase()]=ne[te];return oe},de=function(ne,oe){return typeof ne===c?pe(oe).indexOf(pe(ne))!==-1:!1},pe=function(ne){return ne.toLowerCase()},Ee=function(ne){return typeof ne===c?ne.replace(/[^\d\.]/g,o).split(".")[0]:r},we=function(ne,oe){if(typeof ne===c)return ne=ne.replace(/^\s\s*/,o),typeof oe===l?ne:ne.substring(0,x)},_e=function(ne,oe){for(var te=0,he,J,Ie,se,Ze,Re;te<oe.length&&!Ze;){var st=oe[te],St=oe[te+1];for(he=J=0;he<st.length&&!Ze;)if(Ze=st[he++].exec(ne),Ze)for(Ie=0;Ie<St.length;Ie++)Re=Ze[++J],se=St[Ie],typeof se===u&&se.length>0?se.length===2?typeof se[1]==s?this[se[0]]=se[1].call(this,Re):this[se[0]]=se[1]:se.length===3?typeof se[1]===s&&!(se[1].exec&&se[1].test)?this[se[0]]=Re?se[1].call(this,Re,se[2]):r:this[se[0]]=Re?Re.replace(se[1],se[2]):r:se.length===4&&(this[se[0]]=Re?se[3].call(this,Re.replace(se[1],se[2])):r):this[se]=Re||r;te+=2}},ke=function(ne,oe){for(var te in oe)if(typeof oe[te]===u&&oe[te].length>0){for(var he=0;he<oe[te].length;he++)if(de(oe[te][he],ne))return te===i?r:te}else if(de(oe[te],ne))return te===i?r:te;return ne},Me={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ae={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},qe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,v],[/opios[\/ ]+([\w\.]+)/i],[v,[m,Z+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[m,Z]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[m,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[v,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+L],v],[/\bfocus\/([\w\.]+)/i],[v,[m,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[m,Z+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[m,Z+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[m,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[v,[m,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+L]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+L],v],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,X],v],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[m,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,T+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[m,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[v,ke,Me]],[/(webkit|khtml)\/([\w\.]+)/i],[m,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[m,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,v],[/(cobalt)\/([\w\.]+)/i],[m,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,pe]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,o,pe]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,pe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[g,P],[h,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[g,P],[h,w]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[g,k],[h,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[g,k],[h,C]],[/(macintosh);/i],[f,[g,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[g,z],[h,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[g,z],[h,w]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[g,G],[h,w]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[g,G],[h,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[g,"OPPO"],[h,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[g,"Vivo"],[h,w]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[g,"Realme"],[h,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[g,W],[h,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[g,W],[h,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[g,B],[h,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[g,B],[h,w]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[g,"Lenovo"],[h,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[g,"Nokia"],[h,w]],[/(pixel c)\b/i],[f,[g,M],[h,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[g,M],[h,w]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[g,U],[h,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[g,U],[h,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[g,"OnePlus"],[h,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[g,N],[h,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[g,N],[h,w]],[/(playbook);[-\w\),; ]+(rim)/i],[f,g,[h,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[g,q],[h,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[g,A],[h,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[g,A],[h,w]],[/(nexus 9)/i],[f,[g,"HTC"],[h,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[f,/_/g," "],[h,w]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[g,"Acer"],[h,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[g,"Meizu"],[h,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[g,V],[h,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,f,[h,w]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,f,[h,C]],[/(surface duo)/i],[f,[g,F],[h,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[g,"Fairphone"],[h,w]],[/(u304aa)/i],[f,[g,"AT&T"],[h,w]],[/\bsie-(\w*)/i],[f,[g,"Siemens"],[h,w]],[/\b(rct\w+) b/i],[f,[g,"RCA"],[h,C]],[/\b(venue[\d ]{2,7}) b/i],[f,[g,"Dell"],[h,C]],[/\b(q(?:mv|ta)\w+) b/i],[f,[g,"Verizon"],[h,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[g,"Barnes & Noble"],[h,C]],[/\b(tm\d{3}\w+) b/i],[f,[g,"NuVision"],[h,C]],[/\b(k88) b/i],[f,[g,"ZTE"],[h,C]],[/\b(nx\d{3}j) b/i],[f,[g,"ZTE"],[h,w]],[/\b(gen\d{3}) b.+49h/i],[f,[g,"Swiss"],[h,w]],[/\b(zur\d{3}) b/i],[f,[g,"Swiss"],[h,C]],[/\b((zeki)?tb.*\b) b/i],[f,[g,"Zeki"],[h,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],f,[h,C]],[/\b(ns-?\w{0,9}) b/i],[f,[g,"Insignia"],[h,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[g,"NextBook"],[h,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],f,[h,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],f,[h,w]],[/\b(ph-1) /i],[f,[g,"Essential"],[h,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[g,"Envizen"],[h,C]],[/\b(trio[-\w\. ]+) b/i],[f,[g,"MachSpeed"],[h,C]],[/\btu_(1491) b/i],[f,[g,"Rotor"],[h,C]],[/(shield[\w ]+) b/i],[f,[g,"Nvidia"],[h,C]],[/(sprint) (\w+)/i],[g,f,[h,w]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[g,F],[h,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[g,H],[h,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[g,H],[h,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,f,[h,_]],[/droid.+; (shield) bui/i],[f,[g,"Nvidia"],[h,_]],[/(playstation [345portablevi]+)/i],[f,[g,U],[h,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[g,F],[h,_]],[/smart-tv.+(samsung)/i],[g,[h,b]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[g,P],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,B],[h,b]],[/(apple) ?tv/i],[g,[f,k+" TV"],[h,b]],[/crkey/i],[[f,T+"cast"],[g,M],[h,b]],[/droid.+aft(\w)( bui|\))/i],[f,[g,N],[h,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[g,V],[h,b]],[/(bravia[\w ]+)( bui|\))/i],[f,[g,U],[h,b]],[/(mitv-\w{5}) bui/i],[f,[g,G],[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[g,we],[f,we],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/((pebble))app/i],[g,f,[h,y]],[/droid.+; (glass) \d/i],[f,[g,M],[h,y]],[/droid.+; (wt63?0{2,3})\)/i],[f,[g,H],[h,y]],[/(quest( 2)?)/i],[f,[g,X],[h,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[h,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[h,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,w]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[m,D+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[v,ke,Ae]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[v,ke,Ae]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,v],[/\(bb(10);/i],[v,[m,q]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[m,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[m,T+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],v],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,v],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,v]]},ve=function(ne,oe){if(typeof ne===u&&(oe=ne,ne=r),!(this instanceof ve))return new ve(ne,oe).getResult();var te=ne||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:o),he=oe?K(qe,oe):qe;return this.getBrowser=function(){var J={};return J[m]=r,J[v]=r,_e.call(J,te,he.browser),J.major=Ee(J.version),J},this.getCPU=function(){var J={};return J[S]=r,_e.call(J,te,he.cpu),J},this.getDevice=function(){var J={};return J[g]=r,J[f]=r,J[h]=r,_e.call(J,te,he.device),J},this.getEngine=function(){var J={};return J[m]=r,J[v]=r,_e.call(J,te,he.engine),J},this.getOS=function(){var J={};return J[m]=r,J[v]=r,_e.call(J,te,he.os),J},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return te},this.setUA=function(J){return te=typeof J===c&&J.length>x?we(J,x):J,this},this.setUA(te),this};ve.VERSION=a,ve.BROWSER=Y([m,v,d]),ve.CPU=Y([S]),ve.DEVICE=Y([f,g,h,_,w,b,C,y,E]),ve.ENGINE=ve.OS=Y([m,v]),e.exports&&(t=e.exports=ve),t.UAParser=ve;var Ne=typeof n!==l&&(n.jQuery||n.Zepto);if(Ne&&!Ne.ua){var Qe=new ve;Ne.ua=Qe.getResult(),Ne.ua.get=function(){return Qe.getUA()},Ne.ua.set=function(ne){Qe.setUA(ne);var oe=Qe.getResult();for(var te in oe)Ne.ua[te]=oe[te]}}})(typeof window=="object"?window:uo)})(jO,oo);const io=e=>{const{accessToken:t}=ie(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:a,fileHandleId:o,displayFileName:i,onClickCallback:s}=e,{ref:l,inView:u}=Zn(),[c,d]=I.useState(!1),[f,m]=I.useState(!1),[h,g]=I.useState(),[v,S]=I.useState(),[_,w]=I.useState("");let C=!0;I.useEffect(()=>(C&&u&&x(),()=>{C=!1}),[t,u]);const b=async()=>{let k;const q=new oo.UAParser().getBrowser().name=="Safari";let L=null;q&&(L=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),L.document.body.innerHTML="Downloading file on Safari...");try{a===Le.TableEntity?k=(await E(!0)).requestedFiles[0].preSignedURL:k=(await gu(h,t,!1,!0)).preSignedURL}catch(T){console.log("Fail to get file download link: ",T)}k?(q&&L?(L.location=k,setTimeout(()=>{L&&L.close()},1e4)):window.open(k),s&&s(c)):(L==null||L.close(),console.log("Fail to get file download link"))},y=k=>k&&!k.isPreview?(m(!0),!0):(m(!1),!1),E=(k=!1)=>Qn({includeFileHandles:!0,includePreSignedURLs:k,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:a,fileHandleId:o}]},t),x=()=>br(t,n,r).then(async k=>{if(Object.hasOwn(k,"dataFileHandleId"))return g(k),gu(k,t,!0).then(A=>{const q=A.fileHandle;q&&y(q)&&Lw(q)&&(d(!0),S(q.externalURL))}).catch(A=>{console.log("Error on getFileEntityFileHandle = ",A)});if(a===Le.TableEntity){const q=(await E()).requestedFiles[0].fileHandle;i&&q&&y(q)&&w(q.fileName)}return Promise.resolve()}).catch(k=>{console.log("Error on getEntity = ",k)});return p(tt,{title:c?"Navigate to external link":"Download this file individually",enterNextDelay:Na,placement:"left",children:p("span",{ref:l,children:(()=>c?p("button",{className:"btn-download-icon",onClick:()=>{s&&s(c)},children:p("a",{className:"ignoreLink",rel:"noreferrer",href:v,target:"_blank",children:p(ce,{icon:"openInNewWindow"})})}):f?O("button",{className:"btn-download-icon",onClick:()=>{b()},children:[p(ce,{icon:"download"}),i&&_?_:""]}):p(j,{}))()})})};try{io.displayName="DirectDownload",io.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}}}catch{}const WO={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""}};function Rp(e){const{downloadType:t}=e,n=kh();if(t){const r=WO[t];return p(ce,{icon:r.icon,label:r.tooltipText,sx:{color:r.color(n)}})}return p(j,{})}function Rl(e,t){const[n,r]=$.useState(),{accessToken:a}=ie(),o=parseInt(t??""),{data:i,error:s}=Oh(e,Number.isNaN(o)?void 0:o,{includeEntity:!0,includePermissions:!0}),l=$.useMemo(()=>({restrictableObjectType:Ec.ENTITY,objectId:e}),[e]),{data:u}=Th(l),c=i==null?void 0:i.entity,d=i==null?void 0:i.permissions;return $.useEffect(()=>{u&&u.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):c&&(d!=null&&d.canDownload)?nc(c)&&c.dataFileHandleId?r("Accessible"):r("NoFileHandle"):d&&!d.canDownload&&r(a?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[a,c,s,d,u]),n}function Ol(e){const[t,n]=$.useState(!1),[r,a]=$.useState([]),{entityId:o,entityVersionNumber:i}=e,s=Rl(o,i),{accessToken:l}=ie(),u=$.useMemo(()=>({restrictableObjectType:Ec.ENTITY,objectId:o}),[o]),{data:c}=Th(u),d=()=>{nh(l,o).then(h=>{Jl(h)?window.open(`${Ty(ky.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${o}&TYPE=ENTITY`,"_blank"):(a(h),n(!0))})},f=I.useMemo(()=>{if(!c)return p(j,{});const h=c==null?void 0:c.hasUnmetAccessRequirement,g=c==null?void 0:c.restrictionLevel;let v="";if(h)v="Request Access";else{if(bw.OPEN===g)return p(j,{});v="View Terms"}return O(j,{children:[p("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:e.className,onClick:d,children:v}),t&&p(ec,{entityId:o,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[o,c,r,t]);return s===void 0?p(j,{}):O("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?p("button",{type:"button",className:uc,onClick:h=>{if(h.isTrusted){const g=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(g)}},children:p(Rp,{downloadType:s})}):p(Rp,{downloadType:s}),f]})}try{Rl.displayName="useGetFileHandleDownloadType",Rl.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}}}catch{}try{Ol.displayName="HasAccessV2",Ol.__docgenInfo={description:`HasAccess shows if the user has access to the file or not. If the user doesn't have access due to a restriction,
then a link will be shown that opens a modal with steps to request access.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Al=e=>{const{accessToken:t}=ie(),{entityIdList:n}=e,[r,a]=I.useState([p(j,{})]),{ref:o,inView:i}=Zn();let s=!0;I.useEffect(()=>(i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n.length&&dy(n,t).then(u=>{if(s){const c=u.results.map(d=>p("p",{children:p(ms,{entity:d,displayTextField:"name"})},d.id));a(c)}}).catch(u=>{console.log("EntityIdList: Error getting entity headers",u)})};return p("span",{ref:o,children:r})};try{Al.displayName="EntityIdList",Al.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}}}catch{}const ql=e=>{const{accessToken:t}=ie(),{evaluationId:n}=e,[r,a]=I.useState(),{ref:o,inView:i}=Zn();let s=!0;I.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n&&fy(n,t).then(u=>{a(u.name)}).catch(u=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",u)})};return p("span",{ref:o,children:r})};try{ql.displayName="EvaluationIdRenderer",ql.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}const Ll=e=>{const{accessToken:t}=ie(),{userIds:n}=e,[r,a]=I.useState(),{ref:o,inView:i}=Zn();let s=!0;I.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n.length&&py(n,t).then(u=>{const c=u.list.map(d=>p(dc,{userProfile:d,className:"SRC-marginFifteen"},d.ownerId));a(c)}).catch(u=>{console.log("UserIdList: Error getting user profiles",u)})};return p("span",{ref:o,children:r})};try{Ll.displayName="UserIdList",Ll.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}}}catch{}const Pl=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:a,columnLinkConfig:o,columnName:i,selectColumns:s,columnModels:l,rowData:u,rowId:c,rowVersionNumber:d})=>{const{entity:f}=Vt();if(!t)return O("p",{className:"SRC-center-text SRC-inactive",children:[" ",Bb]});if(o)return p(no,{value:t,columnName:i,selectColumns:s,columnModels:l,isHeader:!1,labelLink:o,rowData:u,rowId:c});if(f&&(In(f)||Dn(f)||rh(f))&&(i==="id"||i==="name")&&c&&d){const m=`syn${c.toString()}`,h=r[m]??m;return p("p",{children:p(ms,{entity:h,versionNumber:d,className:`${n}`,showIcon:!1,displayTextField:i})})}switch(e){case re.ENTITYID:return p("p",{children:p(ms,{entity:r[t]??t,className:`${n}`,displayTextField:"name"})});case re.DATE_LIST:{const m=JSON.parse(t);return O("p",{children:[m.map((h,g)=>O("span",{className:n,children:[wr(Xt(Number(h))),g!==m.length-1?", ":""]},g))," "]})}case re.BOOLEAN_LIST:{const m=JSON.parse(t);return p("p",{children:m.map((h,g)=>O("span",{className:n,children:[h?"true":"false",g!==m.length-1?", ":""]},g))})}case re.FILEHANDLEID:return p(j,{children:f&&p(io,{associatedObjectId:f.id,associatedObjectType:Le.TableEntity,fileHandleId:t,displayFileName:!0})});case re.ENTITYID_LIST:{const m=JSON.parse(t);return p(Al,{entityIdList:m})}case re.USERID_LIST:{const m=JSON.parse(t);return p(Ll,{userIds:m})}case re.STRING_LIST:case re.INTEGER_LIST:{const m=JSON.parse(t);return p("p",{children:m.map((h,g)=>O("span",{className:n,children:[h,g!==m.length-1?", ":""]},h))})}case re.EVALUATIONID:return p(ql,{evaluationId:t});case re.DATE:return p("p",{className:n,children:wr(Xt(Number(t)))});case re.USERID:if(Object.prototype.hasOwnProperty.call(a,t)){const{ownerId:m,userName:h}=a[t];if(a[t].isIndividual===!1){const g=h===yu?"public":"people";return h===yu?O("span",{children:[p(ce,{icon:g})," All registered Synapse users"]}):O("a",{target:"_blank",rel:"noopener noreferrer",href:`${We.PORTAL}#!Team:${m}`,children:[p(ce,{icon:g})," ",h]})}else return p(Mn,{userProfile:a[t],preSignedURL:a[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case re.LINK:return p("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case re.STRING:case re.DOUBLE:case re.INTEGER:case re.BOOLEAN:case re.MEDIUMTEXT:case re.LARGETEXT:return p("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),p("p",{className:n,children:t})}return p("p",{className:n,children:t})};try{Pl.displayName="SynapseTableCell",Pl.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string | null"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}}}catch{}const Op=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((a,o)=>{t.includes(a.columnType)&&n.push(o)}),n},Ap=(e,t,n)=>{var a;const r=new Set;return(a=e.queryResult)==null||a.queryResults.rows.forEach(o=>{o.values.forEach((i,s)=>{i!=null&&n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,i)&&i&&r.add(i)})}),r},GO=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:a}=jb(),o=e==null?void 0:e.queryCount,i=(l,u)=>{t(u)},s=l=>{const u=l.target.value;r(u)};return a==1&&o&&o<10?p(j,{}):O("div",{children:[p(d0,{page:a,count:Math.ceil(o/n),color:"secondary",onChange:i,style:{display:"inline-block",float:"left"}}),p(At,{variant:"body1",style:{display:"inline-block"},children:`${o==null?void 0:o.toLocaleString()} total rows /`}),O("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[p("option",{value:10,children:"10 per page"}),p("option",{value:25,children:"25 per page"}),p("option",{value:100,children:"100 per page"}),p("option",{value:500,children:"500 per page"})]})]})},Dl=e=>{const{onCopy:t}=e;return p(tt,{title:"Copy IDs to the clipboard",enterNextDelay:Na,placement:"right",children:p("span",{children:p("button",{"data-testid":"copySynIdsButton",onClick:t,children:p("span",{style:{height:15,marginTop:-1},children:p(ce,{icon:"contentCopy"})})})})})};try{Dl.displayName="InteractiveCopyIdsIcon",Dl.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}}}catch{}const YO=()=>{const e=ie(),t=Vt(),[n,r]=I.useState(!1),[a,o]=I.useState(),[i,s]=I.useState();I.useEffect(()=>(i||s(new AbortController),()=>{i&&i.abort()}),[i]);const l=()=>{r(!0);const{getLastQueryRequest:u}=t,c=u(),{sql:d}=c.query,{entityId:f,versionNumber:m}=Fb(d),h=m?`.${m}`:"";c.partMask=Dr;const g=`${f}${h}`,v=d.indexOf(g);c.query.sql=`select id from ${g}${d.substring(v+g.length)}`,Xp(c,e.accessToken,i==null?void 0:i.signal).then(S=>{o(S)}).catch(S=>{console.error(S),Qt("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return I.useEffect(()=>{if(a){const{rows:u}=a.queryResult.queryResults,c=u.map(d=>`${d.values[0]}`).join(`
`);navigator.clipboard.writeText(c).then(()=>{Qt("Successfully copied to clipboard"),o(void 0)})}},[a]),n?p(co,{size:25}):p(Dl,{onCopy:()=>{l()}})};var cn=[],XO=function(){return cn.some(function(e){return e.activeTargets.length>0})},QO=function(){return cn.some(function(e){return e.skippedTargets.length>0})},qp="ResizeObserver loop completed with undelivered notifications.",ZO=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:qp}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=qp),window.dispatchEvent(e)},qr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(qr||(qr={}));var un=function(e){return Object.freeze(e)},KO=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,un(this)}return e}(),ov=function(){function e(t,n,r,a){return this.x=t,this.y=n,this.width=r,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,un(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,a=t.top,o=t.right,i=t.bottom,s=t.left,l=t.width,u=t.height;return{x:n,y:r,top:a,right:o,bottom:i,left:s,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Jc=function(e){return e instanceof SVGElement&&"getBBox"in e},iv=function(e){if(Jc(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var a=e,o=a.offsetWidth,i=a.offsetHeight;return!(o||i||e.getClientRects().length)},Lp=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},JO=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},yr=typeof window<"u"?window:{},pa=new WeakMap,Pp=/auto|scroll/,eA=/^tb|vertical/,tA=/msie|trident/i.test(yr.navigator&&yr.navigator.userAgent),mt=function(e){return parseFloat(e||"0")},Pn=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new KO((n?t:e)||0,(n?e:t)||0)},Dp=un({devicePixelContentBoxSize:Pn(),borderBoxSize:Pn(),contentBoxSize:Pn(),contentRect:new ov(0,0,0,0)}),sv=function(e,t){if(t===void 0&&(t=!1),pa.has(e)&&!t)return pa.get(e);if(iv(e))return pa.set(e,Dp),Dp;var n=getComputedStyle(e),r=Jc(e)&&e.ownerSVGElement&&e.getBBox(),a=!tA&&n.boxSizing==="border-box",o=eA.test(n.writingMode||""),i=!r&&Pp.test(n.overflowY||""),s=!r&&Pp.test(n.overflowX||""),l=r?0:mt(n.paddingTop),u=r?0:mt(n.paddingRight),c=r?0:mt(n.paddingBottom),d=r?0:mt(n.paddingLeft),f=r?0:mt(n.borderTopWidth),m=r?0:mt(n.borderRightWidth),h=r?0:mt(n.borderBottomWidth),g=r?0:mt(n.borderLeftWidth),v=d+u,S=l+c,_=g+m,w=f+h,C=s?e.offsetHeight-w-e.clientHeight:0,b=i?e.offsetWidth-_-e.clientWidth:0,y=a?v+_:0,E=a?S+w:0,x=r?r.width:mt(n.width)-y-b,N=r?r.height:mt(n.height)-E-C,k=x+v+b+_,A=N+S+C+w,q=un({devicePixelContentBoxSize:Pn(Math.round(x*devicePixelRatio),Math.round(N*devicePixelRatio),o),borderBoxSize:Pn(k,A,o),contentBoxSize:Pn(x,N,o),contentRect:new ov(d,l,x,N)});return pa.set(e,q),q},lv=function(e,t,n){var r=sv(e,n),a=r.borderBoxSize,o=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(t){case qr.DEVICE_PIXEL_CONTENT_BOX:return i;case qr.BORDER_BOX:return a;default:return o}},nA=function(){function e(t){var n=sv(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=un([n.borderBoxSize]),this.contentBoxSize=un([n.contentBoxSize]),this.devicePixelContentBoxSize=un([n.devicePixelContentBoxSize])}return e}(),cv=function(e){if(iv(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},rA=function(){var e=1/0,t=[];cn.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(u){var c=new nA(u.target),d=cv(u.target);s.push(c),u.lastReportedSize=lv(u.target,u.observedBox),d<e&&(e=d)}),t.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var a=r[n];a()}return e},Mp=function(e){cn.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(a){a.isActive()&&(cv(a.target)>e?n.activeTargets.push(a):n.skippedTargets.push(a))})})},aA=function(){var e=0;for(Mp(e);XO();)e=rA(),Mp(e);return QO()&&ZO(),e>0},ls,uv=[],oA=function(){return uv.splice(0).forEach(function(e){return e()})},iA=function(e){if(!ls){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return oA()}).observe(n,r),ls=function(){n.textContent="".concat(t?t--:t++)}}uv.push(e),ls()},sA=function(e){iA(function(){requestAnimationFrame(e)})},Ea=0,lA=function(){return!!Ea},cA=250,uA={attributes:!0,characterData:!0,childList:!0,subtree:!0},Vp=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],$p=function(e){return e===void 0&&(e=0),Date.now()+e},cs=!1,dA=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=cA),!cs){cs=!0;var r=$p(t);sA(function(){var a=!1;try{a=aA()}finally{if(cs=!1,t=r-$p(),!lA())return;a?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,uA)};document.body?n():yr.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Vp.forEach(function(n){return yr.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Vp.forEach(function(n){return yr.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),Ml=new dA,Fp=function(e){!Ea&&e>0&&Ml.start(),Ea+=e,!Ea&&Ml.stop()},fA=function(e){return!Jc(e)&&!JO(e)&&getComputedStyle(e).display==="inline"},pA=function(){function e(t,n){this.target=t,this.observedBox=n||qr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=lv(this.target,this.observedBox,!0);return fA(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),hA=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),ha=new WeakMap,Bp=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},ma=function(){function e(){}return e.connect=function(t,n){var r=new hA(t,n);ha.set(t,r)},e.observe=function(t,n,r){var a=ha.get(t),o=a.observationTargets.length===0;Bp(a.observationTargets,n)<0&&(o&&cn.push(a),a.observationTargets.push(new pA(n,r&&r.box)),Fp(1),Ml.schedule())},e.unobserve=function(t,n){var r=ha.get(t),a=Bp(r.observationTargets,n),o=r.observationTargets.length===1;a>=0&&(o&&cn.splice(cn.indexOf(r),1),r.observationTargets.splice(a,1),Fp(-1))},e.disconnect=function(t){var n=this,r=ha.get(t);r.observationTargets.slice().forEach(function(a){return n.unobserve(t,a.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),mA=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ma.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Lp(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ma.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Lp(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ma.unobserve(this,t)},e.prototype.disconnect=function(){ma.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const gA=$[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],vA=gA,yA=e=>{const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),t},bA=yA,wA=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:mA;function CA(){}function SA(e,t){const n=_A(),r=bA(t);return vA(()=>{let a=!1;const o=e&&"current"in e?e.current:e;if(!o)return CA;function i(s,l){a||r.current(s,l)}return n.subscribe(o,i),()=>{a=!0,n.unsubscribe(o,i)}},[e,n,r]),n.observer}function EA(){let e=!1,t=[];const n=new Map,r=new wA((a,o)=>{t=t.concat(a);function i(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const u=n.get(t[l].target);u==null||u.forEach(c=>c(t[l],o))}t=[],e=!1}e||window.requestAnimationFrame(i),e=!0});return{observer:r,subscribe(a,o){var i;r.observe(a);const s=(i=n.get(a))!==null&&i!==void 0?i:[];s.push(o),n.set(a,s)},unsubscribe(a,o){var i;const s=(i=n.get(a))!==null&&i!==void 0?i:[];if(s.length===1){r.unobserve(a),n.delete(a);return}const l=s.indexOf(o);l!==-1&&s.splice(l,1),n.set(a,s)}}}let us;const _A=()=>us||(us=EA());function Vl(e){const[t,n]=I.useState(!1),[r,a]=I.useState(!1),o=I.useRef(null);return SA(o,({target:i})=>{if(!t&&i){const s=i.getElementsByTagName("p")[0];s&&a(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),O("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:o,children:[r&&p("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:p(ce,{icon:t?"minusBoxOutline":"addBoxOutline",sx:{color:"grey.600"}})}),e.children]})}try{Vl.displayName="ExpandableTableDataCell",Vl.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}}}catch{}const xA=["","DESC","ASC"],zp={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class so extends I.Component{constructor(n){super(n);me(this,"resizer");me(this,"tableElement");me(this,"renderTable",(n,r,a,o)=>{var S,_;const i=(_=(S=this.props.queryContext).getLastQueryRequest)==null?void 0:_.call(S),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:u,isRowSelectionVisible:c}=this.props,d=s&&(In(s)&&my(s)||Dn(s)),f=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),m=!!this.props.synapseContext.accessToken,h=s&&d&&m&&this.allRowsHaveId(),g=!!(h&&!this.props.hideDownload),v=h&&u;return O("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[O("table",{ref:w=>this.tableElement=w,className:"table table-striped table-condensed",children:[p("thead",{className:"SRC_bordered",children:p("tr",{children:this.createTableHeader(n,r,a,f,v,g,c,i)})}),p("tbody",{children:this.createTableRows(o,n,f,v,g,c)})]}),p("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:p(GO,{})})]})});me(this,"handleColumnSortPress",n=>r=>{let a=sr(this.state.columnIconSortState);a.length===0&&(a=Array(this.getLengthOfPropsData()).fill(0));const o=sr(this.state.sortedColumnSelection),i=this.findSelectionIndex(o,n.name);i!==-1&&o.splice(i,1),a[n.index]=(a[n.index]+1)%wu.length,a[n.index]>0&&o.unshift({column:n.name,direction:xA[a[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=o,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:a,sortedColumnSelection:o})});me(this,"applyChangesFromQueryFilter",n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)});this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(n,r){const{isFetchingEntityHeaders:a,...o}=this.state,{isFetchingEntityHeaders:i,...s}=r,l=!Qr(this.props,n),u=!Qr(o,s),c=l||u;return c&&this.disableResize(),c}componentDidUpdate(n,r){Qr(n.queryContext.data,this.props.queryContext.data)?n.queryContext.entity&&this.props.queryContext.entity&&!Qr(In(n.queryContext.entity),In(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(zp)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new UO(this.tableElement,zp))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(n){var f,m;const{data:r,entity:a}=this.props.queryContext;if(!r||!a)return;if(this.state.isFetchingEntityHeaders&&!n)return;const o=sr(this.state.mapEntityIdToHeader),i=sr(this.state.mapUserIdToHeader),s=Op(r,re.ENTITYID),l=Op(r,re.USERID),u=Ap(r,o,s);(this.isEntityViewOrDataset()||a&&rh(a))&&this.allRowsHaveId()&&(((m=(f=r.queryResult)==null?void 0:f.queryResults)==null?void 0:m.rows)??[]).forEach(g=>{const v=`syn${g.rowId}`;u.add(v)});const c=Ap(r,i,l);if(u.size===0&&c.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),u.size>0){const h=Array.from(u).map(g=>({targetId:g}));try{const g=await tc(h,this.props.synapseContext.accessToken),{results:v}=g;v.forEach(S=>{o[S.id]=S})}catch(g){console.error("Error on retrieving entity header list , ",g)}}const d=[];if(c.size>0){const h=Array.from(c);try{(await hy(h,this.props.synapseContext.accessToken)).children.forEach(v=>{v.isIndividual?d.push(v.ownerId):i[v.ownerId]=v})}catch(g){console.error("Error on getGroupHeaders batch: ",g)}}if(d.length>0)try{(await jy(d)).list.forEach(g=>{i[g.ownerId]=g})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:o,mapUserIdToHeader:i,isFetchingEntityHeaders:!1})}render(){var v;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return dh;if(!this.props.queryContext.data)return p(j,{});const{queryContext:{data:n},queryVisualizationContext:{NoContentPlaceholder:r}}=this.props,{queryResult:a,columnModels:o=[]}=n,{facets:i=[]}=n,{isExpanded:s,isExportTableDownloadOpen:l}=this.state,u=this.props.queryContext.getLastQueryRequest(),c="";if(!((((v=n.queryResult)==null?void 0:v.queryResults.rows.length)??0)>0)&&u.query.offset===0)return p(r,{});const{rows:f,headers:m}=a.queryResults,h=p("div",{children:this.renderTable(m,o,i,f)}),g=p(j,{children:O("div",{className:c,children:[l&&p(Yn,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:u}),p("div",{children:h})]})});return O(I.Fragment,{children:[s&&O(Je,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[p(Je.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),p(Je.Body,{children:g})]}),!s&&g]})}allRowsHaveId(){var r;const{queryContext:{data:n}}=this.props;return((r=n==null?void 0:n.queryResult)==null?void 0:r.queryResults.rows.every(a=>!!a.rowId))??!1}isEntityViewOrDataset(){const{queryContext:{entity:n}}=this.props;return(n&&(In(n)||Dn(n)))??!1}createTableRows(n,r,a,o,i,s){const l=[],{queryContext:{data:u},queryVisualizationContext:{columnsToShowInTable:c,selectedRowIndices:d,setSelectedRowIndices:f},columnLinks:m=[]}=this.props,{selectColumns:h=[],columnModels:g=[]}=u,{mapEntityIdToHeader:v,mapUserIdToHeader:S}=this.state;return n.forEach((_,w)=>{var N,k;const C=(N=_.versionNumber)==null?void 0:N.toString(),b=`syn${_.rowId}`,y=_.values.map((A,q)=>{const L=r[q].name,T=c.includes(L),D=m.find(z=>z.matchColumnName===L),M=this.findSelectionIndex(this.state.sortedColumnSelection,L)===-1?"":"SRC-boldText";return T?p(Vl,{className:"SRC_noBorderTop",children:p(Pl,{columnType:r[q].columnType,columnValue:A,isBold:M,mapEntityIdToHeader:v,mapUserIdToHeader:S,columnLinkConfig:D,columnName:L,rowData:_.values,selectColumns:h,columnModels:g,rowId:_.rowId,rowVersionNumber:_.versionNumber})},`(${w}${A}${q})`):p("td",{className:"SRC-hidden"},`(${w},${q})`)});a&&y.unshift(p("td",{className:"SRC_noBorderTop",children:p(Ol,{entityId:b,entityVersionNumber:C},b)},b));const E=((k=v[b])==null?void 0:k.type)=="org.sagebionetworks.repo.model.FileEntity";o&&y.unshift(p("td",{className:"SRC_noBorderTop direct-download",children:E&&p(io,{associatedObjectId:b,entityVersionNumber:C})},`direct-download-${b}`)),i&&y.unshift(p("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:E&&p(kl,{entityId:b,entityVersionNumber:parseInt(C)})},`add-to-download-list-v2-${b}`)),s&&d&&y.unshift(p("td",{className:"SRC_noBorderTop",children:p(Ew,{label:"",checked:d.includes(w),onChange:A=>{const q=[...d];if(A)q.push(w);else{const L=q.indexOf(w);L>-1&&q.splice(L,1)}f(q)}})},`(${w},rowSelectColumn)`));const x=p("tr",{children:y},_.rowId??w);l.push(x)}),l}isSortableColumn(n){switch(n){case re.USERID:case re.ENTITYID:case re.FILEHANDLEID:case re.STRING_LIST:case re.INTEGER_LIST:case re.BOOLEAN_LIST:case re.DATE_LIST:case re.USERID_LIST:case re.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(n,r,a,o,i,s,l,u){const{sortedColumnSelection:c,columnIconSortState:d}=this.state,{queryVisualizationContext:{getColumnDisplayName:f,columnsToShowInTable:m},queryContext:{lockedColumn:h}}=this.props,g=n.map((v,S)=>{var w;if(m.includes(v.name)){const C=this.findSelectionIndex(c,v.name)!==-1,b=d[S]===void 0?0:d[S],y=a.findIndex(R=>R.columnName===v.name),E=y!==-1&&a[y].facetType==="enumeration",x=a[y],N=C?"SRC-primary-background-color SRC-anchor-light":"",k=C?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",A=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${N}`,q=f(v.name),L=r.find(R=>R.name===v.name),T=v.name.toLowerCase()===((w=h==null?void 0:h.columnName)==null?void 0:w.toLowerCase()),D=L&&L.name=="id"&&L.columnType==re.ENTITYID;return p("th",{children:O("div",{className:"SRC-split",children:[p("span",{style:{whiteSpace:"nowrap"},children:q}),O("div",{className:"SRC-centerContent",children:[E&&!T&&this.configureFacetDropdown(x,L,u),this.isSortableColumn(v.columnType)&&p("span",{role:"button","aria-label":"sort",tabIndex:0,className:A,onKeyPress:this.handleColumnSortPress({index:S,name:v.name}),onClick:this.handleColumnSortPress({index:S,name:v.name}),children:p(mo,{type:wu[b],cssClass:k})}),D&&p(YO,{})]})]})},v.name)}else return p("th",{className:"SRC-hidden"},v.name)});return o&&g.unshift(p("th",{children:p("div",{className:"SRC-centerContent",children:p("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),i&&g.unshift(p("th",{children:p("div",{className:"SRC-centerContent",children:" "})},"downloadColumn")),s&&g.unshift(p("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:p("div",{className:"SRC-centerContent",children:" "})},"addToV2DownloadListColumn")),l&&g.unshift(p("th",{children:p("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),g}findSelectionIndex(n,r){return n.length!==0?n.findIndex(a=>a.column===r):-1}advancedSearch(n){n&&n.preventDefault();const r=this.props.queryContext.getLastQueryRequest(),{query:a}=r,o=btoa(JSON.stringify(a)),i=r.entityId;window.open(`${We.PORTAL}#!Synapse:${i}/tables/query/${o}`,"_blank")}getLengthOfPropsData(){var r;const{data:n}=this.props.queryContext;return((r=n==null?void 0:n.queryResult)==null?void 0:r.queryResults.headers.length)??0}configureFacetDropdown(n,r,a){return p(Wb,{containerAs:"Dropdown",facetValues:n.facetValues,columnModel:r,onChange:o=>{Gb(a,n,this.applyChangesFromQueryFilter,o)},onClear:()=>{Yb(a,n,this.applyChangesFromQueryFilter)}})}}try{so.displayName="SynapseTable",so.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}}}}}catch{}function dv(){const{data:e}=Vt(),{showLastUpdatedOn:t}=qt();return t&&e&&e.lastUpdatedOn?p("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:O(At,{variant:"body1Italic",children:["Last updated on ",wr(Xt(e.lastUpdatedOn))]})}):p(j,{})}const $l=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,a=ie(),o=Vt(),i=qt();return O("div",{className:`FilterAndView ${i.topLevelControlsState.showFacetFilter?Kn:Jn}`,children:[t?p(so,{...t,synapseContext:a,queryContext:o,queryVisualizationContext:i,hideDownload:r}):p(j,{}),n?p(ao,{...n}):p(j,{}),p(dv,{})]})};try{$l.displayName="FilterAndView",$l.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}}}catch{}const NA="isShowingFacetFilters",IA="isHidingFacetFilters",Fl=e=>{const[t,n]=I.useState(!1),{searchParams:r,sql:a,sqlOperator:o,tableConfiguration:i,name:s,cardConfiguration:l,facetsToPlot:u,availableFacets:c,hideDownload:d,hideQueryCount:f,hideSqlEditorControl:m,searchConfiguration:h,limit:g=oc,initQueryJson:v,showLastUpdatedOn:S,showExportToCavatica:_=!1}=e,w=yc(r,o),C=v?JSON.parse(v):{sql:a,additionalFilters:w,limit:g,offset:0},b=yn(C.sql),{data:y}=ho(b),E=y&&ah(y)&&y.isSearchEnabled,x={entityId:b,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Dr|Mr|ic|ch|sc|lc|ac|cc,query:C};return p("div",{className:"QueryWrapperPlotNav",children:p(i?Nh:Ka,{...e,initQueryRequest:x,children:p(bc,{unitDescription:"results",rgbIndex:e.rgbIndex,columnAliases:e.columnAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||E,showLastUpdatedOn:S,noContentPlaceholderType:Ia.INTERACTIVE,children:p(wc,{children:k=>{if(k===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const A=k==null?void 0:k.isFacetsAvailable;return p(xh,{children:q=>{if(q===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const L=(q==null?void 0:q.topLevelControlsState.showFacetFilter)||(q==null?void 0:q.topLevelControlsState.showFacetFilter)===void 0;return O(j,{children:[p("div",{className:`ErrorBannerWrapper ${L?NA:IA}`,children:p(Xb,{})}),E?p(Qa,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):p(Ja,{...h,queryContext:k,queryVisualizationContext:q}),p(eo,{}),p(sl,{getLastQueryRequest:k.getLastQueryRequest,topLevelControlsState:q.topLevelControlsState,setTopLevelControlsState:q.setTopLevelControlsState}),p(to,{showColumnSelection:i!==void 0,name:s,hideDownload:d,hideQueryCount:f,hideFacetFilterControl:!A,hideVisualizationsControl:!A,hideSqlEditorControl:m,showExportToCavatica:_}),A&&p(j,{children:p(Qb,{availableFacets:c})}),p(Zb,{facetsToPlot:u}),p($l,{tableConfiguration:i,hideDownload:d,cardConfiguration:l}),t&&p(Yn,{getLastQueryRequest:k.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})};try{Fl.displayName="QueryWrapperPlotNav",Fl.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},availableFacets:{defaultValue:null,description:"",name:"availableFacets",required:!1,type:{name:"string[]"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}}}catch{}const TA=e=>({partMask:lc|Mr|ic|sc|Dr|cc,entityId:yn(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:oc,offset:0}}),Bl=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:a,sql:o,hideDownload:i,hideQueryCount:s,name:l,showTopLevelControls:u=!1,searchConfiguration:c,unitDescription:d="Results",rgbIndex:f,showLastUpdatedOn:m,noContentPlaceholderType:h=u?Ia.INTERACTIVE:Ia.STATIC,...g}=e,v=TA(o);n&&(v.query.additionalFilters=yc(n,r));const S=ie(),_=yn(o),{data:w}=ho(_);return p(Nh,{...g,initQueryRequest:v,children:p(bc,{rgbIndex:f,unitDescription:d,showLastUpdatedOn:m,noContentPlaceholderType:h,...g,children:p(wc,{children:C=>{if(C===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return p(xh,{children:b=>{if(b===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return O(j,{children:[u&&p(to,{showColumnSelection:!0,name:l,hideDownload:i,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),w&&ah(w)&&w.isSearchEnabled?p(Qa,{helpUrl:c==null?void 0:c.fullTextSearchHelpURL}):p(Ja,{...c,queryContext:C,queryVisualizationContext:b}),p(eo,{}),u&&p(_h,{frontText:""}),p(so,{synapseContext:S,queryContext:C,queryVisualizationContext:b,showAccessColumn:a,title:t,"data-testid":"SynapseTable",...g}),p(dv,{})]})}})}})})})};try{Bl.displayName="StandaloneQueryWrapper",Bl.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}}}catch{}function zl(e){const{query:t,showquery:n,tableonly:r}=e,a=n==="true",o=r==="true",i="Items";return o?p(Bl,{sql:t,name:i}):p(Fl,{sql:t,hideSqlEditorControl:!a,name:i,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{zl.displayName="MarkdownSynapseTable",zl.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}}}catch{}const kA={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function Hl(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let a="";return t.replace(r,(o,i,s,l)=>(a+=l,n.push(p("div",{children:p("a",{role:"link",className:`link ${kA[Number(i)]}`,"data-anchor":s,children:l})},l)),"")),p("div",{children:n},a)}try{Hl.displayName="MarkdownTableOfContents",Hl.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}function Ul(e){const{alias:t}=e,{data:n}=xw([t]);return n?p(Nw,{principalId:n[0].ownerId}):p(j,{})}try{Ul.displayName="MarkdownUserOrTeamBadge",Ul.__docgenInfo={description:"",displayName:"MarkdownUserOrTeamBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}}}catch{}function jl(e){return p(Iw,{params:e})}try{jl.displayName="MarkdownVideo",jl.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}}}catch{}function Wl(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return p(gs,{...n});case"image":return p(rl,{...n});case"plot":return p(al,{...n});case"toc":return p(Hl,{originalMarkup:r});case"badge":return p(Ul,{...n});case"iduReport":return p(Es,{...n});case"video":case"vimeo":case"youtube":return p(jl,{...n});case"synapsetable":return p(zl,{...n});case"provenance":return p(tl,{...n});case"preview":return p(ws,{...n});default:return console.warn(`Unsupported widget: ${t}.`),p(j,{})}}function Hp(e){return p(Yp,{children:p(Wl,{...e})})}try{Wl.displayName="MarkdownWidget",Wl.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}class Gl extends I.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const a=[];for(;r=n.exec(t);)a.push(r[1]);return a.map((o,i)=>{const s=i<a.length-1;return O(I.Fragment,{children:[O("button",{className:"SRC-markdown-bookmark",id:`bookmark${i}`,children:["[",i+1,"]"]}),p("span",{dangerouslySetInnerHTML:{__html:o}}),s&&p("br",{})]},i)})}render(){return O(I.Fragment,{children:[p("hr",{}),this.renderBookmarks()]})}}try{Gl.displayName="Bookmarks",Gl.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}}}catch{}const ds=markdownit({html:!0});class Xe extends $.Component{constructor(n){super(n);me(this,"markupRef");markdownitSynapse.init_markdown_it(ds,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const r="";ds.use(markdownitSynapse,r,"https://synapse.org").use(markdownitMath,r);const a={};this.props.markdown&&(a.markdown=this.props.markdown),this.state={md:ds,error:void 0,fileHandles:void 0,data:a,isLoading:!0},this.markupRef=$.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(n){const r=n.target;if(r.tagName==="A"||r.tagName==="BUTTON"){const a=n.target;if(a.id.substring(0,3)==="ref"){n.preventDefault();const o=Number(n.currentTarget.id.substring(3)),i=this.markupRef.current.querySelector(`#bookmark${o}`);try{i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}else if(n.currentTarget.id!==null&&a.getAttribute("data-anchor")){n.preventDefault();const o=a.getAttribute("data-anchor"),i=this.markupRef.current.querySelector(`#${o}`);try{i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}}}createHTML(n){if(!n)return{__html:""};const r=this.props.renderInline?this.state.md.renderInline(n):this.state.md.render(n);return{__html:Cr(r,Wh)}}processMath(){if(!this.markupRef.current)return;const n=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),r=new RegExp(/\\[()[\]]/,"g");n.forEach(a=>{if(a.textContent&&!a.getAttribute("processed")){a.setAttribute("processed","true");const o=a.textContent.replace(r,"");return katex.render(o,a,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const n=this.createHTML(markdownitSynapse.footnotes()).__html;if(n.length>0)return p(Gl,{footnotes:n})}async getWikiPageMarkdown(){const{ownerId:n,wikiId:r,objectType:a}=this.props;if(!(!n&&!r))try{const o=await gy(this.context.accessToken,n,r,a);try{const i=await this.getWikiAttachments(r||o.id);this.setState({data:o,fileHandles:i,error:void 0})}catch(i){console.error("fileHandlesErr = ",i)}}catch(o){console.error(`Error on wiki markdown load
`,o),this.setState({error:o})}}async getWikiAttachments(n){const{ownerId:r,objectType:a}=this.props;if(!r){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await vy(this.context.accessToken,r,n,a).then(o=>o).catch(o=>{console.error("Error on wiki attachment load ",o)})}addIdsToReferenceWidgets(n){const r=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let a=1;return n.replace(r,()=>{const o=a;return a+=1,`<a href="" id="ref${o}">[${o}]</a>`})}addIdsToTocWidgets(n){const r="SRC-header-";let a=1;const o=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return n.replace(o,i=>{const s=a;return a+=1,`${i.substring(0,3)} id="${r}${s}"${i.substring(3)}`})}renderMarkdown(){let n=this.createHTML(this.state.data.markdown).__html;if(n=this.addIdsToReferenceWidgets(n),n=this.addIdsToTocWidgets(n),n.length>0){const a=new DOMParser().parseFromString(n,"text/html");return p(j,{children:this.recursiveRender(a.body,n)})}}recursiveRender(n,r){if(n.nodeType===Node.TEXT_NODE)return O(j,{children:[" ",n.textContent," "]});if(n.nodeType===Node.ELEMENT_NODE&&n instanceof HTMLElement){const a=n.tagName.toLowerCase()==="body"?"span":n.tagName.toLowerCase(),o=n.getAttribute("data-widgetparams");if(o)return this.processHTMLWidgetMapping(o,r);const i=n.attributes,s={};for(let u=0;u<i.length;u++){let c="",d="";const f=i.item(u);f&&(c=f.name,d=f.value),c&&d&&(s[c]=d)}if(n.childNodes.length===0)return p(a,{...s});const l=Array.from(n.childNodes).map((u,c)=>p($.Fragment,{children:this.recursiveRender(u,r)},c));return p(a,{...s,children:l})}}decodeXml(n){const r={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return n.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(a,o)=>r[o])}processHTMLWidgetMapping(n,r){const a=this.decodeXml(n),o=a.indexOf("?");if(o===-1)return p(Hp,{widgetType:a,widgetParamsMapped:{},originalMarkup:r},JSON.stringify(a));const i=a.substring(0,o),s={};return a.substring(o+1).split("&").forEach(l=>{let[u,c]=l.split("=");c=decodeURIComponent(c),s[u]=c}),p(Hp,{widgetType:i,widgetParamsMapped:s,originalMarkup:r},JSON.stringify(a))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(n){let r=this.props.ownerId!==n.ownerId;r=r||this.props.wikiId!==n.wikiId,r&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:n,loadingSkeletonRowCount:r}=this.props,{isLoading:a,error:o}=this.state,i={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(o)return p(Jp,{error:o});const s=this.addBookmarks(),l=O(nl,{wikiContext:i,children:[a&&p(j,{children:r?p(fc,{numCols:1,numRows:r}):p("span",{className:"spinner"})}),this.renderMarkdown(),s&&p("div",{children:this.addBookmarks()})]});return n?p("span",{className:"markdown markdown-inline",ref:this.markupRef,children:l}):p("div",{className:"markdown",ref:this.markupRef,children:l})}}me(Xe,"contextType",Pr);try{Xe.displayName="MarkdownSynapse",Xe.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}}}catch{}function Lr({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:a=!0,entityId:o,onHide:i}){const{accessToken:s}=ie(),[l,u]=I.useState(!0),c=r==null?void 0:r.isApproved,[d,f]=I.useState(c);let m="";n.concreteType===Ue.ManagedACTAccessRequirement||n.concreteType===Ue.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?m="Request access":m="Request access via Synapse.org":m="I Accept Terms of Use",I.useEffect(()=>{f(c)},[c]);const h=()=>{window.open(`${We.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${o}`)},g=()=>{if(n.concreteType===Ue.ManagedACTAccessRequirement||n.concreteType===Ue.ACTAccessRequirement)h(),i==null||i();else if(!d){const x={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:_c.APPROVED};oh(s,x).then(N=>{f(!0)}).catch(N=>console.error("Error on post access approval: ",N))}},v=n.termsOfUse,S=n.actContactInfo,_=n.concreteType===Ue.TermsOfUseAccessRequirement,w=n.concreteType===Ue.ACTAccessRequirement,C=_&&v||w&&S;let b=p(j,{});t?b=p("div",{className:"AcceptRequirementsMarkdown",children:p(Xe,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):C&&(b=p(Xe,{markdown:_?v:S}));const y=n.concreteType===Ue.ManagedACTAccessRequirement;return p(j,{children:O("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[p(dn,{isCompleted:d}),O("div",{className:"terms-of-use-content",children:[d?O("div",{children:[O("p",{children:[y?"Your data access request has been approved.":"You have accepted the terms of use.",y&&p("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),p("a",{className:"view-terms-button",onClick:()=>{u(!l)},children:"View Terms"})]}),p("div",{className:`view-terms ${l?"hidden":"show"}`,children:b})]}):b,s&&a&&O("div",{className:`button-container ${d?"hide":"default"}`,children:[p("div",{className:"accept-button-container",children:p("button",{className:"accept-button",onClick:g,children:m})}),p("div",{className:"not-accept-button-container",children:p("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})}try{Lr.displayName="AcceptedRequirements",Lr.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}function RA({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState();return I.useEffect(()=>{(async()=>{try{const u=await lo(o,e.id);s(u)}catch(u){console.error("Error on get ACTAccessRequirement",u)}})()},[o,e]),p(Lr,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:i,onHide:n,entityId:a})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}const Yl=e=>{const{accessToken:t}=ie(),{formSubmitRequestObject:n,onHide:r}=e,[a,o]=I.useState(),[i,s]=I.useState(!1),l=async()=>{if(n)try{await ih(n,t)?r==null||r():(o({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),s(!0))}catch(u){console.log("CancelRequestDataAccess: Error updating form",u),o({key:"danger",message:`Sorry, there is an error in submitting your request. ${u.reason||""}. Please close this dialog and try again later`}),s(!0)}};return O(j,{children:[p(Vn,{children:O($r,{direction:"row",alignItems:"center",gap:"5px",children:["Save Changes",p(Fr,{sx:{flexGrow:1}}),p(Br,{onClick:r,children:p(ce,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),O($n,{children:[p("p",{children:"Would you like to save your recent changes?"}),a&&p(gn,{variant:a.key,transition:!1,children:a.message})]}),O(go,{children:[!i&&O(j,{children:[p(je,{variant:"outlined",onClick:r,children:"Cancel"}),p(je,{variant:"contained",onClick:()=>{l()},children:"Save changes"})]}),i&&p(je,{variant:"contained",onClick:r,children:"Close"})]})]})};try{Yl.displayName="CancelRequestDataAccess",Yl.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const Xl=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:a,showButton:o=!0,onHide:i,requestDataStepCallback:s}=e,{accessToken:l}=ie(),[u,c]=I.useState(!0),d=r==null?void 0:r.isApproved,[f,m]=I.useState(d),[h,g]=I.useState(),[v,S]=I.useState(),[_,w]=I.useState(!1);I.useEffect(()=>{m(d),r!=null&&r.currentSubmissionStatus&&(g(r.currentSubmissionStatus.state),E(r.currentSubmissionStatus))},[d]);const C=R=>{s==null||s({managedACTAccessRequirement:R,step:1})},b=async()=>{if(a.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement")if(l)if(h===Ve.SUBMITTED&&!_){const R={key:"danger",message:O(j,{children:[p("strong",{children:"Error canceling your data access request."}),p("br",{}),"Please try again later."]})};try{(await yy(r==null?void 0:r.currentSubmissionStatus.submissionId,l)).state===Ve.CANCELLED?(S({key:"success",message:p("strong",{children:"Your data access request has been canceled."})}),w(!0)):S(R)}catch(M){console.log("RequestDataAccess: error canceling data access request:",M),S(R)}}else C(a);else s==null||s({managedACTAccessRequirement:a,step:4});else if(!f){const R={requirementId:a==null?void 0:a.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:_c.APPROVED};oh(l,R).then(M=>{m(!0)}).catch(M=>console.error("Error on post access approval: ",M))}},y=()=>{if(a.concreteType===Ue.ManagedACTAccessRequirement||a.concreteType===Ue.ACTAccessRequirement)if(h){let R;switch(h){case Ve.SUBMITTED:R=_?"Update Request":"Cancel Request";break;case Ve.APPROVED:case Ve.REJECTED:case Ve.CANCELLED:R="Update Request"}return R}else return"Request access";else return"I Accept Terms of Use"},E=R=>{switch(R.state){case Ve.SUBMITTED:S({key:"primary",message:p("strong",{children:"You have submitted a data access request."})});break;case Ve.APPROVED:S({key:"success",message:p("strong",{children:"Your data access request has been approved."})});break;case Ve.REJECTED:S({key:"danger",message:O(j,{children:[p("strong",{children:"Your data access request has been rejected."}),p("br",{}),R.rejectedReason||""]})});break}return p(j,{})},x=a.termsOfUse,N=a.actContactInfo,k=a.concreteType===Ue.TermsOfUseAccessRequirement,A=a.concreteType===Ue.ACTAccessRequirement,q=k&&x||A&&N;let L=p(j,{});n?L=O("div",{className:"AcceptRequirementsMarkdown",children:[n&&p(Xe,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),v&&p(gn,{className:"access-requirement-list-alert",variant:v.key,transition:!1,children:v.message})]}):q&&(L=p(Xe,{markdown:k?x:N}));const T=a.concreteType===Ue.ManagedACTAccessRequirement;return p(j,{children:O("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[p(dn,{isCompleted:f}),O("div",{className:"terms-of-use-content",children:[f?O("div",{children:[p("p",{children:T?"Your data access request has been approved.":"You have accepted the terms of use."}),O("p",{style:{marginBottom:"0"},children:[T&&p("button",{className:"update-request-button",onClick:()=>{C(a)},style:{paddingLeft:"0",marginRight:"2rem"},children:y()}),p("a",{onClick:()=>{c(!u)},children:"View Terms"})]}),p("div",{className:`view-terms ${u?"hidden":"show"}`,children:L})]}):L,o&&O("div",{className:`button-container ${f?"hide":"default"}`,children:[p("div",{className:"accept-button-container",children:p("button",{className:"accept-button",onClick:()=>{b()},children:y()})}),p("div",{className:"not-accept-button-container",children:p("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})};try{Xl.displayName="RequestDataAccess",Xl.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((args: RequestDataStepCallbackArgs) => void)"}}}}}catch{}const OA=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:a,onHide:o,requestDataStepCallback:i}=e,{accessToken:s}=ie(),[l,u]=I.useState();return I.useEffect(()=>{(async()=>{try{const d=await lo(s,r.id);u(d)}catch(d){console.error("Error on get ManagedACTAccessRequirement",d)}})()},[s,r]),p(Xl,{accessRequirement:r,accessRequirementStatus:a,entityId:t,user:n,wikiPage:l,onHide:o,requestDataStepCallback:i})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: RequestDataStepCallbackArgs) => void)"}}}}}catch{}const Ql=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:a}=ie(),[o,i]=I.useState(""),[s,l]=I.useState(""),[u,c]=I.useState(""),[d,f]=I.useState(),m=I.useRef({});let h=!0;I.useEffect(()=>(h&&(f(void 0),g()),()=>{h=!1}),[a]);const g=async()=>{try{const _=await by(String(n.id),a);_.id&&(m.current=_,i(_.projectLead),l(_.institution),c(_.intendedDataUseStatement))}catch(_){console.log("RequestDataAccessStep1: Error getting research project data: ",_)}},v=(_="")=>O(j,{children:[p("strong",{children:"Unable to update research project data."}),p("br",{}),_]}),S=_=>{_.preventDefault();const w=Object.assign({},m.current,{accessRequirementId:String(n.id),institution:s,projectLead:o,intendedDataUseStatement:u});try{wy(w,a).then(C=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:C.id})}).catch(C=>{console.log("RequestDataAccessStep1: Error updating research project data: ",C),f({key:"danger",message:v(C.reason)})})}catch(C){console.log("RequestDataAccessStep1: Error updating research project data: ",C),f({key:"danger",message:v(C.reason)})}};return O(j,{children:[p(Vn,{children:O($r,{direction:"row",alignItems:"center",gap:"5px",children:["Request Access",p(Fr,{sx:{flexGrow:1}}),p(Br,{onClick:r,children:p(ce,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p($n,{children:O(ge,{className:"access-request-form1",onSubmit:S,children:[p("p",{children:"Please tell us about your project."}),O(ge.Group,{children:[p(ge.Label,{htmlFor:"project-lead",children:"Project Lead"}),p(ge.Control,{id:"project-lead",type:"text",value:o,required:!0,onChange:_=>i(_.target.value)})]}),O(ge.Group,{children:[p(ge.Label,{htmlFor:"institution",children:"Institution"}),p(ge.Control,{id:"institution",type:"text",value:s,required:!0,onChange:_=>l(_.target.value)})]}),n.isIDURequired&&O(ge.Group,{children:[O(ge.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&p("i",{id:"idu-visible",children:"this will be visible to the public"})]}),p(ge.Control,{id:"data-use",as:"textarea",value:u,rows:10,required:!0,onChange:_=>c(_.target.value)})]}),d&&p(gn,{variant:d.key,transition:!1,children:d.message})]})}),O(go,{children:[p(je,{variant:"outlined",onClick:r,children:"Cancel"}),p(je,{variant:"contained",type:"submit",onClick:S,children:"Save changes"})]})]})};try{Ql.displayName="RequestDataAccessStep1",Ql.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: RequestDataStepCallbackArgs) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const Rn=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:a,fileName:o}=e,{accessToken:i}=ie(),s=async()=>{if(!n.fileHandleId||!i)return;const l={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const c=(await Qn(l,i)).requestedFiles[0].preSignedURL;c?window.open(c):console.log("Fail to get file download link")}catch(u){console.log("Fail to get file download link",u)}};return p(j,{children:p(dt,{id:t,variant:a,className:r,onClick:()=>{s()},children:o})})};try{Rn.displayName="DirectDownloadButton",Rn.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}}}catch{}const Zl=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:a,researchProjectId:o}=e,{accessToken:i}=ie(),[s,l]=I.useState(),[u,c]=I.useState(),[d,f]=I.useState(),[m,h]=I.useState([]),[g,v]=I.useState(),[S,_]=I.useState(),[w,C]=I.useState(!1),[b,y]=I.useState([]),E={},x={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let N=!0;I.useEffect(()=>(N&&(_(void 0),k()),()=>{N=!1}),[i,o]);const k=async()=>{const P=await Cy(String(n.id),i);if(P.accessorChanges){const V=new Set;P.accessorChanges=P.accessorChanges.filter(U=>V.has(U.userId)?!1:V.add(U.userId))}P.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&C(!0),P.researchProjectId=o,v(P),A(P),q(P)},A=P=>{const V=P.accessorChanges,U=[];!V||!V.length?(U.push(a.ownerId),v(H=>Object.assign({},H,{accessorChanges:[{userId:a.ownerId,type:xt.GAIN_ACCESS}]}))):V.forEach(H=>{U.push(H.userId)});const G=U.map(H=>Sy(i,H));Promise.all(G).then(H=>{const X=H.map((K,Y)=>{var pe;const de=V&&((pe=V[Y])!=null&&pe.type)?V[Y].type:xt.GAIN_ACCESS;return{profile:K,accessType:de}});y(X)})},q=P=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const V={associateObjectId:String(n.id),associateObjectType:Le.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};x.requestedFiles.push(V),E[n.ducTemplateFileHandleId]||(E[n.ducTemplateFileHandleId]=[]),E[n.ducTemplateFileHandleId].push("DUCTemplate"),l(V)}if(n.isDUCRequired&&P.ducFileHandleId){const V={associateObjectId:P.id,associateObjectType:Le.DataAccessRequestAttachment,fileHandleId:P.ducFileHandleId};x.requestedFiles.push(V),E[P.ducFileHandleId]||(E[P.ducFileHandleId]=[]),E[P.ducFileHandleId].push("DUC"),c(V)}if(n.isIRBApprovalRequired&&P.irbFileHandleId){const V={associateObjectId:P.id,associateObjectType:Le.DataAccessRequestAttachment,fileHandleId:P.irbFileHandleId};x.requestedFiles.push(V),E[P.irbFileHandleId]||(E[P.irbFileHandleId]=[]),E[P.irbFileHandleId].push("IRB"),f(V)}P.attachments&&P.attachments.length&&P.attachments.forEach(V=>{x.requestedFiles.push({associateObjectId:P.id,associateObjectType:Le.DataAccessRequestAttachment,fileHandleId:V}),E[V]||(E[V]=[]),E[V].push("attachments")}),x.requestedFiles.length&&Qn(x,i).then(V=>{V.requestedFiles.forEach(U=>{const G=U.fileHandle.fileName,H=E[U.fileHandleId];H.forEach(X=>{switch(X){case"DUCTemplate":l(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("DUCTemplate"),1);break;case"DUC":c(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("DUC"),1);break;case"IRB":f(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("IRB"),1);break;case"attachments":h(K=>[...K,{fileName:G,associateObjectId:P.id,associateObjectType:Le.DataAccessRequestAttachment,fileHandleId:U.fileHandleId}]),E[U.fileHandleId].splice(H.indexOf("attachments"),1);break}})})})},L=async()=>{if(g)try{const P=await ih(g,i);if(P&&P.etag){const V={requestId:P.id,requestEtag:P.etag,subjectId:r,subjectType:Ec.ENTITY};v(H=>Object.assign({},H,{etag:P.etag}));const U=await _y(V,i),G=D(U);U.state===Ve.REJECTED?_({key:"danger",message:G}):t==null||t({step:5})}else _({key:"danger",message:T()})}catch(P){console.log("RequestDataAccessStep2: Error updating form",P),_({key:"danger",message:T(P.reason)})}},T=(P="")=>O(j,{children:[p("strong",{children:"Sorry, there is an error in submitting your request."}),p("br",{}),P]}),D=P=>{const V="The information has been ";switch(P.state){case Ve.SUBMITTED:return O("strong",{children:[V," submitted."]});case Ve.APPROVED:return O("strong",{children:[V," approved."]});case Ve.CANCELLED:return O("strong",{children:[V," canceled."]});case Ve.REJECTED:return O(j,{children:[O("strong",{children:[V," rejected."]})," ",P.rejectedReason,". Please close this dialog and try again later."]});default:return p(j,{})}},R=P=>{const V=b.filter(G=>G.profile.ownerId!==P);y(V);const U=V.map(G=>({userId:G.profile.ownerId,type:G.accessType}));v(G=>Object.assign({},G,{accessorChanges:U}))},M=P=>{const V=m.filter(G=>G.fileHandleId!==P);h(V);const U=V.map(G=>G.fileHandleId);v(G=>Object.assign({},G,{attachments:U}))},z=P=>{if(P.resp&&P.success){const V=P.resp;if(P.context==="attachments"){const U=g!=null&&g.attachments?g==null?void 0:g.attachments:[];U==null||U.push(V.fileHandleId),v(G=>Object.assign({},G,{attachments:U})),h(G=>[...G,{fileName:V.fileName,fileHandleId:V.fileHandleId}])}else v(U=>Object.assign({},U,{[P.context]:V.fileHandleId})),P.context==="ducFileHandleId"&&c(U=>Object.assign({},U,{fileName:V.fileName,fileHandleId:V.fileHandleId})),P.context==="irbFileHandleId"&&f(U=>Object.assign({},U,{fileName:V.fileName,fileHandleId:V.fileHandleId}))}else!P.success&&P.error&&(console.log("RequestDataAccessStep2: Error uploading the file",P.error),_({key:"danger",message:T(P.error.reason)}))},B=P=>{if(!b.map(U=>U.profile.ownerId).includes(P.ownerId)){y(H=>[...H,{profile:{ownerId:P.ownerId,firstName:P.firstName??"",lastName:P.lastName??"",userName:P.userName},accessType:xt.GAIN_ACCESS}]);const U={userId:P.ownerId,type:xt.GAIN_ACCESS},G=(g==null?void 0:g.accessorChanges)||[];G.push(U),v(H=>Object.assign({},H,{accessorChanges:G}))}},F=(P,V)=>{const U=P.target.value;switch(V){case"publications":v(G=>Object.assign({},G,{publication:U}));break;case"summaryOfUse":v(G=>Object.assign({},G,{summaryOfUse:U}));break}},W=(P,V)=>{const U=[...b],G=U.findIndex(K=>K.profile.ownerId===V);U[G].accessType=P,y(U);const H=(g==null?void 0:g.accessorChanges)||[],X=H.findIndex(K=>K.userId===V);H[X].type=P,v(K=>Object.assign({},K,{accessorChanges:H}))},Z=()=>{let P="",V="";return n.isCertifiedUserRequired&&(P="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",V="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(P="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",V="All data requesters must have a validated user profile."),P&&V?O(j,{children:[V,p("a",{href:P,target:"_blank",rel:"noreferrer",children:p(ce,{icon:"info"})})]}):p(j,{})};return O(j,{children:[p(Vn,{children:O($r,{direction:"row",alignItems:"center",gap:"5px",children:["Request Access",p(Fr,{sx:{flexGrow:1}}),p(Br,{onClick:e.onHide,children:p(ce,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p($n,{children:O(ge,{className:"access-request-form2",onSubmit:P=>P.preventDefault(),children:[p("p",{children:"Please provide the information below to submit the request for access."}),O(ge.Group,{children:[p(ge.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),p("br",{}),O("span",{className:"requester-label",children:[n.isDUCRequired&&O(j,{children:["This list should match those listed on your DUC.",p("br",{})]}),Z()]}),p(Cw,{id:"requesters",typeFilter:Ey.USERS_ONLY,onSelectCallback:B,filterUserIds:b.map(P=>P.profile.ownerId)})]}),p(ge.Group,{style:{marginBottom:"4rem"},children:b.map((P,V)=>O("div",{className:"list-items",children:[p(dc,{userProfile:P.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),a.ownerId!==P.profile.ownerId&&P.accessType===xt.GAIN_ACCESS&&p(je,{className:"clear-x",variant:"text",onClick:()=>R(P.profile.ownerId),children:p(ce,{icon:"clear"})}),w&&P.accessType!==xt.GAIN_ACCESS&&p(j,{children:p(Sw,{id:`accessor-renewal-${P.profile.ownerId}`,value:P.accessType,options:[{label:"Renew",value:xt.RENEW_ACCESS},{label:"Revoke",value:xt.REVOKE_ACCESS}],onChange:U=>W(U,P.profile.ownerId)})})]},`accessor-${V}`))}),(n==null?void 0:n.isDUCRequired)&&O(j,{children:[O(ge.Group,{children:[p(ge.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),p("br",{}),s&&p("div",{children:p(Rn,{fileHandleAssociation:{associateObjectId:s==null?void 0:s.associateObjectId,associateObjectType:s.associateObjectType,fileHandleId:s.fileHandleId},fileName:s.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),O(ge.Group,{children:[p(ge.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),p("br",{}),u&&p("div",{children:p(Rn,{fileHandleAssociation:{associateObjectId:u.associateObjectId,associateObjectType:u.associateObjectType,fileHandleId:u.fileHandleId},fileName:u==null?void 0:u.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),p(Oo,{id:"duc-browse",uploadCallback:z,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&O(ge.Group,{children:[p(ge.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),p("br",{}),d&&p("div",{children:p(Rn,{fileHandleAssociation:{associateObjectId:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d==null?void 0:d.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),p(Oo,{id:"irb-browse",uploadCallback:z,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&O(ge.Group,{children:[p(ge.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),p("br",{}),m.map((P,V)=>O("div",{className:"list-items",children:[p(Rn,{fileHandleAssociation:{associateObjectId:P.associateObjectId,associateObjectType:P.associateObjectType,fileHandleId:P.fileHandleId},fileName:P==null?void 0:P.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),p(je,{className:"clear-x",variant:"text",onClick:()=>M(P.fileHandleId),children:p(ce,{icon:"clear"})})]},`file-attachment-${V}`)),p(Oo,{id:"attachment-browse",uploadCallback:z,context:"attachments"})]}),w&&O(j,{children:[O(ge.Group,{children:[p(ge.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),p(ge.Control,{id:"publications",as:"textarea",rows:3,onChange:P=>F(P,"publications")})]}),O(ge.Group,{children:[p(ge.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),p(ge.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:P=>F(P,"summaryOfUse")})]})]}),S&&p(gn,{variant:S.key,transition:!1,children:S.message})]})}),p(go,{children:O(j,{children:[p(je,{variant:"outlined",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:g}),children:"Cancel"}),p(je,{variant:"contained",onClick:()=>{L()},children:"Submit"})]})})]})};try{Zl.displayName="RequestDataAccessStep2",Zl.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: RequestDataStepCallbackArgs) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const Kl=e=>{const{onHide:t}=e;return O(j,{children:[p(Vn,{children:O($r,{direction:"row",alignItems:"center",gap:"5px",children:["Your Data Access Request Has Been Submitted",p(Fr,{sx:{flexGrow:1}}),p(Br,{onClick:t,children:p(ce,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p($n,{children:p("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),p(go,{children:p(je,{variant:"contained",onClick:t,children:"Finish"})})]})};try{Kl.displayName="RequestDataAccessSuccess",Kl.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function AA({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(void 0),[c,d]=I.useState(!1);return I.useEffect(()=>{(async()=>{try{d(!0);const m=await lo(o,e.id);s(m);const h=zy|Hy;if(t!=null&&t.ownerId){const g=await xy(t.ownerId,h,o);u(g)}}catch(m){console.error("Error on get Self Sign Access Requirement: ",m)}finally{d(!1)}})()},[e,o,t]),O(j,{children:[e.isCertifiedUserRequired&&O("div",{className:"requirement-container",children:[p(dn,{isCompleted:l==null?void 0:l.isCertified}),O("div",{children:[O("p",{className:"self-sign-access-title bold-text",children:["You must first become a",p("a",{className:"self-sign-access-certified bold-text",href:`${We.PORTAL}#!Quiz:`,children:" certified user"})]}),c&&p("span",{className:"spinner"}),p("p",{className:`self-sign-access-certified-success-text ${l!=null&&l.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&O("div",{className:"requirement-container",children:[p(dn,{isCompleted:l==null?void 0:l.isVerified}),O("div",{children:[O("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",p("a",{className:"self-sign-access-validated bold-text",href:`${We.PORTAL}#!Profile:v/settings`,children:" user profile validated"})]}),c&&p("span",{className:"spinner"}),p("p",{className:`self-sign-access-verified-success-text ${l!=null&&l.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),p(Lr,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:a})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}function qA({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(!1);return I.useEffect(()=>{(async()=>{u(!0);try{const d=await lo(o,e.id);s(d)}catch(d){console.error("Error on prepare terms of use ",d)}finally{u(!1)}})()},[o,e]),O(j,{children:[l&&p("span",{className:"spinner"}),p(Lr,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:a})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}var Ue=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(Ue||{});const Jl=e=>e.filter(LA).length>0,LA=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},Up=async(e,t)=>{const n=t.map(i=>Iy(e,i.id)),r=await Promise.all(n),a=t.map(i=>({accessRequirement:i,accessRequirementStatus:r.find(s=>Number(s.accessRequirementId)===i.id)}));return Db(a,i=>-1*Number(i.accessRequirementStatus.isApproved))};function ec({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:a}){var k;const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(),[c,d]=I.useState(),[f,m]=I.useState(""),[h,g]=I.useState(),v={ids:[e],type:"ENTITY_HEADER"},_=Dw(o)||!i,w=sh(v),{data:C}=Ny();I.useEffect(()=>{let A=!1;return(async()=>{try{if(!_)return;if(n){const L=await Up(o,n);A||s(L)}else{const L=await nh(o,e),T=await Up(o,L);A||s(T)}}catch(L){console.error("Error on get access requirements: ",L)}})(),()=>{A=!0}},[o,e,n,_]);const b=!!o,y=(A,q)=>{switch(A.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return p(AA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return p(qA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return p(OA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e,requestDataStepCallback:E});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return p(RA,{accessRequirement:A,accessRequirementStatus:q,user:C,onHide:t,entityId:e});default:return}},E=A=>{const{managedACTAccessRequirement:q,step:L,researchProjectId:T,formSubmitRequestObject:D}=A;q&&d(q),T&&m(T),D&&g(D),u(L)},x=O(j,{children:[p(Vn,{children:O($r,{direction:"row",alignItems:"center",gap:"5px",children:["Data Access Request",p(Fr,{sx:{flexGrow:1}}),p(Br,{onClick:t,children:p(ce,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),p($n,{children:O("div",{children:[p("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),p("span",{className:"AccessRequirementList__file-icon-container",children:p(ce,{icon:"file",sx:{width:"30px"}})})," ",a&&O("span",{children:[a," File(s)"]}),!a&&p("a",{className:"AccessRequirementList__register-text-link",href:`${We.PORTAL}#!Synapse:${e}`,children:(k=w[0])==null?void 0:k.name}),p("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),O("div",{className:"requirement-container",children:[p(dn,{isCompleted:b}),O("div",{children:[!b&&O(j,{children:[O("p",{className:"AccessRequirementList__signin",children:[p("a",{className:`${uc} SRC-boldText `,children:"Sign in "}),"with a Sage Platform (Synapse) user account."]}),O("p",{children:["If you do not have a Sage Account, you can",p("a",{className:"register-text-link bold-text",href:`${We.PORTAL}#!RegisterAccount:0`,children:" Register for free."})]})]}),b&&O("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",O("b",{children:[C==null?void 0:C.userName,"@synapse.org"]})]})]})]}),i==null?void 0:i.map(({accessRequirement:A,accessRequirementStatus:q})=>p($.Fragment,{children:y(A,q)},A.id))]})})]});let N=x;if(r){switch(l){case 1:N=p(Ql,{managedACTAccessRequirement:c,requestDataStepCallback:E,onHide:()=>t==null?void 0:t()});break;case 2:N=p(Zl,{user:C,researchProjectId:f,managedACTAccessRequirement:c,entityId:e,requestDataStepCallback:E,onHide:()=>t==null?void 0:t()});break;case 3:N=p(Yl,{formSubmitRequestObject:h,onHide:()=>t==null?void 0:t()});break;case 4:N=O(j,{children:[p(Vn,{children:"Please Log In"}),p($n,{className:"AccessRequirementList login-modal ",children:p(qy,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:N=p(Kl,{onHide:()=>t==null?void 0:t()});break;default:N=x}return p(ww,{className:l?"AccessRequirementList modal-auto-height":"AccessRequirementList",onClose:()=>t==null?void 0:t(),open:!0,fullWidth:!0,maxWidth:"md",children:N})}return p("div",{className:"AccessRequirementList",children:N})}try{ec.displayName="AccessRequirementList",ec.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}}}catch{}try{Jl.displayName="checkHasUnsportedRequirement",Jl.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}}}catch{}export{ec as A,Tp as C,io as D,Ow as E,bl as F,kw as G,hn as H,Dl as I,p0 as L,Ks as M,dl as P,Fl as Q,Rw as S,_c as a,Xe as b,f0 as c,dq as d,fq as e,qw as f,Aw as g,Ue as h,v0 as i,g0 as j,Ol as k,wl as l,kp as m,$O as n,el as o,nN as p,Tw as q,wO as r,Bl as s,xt as t,Oh as u};
//# sourceMappingURL=AccessRequirementList-8dc77531.js.map
