{"version":3,"file":"entityHandlers-0c84f6de.js","sources":["../../src/mocks/mock_upload_destination.ts","../../src/mocks/msw/handlers/entityHandlers.ts"],"sourcesContent":["import {\n  ExternalGoogleCloudUploadDestination,\n  ExternalObjectStoreUploadDestination,\n  ExternalS3UploadDestination,\n  ExternalUploadDestination,\n  S3UploadDestination,\n  UploadDestination,\n  UploadType,\n} from '@sage-bionetworks/synapse-types'\nimport { SYNAPSE_STORAGE_LOCATION_ID } from '../synapse-client'\n\nexport const MOCK_EXTERNAL_S3_STORAGE_LOCATION_ID = 1111\nexport const MOCK_EXTERNAL_GOOGLE_CLOUD_STORAGE_LOCATION_ID = 2222\nexport const MOCK_EXTERNAL_STORAGE_LOCATION_ID = 3333\nexport const MOCK_EXTERNAL_OBJECT_STORE_STORAGE_LOCATION_ID = 4444\n\nconst baseUploadDestination: UploadDestination = {\n  storageLocationId: SYNAPSE_STORAGE_LOCATION_ID,\n  uploadType: UploadType.S3,\n  banner: '',\n  concreteType: 'org.sagebionetworks.repo.model.file.S3UploadDestination',\n}\n\nexport const mockS3UploadDestination: S3UploadDestination = {\n  ...baseUploadDestination,\n  baseKey: 'exampleS3BaseKey',\n  stsEnabled: true,\n  concreteType: 'org.sagebionetworks.repo.model.file.S3UploadDestination',\n}\n\nexport const mockExternalS3UploadDestination: ExternalS3UploadDestination = {\n  ...mockS3UploadDestination,\n  storageLocationId: MOCK_EXTERNAL_S3_STORAGE_LOCATION_ID,\n  endpointUrl: 'https://my-endpoint.fake',\n  bucket: 'myExternalS3Bucket',\n  concreteType:\n    'org.sagebionetworks.repo.model.file.ExternalS3UploadDestination',\n}\n\nexport const mockExternalGoogleCloudUploadDestination: ExternalGoogleCloudUploadDestination =\n  {\n    ...baseUploadDestination,\n    baseKey: 'exampleGCPBaseKey',\n    storageLocationId: MOCK_EXTERNAL_GOOGLE_CLOUD_STORAGE_LOCATION_ID,\n    uploadType: UploadType.GOOGLECLOUDSTORAGE,\n    bucket: 'myExternalGCPBucket',\n    concreteType:\n      'org.sagebionetworks.repo.model.file.ExternalGoogleCloudUploadDestination',\n  }\n\nexport const mockExternalUploadDestination: ExternalUploadDestination = {\n  ...baseUploadDestination,\n  storageLocationId: MOCK_EXTERNAL_STORAGE_LOCATION_ID,\n  uploadType: UploadType.HTTPS,\n  url: 'https://myurl.fake',\n  concreteType: 'org.sagebionetworks.repo.model.file.ExternalUploadDestination',\n}\n\nexport const mockExternalObjectStoreUploadDestination: ExternalObjectStoreUploadDestination =\n  {\n    ...baseUploadDestination,\n    storageLocationId: MOCK_EXTERNAL_OBJECT_STORE_STORAGE_LOCATION_ID,\n    uploadType: UploadType.HTTPS,\n    endpointUrl: 'https://my-endpoint.fake',\n    bucket: 'myExternalObjectStoreBucket',\n    keyPrefixUUID: 'uuidKeyPrefix',\n    concreteType:\n      'org.sagebionetworks.repo.model.file.ExternalObjectStoreUploadDestination',\n  }\n\nexport const mockUploadDestinations = [\n  mockS3UploadDestination,\n  mockExternalS3UploadDestination,\n  mockExternalGoogleCloudUploadDestination,\n  mockExternalUploadDestination,\n  mockExternalObjectStoreUploadDestination,\n]\n","import { rest } from 'msw'\nimport {\n  ENTITY,\n  ENTITY_BUNDLE_V2,\n  ENTITY_HEADERS,\n  ENTITY_ID,\n  ENTITY_ID_VERSION,\n  ENTITY_ID_VERSIONS,\n  ENTITY_JSON,\n  ENTITY_SCHEMA_BINDING,\n} from '../../../utils/APIConstants'\nimport {\n  Entity,\n  EntityBundle,\n  EntityHeader,\n  EntityJson,\n  EntityPath,\n  PaginatedResults,\n  ProjectHeaderList,\n  Reference,\n  UploadDestination,\n  UploadType,\n  VersionableEntity,\n  VersionInfo,\n} from '@sage-bionetworks/synapse-types'\nimport mockEntities from '../../entity'\nimport { MOCK_INVALID_PROJECT_NAME } from '../../entity/mockEntity'\nimport { mockSchemaBinding } from '../../mockSchema'\nimport { SynapseApiResponse } from '../handlers'\nimport { uniqueId } from 'lodash-es'\nimport { mockProjectsEntityData } from '../../entity/mockProject'\nimport { mockUploadDestinations } from '../../mock_upload_destination'\n\nexport function getEntityBundleHandler(\n  backendOrigin: string,\n  bundle?: Partial<EntityBundle>,\n) {\n  return rest.post(\n    `${backendOrigin}${ENTITY_BUNDLE_V2(':entityId')}`,\n    async (req, res, ctx) => {\n      let status = 404\n      let response: SynapseApiResponse<EntityBundle> = {\n        reason: `Mock Service worker could not find a mock entity bundle with ID ${req.params.entityId}`,\n      }\n      if (bundle) {\n        response = bundle as EntityBundle\n        status = 200\n      } else {\n        const entityData = mockEntities.find(\n          entity => entity.id === req.params.entityId,\n        )\n        if (entityData?.bundle) {\n          response = entityData.bundle\n          status = 200\n        }\n      }\n      return res(ctx.status(status), ctx.json(response))\n    },\n  )\n}\n\nexport function getVersionedEntityBundleHandler(\n  backendOrigin: string,\n  bundle?: Partial<EntityBundle>,\n) {\n  return rest.post(\n    `${backendOrigin}${ENTITY_BUNDLE_V2(':entityId', ':versionNumber')}`,\n    async (req, res, ctx) => {\n      const entityId = req.params.entityId\n      const versionNumber = parseInt(req.params.versionNumber as string)\n      let status = 404\n      let response: SynapseApiResponse<EntityBundle> = {\n        reason: `Mock Service worker could not find a mock entity bundle with ID ${entityId}`,\n      }\n      if (bundle) {\n        response = bundle as EntityBundle\n        status = 200\n      } else {\n        const entityData = mockEntities.find(entity => entity.id === entityId)\n        if (entityData) {\n          const bundle = entityData.bundle\n          if (entityData.versions && entityData.versions[versionNumber]) {\n            response = {\n              ...bundle,\n              entity: entityData.versions[versionNumber],\n            } as EntityBundle\n          } else {\n            response = bundle as EntityBundle\n          }\n          status = 200\n        }\n      }\n      return res(ctx.status(status), ctx.json(response))\n    },\n  )\n}\n\nexport const getEntityHandlers = (backendOrigin: string) => [\n  /**\n   * Create a new entity\n   */\n  rest.post(`${backendOrigin}${ENTITY}`, async (req, res, ctx) => {\n    let status = 200\n    const requestBody = await req.json<Entity>()\n    let response: SynapseApiResponse<Entity> = { reason: '...' }\n    if (!requestBody) {\n      status = 400\n      response = {\n        reason: `Mock service worker received the following malformed body for PUT ${ENTITY} : ${JSON.stringify(\n          requestBody,\n        )}`,\n      }\n    } else {\n      if (requestBody.name === MOCK_INVALID_PROJECT_NAME) {\n        response.reason = 'Invalid project name'\n        status = 403\n      } else {\n        response = { id: uniqueId('syn'), ...requestBody }\n      }\n    }\n\n    return res(ctx.status(status), ctx.json(response))\n  }),\n\n  /**\n   * Get entity by ID\n   */\n  rest.get(\n    `${backendOrigin}${ENTITY_ID(':entityId')}`,\n    async (req, res, ctx) => {\n      let status = 404\n      let response: SynapseApiResponse<Entity> = {\n        reason: `Mock Service worker could not find a mock entity with ID ${req.params.entityId}`,\n      }\n\n      const entityData = mockEntities.find(\n        entity => entity.id === req.params.entityId,\n      )\n      if (entityData) {\n        response = entityData.entity\n        status = 200\n      }\n      return res(ctx.status(status), ctx.json(response))\n    },\n  ),\n\n  rest.get(\n    `${backendOrigin}${ENTITY_ID_VERSIONS(':entityId')}`,\n    async (req, res, ctx) => {\n      let status = 404\n      let response: SynapseApiResponse<PaginatedResults<VersionInfo>> = {\n        reason: `Mock Service worker could not find mock entity versions for ID ${req.params.entityId}`,\n      }\n\n      const entityData = mockEntities.find(\n        entity => entity.id === req.params.entityId,\n      )\n      if (entityData && entityData.versionInfo) {\n        response = { results: entityData.versionInfo }\n        status = 200\n      }\n      return res(ctx.status(status), ctx.json(response))\n    },\n  ),\n\n  rest.get(\n    `${backendOrigin}${ENTITY_ID_VERSION(':entityId', ':versionNumber')}`,\n    async (req, res, ctx) => {\n      let status = 404\n      const entityId = req.params.entityId\n      const versionNumber = req.params.versionNumber.toString()\n      const requestedVersionNumber = parseInt(versionNumber)\n\n      let response: SynapseApiResponse<VersionableEntity> = {\n        reason: `Mock Service worker could not find a mock versioned entity with ID ${entityId}.${versionNumber}`,\n      }\n\n      const entityData = mockEntities.find(\n        entity => entity.id === req.params.entityId,\n      )\n      if (\n        entityData &&\n        entityData.versions &&\n        entityData.versions[requestedVersionNumber]\n      ) {\n        response = entityData.versions[\n          requestedVersionNumber\n        ] as VersionableEntity\n        status = 200\n      }\n      return res(ctx.status(status), ctx.json(response))\n    },\n  ),\n\n  getEntityBundleHandler(backendOrigin),\n  getVersionedEntityBundleHandler(backendOrigin),\n\n  rest.get(\n    `${backendOrigin}${ENTITY_SCHEMA_BINDING(':entityId')}`,\n    async (req, res, ctx) => {\n      return res(ctx.status(200), ctx.json(mockSchemaBinding))\n    },\n  ),\n  rest.get(\n    `${backendOrigin}${ENTITY_JSON(':entityId')}`,\n\n    async (req, res, ctx) => {\n      let status = 404\n      let response: SynapseApiResponse<EntityJson> = {\n        reason: `Mock Service worker could not find a mock entity bundle with ID ${req.params.entityId}`,\n      }\n      const entityData = mockEntities.find(\n        entity => entity.id === req.params.entityId,\n      )\n      if (entityData?.json) {\n        response = entityData.json\n        status = 200\n      }\n\n      return res(ctx.status(status), ctx.json(response))\n    },\n  ),\n\n  rest.post(\n    `${backendOrigin}${ENTITY_HEADERS}`,\n\n    async (req, res, ctx) => {\n      let status = 404\n      let response: SynapseApiResponse<PaginatedResults<EntityHeader>> = {\n        reason: `Mock Service worker could not find a mock entity bundle with ID ${req.params.entityId}`,\n      }\n\n      const referenceList = req.body as { references: Reference[] }\n      const entityData = mockEntities\n        .filter(entity =>\n          referenceList.references.find(ref => ref.targetId === entity.id),\n        )\n        .map(entity => entity.entityHeader)\n        .filter((header): header is EntityHeader => !!header)\n\n      if (entityData) {\n        response = { results: entityData }\n        status = 200\n      }\n\n      return res(ctx.status(status), ctx.json(response))\n    },\n  ),\n\n  rest.get(\n    `${backendOrigin}${ENTITY_ID(':entityId')}/path`,\n\n    async (req, res, ctx) => {\n      let status = 404\n      let response: SynapseApiResponse<EntityPath> = {\n        reason: `Mock Service worker could not find a mock entity path using ID ${req.params.entityId}`,\n      }\n      const entityData = mockEntities.find(e => req.params.entityId === e.id)\n\n      if (entityData && entityData.path) {\n        response = entityData.path\n        status = 200\n      }\n\n      return res(ctx.status(status), ctx.json(response))\n    },\n  ),\n\n  rest.get(\n    `${backendOrigin}/file/v1/entity/:id/uploadDestination`,\n    async (req, res, ctx) => {\n      const response: UploadDestination = {\n        banner: '',\n        storageLocationId: 1,\n        uploadType: UploadType.S3,\n        concreteType: 'org.sagebionetworks.repo.model.file.S3UploadDestination',\n      }\n      return res(ctx.status(200), ctx.json(response))\n    },\n  ),\n\n  rest.get(\n    `${backendOrigin}/file/v1/entity/:id/uploadDestination/:storageLocationId`,\n    async (req, res, ctx) => {\n      let status = 404\n      let response: SynapseApiResponse<UploadDestination> = {\n        reason: `Mock Service worker could not find an uploadDestination using storageLocationId ${req.params.storageLocationId}`,\n      }\n      const uploadDestination = mockUploadDestinations.find(\n        e => Number(req.params.storageLocationId) === e.storageLocationId,\n      )\n\n      if (uploadDestination) {\n        response = uploadDestination\n        status = 200\n      }\n\n      return res(ctx.status(status), ctx.json(response))\n    },\n  ),\n\n  rest.get(`${backendOrigin}/repo/v1/projects`, async (req, res, ctx) => {\n    const response: ProjectHeaderList = {\n      results: mockProjectsEntityData.map(p => ({\n        name: p.name,\n        id: p.id,\n        lastActivity: '2024-01-04T21:11:59.000Z',\n        modifiedBy: parseInt(p.entity.modifiedBy!),\n        modifiedOn: p.entity.modifiedOn!,\n      })),\n    }\n    return res(ctx.status(200), ctx.json(response))\n  }),\n]\n"],"names":["MOCK_EXTERNAL_S3_STORAGE_LOCATION_ID","MOCK_EXTERNAL_GOOGLE_CLOUD_STORAGE_LOCATION_ID","MOCK_EXTERNAL_STORAGE_LOCATION_ID","MOCK_EXTERNAL_OBJECT_STORE_STORAGE_LOCATION_ID","baseUploadDestination","SYNAPSE_STORAGE_LOCATION_ID","UploadType","mockS3UploadDestination","mockExternalS3UploadDestination","mockExternalGoogleCloudUploadDestination","mockExternalUploadDestination","mockExternalObjectStoreUploadDestination","mockUploadDestinations","getEntityBundleHandler","backendOrigin","bundle","rest","ENTITY_BUNDLE_V2","req","res","ctx","status","response","entityData","mockEntities","entity","getVersionedEntityBundleHandler","entityId","versionNumber","getEntityHandlers","ENTITY","requestBody","MOCK_INVALID_PROJECT_NAME","uniqueId","ENTITY_ID","ENTITY_ID_VERSIONS","ENTITY_ID_VERSION","requestedVersionNumber","ENTITY_SCHEMA_BINDING","mockSchemaBinding","ENTITY_JSON","ENTITY_HEADERS","referenceList","ref","header","e","uploadDestination","mockProjectsEntityData","p"],"mappings":"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"}