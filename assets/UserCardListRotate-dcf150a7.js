import{a as A,j as d}from"./jsx-runtime-095bf462.js";import{r as p}from"./index-8db94870.js";import{g as h,p as N}from"./sqlFunctions-283a0d8b.js";import{L as T,k as V}from"./SynapseConstants-a1d83293.js";import{u as k,bf as b}from"./EntityTypeUtils-9d897fe7.js";import"./getEndpoint-ac94413e.js";import{a as w}from"./use-deep-compare-effect.esm-cb3aaa60.js";import{U as x,C as O}from"./UserCardList-2af4fd8e.js";import{L as Q}from"./UserCard-1b962118.js";import{B as F}from"./Button-5637ed55.js";const M="sage_rotate_uids",B=3,J=(e=[],s=B,r)=>{let o=[],t=[];const u=localStorage.getItem(r);if(u!=null&&(o=JSON.parse(u)),o.length){const a=e.filter(n=>!o.includes(n));if(a.length>=s)return t=a.slice(0,s),localStorage.setItem(r,JSON.stringify(o.concat(t))),t;{localStorage.removeItem(r);const n=e.slice(0,s-a.length);return localStorage.setItem(r,JSON.stringify(n)),a.concat(n)}}else return t=e.slice(0,s),localStorage.setItem(r,JSON.stringify(t)),t},I=({sql:e,count:s,useQueryResultUserData:r=!1,size:o=T,summaryLink:t,summaryLinkText:u,selectedFacets:a,searchParams:n,sqlOperator:f})=>{const{accessToken:y}=k(),[c,L]=p.useState([]),[E,U]=p.useState(),[m,g]=p.useState();let R=!0;const _=`${M}-${e}-${JSON.stringify(a)}`;return w(()=>(async function(){g(!0);const C=h(n,f),D=N(e),S=await b({partMask:V,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:D,query:{sql:e,additionalFilters:C,selectedFacets:a}},y),{queryResult:i}=S;if(i!=null&&i.queryResults.rows){const q=i.queryResults.headers.findIndex(l=>l.columnType===O.USERID),v=i.queryResults.rows.map(l=>l.values[q]).filter(l=>l!==null);if(R){const l=J(v,s,_);L(l),r&&U(S),g(!1)}}else console.log("UserCardListRotate: Error getting data")}(),()=>{R=!1}),[e,a,s,y,n,f]),A("div",{className:"UserCardListRotate bootstrap-4-backport",children:[m&&d(Q,{}),!m&&c.length===0&&d("p",{className:"font-italic",children:"No one was found."}),!m&&c.length>0&&d(x,{list:c,size:o,data:E}),t&&u&&d("div",{className:"UserCardListRotate__summary",children:d(F,{variant:"secondary",size:"lg",href:t,children:u})})]})};try{I.displayName="UserCardListRotate",I.__docgenInfo={description:"",displayName:"UserCardListRotate",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},useQueryResultUserData:{defaultValue:{value:"false"},description:"",name:"useQueryResultUserData",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"LARGE USER CARD"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},summaryLink:{defaultValue:null,description:"",name:"summaryLink",required:!1,type:{name:"string"}},summaryLinkText:{defaultValue:null,description:"",name:"summaryLinkText",required:!1,type:{name:"string"}},selectedFacets:{defaultValue:null,description:"",name:"selectedFacets",required:!1,type:{name:"FacetColumnRequest[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}}}}}catch{}export{I as U};
//# sourceMappingURL=UserCardListRotate-dcf150a7.js.map
