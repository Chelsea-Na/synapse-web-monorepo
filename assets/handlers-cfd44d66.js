import{l as i}from"./index-0d715fb8.js";import{g as _}from"./entityHandlers-6ca9afb1.js";import{M as w,b as N,c as P,d as O,m as U,e as L,a as q,g as B}from"./userProfileHandlers-89dbc37c.js";import{g as F,B as K}from"./getEndpoint-ac94413e.js";import{c as V}from"./accessRequirementHandlers-ef984b5d.js";import{g as G}from"./MockSubmission-be0878d7.js";import{a as W,g as J}from"./fileHandlers-60486a9d.js";import{g as X}from"./researchProjectHandlers-706cd451.js";import{bl as j,bm as D,bn as Y,bo as z,bp as Q}from"./SynapseClient-d41c1eb3.js";import{q as p,n as v}from"./index-3a31b023.js";import{m as A,a as $}from"./mock_discussion-e66e1e9c.js";import{M as c}from"./mock_user_profile-915263e8.js";import{m as Z}from"./mockProject-0be794b5.js";import{u as S}from"./uniqueId-4d05949d.js";import{f as y}from"./fakerUtils-0756b5b6.js";import{r as k}from"./remove-f204f5d4.js";import{c as x,b as ee,a as te}from"./tableQueryHandlers-cf7dda73.js";import{a as I}from"./mockEvaluationQueue-0a1305c8.js";import{M as se}from"./mockAnnotationColumns-6525609e.js";import{g as re}from"./personalAccessTokenHandlers-6790d93b.js";const ae=[...A],b=[...$];function ne(e,s){return b.filter(r=>r.forumId===e).filter(r=>{switch(s){case p.NO_FILTER:return!0;case p.DELETED_ONLY:return r.isDeleted;case p.EXCLUDE_DELETED:return!r.isDeleted}})}function oe(e){return[i.rest.get(`${e}${j}/:id`,async(s,r,t)=>{let a=404,n={reason:`MSW could not find a mock forum object with ID ${s.params.id}`};const u=ae.find(o=>o.id===s.params.id);return u&&(a=200,n=u),r(t.status(a),t.json(n))}),i.rest.get(`${e}${D}/:id`,async(s,r,t)=>{let a=404,n={reason:`MSW could not find a mock discussion thread bundle object with ID ${s.params.id}`};s.params.id==="messageUrl"&&(n={reason:"GET /thread/messageUrl is not yet implemented"});const u=b.find(o=>o.id===s.params.id);return u&&(a=200,n=u),r(t.status(a),t.json(n))}),i.rest.post(`${e}${D}`,async(s,r,t)=>{const a=await s.json(),n={id:S(),forumId:a.forumId,projectId:Z.id,title:a.title,createdOn:new Date().toISOString(),createdBy:String(c),modifiedOn:new Date().toISOString(),etag:"etag",messageKey:"todo key",numberOfViews:0,numberOfReplies:0,lastActivity:new Date().toISOString(),activeAuthors:[String(c)],isEdited:!1,isDeleted:!1,isPinned:!1};return b.push(n),r(t.status(201),t.json(n))}),i.rest.get(`${e}${Y(":forumId")}`,async(s,r,t)=>{const a=s.url.searchParams.get("offset"),n=a?parseInt(a):0,u=s.url.searchParams.get("limit"),o=u?parseInt(u):10,l=s.params.filter??p.EXCLUDE_DELETED,m=ne(s.params.forumId,l),g={results:m.slice(n,n+o),totalNumberOfResults:m.length};return r(t.status(200),t.json(g))}),i.rest.get(`${e}${j}/:id/moderators`,async(s,r,t)=>{const a={results:[String(c)],totalNumberOfResults:1};return r(t.status(200),t.json(a))})]}function H(e){return{subscriptionId:String(y.number.int({min:1e3,max:9999})),subscriberId:String(c),createdOn:y.date.anytime().toISOString(),...e}}const ue=A.map(e=>H({objectId:e.id,objectType:v.FORUM})),ie=$.map(e=>H({objectType:v.THREAD,objectId:e.id})),f=[...ue,...ie];function E(e,s="ASC",r=0,t=10,a){const n=f.filter(o=>e?o.objectType===e:!0).filter(o=>a?a.includes(o.objectId):!0).sort((o,l)=>{const m=new Date(l.createdOn).getTime()-new Date(o.createdOn).getTime();return s==="ASC"?m:-1*m}),u=n.length;return{results:n.slice(r,r+t),totalNumberOfResults:u}}function me(e){return[i.rest.get(`${e}/repo/v1/subscription/all`,async(s,r,t)=>{const a=s.url.searchParams.get("objectType")??void 0,n=s.url.searchParams.get("sortDirection")??void 0,u=s.url.searchParams.get("offset"),o=u?parseInt(u):void 0,l=s.url.searchParams.get("limit"),m=l?parseInt(l):void 0,g=E(a??void 0,n,o,m);return r(t.status(200),t.json(g))}),i.rest.post(`${e}/repo/v1/subscription/list`,async(s,r,t)=>{const a=await s.json(),n=E(a.objectType,a.sortDirection,void 0,void 0,a.idList);return r(t.status(200),t.json(n))}),i.rest.post(`${e}/repo/v1/subscription`,async(s,r,t)=>{const a=await s.json(),n={subscriptionId:S(),subscriberId:String(c),objectId:a.objectId,objectType:a.objectType,createdOn:new Date().toISOString()};return f.push(n),r(t.status(201),t.json(n))}),i.rest.delete(`${e}/repo/v1/subscription/:id`,async(s,r,t)=>{const a=s.params.id;return k(f,n=>n.subscriptionId===a),r(t.status(200),t.body(""))}),i.rest.post(`${e}/repo/v1/subscription/subscribers`,async(s,r,t)=>{const a=await s.json(),u={subscribers:f.filter(o=>o.objectType===a.objectType&&o.objectId===a.objectId).map(o=>o.subscriberId)};return r(t.status(200),t.json(u))})]}function le(e){return[i.rest.get(`${e}${z(":evaluationId")}`,async(s,r,t)=>{let a=404,n={reason:`Mock Service worker could not find a mock evaluation queue with ID ${s.params.evaluationId}`};const u=I.find(o=>o.id===s.params.entityId);return u&&(n=u,a=200),r(t.status(a),t.json(n))}),i.rest.get(`${e}${Q}`,async(s,r,t)=>{let a=200,n={results:I,totalNumberOfResults:I.length};return r(t.status(a),t.json(n))})]}const d="1234",ce="f1b29c62-e987-4e69-9cec-198bf017a586",M=e=>{const s=Math.pow(10,e-1);return Math.floor(Math.random()*9*s+s)},h=e=>{const s=M(6).toString(),r=M(6).toString();return{id:s,etag:ce,challengeId:d,teamId:r,message:`Message for team ${r}`,...e}},T=[h({teamId:String(w),challengeId:d}),h({teamId:String(N),challengeId:d}),h({teamId:String(P),challengeId:d})];function de(e){return i.rest.get(`${e}/repo/v1/entity/:id/challenge`,async(s,r,t)=>{const a={id:d,etag:"f5e9df54-360b-4ede-9a17-f7f5680c8dd4",projectId:s.params.id,participantTeamId:String(O)};return r(t.status(200),t.json(a))})}function pe(e){return i.rest.get(`${e}/repo/v1/challenge/:challengeId/challengeTeam`,async(s,r,t)=>{const a={results:T,totalNumberOfResults:T.length};return r(t.status(200),t.json(a))})}function fe(e){return i.rest.post(`${e}/repo/v1/challenge/:challengeId/challengeTeam`,async(s,r,t)=>{const n={...await s.json(),id:S(),etag:"abcdef0987654321"};return T.push(n),r(t.status(200),t.json(n))})}function ge(e){return i.rest.get(`${e}/repo/v1/challenge/:challengeId/submissionTeams`,async(s,r,t)=>{const a={results:[],totalNumberOfResults:0};return r(t.status(200),t.json(a))})}function Ie(e){return[de(e),ge(e),fe(e),pe(e)]}const he=[...U];function R(e){return he.find(s=>s.id===e)}const C=[...L];function be(e,s){return C.find(r=>r.teamId===e&&r.userId===s)}function Te(e){C.push(e)}function Se(e){return i.rest.get(`${e}/repo/v1/team/:teamId/member/:memberId/membershipStatus`,async(s,r,t)=>{const a=s.params.teamId,n=s.params.memberId;let u,o;return R(a)?(u=be(a,n)??{teamId:a,userId:n,isMember:!1,hasOpenInvitation:!1,hasOpenRequest:!1,canJoin:!0,membershipApprovalRequired:!1,hasUnmetAccessRequirement:!1,canSendEmail:!1},o=200):(u={reason:`getTeamMembershipStatusHandler could not locate a team with ID ${a}`},o=404),r(t.status(o),t.json(u))})}function je(e){return i.rest.put(`${e}/repo/v1/team/:teamId/member/:memberId`,async(s,r,t)=>{const a=s.params.teamId,n=s.params.memberId;let u,o;return R(a)?(Te({teamId:a,userId:n,isMember:!0,hasOpenInvitation:!1,hasOpenRequest:!1,canJoin:!0,membershipApprovalRequired:!1,hasUnmetAccessRequirement:!1,canSendEmail:!1}),u="",o=201):(u={reason:`getTeamMembershipStatusHandler could not locate a team with ID ${a}`},o=404),r(t.status(o),t.json(u))})}function De(e){return[Se(e),je(e)]}const ye=e=>[i.rest.options("*",async(s,r,t)=>r(t.status(200))),i.rest.get(`${e}/auth/v1/authenticatedOn`,async(s,r,t)=>r(t.status(200),t.json({authenticatedOn:new Date().toISOString()}))),..._(e),...q(e),B(e,!0,!0),...G(e),...V(e),...W(e),...X(e),...J(e),...oe(e),...me(e),...le(e),x(e),...ee(se,e),...te(e),...re(e),...De(e),...Ie(e)];ye(F(K.REPO_ENDPOINT));export{ye as g};
