import{j as f,a as O,F as j}from"./jsx-runtime-670450c2.js";import{r as I,R as V}from"./index-f1f749bf.js";import{a8 as Wf,a9 as ie,aa as Fg,ab as Tn,ac as Bg,ad as Gf,ae as vl,af as zg,ag as Qn,ah as Hg,ai as Ug,aj as yl,ak as jg,al as Oe,am as Wg,an as Yf,E as Oi,ao as Gg,ap as Xf,aq as Yg,ar as _c,as as cr,at as kn,au as Qf,av as Xg,aw as Zf,ax as Qg,ay as Zg,az as bl,aA as Kg,aB as Jg,aC as fn,aD as ev,aE as Sn,aF as Kf,aG as Jf,aH as ep,aI as Nc,aJ as tp,aK as tv,aL as nv,aM as rv,aN as np,aO as av,aP as br,aQ as ov,aR as rp,aS as iv,aT as sv,aU as ap,aV as ka,aW as op,aX as lv,aY as cv,aZ as pe,a_ as uv,a$ as dv,b0 as fv,b1 as pv,b2 as hv,b3 as mv,b4 as gv,b5 as vv,b6 as yv}from"./SynapseContext-8885c8e1.js";import{P as Be,g as bv,B as wv}from"./getEndpoint-5374ab4d.js";import{u as ip}from"./useGetInfoFromIds-253a6c0d.js";import{I as he,H as Sv,S as Cv,t as Ev}from"./IconSvg-770ec98b.js";import{a as _v,c as en,T as Xe,f as Nv}from"./Clear-4868d5d0.js";import{B as Ce}from"./Button-7d415009.js";import{h as sp,T as xv,M as Iv,i as jr,j as ur,k as dr,l as wl,m as Tv,n as kv,o as Sl,B as lp,p as Cl,q as El,r as _l,S as Nl,s as Rv,t as cp,O as Ai,u as xc,G as Ov,F as Av,v as Ic,w as qv,c as Pv,d as Dv}from"./SynapseConstants-9273577d.js";import{e as xl}from"./queryKeys-dd803d9a.js";import{S as Ra,l as up}from"./LoadingScreen-dfc91527.js";import{u as Lv,U as Cn,a as Il,g as Mv}from"./UserCard-8850ba84.js";import{A as tn}from"./FullWidthAlert-2e72abf6.js";import{p as Vv,S as dp,D as $v}from"./RegularExpressions-bc0adf55.js";import{u as Rn}from"./react-intersection-observer.esm-8bf16175.js";import{u as fp}from"./useInfiniteQuery-5370f429.js";import{f as Zn}from"./DateFormatter-f7bb0f4e.js";import{d as Vt}from"./dayjs.min-e0adaab4.js";import{S as Tl}from"./SkeletonTable-b219e7bb.js";import{S as qi}from"./Skeleton-444b9e51.js";import{T as Ct}from"./Typography-1aca7d5c.js";import{E as Tc}from"./EntityIcon-9321e1ed.js";import{c as Oa,g as Fv}from"./_commonjsHelpers-042e6b4d.js";import{c as Aa}from"./_commonjs-dynamic-modules-302442b1.js";import{_ as Bv,a as zv,b as Hv,k as Uv,c as jv}from"./uniq-b503d6a4.js";import{r as pp,f as Wv}from"./index.browser-ac474deb.js";import{f as hp,_ as mp,a as Gv,b as Yv,c as Xv,d as Qv,e as Zv,g as Kv,l as Jv,s as ey,F as ty}from"./core.esm-2ce1cb65.js";import{b as nn,r as ny,c as ry,a as ay,_ as oy,k as kl,d as iy}from"./_baseIteratee-dd2a3782.js";import{b as fr,D as sy,E as gp,l as ly,v as cy,m as vp,h as uy,i as yp,w as dy,k as fy,F as py,C as bp,G as hy}from"./hasIn-6ae41e3d.js";import{i as my,u as gy,p as vy,f as yy,C as by}from"./CustomSelectWidget-75648ad7.js";import{i as wy}from"./isString-b52675be.js";import{_ as Sy,a as Cy}from"./_baseUniq-7e37c67e.js";import{t as Ey,r as _y}from"./now-030ccb2b.js";import{m as Ny}from"./mapValues-1c647352.js";import{r as xy}from"./index-96c5f47c.js";import{C as wp,d as Qt}from"./ToastMessage-45d6abdb.js";import{B as kc}from"./Button-ad1d45e7.js";import{d as Iy,s as Ty}from"./union-1051e946.js";import{i as ky}from"./isEqual-e18dc7e7.js";import{_ as qa}from"./objectWithoutPropertiesLoose-4f48578a.js";import{_ as Ne}from"./extends-98964cd2.js";import{g as Rl,a as Ol,s as Ft,k as St,f as Al,i as Wr,c as ql,p as sn}from"./styled-8a301de6.js";import{k as Sp,c as Cp}from"./emotion-react.browser.esm-9a383ad7.js";import{c as Ry,P as Oy}from"./factory-76e91d33.js";import{p as On,g as Pl,a as Ay}from"./sqlFunctions-ddfa966a.js";import{u as Pa}from"./useEntity-66976d20.js";import{T as Gr,N as qy,I as Rc}from"./SynapseTableConstants-942d2b0b.js";import{S as Ya,Q as An,a as qn,u as It,b as Et,c as Py,d as Dy,e as Dl,N as Yr,f as Ll,g as Ly,T as Ep,h as My,E as Vy,i as $y,j as Fy,k as _p,l as By,F as zy,m as Hy,n as Np}from"./FacetNav-5ffe67a2.js";import{r as Uy}from"./relativeTime-93b00284.js";import{u as Oc}from"./use-deep-compare-effect.esm-2b920fea.js";import{u as jy,a as Wy}from"./useDownloadList-d8ef5007.js";import{u as xp,a as Gy,b as Yy}from"./useGetQueryResultBundle-3f13df48.js";import{M as se,a as Xy,b as Qy}from"./Modal-02fe67fa.js";import{i as Zy,r as Ky,h as Jy}from"./queryUtils-9265af17.js";import{C as re}from"./ColumnType-5116adf5.js";import{i as eb,a as tb,C as nb,b as rb}from"./QueryFilter-9c814760.js";import{E as Ml,I as Da,C as Vl,a as ab,S as ob}from"./ElementWithTooltip-ae9443a1.js";import{D as Dt}from"./Dropdown-aba27f68.js";import{Q as ib}from"./QueryCount-ae8e4e5d.js";import{c as Fn}from"./cloneDeep-fa848af1.js";import{S as sb}from"./react-select.esm-90b5238c.js";import{I as lb}from"./IconList-0854ff33.js";import{i as cb}from"./isEmpty-2fa687ca.js";import{U as ub}from"./UserCardList-52c4166e.js";import{u as Ip}from"./useAccessRequirements-91ef099e.js";import{a as $l,R as db}from"./RestrictionInformation-4ed2591e.js";import{S as Pe}from"./ManagedACTAccessRequirementStatus-9671fe8d.js";import{F as Xa}from"./FileUpload-21451014.js";import{U as fb}from"./UserSearchBox-754c34e2.js";import{R as pb}from"./RadioGroup-21807f37.js";import{u as Tp}from"./useTheme-ef578671.js";import{E as Pi}from"./EntityLink-aae8b4bb.js";import{C as hb}from"./Checkbox-44f336ac.js";import{B as mb}from"./ButtonBase-428d3c85.js";import{u as gb,U as vb}from"./UserOrTeamBadge-959d43df.js";import{S as yb}from"./SynapseVideo-4b5019f9.js";var Fl=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(Fl||{}),bb=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(bb||{}),mt=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(mt||{});const wb="org.sagebionetworks.repo.model.file.GoogleCloudFileHandle",Sb="org.sagebionetworks.repo.model.file.S3FileHandle",Bl=Wf(Sb,wb),Cb="org.sagebionetworks.repo.model.file.ExternalFileHandle",Eb="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",_b="org.sagebionetworks.repo.model.file.ProxyFileHandle",Nb=Wf(_b,Eb,Cb),xb=e=>{const t=I.useRef();return I.useEffect(()=>{t.current=e}),t.current},Ib=e=>xb(e)!==e;function Tb(e){return Rl("MuiCircularProgress",e)}Ol("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const kb=["className","color","disableShrink","size","style","thickness","value","variant"];let La=e=>e,Ac,qc,Pc,Dc;const kt=44,Rb=Sp(Ac||(Ac=La`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Ob=Sp(qc||(qc=La`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Ab=e=>{const{classes:t,variant:n,color:r,disableShrink:a}=e,o={root:["root",n,`color${St(r)}`],svg:["svg"],circle:["circle",`circle${St(n)}`,a&&"circleDisableShrink"]};return ql(o,Tb,t)},qb=Ft("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${St(n.color)}`]]}})(({ownerState:e,theme:t})=>Ne({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Cp(Pc||(Pc=La`
      animation: ${0} 1.4s linear infinite;
    `),Rb)),Pb=Ft("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Db=Ft("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${St(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>Ne({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Cp(Dc||(Dc=La`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Ob)),Lb=I.forwardRef(function(t,n){const r=Al({props:t,name:"MuiCircularProgress"}),{className:a,color:o="primary",disableShrink:i=!1,size:s=40,style:l,thickness:u=3.6,value:c=0,variant:d="indeterminate"}=r,p=qa(r,kb),m=Ne({},r,{color:o,disableShrink:i,size:s,thickness:u,value:c,variant:d}),h=Ab(m),g={},v={},C={};if(d==="determinate"){const _=2*Math.PI*((kt-u)/2);g.strokeDasharray=_.toFixed(3),C["aria-valuenow"]=Math.round(c),g.strokeDashoffset=`${((100-c)/100*_).toFixed(3)}px`,v.transform="rotate(-90deg)"}return f(qb,Ne({className:Wr(h.root,a),style:Ne({width:s,height:s},v,l),ownerState:m,ref:n,role:"progressbar"},C,p,{children:f(Pb,{className:h.svg,ownerState:m,viewBox:`${kt/2} ${kt/2} ${kt} ${kt}`,children:f(Db,{className:h.circle,style:g,ownerState:m,cx:kt,cy:kt,r:(kt-u)/2,fill:"none",strokeWidth:u})})}))}),Mb=Lb;function Vb(e){return Rl("MuiPagination",e)}Ol("MuiPagination",["root","ul","outlined","text"]);const $b=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Fb(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:a=1,disabled:o=!1,hideNextButton:i=!1,hidePrevButton:s=!1,onChange:l,page:u,showFirstButton:c=!1,showLastButton:d=!1,siblingCount:p=1}=e,m=qa(e,$b),[h,g]=_v({controlled:u,default:a,name:n,state:"page"}),v=(x,k)=>{u||g(k),l&&l(x,k)},C=(x,k)=>{const A=k-x+1;return Array.from({length:A},(D,M)=>x+M)},_=C(1,Math.min(t,r)),y=C(Math.max(r-t+1,t+1),r),S=Math.max(Math.min(h-p,r-t-p*2-1),t+2),b=Math.min(Math.max(h+p,t+p*2+2),y.length>0?y[0]-2:r-1),w=[...c?["first"]:[],...s?[]:["previous"],..._,...S>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...C(S,b),...b<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...y,...i?[]:["next"],...d?["last"]:[]],E=x=>{switch(x){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return r;default:return null}},N=w.map(x=>typeof x=="number"?{onClick:k=>{v(k,x)},type:"page",page:x,selected:x===h,disabled:o,"aria-current":x===h?"true":void 0}:{onClick:k=>{v(k,E(x))},type:x,page:E(x),selected:!1,disabled:o||x.indexOf("ellipsis")===-1&&(x==="next"||x==="last"?h>=r:h<=1)});return Ne({items:N},m)}function Bb(e){return Rl("MuiPaginationItem",e)}const zb=Ol("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Ye=zb,Lc=en(f("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Mc=en(f("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Vc=en(f("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),$c=en(f("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Hb=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],kp=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${St(n.size)}`],n.variant==="text"&&t[`text${St(n.color)}`],n.variant==="outlined"&&t[`outlined${St(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},Ub=e=>{const{classes:t,color:n,disabled:r,selected:a,size:o,shape:i,type:s,variant:l}=e,u={root:["root",`size${St(o)}`,l,i,n!=="standard"&&`${l}${St(n)}`,r&&"disabled",a&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return ql(u,Bb,t)},jb=Ft("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:kp})(({theme:e,ownerState:t})=>Ne({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Ye.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Wb=Ft(mb,{name:"MuiPaginationItem",slot:"Root",overridesResolver:kp})(({theme:e,ownerState:t})=>Ne({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Ye.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ye.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ye.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:sn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Ye.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:sn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Ye.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>Ne({},t.variant==="text"&&{[`&.${Ye.selected}`]:Ne({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Ye.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Ye.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ye.selected}`]:Ne({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:sn(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:sn(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:sn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ye.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:sn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Ye.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),Gb=Ft("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>Ne({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),Yb=I.forwardRef(function(t,n){const r=Al({props:t,name:"MuiPaginationItem"}),{className:a,color:o="standard",component:i,components:s={},disabled:l=!1,page:u,selected:c=!1,shape:d="circular",size:p="medium",slots:m={},type:h="page",variant:g="text"}=r,v=qa(r,Hb),C=Ne({},r,{color:o,disabled:l,selected:c,shape:d,size:p,type:h,variant:g}),_=Tp(),y=Ub(C),b=(_.direction==="rtl"?{previous:m.next||s.next||$c,next:m.previous||s.previous||Vc,last:m.first||s.first||Lc,first:m.last||s.last||Mc}:{previous:m.previous||s.previous||Vc,next:m.next||s.next||$c,first:m.first||s.first||Lc,last:m.last||s.last||Mc})[h];return h==="start-ellipsis"||h==="end-ellipsis"?f(jb,{ref:n,ownerState:C,className:Wr(y.root,a),children:"…"}):O(Wb,Ne({ref:n,ownerState:C,component:i,disabled:l,className:Wr(y.root,a)},v,{children:[h==="page"&&u,b?f(Gb,{as:b,ownerState:C,className:y.icon}):null]}))}),Xb=Yb,Qb=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Zb=e=>{const{classes:t,variant:n}=e;return ql({root:["root",n],ul:["ul"]},Vb,t)},Kb=Ft("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),Jb=Ft("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ew(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const tw=I.forwardRef(function(t,n){const r=Al({props:t,name:"MuiPagination"}),{boundaryCount:a=1,className:o,color:i="standard",count:s=1,defaultPage:l=1,disabled:u=!1,getItemAriaLabel:c=ew,hideNextButton:d=!1,hidePrevButton:p=!1,renderItem:m=N=>f(Xb,Ne({},N)),shape:h="circular",showFirstButton:g=!1,showLastButton:v=!1,siblingCount:C=1,size:_="medium",variant:y="text"}=r,S=qa(r,Qb),{items:b}=Fb(Ne({},r,{componentName:"Pagination"})),w=Ne({},r,{boundaryCount:a,color:i,count:s,defaultPage:l,disabled:u,getItemAriaLabel:c,hideNextButton:d,hidePrevButton:p,renderItem:m,shape:h,showFirstButton:g,showLastButton:v,siblingCount:C,size:_,variant:y}),E=Zb(w);return f(Kb,Ne({"aria-label":"pagination navigation",className:Wr(E.root,o),ownerState:w,ref:n},S,{children:f(Jb,{className:E.ul,ownerState:w,children:b.map((N,x)=>f("li",{children:m(Ne({},N,{color:i,"aria-label":c(N.type,N.page,N.selected),shape:h,size:_,variant:y}))},x))})}))}),nw=tw,rw=en(f("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckTwoTone"),aw=en([f("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"},"0"),f("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"},"1")],"LockTwoTone"),ow=en(f("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"WarningSharp");function iw(e,t){const{accessToken:n}=ie(),r={accessRequirementId:e};return fp(["approvedSubmissionInfo",r],async a=>await Fg({...r,nextPageToken:a.pageParam},n),{...t,getNextPageParam:a=>a.nextPageToken})}function Rp(e,t,n=sp,r){const{accessToken:a}=ie();return Tn(xl.bundle(e,t,n),()=>Bg(e,n,t,a),r)}function sw(e,t){const{accessToken:n}=ie();return Tn(xl.children(e,!1),()=>Gf(e,n),t)}function BO(e,t){const{accessToken:n}=ie();return fp(xl.children(e,!0),async r=>await Gf({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}function lw(e,t){const{accessToken:n}=ie();return Tn(["entityHeaders",n,e],()=>vl(e,n),t)}function zO(e,t){const{accessToken:n}=ie();return Tn(["entityHeader",n,e],()=>zg(e,n),t)}function Zt({isCompleted:e}){return f("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?f(rw,{}):f(aw,{})})}try{Zt.displayName="AccessApprovalCheckMark",Zt.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}}}catch{}var Xr={},cw={get exports(){return Xr},set exports(e){Xr=e}},we={},En={},uw={get exports(){return En},set exports(e){En=e}},rn={};function Op(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function dw(e,t,n){}function fw(e,t,n){}var pw=/javascript\s*\:/img;function hw(e,t){return pw.test(t)?"":t}rn.whiteList=Op();rn.getDefaultWhiteList=Op;rn.onAttr=dw;rn.onIgnoreAttr=fw;rn.safeAttrValue=hw;var mw={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Pn=mw;function gw(e,t){e=Pn.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,a=0,o=0,i="";function s(){if(!r){var c=Pn.trim(e.slice(a,o)),d=c.indexOf(":");if(d!==-1){var p=Pn.trim(c.slice(0,d)),m=Pn.trim(c.slice(d+1));if(p){var h=t(a,i.length,p,m,c);h&&(i+=h+"; ")}}}a=o+1}for(;o<n;o++){var l=e[o];if(l==="/"&&e[o+1]==="*"){var u=e.indexOf("*/",o+2);if(u===-1)break;o=u+1,a=o+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return Pn.trim(i)}var vw=gw,wr=rn,yw=vw;function Fc(e){return e==null}function bw(e){var t={};for(var n in e)t[n]=e[n];return t}function Ap(e){e=bw(e||{}),e.whiteList=e.whiteList||wr.whiteList,e.onAttr=e.onAttr||wr.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||wr.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||wr.safeAttrValue,this.options=e}Ap.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,a=n.onAttr,o=n.onIgnoreAttr,i=n.safeAttrValue,s=yw(e,function(l,u,c,d,p){var m=r[c],h=!1;if(m===!0?h=m:typeof m=="function"?h=m(d):m instanceof RegExp&&(h=m.test(d)),h!==!0&&(h=!1),d=i(c,d),!!d){var g={position:u,sourcePosition:l,source:p,isWhite:h};if(h){var v=a(c,d,g);return Fc(v)?c+":"+d:v}else{var v=o(c,d,g);if(!Fc(v))return v}}});return s};var ww=Ap;(function(e,t){var n=rn,r=ww;function a(i,s){var l=new r(s);return l.process(i)}t=e.exports=a,t.FilterCSS=r;for(var o in n)t[o]=n[o];typeof window<"u"&&(window.filterCSS=e.exports)})(uw,En);var zl={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},Sw=En.FilterCSS,Cw=En.getDefaultWhiteList,Qr=zl;function qp(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Pp=new Sw;function Ew(e,t,n){}function _w(e,t,n){}function Nw(e,t,n){}function xw(e,t,n){}function Dp(e){return e.replace(Tw,"&lt;").replace(kw,"&gt;")}function Iw(e,t,n,r){if(n=Bp(n),t==="href"||t==="src"){if(n=Qr.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Sr.lastIndex=0,Sr.test(n))return""}else if(t==="style"){if(Bc.lastIndex=0,Bc.test(n)||(zc.lastIndex=0,zc.test(n)&&(Sr.lastIndex=0,Sr.test(n))))return"";r!==!1&&(r=r||Pp,n=r.process(n))}return n=zp(n),n}var Tw=/</g,kw=/>/g,Rw=/"/g,Ow=/&quot;/g,Aw=/&#([a-zA-Z0-9]*);?/gim,qw=/&colon;?/gim,Pw=/&newline;?/gim,Sr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Bc=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,zc=/u\s*r\s*l\s*\(.*/gi;function Lp(e){return e.replace(Rw,"&quot;")}function Mp(e){return e.replace(Ow,'"')}function Vp(e){return e.replace(Aw,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function $p(e){return e.replace(qw,":").replace(Pw," ")}function Fp(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Qr.trim(t)}function Bp(e){return e=Mp(e),e=Vp(e),e=$p(e),e=Fp(e),e}function zp(e){return e=Lp(e),e=Dp(e),e}function Dw(){return""}function Lw(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(i){return n?!0:Qr.indexOf(e,i)!==-1}var a=[],o=!1;return{onIgnoreTag:function(i,s,l){if(r(i))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return a.push([o!==!1?o:l.position,c]),o=!1,u}else return o||(o=l.position),"[removed]";else return t(i,s,l)},remove:function(i){var s="",l=0;return Qr.forEach(a,function(u){s+=i.slice(l,u[0]),l=u[1]}),s+=i.slice(l),s}}}function Mw(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var a=e.indexOf("-->",r);if(a===-1)break;n=a+3}return t}function Vw(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}we.whiteList=qp();we.getDefaultWhiteList=qp;we.onTag=Ew;we.onIgnoreTag=_w;we.onTagAttr=Nw;we.onIgnoreTagAttr=xw;we.safeAttrValue=Iw;we.escapeHtml=Dp;we.escapeQuote=Lp;we.unescapeQuote=Mp;we.escapeHtmlEntities=Vp;we.escapeDangerHtml5Entities=$p;we.clearNonPrintableCharacter=Fp;we.friendlyAttrValue=Bp;we.escapeAttrValue=zp;we.onIgnoreTagStripAll=Dw;we.StripTagBody=Lw;we.stripCommentTag=Mw;we.stripBlankChar=Vw;we.cssFilter=Pp;we.getDefaultCSSWhiteList=Cw;var Ma={},At=zl;function $w(e){var t=At.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=At.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function Fw(e){return e.slice(0,2)==="</"}function Bw(e,t,n){var r="",a=0,o=!1,i=!1,s=0,l=e.length,u="",c="";e:for(s=0;s<l;s++){var d=e.charAt(s);if(o===!1){if(d==="<"){o=s;continue}}else if(i===!1){if(d==="<"){r+=n(e.slice(a,s)),o=s,a=s;continue}if(d===">"||s===l-1){r+=n(e.slice(a,o)),c=e.slice(o,s+1),u=$w(c),r+=t(o,r.length,u,c,Fw(c)),a=s+1,o=!1;continue}if(d==='"'||d==="'")for(var p=1,m=e.charAt(s-p);m.trim()===""||m==="=";){if(m==="="){i=d;continue e}m=e.charAt(s-++p)}}else if(d===i){i=!1;continue}}return a<l&&(r+=n(e.substr(a))),r}var zw=/[^a-zA-Z0-9\\_:.-]/gim;function Hw(e,t){var n=0,r=0,a=[],o=!1,i=e.length;function s(p,m){if(p=At.trim(p),p=p.replace(zw,"").toLowerCase(),!(p.length<1)){var h=t(p,m||"");h&&a.push(h)}}for(var l=0;l<i;l++){var u=e.charAt(l),c,d;if(o===!1&&u==="="){o=e.slice(n,l),n=l+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:jw(e,l+1);continue}if(o!==!1&&l===r){if(d=e.indexOf(u,l+1),d===-1)break;c=At.trim(e.slice(r+1,d)),s(o,c),o=!1,l=d,n=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if(d=Uw(e,l),d===-1){c=At.trim(e.slice(n,l)),s(c),o=!1,n=l+1;continue}else{l=d-1;continue}else if(d=Ww(e,l-1),d===-1){c=At.trim(e.slice(n,l)),c=Hc(c),s(o,c),o=!1,n=l+1;continue}else continue}return n<e.length&&(o===!1?s(e.slice(n)):s(o,Hc(At.trim(e.slice(n))))),At.trim(a.join(" "))}function Uw(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function jw(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function Ww(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Gw(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Hc(e){return Gw(e)?e.substr(1,e.length-2):e}Ma.parseTag=Bw;Ma.parseAttr=Hw;var Yw=En.FilterCSS,Je=we,Hp=Ma,Xw=Hp.parseTag,Qw=Hp.parseAttr,Vr=zl;function Cr(e){return e==null}function Zw(e){var t=Vr.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Vr.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=Vr.trim(e.slice(0,-1))),{html:e,closing:n}}function Kw(e){var t={};for(var n in e)t[n]=e[n];return t}function Jw(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Up(e){e=Kw(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Je.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Jw(e.whiteList||e.allowList):e.whiteList=Je.whiteList,e.onTag=e.onTag||Je.onTag,e.onTagAttr=e.onTagAttr||Je.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Je.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Je.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Je.safeAttrValue,e.escapeHtml=e.escapeHtml||Je.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Yw(e.css))}Up.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,a=n.onTag,o=n.onIgnoreTag,i=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,u=n.escapeHtml,c=t.cssFilter;n.stripBlankChar&&(e=Je.stripBlankChar(e)),n.allowCommentTag||(e=Je.stripCommentTag(e));var d=!1;n.stripIgnoreTagBody&&(d=Je.StripTagBody(n.stripIgnoreTagBody,o),o=d.onIgnoreTag);var p=Xw(e,function(m,h,g,v,C){var _={sourcePosition:m,position:h,isClosing:C,isWhite:Object.prototype.hasOwnProperty.call(r,g)},y=a(g,v,_);if(!Cr(y))return y;if(_.isWhite){if(_.isClosing)return"</"+g+">";var S=Zw(v),b=r[g],w=Qw(S.html,function(E,N){var x=Vr.indexOf(b,E)!==-1,k=i(g,E,N,x);return Cr(k)?x?(N=l(g,E,N,c),N?E+'="'+N+'"':E):(k=s(g,E,N,x),Cr(k)?void 0:k):k});return v="<"+g,w&&(v+=" "+w),S.closing&&(v+=" /"),v+=">",v}else return y=o(g,v,_),Cr(y)?u(v):y},u);return d&&(p=d.remove(p)),p};var e0=Up;(function(e,t){var n=we,r=Ma,a=e0;function o(s,l){var u=new a(l);return u.process(s)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=a,function(){for(var s in n)t[s]=n[s];for(var l in r)t[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(cw,Xr);const jp=Xr,Wp={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function Di(e){let t="pill-xl ";const{align:n="",highlight:r=""}=e,a=n.toLowerCase();a==="left"&&(t+="floatLeft "),a==="right"&&(t+="floatright ");const o=r==="true"?"secondary":"light-secondary";return a==="center"?f("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:f(Ce,{href:e.url,className:t,variant:o,children:e.text})}):f("span",{className:"bootstrap-4-backport",children:f(Ce,{href:e.url,className:t,variant:o,children:e.text})})}try{Di.displayName="MarkdownButton",Di.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}}}catch{}async function t0(e,t,n){const r=new Set;try{let a=await Qn(n,e,t);for(;Hg(a);){if(r.has(a.id))throw new Error("Link forms a cycle.");r.add(a.id),a=await Qn(n,a.linksTo.targetId,a.linksTo.targetVersionNumber)}return a}catch(a){throw new Error(`${e} could not be resolved.
${a.message}`)}}function n0(e,t,n){const{accessToken:r}=ie();return Tn(["resolveLinkEntity",e,t],()=>t0(e,t,r),n)}function r0(e,t,n){const{accessToken:r}=ie();return Tn(["team",e,"member",t],()=>Ug(e,t,r),n)}function a0(e){const{rawHtml:t,isLoading:n,isTrusted:r}=e;return I.useMemo(()=>{if(!n)return r?t:jp(t,Wp)},[n,r,t])}function Li(e){const{createdByUserId:t,rawHtml:n}=e,r=I.useRef(null),[a,o]=I.useState(100),{data:i,isLoading:s}=r0(xv,t),l=()=>{if(r!=null&&r.current&&(r!=null&&r.current.contentWindow)){let d=r.current.contentWindow.document.body.scrollHeight;d<450&&(d=450),(!a||Math.abs(d-a)>70)&&o(d+50)}};I.useEffect(()=>{setInterval(()=>{l()},500)},[n]);const c=a0({rawHtml:n,isLoading:s,isTrusted:!!i});return s?f(Ra,{}):O(j,{children:[n!==c&&f(tn,{variant:"info",dismissible:!1,show:!0,transition:!1,children:"Limited rendering only."}),f("iframe",{ref:r,srcDoc:c,height:`${a}px`,style:{border:0,width:"100%"}})]})}try{Li.displayName="HtmlPreview",Li.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}}}catch{}var be=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(be||{});const o0=30*Iv;function Zr(e){const{fileHandle:t,fileHandleAssociation:n,previewType:r}=e,a={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:o,isLoading:i}=Lv(t,a,o0,{useErrorBoundary:!0});return i?f(Ra,{}):r===be.HTML?f(Li,{rawHtml:o,createdByUserId:t.createdBy}):(r!==be.NONE&&console.warn(`Rendering a preview of type ${r} is not supported in Portals`),f(j,{}))}try{Zr.displayName="FileHandleContentRenderer",Zr.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}}}catch{}const Gp=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],i0=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],s0=[".ogv",".ogg"],l0=[...i0,...s0,".webm"],c0=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],u0=[".md",".markdown",".rmd"];function d0(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function f0(e){if(!Bl(e))return be.NONE;const t=d0(e.fileName);return t&&l0.includes(t)?be.VIDEO:t===".ipynb"?be.IPYNB:Gp.includes(e.contentType)?be.IMAGE:e.contentType==="text/html"?be.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?be.PDF:t&&c0.includes(t)?be.CODE:t&&u0.includes(t)?be.MARKDOWN:e.contentType==="image/tiff"?be.TIFF:be.NONE}function p0(e,t){const n=e.contentType;return Bl(e)?Gp.includes(e.contentType)?be.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?be.ZIP:be.CSV:n.toLowerCase()==="text/tab-separated-values"?be.TAB:be.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?be.PDF:be.NONE:be.NONE}function Mi(e){const{bundle:t}=e,{accessToken:n}=ie(),r=!!n;if(!yl(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const a=t.entity.dataFileHandleId,o=t.fileHandles.find(s=>s.id===a);if(!o&&!r)return f(tn,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:f(jg,{})});if(o){const s=f0(o);if(s!==be.NONE)return f(Zr,{fileHandle:o,fileHandleAssociation:{fileHandleId:a,associateObjectId:t.entity.id,associateObjectType:Oe.FileEntity},previewType:s})}const i=t.fileHandles.find(s=>Bl(s)&&s.isPreview);if(i&&o){const s=p0(i,o);if(s!==be.NONE)return f(Zr,{fileHandle:i,fileHandleAssociation:{fileHandleId:i.id,associateObjectId:t.entity.id,associateObjectType:Oe.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{Mi.displayName="FileEntityPreview",Mi.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle<{ readonly includeEntity: true; readonly includeEntityPath: true; readonly includeAnnotations: true; readonly includePermissions: true; readonly includeHasChildren: true; readonly includeAccessControlList: true; ... 7 more ...; readonly includeRestrictionInformation: true; }>"}}}}}catch{}function Vi(e){const{entityId:t,versionNumber:n}=e,{data:r,isLoading:a}=n0(t,n),o=r&&yl(r),{data:i,isLoading:s}=Rp(r==null?void 0:r.id,r==null?void 0:r.versionNumber,sp,{enabled:!!o,useErrorBoundary:!0});if(a||s)return f(Ra,{});if(o)return f(Mi,{bundle:i});throw new Error(`${t} is not a File and cannot be previewed.`)}try{Vi.displayName="EntityPreview",Vi.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function $i(e){const t=Vv(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt(e.versionNumber??""),r=t.targetId,a=Number.isNaN(n)?t.targetVersionNumber:n;return f(Vi,{entityId:r,versionNumber:a})}try{$i.displayName="MarkdownEntityPreview",$i.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}}}catch{}const Fi=({info:e})=>f(j,{children:e&&O("p",{className:"SubmissionInfoCard",children:[f("strong",{children:" Project Lead: "})," ",f("span",{children:e.projectLead})," ",f("br",{}),f("strong",{children:" Institution: "})," ",f("span",{children:e.institution})," ",f("br",{}),f("strong",{children:" Data Access Request Submitted By: "})," ",f(Cn,{ownerId:e.submittedBy,size:jr})," ",f("br",{}),O("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",Zn(Vt(e.modifiedOn),"M/D/YYYY"),"):"]}),f(Ue,{markdown:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>O("div",{children:[f(Cn,{ownerId:t.userId,size:jr})," ",t.type]},`${t.userId}-${t.type}`))]})}),Kr=()=>O("p",{className:"SubmissionInfoCard",children:[f(Tl,{numCols:1,numRows:4}),f(qi,{variant:"rectangular",width:"100%",height:80})]});try{Fi.displayName="SubmissionInfoCard",Fi.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}}}catch{}try{Kr.displayName="LoadingSubmissionInfoCard",Kr.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}}}catch{}const Bi=e=>{const{accessRequirementId:t}=e,{ref:n,inView:r}=Rn(),{data:a,status:o,isLoading:i,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:u}=iw(t,{useErrorBoundary:!0});I.useEffect(()=>{o==="success"&&!l&&s&&u&&r&&u()},[o,s,l,u,r]);const c=(a==null?void 0:a.pages.flatMap(d=>d.results))??[];return O(j,{children:[c.length>0&&O("div",{className:"IDUReport",children:[c.map(d=>O(V.Fragment,{children:[f(Fi,{info:d}),f("hr",{})]},JSON.stringify(d))),f("div",{ref:n})]}),(i||l)&&O(j,{children:[f(Kr,{}),f(Kr,{})]})]})};try{Bi.displayName="IDUReport",Bi.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}}}catch{}function zi(e){const{accessRestrictionId:t}=e;return f(Bi,{accessRequirementId:t})}try{zi.displayName="MarkdownIDUReport",zi.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}}}catch{}function h0(e){let t;const n=new Set,r=(u,c)=>{const d=typeof u=="function"?u(t):u;if(d!==t){const p=t;t=c?d:Object.assign({},t,d),n.forEach(m=>m(t,p))}},a=()=>t,o=(u,c=a,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=c(t);function m(){const h=c(t);if(!d(p,h)){const g=p;u(p=h,g)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:a,subscribe:(u,c,d)=>c||d?o(u,c,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=e(r,a,l),l}const m0=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Uc=m0?I.useEffect:I.useLayoutEffect;function g0(e){const t=typeof e=="function"?h0(e):e,n=(r=t.getState,a=Object.is)=>{const[,o]=I.useReducer(v=>v+1,0),i=t.getState(),s=I.useRef(i),l=I.useRef(r),u=I.useRef(a),c=I.useRef(!1),d=I.useRef();d.current===void 0&&(d.current=r(i));let p,m=!1;(s.current!==i||l.current!==r||u.current!==a||c.current)&&(p=r(i),m=!a(d.current,p)),Uc(()=>{m&&(d.current=p),s.current=i,l.current=r,u.current=a,c.current=!1});const h=I.useRef(i);Uc(()=>{const v=()=>{try{const _=t.getState(),y=l.current(_);u.current(d.current,y)||(s.current=_,d.current=y,o())}catch{c.current=!0,o()}},C=t.subscribe(v);return t.getState()!==h.current&&v(),C},[]);const g=m?p:d.current;return I.useDebugValue(g),g};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const a=r.length<=0;return{value:r.shift(),done:a}}}},n}function v0(){const e=I.createContext(void 0);return{Provider:({initialStore:a,createStore:o,children:i})=>{const s=I.useRef();return s.current||(a&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),o||(o=()=>a)),s.current=o()),I.createElement(e.Provider,{value:s.current},i)},useStore:(a,o=Object.is)=>{const i=I.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(a,o)},useStoreApi:()=>{const a=I.useContext(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return I.useMemo(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe,destroy:a.destroy}),[a])}}}var y0={value:()=>{}};function Va(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $r(n)}function $r(e){this._=e}function b0(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$r.prototype=Va.prototype={constructor:$r,on:function(e,t){var n=this._,r=b0(e+"",n),a,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((a=(e=r[o]).type)&&(a=w0(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(a=(e=r[o]).type)n[a]=jc(n[a],e.name,t);else if(t==null)for(a in n)n[a]=jc(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $r(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,o;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};function w0(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function jc(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=y0,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hi="http://www.w3.org/1999/xhtml";const Wc={svg:"http://www.w3.org/2000/svg",xhtml:Hi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $a(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wc.hasOwnProperty(t)?{space:Wc[t],local:e}:e}function S0(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hi&&t.documentElement.namespaceURI===Hi?t.createElement(e):t.createElementNS(n,e)}}function C0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yp(e){var t=$a(e);return(t.local?C0:S0)(t)}function E0(){}function Hl(e){return e==null?E0:function(){return this.querySelector(e)}}function _0(e){typeof e!="function"&&(e=Hl(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=new Array(i),l,u,c=0;c<i;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new ze(r,this._parents)}function N0(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function x0(){return[]}function Xp(e){return e==null?x0:function(){return this.querySelectorAll(e)}}function I0(e){return function(){return N0(e.apply(this,arguments))}}function T0(e){typeof e=="function"?e=I0(e):e=Xp(e);for(var t=this._groups,n=t.length,r=[],a=[],o=0;o<n;++o)for(var i=t[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&(r.push(e.call(l,l.__data__,u,i)),a.push(l));return new ze(r,a)}function Qp(e){return function(){return this.matches(e)}}function Zp(e){return function(t){return t.matches(e)}}var k0=Array.prototype.find;function R0(e){return function(){return k0.call(this.children,e)}}function O0(){return this.firstElementChild}function A0(e){return this.select(e==null?O0:R0(typeof e=="function"?e:Zp(e)))}var q0=Array.prototype.filter;function P0(){return Array.from(this.children)}function D0(e){return function(){return q0.call(this.children,e)}}function L0(e){return this.selectAll(e==null?P0:D0(typeof e=="function"?e:Zp(e)))}function M0(e){typeof e!="function"&&(e=Qp(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=[],l,u=0;u<i;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new ze(r,this._parents)}function Kp(e){return new Array(e.length)}function V0(){return new ze(this._enter||this._groups.map(Kp),this._parents)}function Jr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jr.prototype={constructor:Jr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $0(e){return function(){return e}}function F0(e,t,n,r,a,o){for(var i=0,s,l=t.length,u=o.length;i<u;++i)(s=t[i])?(s.__data__=o[i],r[i]=s):n[i]=new Jr(e,o[i]);for(;i<l;++i)(s=t[i])&&(a[i]=s)}function B0(e,t,n,r,a,o,i){var s,l,u=new Map,c=t.length,d=o.length,p=new Array(c),m;for(s=0;s<c;++s)(l=t[s])&&(p[s]=m=i.call(l,l.__data__,s,t)+"",u.has(m)?a[s]=l:u.set(m,l));for(s=0;s<d;++s)m=i.call(e,o[s],s,o)+"",(l=u.get(m))?(r[s]=l,l.__data__=o[s],u.delete(m)):n[s]=new Jr(e,o[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(p[s])===l&&(a[s]=l)}function z0(e){return e.__data__}function H0(e,t){if(!arguments.length)return Array.from(this,z0);var n=t?B0:F0,r=this._parents,a=this._groups;typeof e!="function"&&(e=$0(e));for(var o=a.length,i=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=a[u],p=d.length,m=U0(e.call(c,c&&c.__data__,u,r)),h=m.length,g=s[u]=new Array(h),v=i[u]=new Array(h),C=l[u]=new Array(p);n(c,d,g,v,C,m,t);for(var _=0,y=0,S,b;_<h;++_)if(S=g[_]){for(_>=y&&(y=_+1);!(b=v[y])&&++y<h;);S._next=b||null}}return i=new ze(i,r),i._enter=s,i._exit=l,i}function U0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function j0(){return new ze(this._exit||this._groups.map(Kp),this._parents)}function W0(e,t,n){var r=this.enter(),a=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?o.remove():n(o),r&&a?r.merge(a).order():a}function G0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,o=r.length,i=Math.min(a,o),s=new Array(a),l=0;l<i;++l)for(var u=n[l],c=r[l],d=u.length,p=s[l]=new Array(d),m,h=0;h<d;++h)(m=u[h]||c[h])&&(p[h]=m);for(;l<a;++l)s[l]=n[l];return new ze(s,this._parents)}function Y0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,o=r[a],i;--a>=0;)(i=r[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function X0(e){e||(e=Q0);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i=n[o],s=i.length,l=a[o]=new Array(s),u,c=0;c<s;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new ze(a,this._parents).order()}function Q0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Z0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function K0(){return Array.from(this)}function J0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null}function eS(){let e=0;for(const t of this)++e;return e}function tS(){return!this.node()}function nS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],o=0,i=a.length,s;o<i;++o)(s=a[o])&&e.call(s,s.__data__,o,a);return this}function rS(e){return function(){this.removeAttribute(e)}}function aS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oS(e,t){return function(){this.setAttribute(e,t)}}function iS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function sS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cS(e,t){var n=$a(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?aS:rS:typeof t=="function"?n.local?lS:sS:n.local?iS:oS)(n,t))}function Jp(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function uS(e){return function(){this.style.removeProperty(e)}}function dS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pS(e,t,n){return arguments.length>1?this.each((t==null?uS:typeof t=="function"?fS:dS)(e,t,n??"")):_n(this.node(),e)}function _n(e,t){return e.style.getPropertyValue(t)||Jp(e).getComputedStyle(e,null).getPropertyValue(t)}function hS(e){return function(){delete this[e]}}function mS(e,t){return function(){this[e]=t}}function gS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function vS(e,t){return arguments.length>1?this.each((t==null?hS:typeof t=="function"?gS:mS)(e,t)):this.node()[e]}function eh(e){return e.trim().split(/^|\s+/)}function Ul(e){return e.classList||new th(e)}function th(e){this._node=e,this._names=eh(e.getAttribute("class")||"")}th.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function nh(e,t){for(var n=Ul(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function rh(e,t){for(var n=Ul(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function yS(e){return function(){nh(this,e)}}function bS(e){return function(){rh(this,e)}}function wS(e,t){return function(){(t.apply(this,arguments)?nh:rh)(this,e)}}function SS(e,t){var n=eh(e+"");if(arguments.length<2){for(var r=Ul(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?wS:t?yS:bS)(n,t))}function CS(){this.textContent=""}function ES(e){return function(){this.textContent=e}}function _S(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function NS(e){return arguments.length?this.each(e==null?CS:(typeof e=="function"?_S:ES)(e)):this.node().textContent}function xS(){this.innerHTML=""}function IS(e){return function(){this.innerHTML=e}}function TS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kS(e){return arguments.length?this.each(e==null?xS:(typeof e=="function"?TS:IS)(e)):this.node().innerHTML}function RS(){this.nextSibling&&this.parentNode.appendChild(this)}function OS(){return this.each(RS)}function AS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qS(){return this.each(AS)}function PS(e){var t=typeof e=="function"?e:Yp(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function DS(){return null}function LS(e,t){var n=typeof e=="function"?e:Yp(e),r=t==null?DS:typeof t=="function"?t:Hl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function MS(){var e=this.parentNode;e&&e.removeChild(this)}function VS(){return this.each(MS)}function $S(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function FS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BS(e){return this.select(e?FS:$S)}function zS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function HS(e){return function(t){e.call(this,t,this.__data__)}}function US(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jS(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,o;n<a;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function WS(e,t,n){return function(){var r=this.__on,a,o=HS(t);if(r){for(var i=0,s=r.length;i<s;++i)if((a=r[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=n),a.value=t;return}}this.addEventListener(e.type,o,n),a={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(a):this.__on=[a]}}function GS(e,t,n){var r=US(e+""),a,o=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(a=0,c=s[l];a<o;++a)if((i=r[a]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?WS:jS,a=0;a<o;++a)this.each(s(r[a],t,n));return this}function ah(e,t,n){var r=Jp(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function YS(e,t){return function(){return ah(this,e,t)}}function XS(e,t){return function(){return ah(this,e,t.apply(this,arguments))}}function QS(e,t){return this.each((typeof t=="function"?XS:YS)(e,t))}function*ZS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length,i;a<o;++a)(i=r[a])&&(yield i)}var oh=[null];function ze(e,t){this._groups=e,this._parents=t}function pr(){return new ze([[document.documentElement]],oh)}function KS(){return this}ze.prototype=pr.prototype={constructor:ze,select:_0,selectAll:T0,selectChild:A0,selectChildren:L0,filter:M0,data:H0,enter:V0,exit:j0,join:W0,merge:G0,selection:KS,order:Y0,sort:X0,call:Z0,nodes:K0,node:J0,size:eS,empty:tS,each:nS,attr:cS,style:pS,property:vS,classed:SS,text:NS,html:kS,raise:OS,lower:qS,append:PS,insert:LS,remove:VS,clone:BS,datum:zS,on:GS,dispatch:QS,[Symbol.iterator]:ZS};function et(e){return typeof e=="string"?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],oh)}function JS(e){let t;for(;t=e.sourceEvent;)e=t;return e}function st(e,t){if(e=JS(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const eC={passive:!1},Kn={capture:!0,passive:!1};function Qa(e){e.stopImmediatePropagation()}function gn(e){e.preventDefault(),e.stopImmediatePropagation()}function ih(e){var t=e.document.documentElement,n=et(e).on("dragstart.drag",gn,Kn);"onselectstart"in t?n.on("selectstart.drag",gn,Kn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sh(e,t){var n=e.document.documentElement,r=et(e).on("dragstart.drag",null);t&&(r.on("click.drag",gn,Kn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Er=e=>()=>e;function Ui(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:o,x:i,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Ui.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function tC(e){return!e.ctrlKey&&!e.button}function nC(){return this.parentNode}function rC(e,t){return t??{x:e.x,y:e.y}}function aC(){return navigator.maxTouchPoints||"ontouchstart"in this}function oC(){var e=tC,t=nC,n=rC,r=aC,a={},o=Va("start","drag","end"),i=0,s,l,u,c,d=0;function p(S){S.on("mousedown.drag",m).filter(r).on("touchstart.drag",v).on("touchmove.drag",C,eC).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(S,b){if(!(c||!e.call(this,S,b))){var w=y(this,t.call(this,S,b),S,b,"mouse");w&&(et(S.view).on("mousemove.drag",h,Kn).on("mouseup.drag",g,Kn),ih(S.view),Qa(S),u=!1,s=S.clientX,l=S.clientY,w("start",S))}}function h(S){if(gn(S),!u){var b=S.clientX-s,w=S.clientY-l;u=b*b+w*w>d}a.mouse("drag",S)}function g(S){et(S.view).on("mousemove.drag mouseup.drag",null),sh(S.view,u),gn(S),a.mouse("end",S)}function v(S,b){if(e.call(this,S,b)){var w=S.changedTouches,E=t.call(this,S,b),N=w.length,x,k;for(x=0;x<N;++x)(k=y(this,E,S,b,w[x].identifier,w[x]))&&(Qa(S),k("start",S,w[x]))}}function C(S){var b=S.changedTouches,w=b.length,E,N;for(E=0;E<w;++E)(N=a[b[E].identifier])&&(gn(S),N("drag",S,b[E]))}function _(S){var b=S.changedTouches,w=b.length,E,N;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),E=0;E<w;++E)(N=a[b[E].identifier])&&(Qa(S),N("end",S,b[E]))}function y(S,b,w,E,N,x){var k=o.copy(),A=st(x||w,b),D,M,T;if((T=n.call(S,new Ui("beforestart",{sourceEvent:w,target:p,identifier:N,active:i,x:A[0],y:A[1],dx:0,dy:0,dispatch:k}),E))!=null)return D=T.x-A[0]||0,M=T.y-A[1]||0,function P(R,L,z){var B=A,F;switch(R){case"start":a[N]=P,F=i++;break;case"end":delete a[N],--i;case"drag":A=st(z||L,b),F=i;break}k.call(R,S,new Ui(R,{sourceEvent:L,subject:T,target:p,identifier:N,active:F,x:A[0]+D,y:A[1]+M,dx:A[0]-B[0],dy:A[1]-B[1],dispatch:k}),E)}}return p.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Er(!!S),p):e},p.container=function(S){return arguments.length?(t=typeof S=="function"?S:Er(S),p):t},p.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Er(S),p):n},p.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:Er(!!S),p):r},p.on=function(){var S=o.on.apply(o,arguments);return S===o?p:S},p.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,p):Math.sqrt(d)},p}function jl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hr(){}var Jn=.7,ea=1/Jn,vn="\\s*([+-]?\\d+)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iC=/^#([0-9a-f]{3,8})$/,sC=new RegExp(`^rgb\\(${vn},${vn},${vn}\\)$`),lC=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),cC=new RegExp(`^rgba\\(${vn},${vn},${vn},${er}\\)$`),uC=new RegExp(`^rgba\\(${ct},${ct},${ct},${er}\\)$`),dC=new RegExp(`^hsl\\(${er},${ct},${ct}\\)$`),fC=new RegExp(`^hsla\\(${er},${ct},${ct},${er}\\)$`),Gc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jl(hr,tr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yc,formatHex:Yc,formatHex8:pC,formatHsl:hC,formatRgb:Xc,toString:Xc});function Yc(){return this.rgb().formatHex()}function pC(){return this.rgb().formatHex8()}function hC(){return ch(this).formatHsl()}function Xc(){return this.rgb().formatRgb()}function tr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iC.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qc(t):n===3?new De(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_r(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_r(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sC.exec(e))?new De(t[1],t[2],t[3],1):(t=lC.exec(e))?new De(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cC.exec(e))?_r(t[1],t[2],t[3],t[4]):(t=uC.exec(e))?_r(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dC.exec(e))?Jc(t[1],t[2]/100,t[3]/100,1):(t=fC.exec(e))?Jc(t[1],t[2]/100,t[3]/100,t[4]):Gc.hasOwnProperty(e)?Qc(Gc[e]):e==="transparent"?new De(NaN,NaN,NaN,0):null}function Qc(e){return new De(e>>16&255,e>>8&255,e&255,1)}function _r(e,t,n,r){return r<=0&&(e=t=n=NaN),new De(e,t,n,r)}function mC(e){return e instanceof hr||(e=tr(e)),e?(e=e.rgb(),new De(e.r,e.g,e.b,e.opacity)):new De}function ji(e,t,n,r){return arguments.length===1?mC(e):new De(e,t,n,r??1)}function De(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}jl(De,ji,lh(hr,{brighter(e){return e=e==null?ea:Math.pow(ea,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jn:Math.pow(Jn,e),new De(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new De(Ut(this.r),Ut(this.g),Ut(this.b),ta(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zc,formatHex:Zc,formatHex8:gC,formatRgb:Kc,toString:Kc}));function Zc(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}`}function gC(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}${zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kc(){const e=ta(this.opacity);return`${e===1?"rgb(":"rgba("}${Ut(this.r)}, ${Ut(this.g)}, ${Ut(this.b)}${e===1?")":`, ${e})`}`}function ta(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ut(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zt(e){return e=Ut(e),(e<16?"0":"")+e.toString(16)}function Jc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,r)}function ch(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof hr||(e=tr(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,l=(o+a)/2;return s?(t===o?i=(n-r)/s+(n<r)*6:n===o?i=(r-t)/s+2:i=(t-n)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new tt(i,s,l,e.opacity)}function vC(e,t,n,r){return arguments.length===1?ch(e):new tt(e,t,n,r??1)}function tt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}jl(tt,vC,lh(hr,{brighter(e){return e=e==null?ea:Math.pow(ea,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jn:Math.pow(Jn,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new De(Za(e>=240?e-240:e+120,a,r),Za(e,a,r),Za(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new tt(eu(this.h),Nr(this.s),Nr(this.l),ta(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ta(this.opacity);return`${e===1?"hsl(":"hsla("}${eu(this.h)}, ${Nr(this.s)*100}%, ${Nr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function eu(e){return e=(e||0)%360,e<0?e+360:e}function Nr(e){return Math.max(0,Math.min(1,e||0))}function Za(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const uh=e=>()=>e;function yC(e,t){return function(n){return e+n*t}}function bC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wC(e){return(e=+e)==1?dh:function(t,n){return n-t?bC(t,n,e):uh(isNaN(t)?n:t)}}function dh(e,t){var n=t-e;return n?yC(e,n):uh(isNaN(e)?t:e)}const tu=function e(t){var n=wC(t);function r(a,o){var i=n((a=ji(a)).r,(o=ji(o)).r),s=n(a.g,o.g),l=n(a.b,o.b),u=dh(a.opacity,o.opacity);return function(c){return a.r=i(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r}(1);function qt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Wi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ka=new RegExp(Wi.source,"g");function SC(e){return function(){return e}}function CC(e){return function(t){return e(t)+""}}function EC(e,t){var n=Wi.lastIndex=Ka.lastIndex=0,r,a,o,i=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Wi.exec(e))&&(a=Ka.exec(t));)(o=a.index)>n&&(o=t.slice(n,o),s[i]?s[i]+=o:s[++i]=o),(r=r[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,l.push({i,x:qt(r,a)})),n=Ka.lastIndex;return n<t.length&&(o=t.slice(n),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?CC(l[0].x):SC(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var nu=180/Math.PI,Gi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fh(e,t,n,r,a,o){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*nu,skewX:Math.atan(l)*nu,scaleX:i,scaleY:s}}var xr;function _C(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gi:fh(t.a,t.b,t.c,t.d,t.e,t.f)}function NC(e){return e==null||(xr||(xr=document.createElementNS("http://www.w3.org/2000/svg","g")),xr.setAttribute("transform",e),!(e=xr.transform.baseVal.consolidate()))?Gi:(e=e.matrix,fh(e.a,e.b,e.c,e.d,e.e,e.f))}function ph(e,t,n,r){function a(u){return u.length?u.pop()+" ":""}function o(u,c,d,p,m,h){if(u!==d||c!==p){var g=m.push("translate(",null,t,null,n);h.push({i:g-4,x:qt(u,d)},{i:g-2,x:qt(c,p)})}else(d||p)&&m.push("translate("+d+t+p+n)}function i(u,c,d,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:d.push(a(d)+"rotate(",null,r)-2,x:qt(u,c)})):c&&d.push(a(d)+"rotate("+c+r)}function s(u,c,d,p){u!==c?p.push({i:d.push(a(d)+"skewX(",null,r)-2,x:qt(u,c)}):c&&d.push(a(d)+"skewX("+c+r)}function l(u,c,d,p,m,h){if(u!==d||c!==p){var g=m.push(a(m)+"scale(",null,",",null,")");h.push({i:g-4,x:qt(u,d)},{i:g-2,x:qt(c,p)})}else(d!==1||p!==1)&&m.push(a(m)+"scale("+d+","+p+")")}return function(u,c){var d=[],p=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,p),i(u.rotate,c.rotate,d,p),s(u.skewX,c.skewX,d,p),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,p),u=c=null,function(m){for(var h=-1,g=p.length,v;++h<g;)d[(v=p[h]).i]=v.x(m);return d.join("")}}}var xC=ph(_C,"px, ","px)","deg)"),IC=ph(NC,", ",")",")"),TC=1e-12;function ru(e){return((e=Math.exp(e))+1/e)/2}function kC(e){return((e=Math.exp(e))-1/e)/2}function RC(e){return((e=Math.exp(2*e))-1)/(e+1)}const OC=function e(t,n,r){function a(o,i){var s=o[0],l=o[1],u=o[2],c=i[0],d=i[1],p=i[2],m=c-s,h=d-l,g=m*m+h*h,v,C;if(g<TC)C=Math.log(p/u)/t,v=function(E){return[s+E*m,l+E*h,u*Math.exp(t*E*C)]};else{var _=Math.sqrt(g),y=(p*p-u*u+r*g)/(2*u*n*_),S=(p*p-u*u-r*g)/(2*p*n*_),b=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(S*S+1)-S);C=(w-b)/t,v=function(E){var N=E*C,x=ru(b),k=u/(n*_)*(x*RC(t*N+b)-kC(b));return[s+k*m,l+k*h,u*x/ru(t*N+b)]}}return v.duration=C*1e3*t/Math.SQRT2,v}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,l=s*s;return e(i,s,l)},a}(Math.SQRT2,2,4);var Nn=0,Bn=0,Dn=0,hh=1e3,na,zn,ra=0,Kt=0,Fa=0,nr=typeof performance=="object"&&performance.now?performance:Date,mh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wl(){return Kt||(mh(AC),Kt=nr.now()+Fa)}function AC(){Kt=0}function aa(){this._call=this._time=this._next=null}aa.prototype=gh.prototype={constructor:aa,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wl():+n)+(t==null?0:+t),!this._next&&zn!==this&&(zn?zn._next=this:na=this,zn=this),this._call=e,this._time=n,Yi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yi())}};function gh(e,t,n){var r=new aa;return r.restart(e,t,n),r}function qC(){Wl(),++Nn;for(var e=na,t;e;)(t=Kt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nn}function au(){Kt=(ra=nr.now())+Fa,Nn=Bn=0;try{qC()}finally{Nn=0,DC(),Kt=0}}function PC(){var e=nr.now(),t=e-ra;t>hh&&(Fa-=t,ra=e)}function DC(){for(var e,t=na,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:na=n);zn=e,Yi(r)}function Yi(e){if(!Nn){Bn&&(Bn=clearTimeout(Bn));var t=e-Kt;t>24?(e<1/0&&(Bn=setTimeout(au,e-nr.now()-Fa)),Dn&&(Dn=clearInterval(Dn))):(Dn||(ra=nr.now(),Dn=setInterval(PC,hh)),Nn=1,mh(au))}}function ou(e,t,n){var r=new aa;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var LC=Va("start","end","cancel","interrupt"),MC=[],vh=0,iu=1,Xi=2,Fr=3,su=4,Qi=5,Br=6;function Ba(e,t,n,r,a,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;VC(e,n,{name:t,index:r,group:a,on:LC,tween:MC,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vh})}function Gl(e,t){var n=nt(e,t);if(n.state>vh)throw new Error("too late; already scheduled");return n}function ut(e,t){var n=nt(e,t);if(n.state>Fr)throw new Error("too late; already running");return n}function nt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function VC(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=gh(o,0,n.time);function o(u){n.state=iu,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,d,p,m;if(n.state!==iu)return l();for(c in r)if(m=r[c],m.name===n.name){if(m.state===Fr)return ou(i);m.state===su?(m.state=Br,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[c]):+c<t&&(m.state=Br,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[c])}if(ou(function(){n.state===Fr&&(n.state=su,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Xi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xi){for(n.state=Fr,a=new Array(p=n.tween.length),c=0,d=-1;c<p;++c)(m=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=m);a.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Qi,1),d=-1,p=a.length;++d<p;)a[d].call(e,c);n.state===Qi&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Br,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function zr(e,t){var n=e.__transition,r,a,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}a=r.state>Xi&&r.state<Qi,r.state=Br,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function $C(e){return this.each(function(){zr(this,e)})}function FC(e,t){var n,r;return function(){var a=ut(this,e),o=a.tween;if(o!==n){r=n=o;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}a.tween=r}}function BC(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var o=ut(this,e),i=o.tween;if(i!==r){a=(r=i).slice();for(var s={name:t,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=s;break}l===u&&a.push(s)}o.tween=a}}function zC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=nt(this.node(),n).tween,a=0,o=r.length,i;a<o;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((t==null?FC:BC)(n,e,t))}function Yl(e,t,n){var r=e._id;return e.each(function(){var a=ut(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return nt(a,r).value[t]}}function yh(e,t){var n;return(typeof t=="number"?qt:t instanceof tr?tu:(n=tr(t))?(t=n,tu):EC)(e,t)}function HC(e){return function(){this.removeAttribute(e)}}function UC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jC(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function WC(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function GC(e,t,n){var r,a,o;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s)))}}function YC(e,t,n){var r,a,o;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s)))}}function XC(e,t){var n=$a(e),r=n==="transform"?IC:yh;return this.attrTween(e,typeof t=="function"?(n.local?YC:GC)(n,r,Yl(this,"attr."+e,t)):t==null?(n.local?UC:HC)(n):(n.local?WC:jC)(n,r,t))}function QC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ZC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function KC(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ZC(e,o)),n}return a._value=t,a}function JC(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&QC(e,o)),n}return a._value=t,a}function eE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$a(e);return this.tween(n,(r.local?KC:JC)(r,t))}function tE(e,t){return function(){Gl(this,e).delay=+t.apply(this,arguments)}}function nE(e,t){return t=+t,function(){Gl(this,e).delay=t}}function rE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tE:nE)(t,e)):nt(this.node(),t).delay}function aE(e,t){return function(){ut(this,e).duration=+t.apply(this,arguments)}}function oE(e,t){return t=+t,function(){ut(this,e).duration=t}}function iE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aE:oE)(t,e)):nt(this.node(),t).duration}function sE(e,t){if(typeof t!="function")throw new Error;return function(){ut(this,e).ease=t}}function lE(e){var t=this._id;return arguments.length?this.each(sE(t,e)):nt(this.node(),t).ease}function cE(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ut(this,e).ease=n}}function uE(e){if(typeof e!="function")throw new Error;return this.each(cE(this._id,e))}function dE(e){typeof e!="function"&&(e=Qp(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,s=r[a]=[],l,u=0;u<i;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new _t(r,this._parents,this._name,this._id)}function fE(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),s=0;s<o;++s)for(var l=t[s],u=n[s],c=l.length,d=i[s]=new Array(c),p,m=0;m<c;++m)(p=l[m]||u[m])&&(d[m]=p);for(;s<r;++s)i[s]=t[s];return new _t(i,this._parents,this._name,this._id)}function pE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hE(e,t,n){var r,a,o=pE(t)?Gl:ut;return function(){var i=o(this,e),s=i.on;s!==r&&(a=(r=s).copy()).on(t,n),i.on=a}}function mE(e,t){var n=this._id;return arguments.length<2?nt(this.node(),n).on.on(e):this.each(hE(n,e,t))}function gE(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function vE(){return this.on("end.remove",gE(this._id))}function yE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hl(e));for(var r=this._groups,a=r.length,o=new Array(a),i=0;i<a;++i)for(var s=r[i],l=s.length,u=o[i]=new Array(l),c,d,p=0;p<l;++p)(c=s[p])&&(d=e.call(c,c.__data__,p,s))&&("__data__"in c&&(d.__data__=c.__data__),u[p]=d,Ba(u[p],t,n,p,u,nt(c,n)));return new _t(o,this._parents,t,n)}function bE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xp(e));for(var r=this._groups,a=r.length,o=[],i=[],s=0;s<a;++s)for(var l=r[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var p=e.call(c,c.__data__,d,l),m,h=nt(c,n),g=0,v=p.length;g<v;++g)(m=p[g])&&Ba(m,t,n,g,p,h);o.push(p),i.push(c)}return new _t(o,i,t,n)}var wE=pr.prototype.constructor;function SE(){return new wE(this._groups,this._parents)}function CE(e,t){var n,r,a;return function(){var o=_n(this,e),i=(this.style.removeProperty(e),_n(this,e));return o===i?null:o===n&&i===r?a:a=t(n=o,r=i)}}function bh(e){return function(){this.style.removeProperty(e)}}function EE(e,t,n){var r,a=n+"",o;return function(){var i=_n(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}function _E(e,t,n){var r,a,o;return function(){var i=_n(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),_n(this,e))),i===l?null:i===r&&l===a?o:(a=l,o=t(r=i,s))}}function NE(e,t){var n,r,a,o="style."+t,i="end."+o,s;return function(){var l=ut(this,e),u=l.on,c=l.value[o]==null?s||(s=bh(t)):void 0;(u!==n||a!==c)&&(r=(n=u).copy()).on(i,a=c),l.on=r}}function xE(e,t,n){var r=(e+="")=="transform"?xC:yh;return t==null?this.styleTween(e,CE(e,r)).on("end.style."+e,bh(e)):typeof t=="function"?this.styleTween(e,_E(e,r,Yl(this,"style."+e,t))).each(NE(this._id,e)):this.styleTween(e,EE(e,r,t),n).on("end.style."+e,null)}function IE(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function TE(e,t,n){var r,a;function o(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&IE(e,i,n)),r}return o._value=t,o}function kE(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,TE(e,t,n??""))}function RE(e){return function(){this.textContent=e}}function OE(e){return function(){var t=e(this);this.textContent=t??""}}function AE(e){return this.tween("text",typeof e=="function"?OE(Yl(this,"text",e)):RE(e==null?"":e+""))}function qE(e){return function(t){this.textContent=e.call(this,t)}}function PE(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&qE(a)),t}return r._value=e,r}function DE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,PE(e))}function LE(){for(var e=this._name,t=this._id,n=wh(),r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],s=i.length,l,u=0;u<s;++u)if(l=i[u]){var c=nt(l,t);Ba(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _t(r,this._parents,e,n)}function ME(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(o,i){var s={value:i},l={value:function(){--a===0&&o()}};n.each(function(){var u=ut(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),a===0&&o()})}var VE=0;function _t(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function wh(){return++VE}var pt=pr.prototype;_t.prototype={constructor:_t,select:yE,selectAll:bE,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:dE,merge:fE,selection:SE,transition:LE,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:mE,attr:XC,attrTween:eE,style:xE,styleTween:kE,text:AE,textTween:DE,remove:vE,tween:zC,delay:rE,duration:iE,ease:lE,easeVarying:uE,end:ME,[Symbol.iterator]:pt[Symbol.iterator]};function $E(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var FE={time:null,delay:0,duration:250,ease:$E};function BE(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function zE(e){var t,n;e instanceof _t?(t=e._id,e=e._name):(t=wh(),(n=FE).time=Wl(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&Ba(l,e,t,u,i,n||BE(l,t));return new _t(r,this._parents,e,t)}pr.prototype.interrupt=$C;pr.prototype.transition=zE;const Ir=e=>()=>e;function HE(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function vt(e,t,n){this.k=e,this.x=t,this.y=n}vt.prototype={constructor:vt,scale:function(e){return e===1?this:new vt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new vt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jt=new vt(1,0,0);vt.prototype;function Ja(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function UE(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function jE(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function lu(){return this.__zoom||jt}function WE(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function GE(){return navigator.maxTouchPoints||"ontouchstart"in this}function YE(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function XE(){var e=UE,t=jE,n=YE,r=WE,a=GE,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=OC,u=Va("start","zoom","end"),c,d,p,m=500,h=150,g=0,v=10;function C(T){T.property("__zoom",lu).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",A).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(T,P,R,L){var z=T.selection?T.selection():T;z.property("__zoom",lu),T!==z?b(T,P,R,L):z.interrupt().each(function(){w(this,arguments).event(L).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},C.scaleBy=function(T,P,R,L){C.scaleTo(T,function(){var z=this.__zoom.k,B=typeof P=="function"?P.apply(this,arguments):P;return z*B},R,L)},C.scaleTo=function(T,P,R,L){C.transform(T,function(){var z=t.apply(this,arguments),B=this.__zoom,F=R==null?S(z):typeof R=="function"?R.apply(this,arguments):R,W=B.invert(F),Q=typeof P=="function"?P.apply(this,arguments):P;return n(y(_(B,Q),F,W),z,i)},R,L)},C.translateBy=function(T,P,R,L){C.transform(T,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),i)},null,L)},C.translateTo=function(T,P,R,L,z){C.transform(T,function(){var B=t.apply(this,arguments),F=this.__zoom,W=L==null?S(B):typeof L=="function"?L.apply(this,arguments):L;return n(jt.translate(W[0],W[1]).scale(F.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof R=="function"?-R.apply(this,arguments):-R),B,i)},L,z)};function _(T,P){return P=Math.max(o[0],Math.min(o[1],P)),P===T.k?T:new vt(P,T.x,T.y)}function y(T,P,R){var L=P[0]-R[0]*T.k,z=P[1]-R[1]*T.k;return L===T.x&&z===T.y?T:new vt(T.k,L,z)}function S(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function b(T,P,R,L){T.on("start.zoom",function(){w(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(L).end()}).tween("zoom",function(){var z=this,B=arguments,F=w(z,B).event(L),W=t.apply(z,B),Q=R==null?S(W):typeof R=="function"?R.apply(z,B):R,q=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),$=z.__zoom,U=typeof P=="function"?P.apply(z,B):P,G=l($.invert(Q).concat(q/$.k),U.invert(Q).concat(q/U.k));return function(H){if(H===1)H=U;else{var Z=G(H),K=q/Z[2];H=new vt(K,Q[0]-Z[0]*K,Q[1]-Z[1]*K)}F.zoom(null,H)}})}function w(T,P,R){return!R&&T.__zooming||new E(T,P)}function E(T,P){this.that=T,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,P),this.taps=0}E.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,P){return this.mouse&&T!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var P=et(this.that).datum();u.call(T,this.that,new HE(T,{sourceEvent:this.sourceEvent,target:C,type:T,transform:this.that.__zoom,dispatch:u}),P)}};function N(T,...P){if(!e.apply(this,arguments))return;var R=w(this,P).event(T),L=this.__zoom,z=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,r.apply(this,arguments)))),B=st(T);if(R.wheel)(R.mouse[0][0]!==B[0]||R.mouse[0][1]!==B[1])&&(R.mouse[1]=L.invert(R.mouse[0]=B)),clearTimeout(R.wheel);else{if(L.k===z)return;R.mouse=[B,L.invert(B)],zr(this),R.start()}Ln(T),R.wheel=setTimeout(F,h),R.zoom("mouse",n(y(_(L,z),R.mouse[0],R.mouse[1]),R.extent,i));function F(){R.wheel=null,R.end()}}function x(T,...P){if(p||!e.apply(this,arguments))return;var R=T.currentTarget,L=w(this,P,!0).event(T),z=et(T.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",q,!0),B=st(T,R),F=T.clientX,W=T.clientY;ih(T.view),Ja(T),L.mouse=[B,this.__zoom.invert(B)],zr(this),L.start();function Q($){if(Ln($),!L.moved){var U=$.clientX-F,G=$.clientY-W;L.moved=U*U+G*G>g}L.event($).zoom("mouse",n(y(L.that.__zoom,L.mouse[0]=st($,R),L.mouse[1]),L.extent,i))}function q($){z.on("mousemove.zoom mouseup.zoom",null),sh($.view,L.moved),Ln($),L.event($).end()}}function k(T,...P){if(e.apply(this,arguments)){var R=this.__zoom,L=st(T.changedTouches?T.changedTouches[0]:T,this),z=R.invert(L),B=R.k*(T.shiftKey?.5:2),F=n(y(_(R,B),L,z),t.apply(this,P),i);Ln(T),s>0?et(this).transition().duration(s).call(b,F,L,T):et(this).call(C.transform,F,L,T)}}function A(T,...P){if(e.apply(this,arguments)){var R=T.touches,L=R.length,z=w(this,P,T.changedTouches.length===L).event(T),B,F,W,Q;for(Ja(T),F=0;F<L;++F)W=R[F],Q=st(W,this),Q=[Q,this.__zoom.invert(Q),W.identifier],z.touch0?!z.touch1&&z.touch0[2]!==Q[2]&&(z.touch1=Q,z.taps=0):(z.touch0=Q,B=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),B&&(z.taps<2&&(d=Q[0],c=setTimeout(function(){c=null},m)),zr(this),z.start())}}function D(T,...P){if(this.__zooming){var R=w(this,P).event(T),L=T.changedTouches,z=L.length,B,F,W,Q;for(Ln(T),B=0;B<z;++B)F=L[B],W=st(F,this),R.touch0&&R.touch0[2]===F.identifier?R.touch0[0]=W:R.touch1&&R.touch1[2]===F.identifier&&(R.touch1[0]=W);if(F=R.that.__zoom,R.touch1){var q=R.touch0[0],$=R.touch0[1],U=R.touch1[0],G=R.touch1[1],H=(H=U[0]-q[0])*H+(H=U[1]-q[1])*H,Z=(Z=G[0]-$[0])*Z+(Z=G[1]-$[1])*Z;F=_(F,Math.sqrt(H/Z)),W=[(q[0]+U[0])/2,(q[1]+U[1])/2],Q=[($[0]+G[0])/2,($[1]+G[1])/2]}else if(R.touch0)W=R.touch0[0],Q=R.touch0[1];else return;R.zoom("touch",n(y(F,W,Q),R.extent,i))}}function M(T,...P){if(this.__zooming){var R=w(this,P).event(T),L=T.changedTouches,z=L.length,B,F;for(Ja(T),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),B=0;B<z;++B)F=L[B],R.touch0&&R.touch0[2]===F.identifier?delete R.touch0:R.touch1&&R.touch1[2]===F.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(F=st(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<v)){var W=et(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return C.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:Ir(+T),C):r},C.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Ir(!!T),C):e},C.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:Ir(!!T),C):a},C.extent=function(T){return arguments.length?(t=typeof T=="function"?T:Ir([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),C):t},C.scaleExtent=function(T){return arguments.length?(o[0]=+T[0],o[1]=+T[1],C):[o[0],o[1]]},C.translateExtent=function(T){return arguments.length?(i[0][0]=+T[0][0],i[1][0]=+T[1][0],i[0][1]=+T[0][1],i[1][1]=+T[1][1],C):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},C.constrain=function(T){return arguments.length?(n=T,C):n},C.duration=function(T){return arguments.length?(s=+T,C):s},C.interpolate=function(T){return arguments.length?(l=T,C):l},C.on=function(){var T=u.on.apply(u,arguments);return T===u?C:T},C.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,C):Math.sqrt(g)},C.tapDistance=function(T){return arguments.length?(v=+T,C):v},C}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sh(e,t){if(e){if(typeof e=="string")return Zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zi(e,t)}}function QE(e){if(Array.isArray(e))return e}function ZE(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,i,s;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(l){o=!0,s=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function KE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e,t){return QE(e)||ZE(e,t)||Sh(e,t)||KE()}var xn;(function(e){e.Strict="strict",e.Loose="loose"})(xn||(xn={}));var cu;(function(e){e.Lines="lines",e.Dots="dots"})(cu||(cu={}));var yn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(yn||(yn={}));var gt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(gt||(gt={}));var rr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(rr||(rr={}));var X;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(X||(X={}));var Xl=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},bn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},Ch=function(t,n){return{x:bn(t.x,n[0][0],n[1][0]),y:bn(t.y,n[0][1],n[1][1])}},Eh=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},JE=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},oa=function(t){var n=t.x,r=t.y,a=t.width,o=t.height;return{x:n,y:r,x2:n+a,y2:r+o}},e_=function(t){var n=t.x,r=t.y,a=t.x2,o=t.y2;return{x:n,y:r,width:a-n,height:o-r}},_h=function(t){return!isNaN(t)&&isFinite(t)},Te=Symbol("internals");function uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function du(e,t){var n=e.find(function(u){return u.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,a=t.position.y+t.height-n.height;if(r>0||a>0||t.position.x<0||t.position.y<0){var o,i;if(n.style=Hn({},n.style)||{},n.style.width=(o=n.style.width)!==null&&o!==void 0?o:n.width,n.style.height=(i=n.style.height)!==null&&i!==void 0?i:n.height,r>0&&(n.style.width+=r),a>0&&(n.style.height+=a),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Nh(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,a){var o=e.find(function(l){return l.id===a.id});if(o)switch(o.type){case"select":return r.push(Hn(Hn({},a),{},{selected:o.selected})),r;case"position":{var i=Hn({},a);return typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&du(r,i),r.push(i),r}case"dimensions":{var s=Hn({},a);return typeof o.dimensions<"u"&&(s.width=o.dimensions.width,s.height=o.dimensions.height),s.expandParent&&du(r,s),r.push(s),r}case"remove":return r}return r.push(a),r},n)}function xh(e,t){return Nh(e,t)}function t_(e,t){return Nh(e,t)}var Pt=function(t,n){return{id:t,type:"select",selected:n}};function pn(e,t){return e.reduce(function(n,r){var a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(Pt(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(Pt(r.id,!1))),n},[])}function fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pu=function(t,n,r){var a=n.querySelectorAll(t);if(!a||!a.length)return null;var o=Array.from(a),i=n.getBoundingClientRect();return o.map(function(s){var l=s.getBoundingClientRect();return Ih({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-i.left)/r,y:(l.top-i.top)/r},Xl(s))})};function Mn(e,t,n){return n===void 0?n:function(r){var a=t().nodeInternals.get(e);n(r,Ih({},a))}}function Th(e){var t=e.id,n=e.store,r=n.getState(),a=r.addSelectedNodes,o=r.unselectNodesAndEdges,i=r.multiSelectionActive,s=r.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&i&&o({nodes:[l]}):a([t])}function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var n_=function(t){return"id"in t&&"source"in t&&"target"in t},r_=function(t){var n=t.source,r=t.sourceHandle,a=t.target,o=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(a).concat(o||"")},Ki=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(a){return"".concat(a,"=").concat(t[a])}).join("&"))},a_=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},o_=function(t,n){if(!t.source||!t.target)return n;var r;return n_(t)?r=Gn({},t):r=Gn(Gn({},t),{},{id:r_(t)}),a_(r,n)?n:n.concat(r)},kh=function(t,n,r,a){var o=t.x,i=t.y,s=le(n,3),l=s[0],u=s[1],c=s[2],d=le(a,2),p=d[0],m=d[1],h={x:(o-l)/c,y:(i-u)/c};return r?{x:p*Math.round(h.x/p),y:m*Math.round(h.y/m)}:h},Ql=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,a){var o=a.positionAbsolute,i=a.position,s=a.width,l=a.height;return JE(r,oa({x:o?o.x:i.x,y:o?o.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return e_(n)},Rh=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],a=le(r,3),o=a[0],i=a[1],s=a[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=oa({x:(n.x-o)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),d=[];return t.forEach(function(p){var m=p.positionAbsolute,h=p.width,g=p.height,v=p.selectable,C=v===void 0?!0:v;if(u&&!C)return!1;var _=oa(Gn(Gn({},m),{},{width:h||0,height:g||0})),y=Math.max(0,Math.min(c.x2,_.x2)-Math.max(c.x,_.x)),S=Math.max(0,Math.min(c.y2,_.y2)-Math.max(c.y,_.y)),b=Math.ceil(y*S),w=typeof h>"u"||typeof g>"u"||h===null||g===null,E=l&&b>0,N=(h||0)*(g||0),x=w||E||b>=N;x&&d.push(p)}),d},Zl=function(t,n){var r=t.map(function(a){return a.id});return n.filter(function(a){return r.includes(a.source)||r.includes(a.target)})},Oh=function(t,n,r,a,o){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=r/(t.height*(1+i)),u=Math.min(s,l),c=bn(u,a,o),d=t.x+t.width/2,p=t.y+t.height/2,m=n/2-d*c,h=r/2-p*c;return[m,h,c]},Bt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ah(e,t,n,r){var a,o,i,s,l,u,c,d,p,m,h,g;if(!e.parentNode)return r;var v=t.get(e.parentNode);return Ah(v,t,n,{x:((a=r.x)!==null&&a!==void 0?a:0)+((o=(i=v.position)===null||i===void 0?void 0:i.x)!==null&&o!==void 0?o:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((l=(u=v.position)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0),z:((c=(d=v[Te])===null||d===void 0?void 0:d.z)!==null&&c!==void 0?c:0)>((p=r.z)!==null&&p!==void 0?p:0)?(m=(h=v[Te])===null||h===void 0?void 0:h.z)!==null&&m!==void 0?m:0:(g=r.z)!==null&&g!==void 0?g:0})}function eo(e,t){var n=new Map,r={};return e.forEach(function(a){var o,i=_h(a.zIndex)?a.zIndex:a.selected?1e3:0,s=t.get(a.id),l=hn(hn({width:s==null?void 0:s.width,height:s==null?void 0:s.height},a),{},{positionAbsolute:{x:a.position.x,y:a.position.y}});a.parentNode&&(l.parentNode=a.parentNode,r[a.parentNode]=!0),Object.defineProperty(l,Te,{enumerable:!1,value:{handleBounds:s==null||(o=s[Te])===null||o===void 0?void 0:o.handleBounds,z:i}}),n.set(a.id,l)}),n.forEach(function(a){if(a.parentNode&&!n.has(a.parentNode))throw new Error("Parent node ".concat(a.parentNode," not found"));if(a.parentNode||r[a.id]){var o,i,s=Ah(a,n,r,hn(hn({},a.position),{},{z:(o=(i=a[Te])===null||i===void 0?void 0:i.z)!==null&&o!==void 0?o:0})),l=s.x,u=s.y,c=s.z;a.positionAbsolute={x:l,y:u},a[Te].z=c,r[a.id]&&(a[Te].isParent=!0)}}),n}function qh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,a=n.width,o=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,u=n.d3Selection,c=n.fitViewOnInitDone,d=n.fitViewOnInit;if((t.initial&&!c&&d||!t.initial)&&l&&u){var p=Array.from(r.values()).filter(function(N){return t.includeHiddenNodes?N.width&&N.height:!N.hidden}),m=p.every(function(N){return N.width&&N.height});if(p.length>0&&m){var h,g,v,C=Ql(p),_=Oh(C,a,o,(h=t.minZoom)!==null&&h!==void 0?h:i,(g=t.maxZoom)!==null&&g!==void 0?g:s,(v=t.padding)!==null&&v!==void 0?v:.1),y=le(_,3),S=y[0],b=y[1],w=y[2],E=jt.translate(S,b).scale(w);return typeof t.duration=="number"&&t.duration>0?l.transform(Bt(u,t.duration),E):l.transform(u,E),!0}}return!1}function i_(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var a;t.set(r.id,hn(hn({},r),{},(a={},fe(a,Te,r[Te]),fe(a,"selected",n.selected),a)))}}),new Map(t)}function s_(e,t){return t.map(function(n){var r=e.find(function(a){return a.id===n.id});return r&&(n.selected=r.selected),n})}function Tr(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,a=e.set,o=r(),i=o.nodeInternals,s=o.edges,l=o.onNodesChange,u=o.onEdgesChange,c=o.hasDefaultNodes,d=o.hasDefaultEdges;t!=null&&t.length&&(c&&a({nodeInternals:i_(t,i)}),l==null||l(t)),n!=null&&n.length&&(d&&a({edges:s_(n,s)}),u==null||u(n))}var Ji=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gu={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ji,nodeExtent:Ji,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:xn.Strict,domNode:null,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.17",connectionStartHandle:null,connectOnClick:!0};function vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Kl=v0(),Ph=Kl.Provider,xe=Kl.useStore,qe=Kl.useStoreApi,Dh=function(){return g0(function(t,n){return ot(ot({},gu),{},{setNodes:function(a){t({nodeInternals:eo(a,n().nodeInternals)})},setEdges:function(a){var o=n(),i=o.defaultEdgeOptions,s=i===void 0?{}:i;t({edges:a.map(function(l){return ot(ot({},s),l)})})},setDefaultNodesAndEdges:function(a,o){var i=typeof a<"u",s=typeof o<"u",l=i?eo(a,new Map):new Map,u=s?o:[];t({nodeInternals:l,edges:u,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(a){var o=n(),i=o.onNodesChange,s=o.nodeInternals,l=o.fitViewOnInit,u=o.fitViewOnInitDone,c=o.fitViewOnInitOptions,d=o.domNode,p=d==null?void 0:d.querySelector(".react-flow__viewport");if(p){var m=window.getComputedStyle(p),h=new window.DOMMatrixReadOnly(m.transform),g=h.m22,v=a.reduce(function(_,y){var S=s.get(y.id);if(S){var b=Xl(y.nodeElement),w=!!(b.width&&b.height&&(S.width!==b.width||S.height!==b.height||y.forceUpdate));w&&(s.set(S.id,ot(ot({},S),{},fe({},Te,ot(ot({},S[Te]),{},{handleBounds:{source:pu(".source",y.nodeElement,g),target:pu(".target",y.nodeElement,g)}})),b)),_.push({id:S.id,type:"dimensions",dimensions:b}))}return _},[]),C=u||l&&!u&&qh(n,ot({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:C}),(v==null?void 0:v.length)>0&&(i==null||i(v))}},updateNodePositions:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,u=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var d=a.map(function(h){var g={id:h.id,type:"position",dragging:i};return o&&(g.positionAbsolute=h.positionAbsolute,g.position=h.position),g});if(d!=null&&d.length){if(c){var p=xh(d,Array.from(u.values())),m=eo(p,u);t({nodeInternals:m})}l==null||l(d)}}},addSelectedNodes:function(a){var o=n(),i=o.multiSelectionActive,s=o.nodeInternals,l=o.edges,u,c=null;i?u=a.map(function(d){return Pt(d,!0)}):(u=pn(Array.from(s.values()),a),c=pn(l,[])),Tr({changedNodes:u,changedEdges:c,get:n,set:t})},addSelectedEdges:function(a){var o=n(),i=o.multiSelectionActive,s=o.edges,l=o.nodeInternals,u,c=null;i?u=a.map(function(d){return Pt(d,!0)}):(u=pn(s,a),c=pn(Array.from(l.values()),[])),Tr({changedNodes:c,changedEdges:u,get:n,set:t})},unselectNodesAndEdges:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.nodes,i=a.edges,s=n(),l=s.nodeInternals,u=s.edges,c=o||Array.from(l.values()),d=i||u,p=c.map(function(h){return h.selected=!1,Pt(h.id,!1)}),m=d.map(function(h){return Pt(h.id,!1)});Tr({changedNodes:p,changedEdges:m,get:n,set:t})},setMinZoom:function(a){var o=n(),i=o.d3Zoom,s=o.maxZoom;i==null||i.scaleExtent([a,s]),t({minZoom:a})},setMaxZoom:function(a){var o=n(),i=o.d3Zoom,s=o.minZoom;i==null||i.scaleExtent([s,a]),t({maxZoom:a})},setTranslateExtent:function(a){var o=n(),i=o.d3Zoom;i==null||i.translateExtent(a),t({translateExtent:a})},resetSelectedElements:function(){var a=n(),o=a.nodeInternals,i=a.edges,s=Array.from(o.values()),l=s.filter(function(c){return c.selected}).map(function(c){return Pt(c.id,!1)}),u=i.filter(function(c){return c.selected}).map(function(c){return Pt(c.id,!1)});Tr({changedNodes:l,changedEdges:u,get:n,set:t})},setNodeExtent:function(a){var o=n(),i=o.nodeInternals;i.forEach(function(s){s.positionAbsolute=Ch(s.position,a)}),t({nodeExtent:a,nodeInternals:new Map(i)})},reset:function(){return t(ot({},gu))}})})};function Qe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Qe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function He(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function l_(e){if(Array.isArray(e))return Zi(e)}function c_(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wt(e){return l_(e)||c_(e)||Sh(e)||u_()}var d_={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},viewportInitialized:!1},f_=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},p_=function(){var t=qe(),n=xe(f_,He),r=n.d3Zoom,a=n.d3Selection,o=I.useMemo(function(){return a&&r?{zoomIn:function(s){return r.scaleBy(Bt(a,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(Bt(a,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return r.scaleTo(Bt(a,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var u,c,d,p=le(t.getState().transform,3),m=p[0],h=p[1],g=p[2],v=jt.translate((u=s.x)!==null&&u!==void 0?u:m,(c=s.y)!==null&&c!==void 0?c:h).scale((d=s.zoom)!==null&&d!==void 0?d:g);r.transform(Bt(a,l==null?void 0:l.duration),v)},getViewport:function(){var s=le(t.getState().transform,3),l=s[0],u=s[1],c=s[2];return{x:l,y:u,zoom:c}},fitView:function(s){return qh(t.getState,s)},setCenter:function(s,l,u){var c=t.getState(),d=c.width,p=c.height,m=c.maxZoom,h=typeof(u==null?void 0:u.zoom)<"u"?u.zoom:m,g=d/2-s*h,v=p/2-l*h,C=jt.translate(g,v).scale(h);r.transform(Bt(a,u==null?void 0:u.duration),C)},fitBounds:function(s,l){var u,c=t.getState(),d=c.width,p=c.height,m=c.minZoom,h=c.maxZoom,g=Oh(s,d,p,m,h,(u=l==null?void 0:l.padding)!==null&&u!==void 0?u:.1),v=le(g,3),C=v[0],_=v[1],y=v[2],S=jt.translate(C,_).scale(y);r.transform(Bt(a,l==null?void 0:l.duration),S)},project:function(s){var l=t.getState(),u=l.transform,c=l.snapToGrid,d=l.snapGrid;return kh(s,u,c,d)},viewportInitialized:!0}:d_},[r,a]);return o};function yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jl(){var e=p_(),t=qe(),n=I.useCallback(function(){var d=t.getState(),p=d.nodeInternals,m=Array.from(p.values());return m.map(function(h){return ln({},h)})},[]),r=I.useCallback(function(d){var p=t.getState(),m=p.nodeInternals;return m.get(d)},[]),a=I.useCallback(function(){var d=t.getState(),p=d.edges,m=p===void 0?[]:p;return m.map(function(h){return ln({},h)})},[]),o=I.useCallback(function(d){var p=t.getState(),m=p.edges,h=m===void 0?[]:m;return h.find(function(g){return g.id===d})},[]),i=I.useCallback(function(d){var p=t.getState(),m=p.nodeInternals,h=p.setNodes,g=p.hasDefaultNodes,v=p.onNodesChange,C=Array.from(m.values()),_=typeof d=="function"?d(C):d;if(g)h(_);else if(v){var y=_.length===0?C.map(function(S){return{type:"remove",id:S.id}}):_.map(function(S){return{item:S,type:"reset"}});v(y)}},[]),s=I.useCallback(function(d){var p=t.getState(),m=p.edges,h=m===void 0?[]:m,g=p.setEdges,v=p.hasDefaultEdges,C=p.onEdgesChange,_=typeof d=="function"?d(h):d;if(v)g(_);else if(C){var y=_.length===0?h.map(function(S){return{type:"remove",id:S.id}}):_.map(function(S){return{item:S,type:"reset"}});C(y)}},[]),l=I.useCallback(function(d){var p=Array.isArray(d)?d:[d],m=t.getState(),h=m.nodeInternals,g=m.setNodes,v=m.hasDefaultNodes,C=m.onNodesChange;if(v){var _=Array.from(h.values()),y=[].concat(_,Wt(p));g(y)}else if(C){var S=p.map(function(b){return{item:b,type:"add"}});C(S)}},[]),u=I.useCallback(function(d){var p=Array.isArray(d)?d:[d],m=t.getState(),h=m.edges,g=h===void 0?[]:h,v=m.setEdges,C=m.hasDefaultEdges,_=m.onEdgesChange;if(C)v([].concat(Wt(g),Wt(p)));else if(_){var y=p.map(function(S){return{item:S,type:"add"}});_(y)}},[]),c=I.useCallback(function(){var d=t.getState(),p=d.nodeInternals,m=d.edges,h=m===void 0?[]:m,g=d.transform,v=Array.from(p.values()),C=le(g,3),_=C[0],y=C[1],S=C[2];return{nodes:v.map(function(b){return ln({},b)}),edges:h.map(function(b){return ln({},b)}),viewport:{x:_,y,zoom:S}}},[]);return I.useMemo(function(){return ln(ln({},e),{},{getNodes:n,getNode:r,getEdges:a,getEdge:o,setNodes:i,setEdges:s,addNodes:l,addEdges:u,toObject:c})},[e,n,r,a,o,i,s,l,u,c])}function h_(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function za(e,t){if(e==null)return{};var n=h_(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function m_(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function g_(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function v_(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function y_(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function b_(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}var w_=["children","className"];function bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function S_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var kr=function(t){var n=t.children,r=t.className,a=za(t,w_);return V.createElement("button",S_({type:"button",className:Qe(["react-flow__controls-button",r])},a),n)},C_=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Lh=function(t){var n=t.style,r=t.showZoom,a=r===void 0?!0:r,o=t.showFitView,i=o===void 0?!0:o,s=t.showInteractive,l=s===void 0?!0:s,u=t.fitViewOptions,c=t.onZoomIn,d=t.onZoomOut,p=t.onFitView,m=t.onInteractiveChange,h=t.className,g=t.children,v=qe(),C=I.useState(!1),_=le(C,2),y=_[0],S=_[1],b=xe(C_),w=Jl(),E=w.zoomIn,N=w.zoomOut,x=w.fitView;if(I.useEffect(function(){S(!0)},[]),!y)return null;var k=function(){E==null||E(),c==null||c()},A=function(){N==null||N(),d==null||d()},D=function(){x==null||x(u),p==null||p()},M=function(){v.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),m==null||m(!b)};return V.createElement("div",{className:Qe(["react-flow__controls",h]),style:n},a&&V.createElement(V.Fragment,null,V.createElement(kr,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in"},V.createElement(m_,null)),V.createElement(kr,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out"},V.createElement(g_,null))),i&&V.createElement(kr,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},V.createElement(v_,null)),l&&V.createElement(kr,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},b?V.createElement(b_,null):V.createElement(y_,null)),g)};Lh.displayName="Controls";var E_=I.memo(Lh),__=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function N_(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&__.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var a="".concat(r).split("-");return V.createElement("div",{className:Qe(["react-flow__attribution"].concat(Wt(a))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer"},"React Flow"))}var x_=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function I_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var T_=function(t){var n=t.x,r=t.y,a=t.label,o=t.labelStyle,i=o===void 0?{}:o,s=t.labelShowBg,l=s===void 0?!0:s,u=t.labelBgStyle,c=u===void 0?{}:u,d=t.labelBgPadding,p=d===void 0?[2,4]:d,m=t.labelBgBorderRadius,h=m===void 0?2:m,g=t.children,v=t.className,C=za(t,x_),_=I.useRef(null),y=I.useState({x:0,y:0,width:0,height:0}),S=le(y,2),b=S[0],w=S[1],E=Qe(["react-flow__edge-textwrapper",v]);return I.useEffect(function(){if(_.current){var N=_.current.getBBox();w({x:N.x,y:N.y,width:N.width,height:N.height})}},[a]),typeof a>"u"||!a?null:V.createElement("g",I_({transform:"translate(".concat(n-b.width/2," ").concat(r-b.height/2,")"),className:E},C),l&&V.createElement("rect",{width:b.width+2*p[0],x:-p[0],y:-p[1],height:b.height+2*p[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),V.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:_,style:i},a),g)},k_=I.memo(T_),Ha=function(e){var t=e.path,n=e.centerX,r=e.centerY,a=e.label,o=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,u=e.labelBgBorderRadius,c=e.style,d=e.markerEnd,p=e.markerStart,m=a?V.createElement(k_,{x:n,y:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null;return V.createElement(V.Fragment,null,V.createElement("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:d,markerStart:p}),m)};function ia(e){var t=e.pos,n=e.x1,r=e.y1,a=e.x2,o=e.y2,i,s;switch(t){case X.Left:case X.Right:i=.5*(n+a),s=r;break;case X.Top:case X.Bottom:i=n,s=.5*(r+o);break}return[i,s]}function Mh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?X.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?X.Top:s,u=ia({pos:a,x1:t,y1:n,x2:o,y2:i}),c=le(u,2),d=c[0],p=c[1],m=ia({pos:l,x1:o,y1:i,x2:t,y2:n}),h=le(m,2),g=h[0],v=h[1];return"M".concat(t,",").concat(n," C").concat(d,",").concat(p," ").concat(g,",").concat(v," ").concat(o,",").concat(i)}function R_(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?X.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?X.Top:s,u=ia({pos:a,x1:t,y1:n,x2:o,y2:i}),c=le(u,2),d=c[0],p=c[1],m=ia({pos:l,x1:o,y1:i,x2:t,y2:n}),h=le(m,2),g=h[0],v=h[1],C=t*.125+d*.375+g*.375+o*.125,_=n*.125+p*.375+v*.375+i*.125,y=Math.abs(C-t),S=Math.abs(_-n);return[C,_,y,S]}var Vh=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.sourcePosition,i=o===void 0?X.Bottom:o,s=e.targetPosition,l=s===void 0?X.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,p=e.labelBgStyle,m=e.labelBgPadding,h=e.labelBgBorderRadius,g=e.style,v=e.markerEnd,C=e.markerStart,_={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:a,targetPosition:l},y=Mh(_),S=R_(_),b=le(S,2),w=b[0],E=b[1];return V.createElement(Ha,{path:y,centerX:w,centerY:E,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:v,markerStart:C})});function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function O_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Su(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Cu=[X.Left,X.Right],$h=function(t){var n=t.sourceX,r=t.sourceY,a=t.targetX,o=t.targetY,i=t.sourcePosition,s=i===void 0?X.Bottom:i,l=t.targetPosition,u=l===void 0?X.Top:l,c=Cu.includes(s),d=Cu.includes(u),p=c&&!d||d&&!c;if(p){var m=c?Math.abs(a-n):0,h=n>a?n-m:n+m,g=c?0:Math.abs(o-r),v=r<o?r+g:r-g;return[h,v,m,g]}var C=Math.abs(a-n)/2,_=a<n?a+C:a-C,y=Math.abs(o-r)/2,S=o<r?o+y:o-y;return[_,S,C,y]};function Vn(e,t,n){return n===void 0?n:function(r){var a=t().edges.find(function(o){return o.id===e});n(r,O_({},a))}}var to=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},no=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},ro=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},ao=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},oo=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},io=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},so=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},lo=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function es(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?X.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?X.Top:s,u=e.borderRadius,c=u===void 0?5:u,d=e.centerX,p=e.centerY,m=$h({sourceX:t,sourceY:n,targetX:o,targetY:i}),h=le(m,4),g=h[0],v=h[1],C=h[2],_=h[3],y=Math.min(c,Math.abs(o-t)),S=Math.min(c,Math.abs(i-n)),b=Math.min(y,S,C,_),w=[X.Left,X.Right],E=typeof d<"u"?d:g,N=typeof p<"u"?p:v,x=null,k=null;return t<=o?(x=n<=i?to(t,N,b):io(t,N,b),k=n<=i?lo(o,N,b):ao(o,N,b)):(x=n<i?ro(t,N,b):so(t,N,b),k=n<i?oo(o,N,b):no(o,N,b)),w.includes(a)&&w.includes(l)?t<=o?(x=n<=i?lo(E,n,b):ao(E,n,b),k=n<=i?to(E,i,b):io(E,i,b)):(a===X.Right&&l===X.Left||a===X.Left&&l===X.Right||a===X.Left&&l===X.Left)&&(x=n<=i?oo(E,n,b):no(E,n,b),k=n<=i?ro(E,i,b):so(E,i,b)):w.includes(a)&&!w.includes(l)?(t<=o?x=n<=i?lo(o,n,b):ao(o,n,b):x=n<=i?oo(o,n,b):no(o,n,b),k=""):!w.includes(a)&&w.includes(l)&&(t<=o?x=n<=i?to(t,i,b):io(t,i,b):x=n<=i?ro(t,i,b):so(t,i,b),k=""),"M ".concat(t,",").concat(n).concat(x).concat(k,"L ").concat(o,",").concat(i)}var ec=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,p=e.sourcePosition,m=p===void 0?X.Bottom:p,h=e.targetPosition,g=h===void 0?X.Top:h,v=e.markerEnd,C=e.markerStart,_=e.borderRadius,y=_===void 0?5:_,S=$h({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:m,targetPosition:g}),b=le(S,2),w=b[0],E=b[1],N=es({sourceX:t,sourceY:n,sourcePosition:m,targetX:r,targetY:a,targetPosition:g,borderRadius:y});return V.createElement(Ha,{path:N,centerX:w,centerY:E,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:v,markerStart:C})});function Eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Eu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fh=I.memo(function(e){return V.createElement(ec,_u(_u({},e),{},{borderRadius:0}))}),Bh=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,p=e.markerEnd,m=e.markerStart,h=Math.abs(a-n)/2,g=a<n?a+h:a-h,v=Math.abs(r-t)/2,C=r<t?r+v:r-v,_="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(a);return V.createElement(Ha,{path:_,centerX:C,centerY:g,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:p,markerStart:m})});function Rr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function sa(e){var t=e.pos,n=e.x1,r=e.y1,a=e.x2,o=e.y2,i=e.c,s,l;switch(t){case X.Left:s=n-Rr(n-a,i),l=r;break;case X.Right:s=n+Rr(a-n,i),l=r;break;case X.Top:s=n,l=r-Rr(r-o,i);break;case X.Bottom:s=n,l=r+Rr(o-r,i);break}return[s,l]}function zh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?X.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?X.Top:s,u=e.curvature,c=u===void 0?.25:u,d=sa({pos:a,x1:t,y1:n,x2:o,y2:i,c}),p=le(d,2),m=p[0],h=p[1],g=sa({pos:l,x1:o,y1:i,x2:t,y2:n,c}),v=le(g,2),C=v[0],_=v[1];return"M".concat(t,",").concat(n," C").concat(m,",").concat(h," ").concat(C,",").concat(_," ").concat(o,",").concat(i)}function A_(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,a=r===void 0?X.Bottom:r,o=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?X.Top:s,u=e.curvature,c=u===void 0?.25:u,d=sa({pos:a,x1:t,y1:n,x2:o,y2:i,c}),p=le(d,2),m=p[0],h=p[1],g=sa({pos:l,x1:o,y1:i,x2:t,y2:n,c}),v=le(g,2),C=v[0],_=v[1],y=t*.125+m*.375+C*.375+o*.125,S=n*.125+h*.375+_*.375+i*.125,b=Math.abs(y-t),w=Math.abs(S-n);return[y,S,b,w]}var ts=I.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,o=e.sourcePosition,i=o===void 0?X.Bottom:o,s=e.targetPosition,l=s===void 0?X.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,p=e.labelBgStyle,m=e.labelBgPadding,h=e.labelBgBorderRadius,g=e.style,v=e.markerEnd,C=e.markerStart,_=e.curvature,y={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:a,targetPosition:l,curvature:_},S=zh(y),b=A_(y),w=le(b,2),E=w[0],N=w[1];return V.createElement(Ha,{path:S,centerX:E,centerY:N,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:v,markerStart:C})}),tc=I.createContext(null),q_=tc.Provider;tc.Consumer;function ns(e,t,n,r,a,o,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,u=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||u)){c.isHoveringHandle=!0;var d=s.getAttribute("data-nodeid"),p=s.getAttribute("data-handleid"),m=n?{source:d,sourceHandle:p,target:r,targetHandle:a}:{source:r,sourceHandle:a,target:d,targetHandle:p};c.connection=m;var h=t===xn.Strict?n&&u||!n&&l:!0;h&&(c.isValid=o(m))}return c}function co(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Hh(e){var t=e.event,n=e.handleId,r=e.nodeId,a=e.onConnect,o=e.isTarget,i=e.getState,s=e.setState,l=e.isValidConnection,u=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,d=t.target.closest(".react-flow"),p=Eh(t.target);if(!p)return;var m=p.elementFromPoint(t.clientX,t.clientY),h=m==null?void 0:m.classList.contains("target"),g=m==null?void 0:m.classList.contains("source");if(!d||!h&&!g&&!u)return;var v=i(),C=v.onConnectStart,_=v.connectionMode,y=u||(h?"target":"source"),S=d.getBoundingClientRect(),b;s({connectionPosition:{x:t.clientX-S.left,y:t.clientY-S.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:y}),C==null||C(t,{nodeId:r,handleId:n,handleType:y});function w(N){s({connectionPosition:{x:N.clientX-S.left,y:N.clientY-S.top}});var x=ns(N,_,o,r,n,l,p),k=x.connection,A=x.elementBelow,D=x.isValid,M=x.isHoveringHandle;if(!M)return co(b);k.source!==k.target&&A&&(co(b),b=A,A.classList.add("react-flow__handle-connecting"),A.classList.toggle("react-flow__handle-valid",D))}function E(N){var x=i(),k=x.onConnectStop,A=x.onConnectEnd,D=ns(N,_,o,r,n,l,p),M=D.connection,T=D.isValid;k==null||k(N),T&&(a==null||a(M)),A==null||A(N),u&&c&&c(N),co(b),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),p.removeEventListener("mousemove",w),p.removeEventListener("mouseup",E)}p.addEventListener("mousemove",w),p.addEventListener("mouseup",E)}var P_=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function Nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var D_=function(){return!0},L_=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Uh=I.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,a=e.position,o=a===void 0?X.Top:a,i=e.isValidConnection,s=i===void 0?D_:i,l=e.isConnectable,u=l===void 0?!0:l,c=e.id,d=e.onConnect,p=e.children,m=e.className,h=e.onMouseDown,g=za(e,P_),v=qe(),C=I.useContext(tc),_=xe(L_,He),y=_.connectionStartHandle,S=_.connectOnClick,b=c||null,w=r==="target",E=function(A){var D=v.getState(),M=D.defaultEdgeOptions,T=D.onConnect,P=D.hasDefaultEdges,R=uo(uo({},M),A);if(P){var L=v.getState(),z=L.edges;v.setState({edges:o_(R,z)})}T==null||T(R),d==null||d(R)},N=function(A){A.button===0&&Hh({event:A,handleId:b,nodeId:C,onConnect:E,isTarget:w,getState:v.getState,setState:v.setState,isValidConnection:s}),h==null||h(A)},x=function(A){var D=v.getState(),M=D.onClickConnectStart,T=D.onClickConnectStop,P=D.onClickConnectEnd,R=D.connectionMode;if(!y){M==null||M(A,{nodeId:C,handleId:b,handleType:r}),v.setState({connectionStartHandle:{nodeId:C,type:r,handleId:b}});return}var L=Eh(A.target),z=ns(A,R,y.type==="target",y.nodeId,y.handleId||null,s,L),B=z.connection,F=z.isValid;T==null||T(A),F&&E(B),P==null||P(A),v.setState({connectionStartHandle:null})};return V.createElement("div",uo({"data-handleid":b,"data-nodeid":C,"data-handlepos":o,className:Qe(["react-flow__handle","react-flow__handle-".concat(o),"nodrag",m,{source:!w,target:w,connectable:u,connecting:(y==null?void 0:y.nodeId)===C&&(y==null?void 0:y.handleId)===b&&(y==null?void 0:y.type)===r}]),onMouseDown:N,onClick:S?x:void 0,ref:t},g),p)});Uh.displayName="Handle";var la=I.memo(Uh),jh=function(t){var n=t.data,r=t.isConnectable,a=t.targetPosition,o=a===void 0?X.Top:a,i=t.sourcePosition,s=i===void 0?X.Bottom:i;return V.createElement(V.Fragment,null,V.createElement(la,{type:"target",position:o,isConnectable:r}),n==null?void 0:n.label,V.createElement(la,{type:"source",position:s,isConnectable:r}))};jh.displayName="DefaultNode";var rs=I.memo(jh),Wh=function(t){var n=t.data,r=t.isConnectable,a=t.sourcePosition,o=a===void 0?X.Bottom:a;return V.createElement(V.Fragment,null,n==null?void 0:n.label,V.createElement(la,{type:"source",position:o,isConnectable:r}))};Wh.displayName="InputNode";var Gh=I.memo(Wh),Yh=function(t){var n=t.data,r=t.isConnectable,a=t.targetPosition,o=a===void 0?X.Top:a;return V.createElement(V.Fragment,null,V.createElement(la,{type:"target",position:o,isConnectable:r}),n==null?void 0:n.label)};Yh.displayName="OutputNode";var Xh=I.memo(Yh),M_=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},V_=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),a=n.selectedNodes.map(function(s){return s.id}),o=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return He(r,a)&&He(o,i)};function $_(e){var t=e.onSelectionChange,n=xe(M_,V_),r=n.selectedNodes,a=n.selectedEdges;return I.useEffect(function(){t({nodes:r,edges:a})},[r,a]),null}var F_=I.memo($_),B_=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Rt(e,t){I.useEffect(function(){typeof e<"u"&&t(e)},[e])}function me(e,t,n){I.useEffect(function(){typeof t<"u"&&n(fe({},e,t))},[t])}var z_=function(t){var n=t.nodes,r=t.edges,a=t.defaultNodes,o=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,u=t.onConnectEnd,c=t.onClickConnectStart,d=t.onClickConnectStop,p=t.onClickConnectEnd,m=t.nodesDraggable,h=t.nodesConnectable,g=t.minZoom,v=t.maxZoom,C=t.nodeExtent,_=t.onNodesChange,y=t.onEdgesChange,S=t.elementsSelectable,b=t.connectionMode,w=t.snapGrid,E=t.snapToGrid,N=t.translateExtent,x=t.connectOnClick,k=t.defaultEdgeOptions,A=t.fitView,D=t.fitViewOptions,M=t.onNodesDelete,T=t.onEdgesDelete,P=t.onNodeDrag,R=t.onNodeDragStart,L=t.onNodeDragStop,z=t.onSelectionDrag,B=t.onSelectionDragStart,F=t.onSelectionDragStop,W=xe(B_,He),Q=W.setNodes,q=W.setEdges,$=W.setDefaultNodesAndEdges,U=W.setMinZoom,G=W.setMaxZoom,H=W.setTranslateExtent,Z=W.setNodeExtent,K=W.reset,Y=qe();return I.useEffect(function(){return $(a,o),function(){K()}},[]),me("defaultEdgeOptions",k,Y.setState),me("connectionMode",b,Y.setState),me("onConnect",i,Y.setState),me("onConnectStart",s,Y.setState),me("onConnectStop",l,Y.setState),me("onConnectEnd",u,Y.setState),me("onClickConnectStart",c,Y.setState),me("onClickConnectStop",d,Y.setState),me("onClickConnectEnd",p,Y.setState),me("nodesDraggable",m,Y.setState),me("nodesConnectable",h,Y.setState),me("elementsSelectable",S,Y.setState),me("snapToGrid",E,Y.setState),me("snapGrid",w,Y.setState),me("onNodesChange",_,Y.setState),me("onEdgesChange",y,Y.setState),me("connectOnClick",x,Y.setState),me("fitViewOnInit",A,Y.setState),me("fitViewOnInitOptions",D,Y.setState),me("onNodesDelete",M,Y.setState),me("onEdgesDelete",T,Y.setState),me("onNodeDrag",P,Y.setState),me("onNodeDragStart",R,Y.setState),me("onNodeDragStop",L,Y.setState),me("onSelectionDrag",z,Y.setState),me("onSelectionDragStart",B,Y.setState),me("onSelectionDragStop",F,Y.setState),Rt(n,Q),Rt(r,q),Rt(a,Q),Rt(o,q),Rt(g,U),Rt(v,G),Rt(N,H),Rt(C,Z),null},H_=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",U_=H_,j_=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",W_=j_,G_=function(t,n,r){return r===X.Left?t-n:r===X.Right?t+n:t},Y_=function(t,n,r){return r===X.Top?t-n:r===X.Bottom?t+n:t},xu=function(t){var n=t.className,r=t.position,a=t.centerX,o=t.centerY,i=t.radius,s=i===void 0?10:i;return V.createElement("circle",{className:Qe(["react-flow__edgeupdater",n]),cx:G_(a,s,r),cy:Y_(o,s,r),r:s,stroke:"transparent",fill:"transparent"})},cn=function(e){var t=function(r){var a=r.id,o=r.className,i=r.type,s=r.data,l=r.onClick,u=r.onEdgeDoubleClick,c=r.selected,d=r.animated,p=r.label,m=r.labelStyle,h=r.labelShowBg,g=r.labelBgStyle,v=r.labelBgPadding,C=r.labelBgBorderRadius,_=r.style,y=r.source,S=r.target,b=r.sourceX,w=r.sourceY,E=r.targetX,N=r.targetY,x=r.sourcePosition,k=r.targetPosition,A=r.elementsSelectable,D=r.hidden,M=r.sourceHandleId,T=r.targetHandleId,P=r.onContextMenu,R=r.onMouseEnter,L=r.onMouseMove,z=r.onMouseLeave,B=r.edgeUpdaterRadius,F=r.onEdgeUpdate,W=r.onEdgeUpdateStart,Q=r.onEdgeUpdateEnd,q=r.markerEnd,$=r.markerStart,U=r.rfId,G=I.useState(!1),H=le(G,2),Z=H[0],K=H[1],Y=qe(),ge=function(Re){var oe=Y.getState(),Ge=oe.edges,Ie=oe.addSelectedEdges,Ke=Ge.find(function(ft){return ft.id===a});A&&(Y.setState({nodesSelectionActive:!1}),Ie([a])),l==null||l(Re,Ke)},ue=Vn(a,Y.getState,u),Ee=Vn(a,Y.getState,P),Se=Vn(a,Y.getState,R),ke=Vn(a,Y.getState,L),je=Vn(a,Y.getState,z),Me=function(Re,oe){var Ge=oe?S:y,Ie=(oe?T:M)||null,Ke=oe?"target":"source",ft=function(){return!0},Wa=oe,on=Y.getState().edges.find(function(Tt){return Tt.id===a});W==null||W(Re,on,Ke);var Ga=Q?function(Tt){return Q(Tt,on,Ke)}:void 0,gr=function(vr){return F==null?void 0:F(on,vr)};Hh({event:Re,handleId:Ie,nodeId:Ge,onConnect:gr,isTarget:Wa,getState:Y.getState,setState:Y.setState,isValidConnection:ft,elementEdgeUpdaterType:Ke,onEdgeUpdateEnd:Ga})},We=function(Re){return Me(Re,!0)},at=function(Re){return Me(Re,!1)},_e=function(){return K(!0)},Ve=function(){return K(!1)},dt=I.useMemo(function(){return"url(#".concat(Ki($,U),")")},[$,U]),ne=I.useMemo(function(){return"url(#".concat(Ki(q,U),")")},[q,U]);if(D)return null;var ce=!A&&!l,te=typeof F<"u",ve=Qe(["react-flow__edge","react-flow__edge-".concat(i),o,{selected:c,animated:d,inactive:ce,updating:Z}]);return V.createElement("g",{className:ve,onClick:ge,onDoubleClick:ue,onContextMenu:Ee,onMouseEnter:Se,onMouseMove:ke,onMouseLeave:je},V.createElement(e,{id:a,source:y,target:S,selected:c,animated:d,label:p,labelStyle:m,labelShowBg:h,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:C,data:s,style:_,sourceX:b,sourceY:w,targetX:E,targetY:N,sourcePosition:x,targetPosition:k,sourceHandleId:M,targetHandleId:T,markerStart:dt,markerEnd:ne,"data-testid":"rf__edge-".concat(a)}),te&&V.createElement("g",{onMouseDown:We,onMouseEnter:_e,onMouseOut:Ve},V.createElement(xu,{position:x,centerX:b,centerY:w,radius:B})),te&&V.createElement("g",{onMouseDown:at,onMouseEnter:_e,onMouseOut:Ve},V.createElement(xu,{position:k,centerX:E,centerY:N,radius:B})))};return t.displayName="EdgeWrapper",I.memo(t)};function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Iu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X_(e){var t={default:cn(e.default||ts),straight:cn(e.bezier||Bh),step:cn(e.step||Fh),smoothstep:cn(e.step||ec),simplebezier:cn(e.simplebezier||Vh)},n={},r=Object.keys(e).filter(function(a){return!["default","bezier"].includes(a)}).reduce(function(a,o){return a[o]=cn(e[o]||ts),a},n);return Tu(Tu({},t),r)}function ku(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,a=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case X.Top:return{x:r+o/2,y:a};case X.Right:return{x:r+o,y:a+i/2};case X.Bottom:return{x:r+o/2,y:a+i};case X.Left:return{x:r,y:a+i/2}}}function Ru(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var Q_=function(t,n,r,a,o,i){var s=ku(r,t,n),l=ku(i,a,o);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function Z_(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,a=e.sourceHeight,o=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,u=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+o),y2:Math.max(t.y+a,n.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var d=oa({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),p=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),m=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y)),h=Math.ceil(p*m);return h>0}function Ou(e,t){var n,r,a,o,i,s=e.get(t),l=(s==null||(n=s[Te])===null||n===void 0?void 0:n.handleBounds)||null,u=!s||!l||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((a=s.positionAbsolute)===null||a===void 0?void 0:a.y)>"u";return[{x:(s==null||(o=s.positionAbsolute)===null||o===void 0?void 0:o.x)||0,y:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!u]}var K_=typeof document<"u"?document:null,ca=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:K_},n=I.useState(!1),r=le(n,2),a=r[0],o=r[1],i=I.useRef(new Set([])),s=I.useMemo(function(){if(e!==null){var d=Array.isArray(e)?e:[e],p=d.filter(function(h){return typeof h=="string"}).map(function(h){return h.split("+")}),m=p.reduce(function(h,g){return h.concat.apply(h,Wt(g))},[]);return[p,m]}return[[],[]]},[e]),l=le(s,2),u=l[0],c=l[1];return I.useEffect(function(){if(e!==null){var d,p,m=function(C){if(Pu(C))return!1;var _=qu(C.code,c);i.current.add(C[_]),Au(u,i.current,!1)&&(C.preventDefault(),o(!0))},h=function(C){if(Pu(C))return!1;var _=qu(C.code,c);Au(u,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(C[_])},g=function(){i.current.clear(),o(!1)};return t==null||(d=t.target)===null||d===void 0||d.addEventListener("keydown",m),t==null||(p=t.target)===null||p===void 0||p.addEventListener("keyup",h),window.addEventListener("blur",g),function(){var v,C;t==null||(v=t.target)===null||v===void 0||v.removeEventListener("keydown",m),t==null||(C=t.target)===null||C===void 0||C.removeEventListener("keyup",h),window.removeEventListener("blur",g)}}},[e,o]),a};function Au(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(a){return t.has(a)})})}function qu(e,t){return t.includes(e)?"code":"key"}function Pu(e){var t,n=((t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))}var J_=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},eN=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=qe(),a=xe(J_,He),o=a.onNodesChange,i=a.onEdgesChange,s=ca(t),l=ca(n);I.useEffect(function(){var u=r.getState(),c=u.nodeInternals,d=u.edges,p=u.hasDefaultNodes,m=u.hasDefaultEdges,h=u.onNodesDelete,g=u.onEdgesDelete,v=Array.from(c.values()),C=v.reduce(function(N,x){return(!x.selected&&x.parentNode&&N.find(function(k){return k.id===x.parentNode})||x.selected)&&N.push(x),N},[]),_=d.filter(function(N){return N.selected});if(s&&(C||_)){var y=Zl(C,d),S=[].concat(Wt(_),Wt(y)),b=S.reduce(function(N,x){return N.includes(x.id)||N.push(x.id),N},[]);if((m||p)&&(m&&r.setState({edges:d.filter(function(N){return!b.includes(N.id)})}),p&&(C.forEach(function(N){c.delete(N.id)}),r.setState({nodeInternals:new Map(c)}))),b.length>0&&(g==null||g(S),i)){var w=b.map(function(N){return{id:N,type:"remove"}});i(w)}if(C.length>0&&(h==null||h(C),o)){var E=C.map(function(N){return{id:N.id,type:"remove"}});o(E)}r.setState({nodesSelectionActive:!1})}},[s,o,i]),I.useEffect(function(){r.setState({multiSelectionActive:l})},[l])};function tN(e){var t=qe();I.useEffect(function(){var n,r=function(){if(e.current){var o=Xl(e.current);t.setState({width:o.width||500,height:o.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var nN=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},fo=function(t){return{x:t.x,y:t.y,zoom:t.k}},Or=function(t,n){return t.target.closest(".".concat(n))},rN=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},aN=function(t){var n=t.onMove,r=t.onMoveStart,a=t.onMoveEnd,o=t.zoomOnScroll,i=o===void 0?!0:o,s=t.zoomOnPinch,l=s===void 0?!0:s,u=t.panOnScroll,c=u===void 0?!1:u,d=t.panOnScrollSpeed,p=d===void 0?.5:d,m=t.panOnScrollMode,h=m===void 0?yn.Free:m,g=t.zoomOnDoubleClick,v=g===void 0?!0:g,C=t.selectionKeyPressed,_=t.elementsSelectable,y=t.panOnDrag,S=y===void 0?!0:y,b=t.translateExtent,w=t.minZoom,E=t.maxZoom,N=t.defaultZoom,x=N===void 0?1:N,k=t.defaultPosition,A=k===void 0?[0,0]:k,D=t.zoomActivationKeyCode,M=t.preventScrolling,T=M===void 0?!0:M,P=t.children,R=t.noWheelClassName,L=t.noPanClassName,z=qe(),B=I.useRef(!1),F=I.useRef(null),W=I.useRef({x:0,y:0,zoom:0}),Q=xe(rN,He),q=Q.d3Zoom,$=Q.d3Selection,U=Q.d3ZoomHandler,G=ca(D);return tN(F),I.useEffect(function(){if(F.current){var H,Z=XE().scaleExtent([w,E]).translateExtent(b),K=et(F.current).call(Z),Y=bn(A[0],b[0][0],b[1][0]),ge=bn(A[1],b[0][1],b[1][1]),ue=bn(x,w,E),Ee=jt.translate(Y,ge).scale(ue);Z.transform(K,Ee),z.setState({d3Zoom:Z,d3Selection:K,d3ZoomHandler:K.on("wheel.zoom"),transform:[Y,ge,ue],domNode:(H=K.node())===null||H===void 0?void 0:H.closest(".react-flow")})}},[]),I.useEffect(function(){$&&q&&(c&&!G?$.on("wheel",function(H){if(Or(H,R))return!1;H.preventDefault(),H.stopImmediatePropagation();var Z=$.property("__zoom").k||1;if(H.ctrlKey&&l){var K=st(H),Y=-H.deltaY*(H.deltaMode===1?.05:H.deltaMode?1:.002)*10,ge=Z*Math.pow(2,Y);q.scaleTo($,ge,K);return}var ue=H.deltaMode===1?20:1,Ee=h===yn.Vertical?0:H.deltaX*ue,Se=h===yn.Horizontal?0:H.deltaY*ue;q.translateBy($,-(Ee/Z)*p,-(Se/Z)*p)}).on("wheel.zoom",null):typeof U<"u"&&$.on("wheel",function(H){if(!T||Or(H,R))return null;H.preventDefault()}).on("wheel.zoom",U))},[c,h,$,q,U,G,l,T,R]),I.useEffect(function(){q&&(C&&!B.current?q.on("zoom",null):C||q.on("zoom",function(H){if(z.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),n){var Z=fo(H.transform);n(H.sourceEvent,Z)}}))},[C,q,n]),I.useEffect(function(){q&&q.on("start",function(H){if(B.current=!0,r){var Z=fo(H.transform);W.current=Z,r(H.sourceEvent,Z)}})},[q,r]),I.useEffect(function(){q&&q.on("end",function(H){if(B.current=!1,a&&nN(W.current,H.transform)){var Z=fo(H.transform);W.current=Z,a(H.sourceEvent,Z)}})},[q,a]),I.useEffect(function(){q&&q.filter(function(H){var Z=G||i,K=l&&H.ctrlKey;return!S&&!Z&&!c&&!v&&!l||C||!v&&H.type==="dblclick"||Or(H,R)&&H.type==="wheel"||Or(H,L)&&H.type!=="wheel"||!l&&H.ctrlKey&&H.type==="wheel"||!Z&&!c&&!K&&H.type==="wheel"||!S&&(H.type==="mousedown"||H.type==="touchstart")?!1:(!H.ctrlKey||H.type==="wheel")&&!H.button})},[q,i,l,c,v,S,C,_,G]),V.createElement("div",{className:"react-flow__renderer react-flow__container",ref:F},P)};function Du(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Du(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Du(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mu(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var oN=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Vu={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},iN=I.memo(function(e){var t=e.selectionKeyPressed,n=qe(),r=I.useRef(0),a=I.useRef(0),o=I.useRef(),i=I.useState(Vu),s=le(i,2),l=s[0],u=s[1],c=xe(oN,He),d=c.userSelectionActive,p=c.elementsSelectable,m=d||t;if(!p||!m)return null;var h=function(){u(Vu),n.setState({userSelectionActive:!1}),r.current=0,a.current=0},g=function(S){var b=S.target.closest(".react-flow");o.current=b.getBoundingClientRect();var w=Mu(S,o.current);u({width:0,height:0,startX:w.x,startY:w.y,x:w.x,y:w.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},v=function(S){var b,w;if(!(!t||!l.draw||!o.current)){var E=Mu(S,o.current),N=(b=l.startX)!==null&&b!==void 0?b:0,x=(w=l.startY)!==null&&w!==void 0?w:0,k=Lu(Lu({},l),{},{x:E.x<N?E.x:N,y:E.y<x?E.y:x,width:Math.abs(E.x-N),height:Math.abs(E.y-x)}),A=n.getState(),D=A.nodeInternals,M=A.edges,T=A.transform,P=A.onNodesChange,R=A.onEdgesChange,L=Array.from(D.values()),z=Rh(D,k,T,!1,!0),B=Zl(z,M).map(function(q){return q.id}),F=z.map(function(q){return q.id});if(r.current!==F.length){r.current=F.length;var W=pn(L,F);W.length&&(P==null||P(W))}if(a.current!==B.length){a.current=B.length;var Q=pn(M,B);Q.length&&(R==null||R(Q))}u(k)}},C=function(){n.setState({nodesSelectionActive:r.current>0}),h()},_=function(){n.setState({nodesSelectionActive:!1}),h()};return V.createElement("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:g,onMouseMove:v,onMouseUp:C,onMouseLeave:_},l.draw&&V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}}))});function $u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$u(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$u(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qh(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:Qh(n,t):!1}function Bu(e,t,n){var r=e;do{var a;if((a=r)!==null&&a!==void 0&&a.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function sN(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!Qh(r,e))}).map(function(r){var a,o,i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((a=(o=r.positionAbsolute)===null||o===void 0?void 0:o.x)!==null&&a!==void 0?a:0),y:t.y-((i=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function lN(e,t,n,r,a,o){var i=le(r,2),s=i[0],l=i[1],u=e.extent||o,c={x:t.x-e.distance.x,y:t.y-e.distance.y};if(n&&(c.x=s*Math.round(c.x/s),c.y=l*Math.round(c.y/l)),e.extent==="parent")if(e.parentNode&&e.width&&e.height){var d=a.get(e.parentNode);u=d!=null&&d.positionAbsolute&&d!==null&&d!==void 0&&d.width&&d!==null&&d!==void 0&&d.height?[[d.positionAbsolute.x,d.positionAbsolute.y],[d.positionAbsolute.x+d.width-e.width,d.positionAbsolute.y+d.height-e.height]]:u}else u=o;else if(e.extent&&e.parentNode){var p,m,h,g,v=a.get(e.parentNode),C=(p=v==null||(m=v.positionAbsolute)===null||m===void 0?void 0:m.x)!==null&&p!==void 0?p:0,_=(h=v==null||(g=v.positionAbsolute)===null||g===void 0?void 0:g.y)!==null&&h!==void 0?h:0;u=[[e.extent[0][0]+C,e.extent[0][1]+_],[e.extent[1][0]+C,e.extent[1][1]+_]]}var y={x:0,y:0};if(e.parentNode){var S,b,w,E,N=a.get(e.parentNode);y={x:(S=N==null||(b=N.positionAbsolute)===null||b===void 0?void 0:b.x)!==null&&S!==void 0?S:0,y:(w=N==null||(E=N.positionAbsolute)===null||E===void 0?void 0:E.y)!==null&&w!==void 0?w:0}}return e.positionAbsolute=u?Ch(c,u):c,e.position={x:e.positionAbsolute.x-y.x,y:e.positionAbsolute.y-y.y},e}function po(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,a=n.map(function(o){var i=r.get(o.id);return Fu(Fu({},i),{},{position:o.position,positionAbsolute:o.positionAbsolute})});return[t?a.find(function(o){return o.id===t}):a[0],a]}function ho(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function Zh(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,a=e.noDragClassName,o=e.handleSelector,i=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,u=I.useState(!1),c=le(u,2),d=c[0],p=c[1],m=qe(),h=I.useRef(),g=I.useRef({x:null,y:null}),v=I.useCallback(function(C){var _=C.sourceEvent,y=m.getState(),S=y.transform,b=y.snapGrid,w=y.snapToGrid,E=_.touches?_.touches[0].clientX:_.clientX,N=_.touches?_.touches[0].clientY:_.clientY,x=kh({x:E,y:N},S,w,b);return x},[]);return I.useEffect(function(){if(t!=null&&t.current){var C=et(t.current);if(r)C.on(".drag",null);else{var _=oC().on("start",function(y){var S=m.getState(),b=S.nodeInternals,w=S.multiSelectionActive,E=S.unselectNodesAndEdges,N=S.onNodeDragStart,x=S.onSelectionDragStart,k=i?N:ho(x);if(!l&&!w&&i){var A;(A=b.get(i))!==null&&A!==void 0&&A.selected||E()}i&&s&&l&&Th({id:i,store:m});var D=v(y);if(g.current=D,h.current=sN(b,D,i),k&&h.current){var M=po({nodeId:i,dragItems:h.current,nodeInternals:b}),T=le(M,2),P=T[0],R=T[1];k(y.sourceEvent,P,R)}}).on("drag",function(y){var S=m.getState(),b=S.updateNodePositions,w=S.snapToGrid,E=S.snapGrid,N=S.nodeInternals,x=S.nodeExtent,k=S.onNodeDrag,A=S.onSelectionDrag,D=v(y);if((g.current.x!==D.x||g.current.y!==D.y)&&h.current){g.current=D,h.current=h.current.map(function(z){return lN(z,D,w,E,N,x)});var M=i?k:ho(A);if(b(h.current,!0,!0),p(!0),M){var T=po({nodeId:i,dragItems:h.current,nodeInternals:N}),P=le(T,2),R=P[0],L=P[1];M(y.sourceEvent,R,L)}}y.on("end",function(z){if(p(!1),h.current){var B=m.getState(),F=B.updateNodePositions,W=B.nodeInternals,Q=B.onNodeDragStop,q=B.onSelectionDragStop,$=i?Q:ho(q);if(F(h.current,!1,!1),$){var U=po({nodeId:i,dragItems:h.current,nodeInternals:W}),G=le(U,2),H=G[0],Z=G[1];$(z.sourceEvent,H,Z)}}})}).filter(function(y){var S=y.target,b=!y.button&&(!a||!Bu(S,".".concat(a),t))&&(!o||Bu(S,o,t));return b});return C.call(_),function(){C.on(".drag",null)}}}},[t,r,a,o,s,m,i,l,v]),d}function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var uN=function(t){return cN({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},Ql(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},dN=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return Ql(n)};function fN(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=qe(),a=xe(uN,He),o=a.transformString,i=a.userSelectionActive,s=xe(dN,He),l=s.width,u=s.height,c=s.x,d=s.y,p=I.useRef(null);if(Zh({nodeRef:p}),i||!l||!u)return null;var m=t?function(h){var g=Array.from(r.getState().nodeInternals.values()).filter(function(v){return v.selected});t(h,g)}:void 0;return V.createElement("div",{className:Qe(["react-flow__nodesselection","react-flow__container",n]),style:{transform:o}},V.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,style:{width:l,height:u,top:d,left:c}}))}var pN=I.memo(fN),hN=function(t){return t.nodesSelectionActive},Kh=function(t){var n=t.children,r=t.onPaneClick,a=t.onPaneContextMenu,o=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,u=t.onMoveEnd,c=t.selectionKeyCode,d=t.multiSelectionKeyCode,p=t.zoomActivationKeyCode,m=t.elementsSelectable,h=t.zoomOnScroll,g=t.zoomOnPinch,v=t.panOnScroll,C=t.panOnScrollSpeed,_=t.panOnScrollMode,y=t.zoomOnDoubleClick,S=t.panOnDrag,b=t.translateExtent,w=t.minZoom,E=t.maxZoom,N=t.defaultZoom,x=t.defaultPosition,k=t.preventScrolling,A=t.onSelectionContextMenu,D=t.noWheelClassName,M=t.noPanClassName,T=qe(),P=xe(hN),R=ca(c);eN({deleteKeyCode:i,multiSelectionKeyCode:d});var L=function(W){r==null||r(W),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},z=a?function(F){return a(F)}:void 0,B=o?function(F){return o(F)}:void 0;return V.createElement(aN,{onMove:s,onMoveStart:l,onMoveEnd:u,selectionKeyPressed:R,elementsSelectable:m,zoomOnScroll:h,zoomOnPinch:g,panOnScroll:v,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:y,panOnDrag:S,translateExtent:b,minZoom:w,maxZoom:E,defaultZoom:N,defaultPosition:x,zoomActivationKeyCode:p,preventScrolling:k,noWheelClassName:D,noPanClassName:M},n,V.createElement(iN,{selectionKeyPressed:R}),P&&V.createElement(pN,{onSelectionContextMenu:A,noPanClassName:M}),V.createElement("div",{className:"react-flow__pane react-flow__container",onClick:L,onContextMenu:z,onWheel:B}))};Kh.displayName="FlowRenderer";var mN=I.memo(Kh);function gN(e){var t=xe(I.useCallback(function(n){return e?Rh(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var vN=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},Jh=function(t){var n=xe(vN,He),r=n.nodesDraggable,a=n.nodesConnectable,o=n.elementsSelectable,i=n.updateNodeDimensions,s=gN(t.onlyRenderVisibleElements),l=I.useRef(),u=I.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(d){var p=d.map(function(m){return{id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}});i(p)});return l.current=c,c},[]);return I.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),V.createElement("div",{className:"react-flow__nodes react-flow__container"},s.map(function(c){var d,p,m,h,g,v,C,_=c.type||"default";t.nodeTypes[_]||(_="default");var y=t.nodeTypes[_]||t.nodeTypes.default,S=!!(c.draggable||r&&typeof c.draggable>"u"),b=!!(c.selectable||o&&typeof c.selectable>"u"),w=!!(c.connectable||a&&typeof c.connectable>"u");return V.createElement(y,{key:c.id,id:c.id,className:c.className,style:c.style,type:_,data:c.data,sourcePosition:c.sourcePosition||X.Bottom,targetPosition:c.targetPosition||X.Top,hidden:c.hidden,xPos:(d=(p=c.positionAbsolute)===null||p===void 0?void 0:p.x)!==null&&d!==void 0?d:0,yPos:(m=(h=c.positionAbsolute)===null||h===void 0?void 0:h.y)!==null&&m!==void 0?m:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:S,isSelectable:b,isConnectable:w,resizeObserver:u,dragHandle:c.dragHandle,zIndex:(g=(v=c[Te])===null||v===void 0?void 0:v.z)!==null&&g!==void 0?g:0,isParent:!!((C=c[Te])!==null&&C!==void 0&&C.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height})}))};Jh.displayName="NodeRenderer";var yN=I.memo(Jh),un;function Hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var bN=(un={},fe(un,X.Left,X.Right),fe(un,X.Right,X.Left),fe(un,X.Top,X.Bottom),fe(un,X.Bottom,X.Top),un),wN=function(e){var t,n,r,a,o,i=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,u=e.connectionLineType,c=u===void 0?gt.Bezier:u,d=e.isConnectable,p=e.CustomConnectionLineComponent,m=xe(I.useCallback(function(B){return{fromNode:B.nodeInternals.get(i),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2]}},[i]),He),h=m.fromNode,g=m.handleId,v=m.toX,C=m.toY,_=h==null||(t=h[Te])===null||t===void 0?void 0:t.handleBounds;if(!h||!d||!(_!=null&&_[s]))return null;var y=_[s],S=g?y.find(function(B){return B.id===g}):y[0],b=S?S.x+S.width/2:((n=h==null?void 0:h.width)!==null&&n!==void 0?n:0)/2,w=S?S.y+S.height/2:(r=h==null?void 0:h.height)!==null&&r!==void 0?r:0,E=((h==null||(a=h.positionAbsolute)===null||a===void 0?void 0:a.x)||0)+b,N=((h==null||(o=h.positionAbsolute)===null||o===void 0?void 0:o.y)||0)+w,x=S==null?void 0:S.position;if(!x)return null;var k=bN[x],A,D,M,T,P,R;switch(s){case"source":A=E,D=N,M=x,T=v,P=C,R=k;break;case"target":A=v,D=C,M=k,T=E,P=N,R=x;break}if(p)return V.createElement("g",{className:"react-flow__connection"},V.createElement(p,{connectionLineType:c,connectionLineStyle:l,fromNode:h,fromHandle:S,fromX:E,fromY:N,toX:v,toY:C,fromPosition:x,toPosition:k,sourcePosition:M,targetPosition:R,sourceNode:h,sourceHandle:S,targetX:T,targetY:P,sourceX:A,sourceY:D}));var L="",z={sourceX:A,sourceY:D,sourcePosition:M,targetX:T,targetY:P,targetPosition:R};return c===gt.Bezier?L=zh(z):c===gt.Step?L=es(Uu(Uu({},z),{},{borderRadius:0})):c===gt.SmoothStep?L=es(z):c===gt.SimpleBezier?L=Mh(z):L="M".concat(A,",").concat(D," ").concat(T,",").concat(P),V.createElement("g",{className:"react-flow__connection"},V.createElement("path",{d:L,className:"react-flow__connection-path",style:l}))};function as(e){return as=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},as(e)}var Ar,SN=function(t){var n=t.color,r=n===void 0?"none":n,a=t.strokeWidth,o=a===void 0?1:a;return V.createElement("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,fill:"none",points:"-5,-4 0,0 -5,4"})},CN=function(t){var n=t.color,r=n===void 0?"none":n,a=t.strokeWidth,o=a===void 0?1:a;return V.createElement("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:o,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},ju=(Ar={},fe(Ar,rr.Arrow,SN),fe(Ar,rr.ArrowClosed,CN),Ar);function EN(e){var t=I.useMemo(function(){var n=ju.hasOwnProperty(e);return n?ju[e]:function(){return null}},[e]);return t}function Wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _N(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var NN=function(t){var n=t.id,r=t.type,a=t.color,o=t.width,i=o===void 0?12.5:o,s=t.height,l=s===void 0?12.5:s,u=t.markerUnits,c=u===void 0?"strokeWidth":u,d=t.strokeWidth,p=t.orient,m=p===void 0?"auto":p,h=EN(r);return V.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:m,refX:"0",refY:"0"},V.createElement(h,{color:a,strokeWidth:d}))},xN=function(t){var n=t.defaultColor,r=t.rfId;return function(a){var o=[];return a.edges.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&as(l)==="object"){var u=Ki(l,r);o.includes(u)||(i.push(_N({id:u,color:l.color||n},l)),o.push(u))}}),i},[]).sort(function(i,s){return i.id.localeCompare(s.id)})}},em=function(t){var n=t.defaultColor,r=t.rfId,a=xe(I.useCallback(xN({defaultColor:n,rfId:r}),[n,r]),function(o,i){return!(o.length!==i.length||o.some(function(s,l){return s.id!==i[l].id}))});return V.createElement("defs",null,a.map(function(o){return V.createElement(NN,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})}))};em.displayName="MarkerDefinitions";var IN=I.memo(em),TN=[{level:0,isMaxLevel:!0,edges:[]}];function kN(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,a=e.reduce(function(i,s){var l=_h(s.zIndex),u=l?s.zIndex:0;if(n){var c,d,p,m;u=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(d=c[Te])===null||d===void 0?void 0:d.z)||0,((p=t.get(s.target))===null||p===void 0||(m=p[Te])===null||m===void 0?void 0:m.z)||0)}return i[u]?i[u].push(s):i[u]=[s],r=u>r?u:r,i},{}),o=Object.entries(a).map(function(i){var s=le(i,2),l=s[0],u=s[1],c=+l;return{edges:u,level:c,isMaxLevel:c===r}});return o.length===0?TN:o}function RN(e,t,n){var r=xe(I.useCallback(function(a){return e?a.edges.filter(function(o){var i=t.get(o.source),s=t.get(o.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&Z_({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:a.width,height:a.height,transform:a.transform})}):a.edges},[e,t]));return kN(r,t,n)}var ON=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},tm=function(t){var n=xe(ON,He),r=n.connectionNodeId,a=n.connectionHandleType,o=n.nodesConnectable,i=n.elementsSelectable,s=n.width,l=n.height,u=n.connectionMode,c=n.nodeInternals,d=RN(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var p=t.connectionLineType,m=t.defaultMarkerColor,h=t.connectionLineStyle,g=t.connectionLineComponent,v=t.connectionLineContainerStyle,C=r&&a;return V.createElement(V.Fragment,null,d.map(function(_){var y=_.level,S=_.edges,b=_.isMaxLevel;return V.createElement("svg",{key:y,style:{zIndex:y},width:s,height:l,className:"react-flow__edges react-flow__container"},b&&V.createElement(IN,{defaultColor:m,rfId:t.rfId}),V.createElement("g",null,S.map(function(w){var E=Ou(c,w.source),N=le(E,3),x=N[0],k=N[1],A=N[2],D=Ou(c,w.target),M=le(D,3),T=M[0],P=M[1],R=M[2];if(!A||!R)return null;var L=w.type||"default";t.edgeTypes[L]||(console.warn('[React Flow]: Edge type "'.concat(L,'" not found. Using fallback type "default". Help: https://reactflow.dev/error#300')),L="default");var z=t.edgeTypes[L]||t.edgeTypes.default,B=u===xn.Strict?P.target:P.target||P.source,F=Ru(k.source,w.sourceHandle||null),W=Ru(B,w.targetHandle||null),Q=(F==null?void 0:F.position)||X.Bottom,q=(W==null?void 0:W.position)||X.Top;if(!F||!W)return null;var $=Q_(x,F,Q,T,W,q),U=$.sourceX,G=$.sourceY,H=$.targetX,Z=$.targetY;return V.createElement(z,{key:w.id,id:w.id,className:Qe([w.className,t.noPanClassName]),type:L,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:U,sourceY:G,targetX:H,targetY:Z,sourcePosition:Q,targetPosition:q,elementsSelectable:i,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId})})))}),C&&V.createElement("svg",{style:v,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement(wN,{connectionNodeId:r,connectionHandleType:a,connectionLineStyle:h,connectionLineType:p,isConnectable:o,CustomConnectionLineComponent:g})))};tm.displayName="EdgeRenderer";var AN=I.memo(tm),qN=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function PN(e){var t=e.children,n=xe(qN);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}function DN(e){var t=Jl(),n=I.useRef(!1);I.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var nm=function(t){var n=t.nodeTypes,r=t.edgeTypes,a=t.onMove,o=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,u=t.onEdgeClick,c=t.onNodeDoubleClick,d=t.onEdgeDoubleClick,p=t.onNodeMouseEnter,m=t.onNodeMouseMove,h=t.onNodeMouseLeave,g=t.onNodeContextMenu,v=t.onSelectionContextMenu,C=t.connectionLineType,_=t.connectionLineStyle,y=t.connectionLineComponent,S=t.connectionLineContainerStyle,b=t.selectionKeyCode,w=t.multiSelectionKeyCode,E=t.zoomActivationKeyCode,N=t.deleteKeyCode,x=t.onlyRenderVisibleElements,k=t.elementsSelectable,A=t.selectNodesOnDrag,D=t.translateExtent,M=t.minZoom,T=t.maxZoom,P=t.defaultZoom,R=t.defaultPosition,L=t.preventScrolling,z=t.defaultMarkerColor,B=t.zoomOnScroll,F=t.zoomOnPinch,W=t.panOnScroll,Q=t.panOnScrollSpeed,q=t.panOnScrollMode,$=t.zoomOnDoubleClick,U=t.panOnDrag,G=t.onPaneClick,H=t.onPaneScroll,Z=t.onPaneContextMenu,K=t.onEdgeUpdate,Y=t.onEdgeContextMenu,ge=t.onEdgeMouseEnter,ue=t.onEdgeMouseMove,Ee=t.onEdgeMouseLeave,Se=t.edgeUpdaterRadius,ke=t.onEdgeUpdateStart,je=t.onEdgeUpdateEnd,Me=t.noDragClassName,We=t.noWheelClassName,at=t.noPanClassName,_e=t.elevateEdgesOnSelect,Ve=t.id;return DN(s),V.createElement(mN,{onPaneClick:G,onPaneContextMenu:Z,onPaneScroll:H,deleteKeyCode:N,selectionKeyCode:b,multiSelectionKeyCode:w,zoomActivationKeyCode:E,elementsSelectable:k,onMove:a,onMoveStart:o,onMoveEnd:i,zoomOnScroll:B,zoomOnPinch:F,zoomOnDoubleClick:$,panOnScroll:W,panOnScrollSpeed:Q,panOnScrollMode:q,panOnDrag:U,translateExtent:D,minZoom:M,maxZoom:T,defaultZoom:P,defaultPosition:R,onSelectionContextMenu:v,preventScrolling:L,noDragClassName:Me,noWheelClassName:We,noPanClassName:at},V.createElement(PN,null,V.createElement(AN,{edgeTypes:r,onEdgeClick:u,onEdgeDoubleClick:d,connectionLineType:C,connectionLineStyle:_,connectionLineComponent:y,connectionLineContainerStyle:S,onEdgeUpdate:K,onlyRenderVisibleElements:x,onEdgeContextMenu:Y,onEdgeMouseEnter:ge,onEdgeMouseMove:ue,onEdgeMouseLeave:Ee,onEdgeUpdateStart:ke,onEdgeUpdateEnd:je,edgeUpdaterRadius:Se,defaultMarkerColor:z,noPanClassName:at,elevateEdgesOnSelect:!!_e,rfId:Ve}),V.createElement(yN,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:m,onNodeMouseLeave:h,onNodeContextMenu:g,selectNodesOnDrag:A,onlyRenderVisibleElements:x,noPanClassName:at,noDragClassName:Me})))};nm.displayName="GraphView";var LN=I.memo(nm),rm=function(){return null};rm.displayName="GroupNode";function Gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $n=function(e){var t=function(r){var a=r.id,o=r.type,i=r.data,s=r.xPos,l=r.yPos,u=r.selected,c=r.onClick,d=r.onMouseEnter,p=r.onMouseMove,m=r.onMouseLeave,h=r.onContextMenu,g=r.onDoubleClick,v=r.style,C=r.className,_=r.isDraggable,y=r.isSelectable,S=r.isConnectable,b=r.selectNodesOnDrag,w=r.sourcePosition,E=r.targetPosition,N=r.hidden,x=r.resizeObserver,k=r.dragHandle,A=r.zIndex,D=r.isParent,M=r.noPanClassName,T=r.noDragClassName,P=r.initialized,R=qe(),L=I.useRef(null),z=I.useRef(w),B=I.useRef(E),F=I.useRef(o),W=y||_||c||d||p||m,Q=Mn(a,R.getState,d),q=Mn(a,R.getState,p),$=Mn(a,R.getState,m),U=Mn(a,R.getState,h),G=Mn(a,R.getState,g),H=function(Y){if(y&&(!b||!_)&&Th({id:a,store:R}),c){var ge=R.getState().nodeInternals.get(a);c(Y,Yu({},ge))}};I.useEffect(function(){if(L.current&&!N){var K=L.current;return x==null||x.observe(K),function(){return x==null?void 0:x.unobserve(K)}}},[N]),I.useEffect(function(){var K=F.current!==o,Y=z.current!==w,ge=B.current!==E;L.current&&(K||Y||ge)&&(K&&(F.current=o),Y&&(z.current=w),ge&&(B.current=E),R.getState().updateNodeDimensions([{id:a,nodeElement:L.current,forceUpdate:!0}]))},[a,o,w,E]);var Z=Zh({nodeRef:L,disabled:N||!_,noDragClassName:T,handleSelector:k,nodeId:a,isSelectable:y,selectNodesOnDrag:b});return N?null:V.createElement("div",{className:Qe(["react-flow__node","react-flow__node-".concat(o),M,C,{selected:u,selectable:y,parent:D}]),ref:L,style:Yu({zIndex:A,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:W?"all":"none",visibility:P?"visible":"hidden"},v),onMouseEnter:Q,onMouseMove:q,onMouseLeave:$,onContextMenu:U,onClick:H,onDoubleClick:G,"data-testid":"rf__node-".concat(a),"data-id":a},V.createElement(q_,{value:a},V.createElement(e,{id:a,data:i,type:o,xPos:s,yPos:l,selected:u,isConnectable:S,sourcePosition:w,targetPosition:E,dragging:Z,dragHandle:k,zIndex:A})))};return t.displayName="NodeWrapper",I.memo(t)};function Xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xu(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MN(e){var t={input:$n(e.input||Gh),default:$n(e.default||rs),output:$n(e.output||Xh),group:$n(e.group||rm)},n={},r=Object.keys(e).filter(function(a){return!["input","default","output","group"].includes(a)}).reduce(function(a,o){return a[o]=$n(e[o]||rs),a},n);return Qu(Qu({},t),r)}function Zu(e,t){I.useRef(null);var n=I.useMemo(function(){return t(e)},[e]);return n}function Ku(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var am=function(t){var n=t.children,r=!0;try{qe()}catch{r=!1}return r?V.createElement(V.Fragment,null,n):V.createElement(Ph,{createStore:Dh},n)};am.displayName="ReactFlowWrapper";var VN=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function Ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ju(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ju(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}Ku(U_),Ku(W_);var $N={input:Gh,default:rs,output:Xh},FN={default:ts,straight:Bh,step:Fh,smoothstep:ec,simplebezier:Vh},BN=[15,15],zN=[0,0],om=I.forwardRef(function(e,t){var n=e.nodes,r=e.edges,a=e.defaultNodes,o=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?$N:s,u=e.edgeTypes,c=u===void 0?FN:u,d=e.onNodeClick,p=e.onEdgeClick,m=e.onInit,h=e.onMove,g=e.onMoveStart,v=e.onMoveEnd,C=e.onConnect,_=e.onConnectStart,y=e.onConnectStop,S=e.onConnectEnd,b=e.onClickConnectStart,w=e.onClickConnectStop,E=e.onClickConnectEnd,N=e.onNodeMouseEnter,x=e.onNodeMouseMove,k=e.onNodeMouseLeave,A=e.onNodeContextMenu,D=e.onNodeDoubleClick,M=e.onNodeDragStart,T=e.onNodeDrag,P=e.onNodeDragStop,R=e.onNodesDelete,L=e.onEdgesDelete,z=e.onSelectionChange,B=e.onSelectionDragStart,F=e.onSelectionDrag,W=e.onSelectionDragStop,Q=e.onSelectionContextMenu,q=e.connectionMode,$=q===void 0?xn.Strict:q,U=e.connectionLineType,G=U===void 0?gt.Bezier:U,H=e.connectionLineStyle,Z=e.connectionLineComponent,K=e.connectionLineContainerStyle,Y=e.deleteKeyCode,ge=Y===void 0?"Backspace":Y,ue=e.selectionKeyCode,Ee=ue===void 0?"Shift":ue,Se=e.multiSelectionKeyCode,ke=Se===void 0?"Meta":Se,je=e.zoomActivationKeyCode,Me=je===void 0?"Meta":je,We=e.snapToGrid,at=We===void 0?!1:We,_e=e.snapGrid,Ve=_e===void 0?BN:_e,dt=e.onlyRenderVisibleElements,ne=dt===void 0?!1:dt,ce=e.selectNodesOnDrag,te=ce===void 0?!0:ce,ve=e.nodesDraggable,ee=e.nodesConnectable,Re=e.elementsSelectable,oe=e.minZoom,Ge=oe===void 0?.5:oe,Ie=e.maxZoom,Ke=Ie===void 0?2:Ie,ft=e.defaultZoom,Wa=ft===void 0?1:ft,on=e.defaultPosition,Ga=on===void 0?zN:on,gr=e.translateExtent,Tt=gr===void 0?Ji:gr,vr=e.preventScrolling,rg=vr===void 0?!0:vr,ag=e.nodeExtent,cc=e.defaultMarkerColor,og=cc===void 0?"#b1b1b7":cc,uc=e.zoomOnScroll,ig=uc===void 0?!0:uc,dc=e.zoomOnPinch,sg=dc===void 0?!0:dc,fc=e.panOnScroll,lg=fc===void 0?!1:fc,pc=e.panOnScrollSpeed,cg=pc===void 0?.5:pc,hc=e.panOnScrollMode,ug=hc===void 0?yn.Free:hc,mc=e.zoomOnDoubleClick,dg=mc===void 0?!0:mc,gc=e.panOnDrag,fg=gc===void 0?!0:gc,pg=e.onPaneClick,hg=e.onPaneScroll,mg=e.onPaneContextMenu,gg=e.children,vg=e.onEdgeUpdate,yg=e.onEdgeContextMenu,bg=e.onEdgeDoubleClick,wg=e.onEdgeMouseEnter,Sg=e.onEdgeMouseMove,Cg=e.onEdgeMouseLeave,Eg=e.onEdgeUpdateStart,_g=e.onEdgeUpdateEnd,vc=e.edgeUpdaterRadius,Ng=vc===void 0?10:vc,xg=e.onNodesChange,Ig=e.onEdgesChange,yc=e.noDragClassName,Tg=yc===void 0?"nodrag":yc,bc=e.noWheelClassName,kg=bc===void 0?"nowheel":bc,wc=e.noPanClassName,Rg=wc===void 0?"nopan":wc,Sc=e.fitView,Og=Sc===void 0?!1:Sc,Ag=e.fitViewOptions,Cc=e.connectOnClick,qg=Cc===void 0?!0:Cc,Pg=e.attributionPosition,Dg=e.proOptions,Lg=e.defaultEdgeOptions,Ec=e.elevateEdgesOnSelect,Mg=Ec===void 0?!1:Ec,yr=za(e,VN),Vg=Zu(l,MN),$g=Zu(c,X_);return V.createElement("div",ed(ed({},yr),{},{ref:t,className:Qe(["react-flow",i])}),V.createElement(am,null,V.createElement(LN,{onInit:m,onMove:h,onMoveStart:g,onMoveEnd:v,onNodeClick:d,onEdgeClick:p,onNodeMouseEnter:N,onNodeMouseMove:x,onNodeMouseLeave:k,onNodeContextMenu:A,onNodeDoubleClick:D,nodeTypes:Vg,edgeTypes:$g,connectionLineType:G,connectionLineStyle:H,connectionLineComponent:Z,connectionLineContainerStyle:K,selectionKeyCode:Ee,deleteKeyCode:ge,multiSelectionKeyCode:ke,zoomActivationKeyCode:Me,onlyRenderVisibleElements:ne,selectNodesOnDrag:te,translateExtent:Tt,minZoom:Ge,maxZoom:Ke,defaultZoom:Wa,defaultPosition:Ga,preventScrolling:rg,zoomOnScroll:ig,zoomOnPinch:sg,zoomOnDoubleClick:dg,panOnScroll:lg,panOnScrollSpeed:cg,panOnScrollMode:ug,panOnDrag:fg,onPaneClick:pg,onPaneScroll:hg,onPaneContextMenu:mg,onSelectionContextMenu:Q,onEdgeUpdate:vg,onEdgeContextMenu:yg,onEdgeDoubleClick:bg,onEdgeMouseEnter:wg,onEdgeMouseMove:Sg,onEdgeMouseLeave:Cg,onEdgeUpdateStart:Eg,onEdgeUpdateEnd:_g,edgeUpdaterRadius:Ng,defaultMarkerColor:og,noDragClassName:Tg,noWheelClassName:kg,noPanClassName:Rg,elevateEdgesOnSelect:Mg,id:yr==null?void 0:yr.id}),V.createElement(z_,{nodes:n,edges:r,defaultNodes:a,defaultEdges:o,onConnect:C,onConnectStart:_,onConnectStop:y,onConnectEnd:S,onClickConnectStart:b,onClickConnectStop:w,onClickConnectEnd:E,nodesDraggable:ve,nodesConnectable:ee,elementsSelectable:Re,minZoom:Ge,maxZoom:Ke,nodeExtent:ag,onNodesChange:xg,onEdgesChange:Ig,snapToGrid:at,snapGrid:Ve,connectionMode:$,translateExtent:Tt,connectOnClick:qg,defaultEdgeOptions:Lg,fitView:Og,fitViewOptions:Ag,onNodesDelete:R,onEdgesDelete:L,onNodeDragStart:M,onNodeDrag:T,onNodeDragStop:P,onSelectionDrag:F,onSelectionDragStart:B,onSelectionDragStop:W}),z&&V.createElement(F_,{onSelectionChange:z}),gg,V.createElement(N_,{proOptions:Dg,position:Pg})))});om.displayName="ReactFlow";var im=function(t){var n=t.children;return V.createElement(Ph,{createStore:Dh},n)};im.displayName="ReactFlowProvider";function sm(e){return function(t){var n=I.useState(t),r=le(n,2),a=r[0],o=r[1],i=I.useCallback(function(s){return o(function(l){return e(s,l)})},[]);return[a,o,i]}}var HN=sm(xh),UN=sm(t_);const os=e=>{const{data:t}=Wg(e.modifiedBy),n=Zn(Vt(e.modifiedOn)),{name:r,description:a}=e;return I.useMemo(()=>O(j,{children:[r&&f(Xe,{title:r,placement:"top",enterNextDelay:200,children:f("span",{children:f(Ct,{variant:"smallText1",className:"name",children:r})})}),a&&f(Xe,{title:a,placement:"top",enterNextDelay:200,children:f("span",{children:f(Ct,{variant:"smallText1",className:"description",children:a})})}),t&&f(Il,{userProfile:t}),f("div",{children:n})]}),[r,a,t,n])};try{os.displayName="ActivityNodeLabel",os.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}}}catch{}const jN=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),is=e=>{const{entityHeader:t}=e;if(t){const n=Yf(t==null?void 0:t.type);if(n==Oi.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const a=t.name.slice(r);if(jN.has(a.toLowerCase()))return f(he,{icon:"code"})}}else return f(Tc,{type:n,includeTooltip:!1})}return f(Tc,{type:Oi.FILE,includeTooltip:!1})};try{is.displayName="ProvenanceEntityIcon",is.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}}}catch{}const ss=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return I.useMemo(()=>O(j,{children:[f("div",{children:f(is,{entityHeader:e})}),O(j,{children:[f("div",{children:f(Xe,{title:e.name,placement:"top",enterNextDelay:300,children:f("a",{href:`${Be.PORTAL}#!Synapse:${n}`,children:e.name})})}),Gg(Yf(e.type))&&O("div",{children:[O("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&f("div",{children:"(old version)"})]})]})]}),[e,n])};try{ss.displayName="EntityNodeLabel",ss.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}}}catch{}var ls={},WN={get exports(){return ls},set exports(e){ls=e}};(function(e,t){(function(n,r){typeof Aa=="function"?e.exports=r():n.pluralize=r()})(Oa,function(){var n=[],r=[],a={},o={},i={};function s(g){return typeof g=="string"?new RegExp("^"+g+"$","i"):g}function l(g,v){return g===v?v:g===g.toLowerCase()?v.toLowerCase():g===g.toUpperCase()?v.toUpperCase():g[0]===g[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function u(g,v){return g.replace(/\$(\d{1,2})/g,function(C,_){return v[_]||""})}function c(g,v){return g.replace(v[0],function(C,_){var y=u(v[1],arguments);return l(C===""?g[_-1]:C,y)})}function d(g,v,C){if(!g.length||a.hasOwnProperty(g))return v;for(var _=C.length;_--;){var y=C[_];if(y[0].test(v))return c(v,y)}return v}function p(g,v,C){return function(_){var y=_.toLowerCase();return v.hasOwnProperty(y)?l(_,y):g.hasOwnProperty(y)?l(_,g[y]):d(y,_,C)}}function m(g,v,C,_){return function(y){var S=y.toLowerCase();return v.hasOwnProperty(S)?!0:g.hasOwnProperty(S)?!1:d(S,S,C)===S}}function h(g,v,C){var _=v===1?h.singular(g):h.plural(g);return(C?v+" ":"")+_}return h.plural=p(i,o,n),h.isPlural=m(i,o,n),h.singular=p(o,i,r),h.isSingular=m(o,i,r),h.addPluralRule=function(g,v){n.push([s(g),v])},h.addSingularRule=function(g,v){r.push([s(g),v])},h.addUncountableRule=function(g){if(typeof g=="string"){a[g.toLowerCase()]=!0;return}h.addPluralRule(g,"$0"),h.addSingularRule(g,"$0")},h.addIrregularRule=function(g,v){v=v.toLowerCase(),g=g.toLowerCase(),i[g]=v,o[v]=g},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(g){return h.addIrregularRule(g[0],g[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(g){return h.addPluralRule(g[0],g[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(g){return h.addSingularRule(g[0],g[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(WN);const GN=ls,cs=e=>{const{itemCount:t}=e;return I.useMemo(()=>f(j,{children:O("a",{children:["Show ",t," ",GN("item",t),"…"]})}),[t])};try{cs.displayName="ExpandGraphNodeLabel",cs.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}}}catch{}const YN=/^(.+?\.)?github\.com$/,XN=/^(.+?\.)?githubusercontent\.com$/,us=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:a}=r;return(a.match(YN)||a.match(XN))&&(n="github"),f(he,{icon:n})};try{us.displayName="ProvenanceExternalIcon",us.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const ds=e=>I.useMemo(()=>O(j,{children:[f("div",{children:f(us,{url:e.url})}),f(Xe,{title:e.name,placement:"top",enterNextDelay:300,children:f("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{ds.displayName="ExternalGraphNodeLabel",ds.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}}}catch{}var mo,td;function QN(){if(td)return mo;td=1;var e=Bv,t=4;function n(r){return e(r,t)}return mo=n,mo}var ua={},ZN={get exports(){return ua},set exports(e){ua=e}},nd;function lm(){return nd||(nd=1,function(e){e.exports=hp}(ZN)),ua}var go,rd;function KN(){if(rd)return go;rd=1;var e=mp;function t(n,r){var a=[];return e(n,function(o,i,s){r(o,i,s)&&a.push(o)}),a}return go=t,go}var vo,ad;function cm(){if(ad)return vo;ad=1;var e=ny(),t=KN(),n=nn,r=fr;function a(o,i){var s=r(o)?e:t;return s(o,n(i))}return vo=a,vo}var yo,od;function JN(){if(od)return yo;od=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,a){return r!=null&&t.call(r,a)}return yo=n,yo}var bo,id;function um(){if(id)return bo;id=1;var e=JN(),t=sy;function n(r,a){return r!=null&&t(r,a,e)}return bo=n,bo}var wo,sd;function dm(){if(sd)return wo;sd=1;function e(t){return t===void 0}return wo=e,wo}var So,ld;function fm(){if(ld)return So;ld=1;var e=gp,t=nn,n=Gv,r=fr;function a(o,i){var s=r(o)?e:n;return s(o,t(i))}return So=a,So}var Co,cd;function ex(){if(cd)return Co;cd=1;function e(t,n,r,a){var o=-1,i=t==null?0:t.length;for(a&&i&&(r=t[++o]);++o<i;)r=n(r,t[o],o,t);return r}return Co=e,Co}var Eo,ud;function tx(){if(ud)return Eo;ud=1;function e(t,n,r,a,o){return o(t,function(i,s,l){r=a?(a=!1,i):n(r,i,s,l)}),r}return Eo=e,Eo}var _o,dd;function pm(){if(dd)return _o;dd=1;var e=ex(),t=mp,n=nn,r=tx(),a=fr;function o(i,s,l){var u=a(i)?e:r,c=arguments.length<3;return u(i,n(s),l,c,t)}return _o=o,_o}var No,fd;function nx(){if(fd)return No;fd=1;var e=ry,t=e("length");return No=t,No}var xo,pd;function rx(){if(pd)return xo;pd=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,o="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+a+o+"]");function l(u){return s.test(u)}return xo=l,xo}var Io,hd;function ax(){if(hd)return Io;hd=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,o="\\ufe0e\\ufe0f",i="["+e+"]",s="["+a+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",h=u+"?",g="["+o+"]?",v="(?:"+m+"(?:"+[c,d,p].join("|")+")"+g+h+")*",C=g+h+v,_="(?:"+[c+s+"?",s,d,p,i].join("|")+")",y=RegExp(l+"(?="+l+")|"+_+C,"g");function S(b){for(var w=y.lastIndex=0;y.test(b);)++w;return w}return Io=S,Io}var To,md;function ox(){if(md)return To;md=1;var e=nx(),t=rx(),n=ax();function r(a){return t(a)?n(a):e(a)}return To=r,To}var ko,gd;function ix(){if(gd)return ko;gd=1;var e=ly,t=cy,n=vp,r=wy,a=ox(),o="[object Map]",i="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?a(l):l.length;var u=t(l);return u==o||u==i?l.size:e(l).length}return ko=s,ko}var Ro,vd;function sx(){if(vd)return Ro;vd=1;var e=zv,t=Hv,n=ay,r=nn,a=oy,o=fr,i=uy,s=yp,l=dy,u=fy;function c(d,p,m){var h=o(d),g=h||i(d)||u(d);if(p=r(p),m==null){var v=d&&d.constructor;g?m=h?new v:[]:l(d)?m=s(v)?t(a(d)):{}:m={}}return(g?e:n)(d,function(C,_,y){return p(m,C,_,y)}),m}return Ro=c,Ro}var Oo,yd;function lx(){if(yd)return Oo;yd=1;var e=gp;function t(n,r){return e(r,function(a){return n[a]})}return Oo=t,Oo}var Ao,bd;function hm(){if(bd)return Ao;bd=1;var e=lx(),t=kl;function n(r){return r==null?[]:e(r,t(r))}return Ao=n,Ao}var qo,wd;function Ze(){if(wd)return qo;wd=1;var e;if(typeof Aa=="function")try{e={clone:QN(),constant:pp(),each:lm(),filter:cm(),has:um(),isArray:fr,isEmpty:my,isFunction:yp,isUndefined:dm(),keys:kl,map:fm(),reduce:pm(),size:ix(),transform:sx(),union:gy,values:hm()}}catch{}return e||(e=window._),qo=e,qo}var Po,Sd;function nc(){if(Sd)return Po;Sd=1;var e=Ze();Po=a;var t="\0",n="\0",r="";function a(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},a.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},a.prototype.setNodes=function(c,d){var p=arguments,m=this;return e.each(c,function(h){p.length>1?m.setNode(h,d):m.setNode(h)}),this},a.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return e.has(this._nodes,c)},a.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var p=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),p),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),p),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var p=d;!e.isUndefined(p);p=this.parent(p))if(p===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},a.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},a.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},a.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},a.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},a.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var p=this;e.each(this._nodes,function(g,v){c(v)&&d.setNode(v,g)}),e.each(this._edgeObjs,function(g){d.hasNode(g.v)&&d.hasNode(g.w)&&d.setEdge(g,p.edge(g))});var m={};function h(g){var v=p.parent(g);return v===void 0||d.hasNode(v)?(m[g]=v,v):v in m?m[v]:h(v)}return this._isCompound&&e.each(d.nodes(),function(g){d.setParent(g,h(g))}),d},a.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(c,d){var p=this,m=arguments;return e.reduce(c,function(h,g){return m.length>1?p.setEdge(h,g,d):p.setEdge(h,g),g}),this},a.prototype.setEdge=function(){var c,d,p,m,h=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,d=g.w,p=g.name,arguments.length===2&&(m=arguments[1],h=!0)):(c=g,d=arguments[1],p=arguments[3],arguments.length>2&&(m=arguments[2],h=!0)),c=""+c,d=""+d,e.isUndefined(p)||(p=""+p);var v=s(this._isDirected,c,d,p);if(e.has(this._edgeLabels,v))return h&&(this._edgeLabels[v]=m),this;if(!e.isUndefined(p)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[v]=h?m:this._defaultEdgeLabelFn(c,d,p);var C=l(this._isDirected,c,d,p);return c=C.v,d=C.w,Object.freeze(C),this._edgeObjs[v]=C,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][v]=C,this._out[c][v]=C,this._edgeCount++,this},a.prototype.edge=function(c,d,p){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,p);return this._edgeLabels[m]},a.prototype.hasEdge=function(c,d,p){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,p);return e.has(this._edgeLabels,m)},a.prototype.removeEdge=function(c,d,p){var m=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,p),h=this._edgeObjs[m];return h&&(c=h.v,d=h.w,delete this._edgeLabels[m],delete this._edgeObjs[m],i(this._preds[d],c),i(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},a.prototype.inEdges=function(c,d){var p=this._in[c];if(p){var m=e.values(p);return d?e.filter(m,function(h){return h.v===d}):m}},a.prototype.outEdges=function(c,d){var p=this._out[c];if(p){var m=e.values(p);return d?e.filter(m,function(h){return h.w===d}):m}},a.prototype.nodeEdges=function(c,d){var p=this.inEdges(c,d);if(p)return p.concat(this.outEdges(c,d))};function o(c,d){c[d]?c[d]++:c[d]=1}function i(c,d){--c[d]||delete c[d]}function s(c,d,p,m){var h=""+d,g=""+p;if(!c&&h>g){var v=h;h=g,g=v}return h+r+g+r+(e.isUndefined(m)?t:m)}function l(c,d,p,m){var h=""+d,g=""+p;if(!c&&h>g){var v=h;h=g,g=v}var C={v:h,w:g};return m&&(C.name=m),C}function u(c,d){return s(c,d.v,d.w,d.name)}return Po}var Do,Cd;function cx(){return Cd||(Cd=1,Do="2.1.8"),Do}var Lo,Ed;function ux(){return Ed||(Ed=1,Lo={Graph:nc(),version:cx()}),Lo}var Mo,_d;function dx(){if(_d)return Mo;_d=1;var e=Ze(),t=nc();Mo={write:n,read:o};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:a(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var l=i.node(s),u=i.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function a(i){return e.map(i.edges(),function(s){var l=i.edge(s),u={v:s.v,w:s.w};return e.isUndefined(s.name)||(u.name=s.name),e.isUndefined(l)||(u.value=l),u})}function o(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(i.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return Mo}var Vo,Nd;function fx(){if(Nd)return Vo;Nd=1;var e=Ze();Vo=t;function t(n){var r={},a=[],o;function i(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){o=[],i(s),o.length&&a.push(o)}),a}return Vo}var $o,xd;function mm(){if(xd)return $o;xd=1;var e=Ze();$o=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var o=this._arr,i=o.length;return a[n]=i,o.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var a=this._keyIndices[n];if(r>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+r);this._arr[a].priority=r,this._decrease(a)},t.prototype._heapify=function(n){var r=this._arr,a=2*n,o=a+1,i=n;a<r.length&&(i=r[a].priority<r[i].priority?a:i,o<r.length&&(i=r[o].priority<r[i].priority?o:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,a=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<a));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var a=this._arr,o=this._keyIndices,i=a[n],s=a[r];a[n]=s,a[r]=i,o[s.key]=n,o[i.key]=r},$o}var Fo,Id;function gm(){if(Id)return Fo;Id=1;var e=Ze(),t=mm();Fo=r;var n=e.constant(1);function r(o,i,s,l){return a(o,String(i),s||n,l||function(u){return o.outEdges(u)})}function a(o,i,s,l){var u={},c=new t,d,p,m=function(h){var g=h.v!==d?h.v:h.w,v=u[g],C=s(h),_=p.distance+C;if(C<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+C);_<v.distance&&(v.distance=_,v.predecessor=d,c.decrease(g,_))};for(o.nodes().forEach(function(h){var g=h===i?0:Number.POSITIVE_INFINITY;u[h]={distance:g},c.add(h,g)});c.size()>0&&(d=c.removeMin(),p=u[d],p.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return Fo}var Bo,Td;function px(){if(Td)return Bo;Td=1;var e=gm(),t=Ze();Bo=n;function n(r,a,o){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,a,o)},{})}return Bo}var zo,kd;function vm(){if(kd)return zo;kd=1;var e=Ze();zo=t;function t(n){var r=0,a=[],o={},i=[];function s(l){var u=o[l]={onStack:!0,lowlink:r,index:r++};if(a.push(l),n.successors(l).forEach(function(p){e.has(o,p)?o[p].onStack&&(u.lowlink=Math.min(u.lowlink,o[p].index)):(s(p),u.lowlink=Math.min(u.lowlink,o[p].lowlink))}),u.lowlink===u.index){var c=[],d;do d=a.pop(),o[d].onStack=!1,c.push(d);while(l!==d);i.push(c)}}return n.nodes().forEach(function(l){e.has(o,l)||s(l)}),i}return zo}var Ho,Rd;function hx(){if(Rd)return Ho;Rd=1;var e=Ze(),t=vm();Ho=n;function n(r){return e.filter(t(r),function(a){return a.length>1||a.length===1&&r.hasEdge(a[0],a[0])})}return Ho}var Uo,Od;function mx(){if(Od)return Uo;Od=1;var e=Ze();Uo=n;var t=e.constant(1);function n(a,o,i){return r(a,o||t,i||function(s){return a.outEdges(s)})}function r(a,o,i){var s={},l=a.nodes();return l.forEach(function(u){s[u]={},s[u][u]={distance:0},l.forEach(function(c){u!==c&&(s[u][c]={distance:Number.POSITIVE_INFINITY})}),i(u).forEach(function(c){var d=c.v===u?c.w:c.v,p=o(c);s[u][d]={distance:p,predecessor:u}})}),l.forEach(function(u){var c=s[u];l.forEach(function(d){var p=s[d];l.forEach(function(m){var h=p[u],g=c[m],v=p[m],C=h.distance+g.distance;C<v.distance&&(v.distance=C,v.predecessor=g.predecessor)})})}),s}return Uo}var jo,Ad;function ym(){if(Ad)return jo;Ad=1;var e=Ze();jo=t,t.CycleException=n;function t(r){var a={},o={},i=[];function s(l){if(e.has(o,l))throw new n;e.has(a,l)||(o[l]=!0,a[l]=!0,e.each(r.predecessors(l),s),delete o[l],i.push(l))}if(e.each(r.sinks(),s),e.size(a)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,jo}var Wo,qd;function gx(){if(qd)return Wo;qd=1;var e=ym();Wo=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Wo}var Go,Pd;function bm(){if(Pd)return Go;Pd=1;var e=Ze();Go=t;function t(r,a,o){e.isArray(a)||(a=[a]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(a,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,o==="post",l,i,s)}),s}function n(r,a,o,i,s,l){e.has(i,a)||(i[a]=!0,o||l.push(a),e.each(s(a),function(u){n(r,u,o,i,s,l)}),o&&l.push(a))}return Go}var Yo,Dd;function vx(){if(Dd)return Yo;Dd=1;var e=bm();Yo=t;function t(n,r){return e(n,r,"post")}return Yo}var Xo,Ld;function yx(){if(Ld)return Xo;Ld=1;var e=bm();Xo=t;function t(n,r){return e(n,r,"pre")}return Xo}var Qo,Md;function bx(){if(Md)return Qo;Md=1;var e=Ze(),t=nc(),n=mm();Qo=r;function r(a,o){var i=new t,s={},l=new n,u;function c(p){var m=p.v===u?p.w:p.v,h=l.priority(m);if(h!==void 0){var g=o(p);g<h&&(s[m]=u,l.decrease(m,g))}}if(a.nodeCount()===0)return i;e.each(a.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),i.setNode(p)}),l.decrease(a.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(s,u))i.setEdge(u,s[u]);else{if(d)throw new Error("Input graph is not connected: "+a);d=!0}a.nodeEdges(u).forEach(c)}return i}return Qo}var Zo,Vd;function wx(){return Vd||(Vd=1,Zo={components:fx(),dijkstra:gm(),dijkstraAll:px(),findCycles:hx(),floydWarshall:mx(),isAcyclic:gx(),postorder:vx(),preorder:yx(),prim:bx(),tarjan:vm(),topsort:ym()}),Zo}var Ko,$d;function Sx(){if($d)return Ko;$d=1;var e=ux();return Ko={Graph:e.Graph,json:dx(),alg:wx(),version:e.version},Ko}var da;if(typeof Aa=="function")try{da=Sx()}catch{}da||(da=window.graphlib);var rt=da,Jo,Fd;function Cx(){if(Fd)return Jo;Fd=1;var e=nn,t=vp,n=kl;function r(a){return function(o,i,s){var l=Object(o);if(!t(o)){var u=e(i);o=n(o),i=function(d){return u(l[d],d,l)}}var c=a(o,i,s);return c>-1?l[u?o[c]:c]:void 0}}return Jo=r,Jo}var ei,Bd;function wm(){if(Bd)return ei;Bd=1;var e=Ey,t=1/0,n=17976931348623157e292;function r(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var o=a<0?-1:1;return o*n}return a===a?a:0}return ei=r,ei}var ti,zd;function Ex(){if(zd)return ti;zd=1;var e=wm();function t(n){var r=e(n),a=r%1;return r===r?a?r-a:r:0}return ti=t,ti}var ni,Hd;function _x(){if(Hd)return ni;Hd=1;var e=Sy,t=nn,n=Ex(),r=Math.max;function a(o,i,s){var l=o==null?0:o.length;if(!l)return-1;var u=s==null?0:n(s);return u<0&&(u=r(l+u,0)),e(o,t(i),u)}return ni=a,ni}var ri,Ud;function Nx(){if(Ud)return ri;Ud=1;var e=Cx(),t=_x(),n=e(t);return ri=n,ri}var ai,jd;function xx(){if(jd)return ai;jd=1;var e=iy,t=Yv,n=Uv;function r(a,o){return a==null?a:e(a,t(o),n)}return ai=r,ai}var oi,Wd;function rc(){if(Wd)return oi;Wd=1;var e=py;function t(n,r,a){for(var o=-1,i=n.length;++o<i;){var s=n[o],l=r(s);if(l!=null&&(u===void 0?l===l&&!e(l):a(l,u)))var u=l,c=s}return c}return oi=t,oi}var ii,Gd;function Ix(){if(Gd)return ii;Gd=1;function e(t,n){return t>n}return ii=e,ii}var si,Yd;function Tx(){if(Yd)return si;Yd=1;var e=rc(),t=Ix(),n=bp;function r(a){return a&&a.length?e(a,n,t):void 0}return si=r,si}var li,Xd;function kx(){if(Xd)return li;Xd=1;var e=Qv,t=Xv,n=t(function(r,a,o){e(r,a,o)});return li=n,li}var ci,Qd;function Sm(){if(Qd)return ci;Qd=1;function e(t,n){return t<n}return ci=e,ci}var ui,Zd;function Rx(){if(Zd)return ui;Zd=1;var e=rc(),t=Sm(),n=bp;function r(a){return a&&a.length?e(a,n,t):void 0}return ui=r,ui}var di,Kd;function Ox(){if(Kd)return di;Kd=1;var e=rc(),t=nn,n=Sm();function r(a,o){return a&&a.length?e(a,t(o),n):void 0}return di=r,di}var fi,Jd;function Ax(){if(Jd)return fi;Jd=1;var e=Math.ceil,t=Math.max;function n(r,a,o,i){for(var s=-1,l=t(e((a-r)/(o||1)),0),u=Array(l);l--;)u[i?l:++s]=r,r+=o;return u}return fi=n,fi}var pi,ef;function qx(){if(ef)return pi;ef=1;var e=Ax(),t=Zv,n=wm();function r(a){return function(o,i,s){return s&&typeof s!="number"&&t(o,i,s)&&(i=s=void 0),o=n(o),i===void 0?(i=o,o=0):i=n(i),s=s===void 0?o<i?1:-1:n(s),e(o,i,s,a)}}return pi=r,pi}var hi,tf;function Px(){if(tf)return hi;tf=1;var e=qx(),t=e();return hi=t,hi}var mi,nf;function Dx(){if(nf)return mi;nf=1;var e=hy,t=0;function n(r){var a=++t;return e(r)+a}return mi=n,mi}var gi,rf;function Lx(){if(rf)return gi;rf=1;function e(t,n,r){for(var a=-1,o=t.length,i=n.length,s={};++a<o;){var l=a<i?n[a]:void 0;r(s,t[a],l)}return s}return gi=e,gi}var vi,af;function Mx(){if(af)return vi;af=1;var e=Cy,t=Lx();function n(r,a){return t(r||[],a||[],e)}return vi=n,vi}var fa;if(typeof Aa=="function")try{fa={cloneDeep:jv,constant:pp(),defaults:Kv,each:lm(),filter:cm(),find:Nx(),flatten:Wv,forEach:hp,forIn:xx(),has:um(),isUndefined:dm(),last:Jv,map:fm(),mapValues:Ny,max:Tx(),merge:kx(),min:Rx(),minBy:Ox(),now:_y(),pick:vy,range:Px(),reduce:pm(),sortBy:ey,uniqueId:Dx(),values:hm(),zipObject:Mx()}}catch{}fa||(fa=window._);var ye=fa,Vx=Ua;function Ua(){var e={};e._next=e._prev=e,this._sentinel=e}Ua.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Cm(t),t};Ua.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Cm(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Ua.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,$x)),n=n._prev;return"["+e.join(", ")+"]"};function Cm(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function $x(e,t){if(e!=="_next"&&e!=="_prev")return t}var yt=ye,Fx=rt.Graph,Bx=Vx,zx=Ux,Hx=yt.constant(1);function Ux(e,t){if(e.nodeCount()<=1)return[];var n=Wx(e,t||Hx),r=jx(n.graph,n.buckets,n.zeroIdx);return yt.flatten(yt.map(r,function(a){return e.outEdges(a.v,a.w)}),!0)}function jx(e,t,n){for(var r=[],a=t[t.length-1],o=t[0],i;e.nodeCount();){for(;i=o.dequeue();)yi(e,t,n,i);for(;i=a.dequeue();)yi(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(yi(e,t,n,i,!0));break}}}return r}function yi(e,t,n,r,a){var o=a?[]:void 0;return yt.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),l=e.node(i.v);a&&o.push({v:i.v,w:i.w}),l.out-=s,fs(t,n,l)}),yt.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),l=i.w,u=e.node(l);u.in-=s,fs(t,n,u)}),e.removeNode(r.v),o}function Wx(e,t){var n=new Fx,r=0,a=0;yt.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),yt.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,u=t(s),c=l+u;n.setEdge(s.v,s.w,c),a=Math.max(a,n.node(s.v).out+=u),r=Math.max(r,n.node(s.w).in+=u)});var o=yt.range(a+r+3).map(function(){return new Bx}),i=r+1;return yt.forEach(n.nodes(),function(s){fs(o,i,n.node(s))}),{graph:n,buckets:o,zeroIdx:i}}function fs(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ht=ye,Gx=zx,Yx={run:Xx,undo:Zx};function Xx(e){var t=e.graph().acyclicer==="greedy"?Gx(e,n(e)):Qx(e);Ht.forEach(t,function(r){var a=e.edge(r);e.removeEdge(r),a.forwardName=r.name,a.reversed=!0,e.setEdge(r.w,r.v,a,Ht.uniqueId("rev"))});function n(r){return function(a){return r.edge(a).weight}}}function Qx(e){var t=[],n={},r={};function a(o){Ht.has(r,o)||(r[o]=!0,n[o]=!0,Ht.forEach(e.outEdges(o),function(i){Ht.has(n,i.w)?t.push(i):a(i.w)}),delete n[o])}return Ht.forEach(e.nodes(),a),t}function Zx(e){Ht.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var de=ye,Em=rt.Graph,Le={addDummyNode:_m,simplify:Kx,asNonCompoundGraph:Jx,successorWeights:eI,predecessorWeights:tI,intersectRect:nI,buildLayerMatrix:rI,normalizeRanks:aI,removeEmptyRanks:oI,addBorderNode:iI,maxRank:Nm,partition:sI,time:lI,notime:cI};function _m(e,t,n,r){var a;do a=de.uniqueId(r);while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function Kx(e){var t=new Em().setGraph(e.graph());return de.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},a=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+a.weight,minlen:Math.max(r.minlen,a.minlen)})}),t}function Jx(e){var t=new Em({multigraph:e.isMultigraph()}).setGraph(e.graph());return de.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function eI(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.outEdges(n),function(a){r[a.w]=(r[a.w]||0)+e.edge(a).weight}),r});return de.zipObject(e.nodes(),t)}function tI(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.inEdges(n),function(a){r[a.v]=(r[a.v]||0)+e.edge(a).weight}),r});return de.zipObject(e.nodes(),t)}function nI(e,t){var n=e.x,r=e.y,a=t.x-n,o=t.y-r,i=e.width/2,s=e.height/2;if(!a&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(o)*i>Math.abs(a)*s?(o<0&&(s=-s),l=s*a/o,u=s):(a<0&&(i=-i),l=i,u=i*o/a),{x:n+l,y:r+u}}function rI(e){var t=de.map(de.range(Nm(e)+1),function(){return[]});return de.forEach(e.nodes(),function(n){var r=e.node(n),a=r.rank;de.isUndefined(a)||(t[a][r.order]=n)}),t}function aI(e){var t=de.min(de.map(e.nodes(),function(n){return e.node(n).rank}));de.forEach(e.nodes(),function(n){var r=e.node(n);de.has(r,"rank")&&(r.rank-=t)})}function oI(e){var t=de.min(de.map(e.nodes(),function(o){return e.node(o).rank})),n=[];de.forEach(e.nodes(),function(o){var i=e.node(o).rank-t;n[i]||(n[i]=[]),n[i].push(o)});var r=0,a=e.graph().nodeRankFactor;de.forEach(n,function(o,i){de.isUndefined(o)&&i%a!==0?--r:r&&de.forEach(o,function(s){e.node(s).rank+=r})})}function iI(e,t,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),_m(e,"border",a,t)}function Nm(e){return de.max(de.map(e.nodes(),function(t){var n=e.node(t).rank;if(!de.isUndefined(n))return n}))}function sI(e,t){var n={lhs:[],rhs:[]};return de.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function lI(e,t){var n=de.now();try{return t()}finally{console.log(e+" time: "+(de.now()-n)+"ms")}}function cI(e,t){return t()}var xm=ye,uI=Le,dI={run:fI,undo:hI};function fI(e){e.graph().dummyChains=[],xm.forEach(e.edges(),function(t){pI(e,t)})}function pI(e,t){var n=t.v,r=e.node(n).rank,a=t.w,o=e.node(a).rank,i=t.name,s=e.edge(t),l=s.labelRank;if(o!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<o;++d,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},u=uI.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,u,{weight:s.weight},i),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,a,{weight:s.weight},i)}}function hI(e){xm.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,a;for(e.setEdge(n.edgeObj,r);n.dummy;)a=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=a,n=e.node(t)})}var qr=ye,ja={longestPath:mI,slack:gI};function mI(e){var t={};function n(r){var a=e.node(r);if(qr.has(t,r))return a.rank;t[r]=!0;var o=qr.min(qr.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),a.rank=o}qr.forEach(e.sources(),n)}function gI(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var pa=ye,vI=rt.Graph,ha=ja.slack,Im=yI;function yI(e){var t=new vI({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var a,o;bI(t,e)<r;)a=wI(t,e),o=t.hasNode(a.v)?ha(e,a):-ha(e,a),SI(t,e,o);return t}function bI(e,t){function n(r){pa.forEach(t.nodeEdges(r),function(a){var o=a.v,i=r===o?a.w:o;!e.hasNode(i)&&!ha(t,a)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return pa.forEach(e.nodes(),n),e.nodeCount()}function wI(e,t){return pa.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return ha(t,n)})}function SI(e,t,n){pa.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Nt=ye,CI=Im,EI=ja.slack,_I=ja.longestPath,NI=rt.alg.preorder,xI=rt.alg.postorder,II=Le.simplify,TI=an;an.initLowLimValues=oc;an.initCutValues=ac;an.calcCutValue=Tm;an.leaveEdge=Rm;an.enterEdge=Om;an.exchangeEdges=Am;function an(e){e=II(e),_I(e);var t=CI(e);oc(t),ac(t,e);for(var n,r;n=Rm(t);)r=Om(t,e,n),Am(t,e,n,r)}function ac(e,t){var n=xI(e,e.nodes());n=n.slice(0,n.length-1),Nt.forEach(n,function(r){kI(e,t,r)})}function kI(e,t,n){var r=e.node(n),a=r.parent;e.edge(n,a).cutvalue=Tm(e,t,n)}function Tm(e,t,n){var r=e.node(n),a=r.parent,o=!0,i=t.edge(n,a),s=0;return i||(o=!1,i=t.edge(a,n)),s=i.weight,Nt.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==a){var d=u===o,p=t.edge(l).weight;if(s+=d?p:-p,OI(e,n,c)){var m=e.edge(n,c).cutvalue;s+=d?-m:m}}}),s}function oc(e,t){arguments.length<2&&(t=e.nodes()[0]),km(e,{},1,t)}function km(e,t,n,r,a){var o=n,i=e.node(r);return t[r]=!0,Nt.forEach(e.neighbors(r),function(s){Nt.has(t,s)||(n=km(e,t,n,s,r))}),i.low=o,i.lim=n++,a?i.parent=a:delete i.parent,n}function Rm(e){return Nt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Om(e,t,n){var r=n.v,a=n.w;t.hasEdge(r,a)||(r=n.w,a=n.v);var o=e.node(r),i=e.node(a),s=o,l=!1;o.lim>i.lim&&(s=i,l=!0);var u=Nt.filter(t.edges(),function(c){return l===of(e,e.node(c.v),s)&&l!==of(e,e.node(c.w),s)});return Nt.minBy(u,function(c){return EI(t,c)})}function Am(e,t,n,r){var a=n.v,o=n.w;e.removeEdge(a,o),e.setEdge(r.v,r.w,{}),oc(e),ac(e,t),RI(e,t)}function RI(e,t){var n=Nt.find(e.nodes(),function(a){return!t.node(a).parent}),r=NI(e,n);r=r.slice(1),Nt.forEach(r,function(a){var o=e.node(a).parent,i=t.edge(a,o),s=!1;i||(i=t.edge(o,a),s=!0),t.node(a).rank=t.node(o).rank+(s?i.minlen:-i.minlen)})}function OI(e,t,n){return e.hasEdge(t,n)}function of(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var AI=ja,qm=AI.longestPath,qI=Im,PI=TI,DI=LI;function LI(e){switch(e.graph().ranker){case"network-simplex":sf(e);break;case"tight-tree":VI(e);break;case"longest-path":MI(e);break;default:sf(e)}}var MI=qm;function VI(e){qm(e),qI(e)}function sf(e){PI(e)}var ps=ye,$I=FI;function FI(e){var t=zI(e);ps.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),a=r.edgeObj,o=BI(e,t,a.v,a.w),i=o.path,s=o.lca,l=0,u=i[l],c=!0;n!==a.w;){if(r=e.node(n),c){for(;(u=i[l])!==s&&e.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<i.length-1&&e.node(u=i[l+1]).minRank<=r.rank;)l++;u=i[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function BI(e,t,n,r){var a=[],o=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),a.push(l);while(l&&(t[l].low>i||s>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)o.push(l);return{path:a.concat(o.reverse()),lca:u}}function zI(e){var t={},n=0;function r(a){var o=n;ps.forEach(e.children(a),r),t[a]={low:o,lim:n++}}return ps.forEach(e.children(),r),t}var bt=ye,hs=Le,HI={run:UI,cleanup:GI};function UI(e){var t=hs.addDummyNode(e,"root",{},"_root"),n=jI(e),r=bt.max(bt.values(n))-1,a=2*r+1;e.graph().nestingRoot=t,bt.forEach(e.edges(),function(i){e.edge(i).minlen*=a});var o=WI(e)+1;bt.forEach(e.children(),function(i){Pm(e,t,a,o,r,n,i)}),e.graph().nodeRankFactor=a}function Pm(e,t,n,r,a,o,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var l=hs.addBorderNode(e,"_bt"),u=hs.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(l,i),c.borderTop=l,e.setParent(u,i),c.borderBottom=u,bt.forEach(s,function(d){Pm(e,t,n,r,a,o,d);var p=e.node(d),m=p.borderTop?p.borderTop:d,h=p.borderBottom?p.borderBottom:d,g=p.borderTop?r:2*r,v=m!==h?1:a-o[i]+1;e.setEdge(l,m,{weight:g,minlen:v,nestingEdge:!0}),e.setEdge(h,u,{weight:g,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,l,{weight:0,minlen:a+o[i]})}function jI(e){var t={};function n(r,a){var o=e.children(r);o&&o.length&&bt.forEach(o,function(i){n(i,a+1)}),t[r]=a}return bt.forEach(e.children(),function(r){n(r,1)}),t}function WI(e){return bt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function GI(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,bt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var bi=ye,YI=Le,XI=QI;function QI(e){function t(n){var r=e.children(n),a=e.node(n);if(r.length&&bi.forEach(r,t),bi.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,i=a.maxRank+1;o<i;++o)lf(e,"borderLeft","_bl",n,a,o),lf(e,"borderRight","_br",n,a,o)}}bi.forEach(e.children(),t)}function lf(e,t,n,r,a,o){var i={width:0,height:0,rank:o,borderType:t},s=a[t][o-1],l=YI.addDummyNode(e,"border",i,n);a[t][o]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var lt=ye,ZI={adjust:KI,undo:JI};function KI(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Dm(e)}function JI(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&eT(e),(t==="lr"||t==="rl")&&(tT(e),Dm(e))}function Dm(e){lt.forEach(e.nodes(),function(t){cf(e.node(t))}),lt.forEach(e.edges(),function(t){cf(e.edge(t))})}function cf(e){var t=e.width;e.width=e.height,e.height=t}function eT(e){lt.forEach(e.nodes(),function(t){wi(e.node(t))}),lt.forEach(e.edges(),function(t){var n=e.edge(t);lt.forEach(n.points,wi),lt.has(n,"y")&&wi(n)})}function wi(e){e.y=-e.y}function tT(e){lt.forEach(e.nodes(),function(t){Si(e.node(t))}),lt.forEach(e.edges(),function(t){var n=e.edge(t);lt.forEach(n.points,Si),lt.has(n,"x")&&Si(n)})}function Si(e){var t=e.x;e.x=e.y,e.y=t}var ht=ye,nT=rT;function rT(e){var t={},n=ht.filter(e.nodes(),function(s){return!e.children(s).length}),r=ht.max(ht.map(n,function(s){return e.node(s).rank})),a=ht.map(ht.range(r+1),function(){return[]});function o(s){if(!ht.has(t,s)){t[s]=!0;var l=e.node(s);a[l.rank].push(s),ht.forEach(e.successors(s),o)}}var i=ht.sortBy(n,function(s){return e.node(s).rank});return ht.forEach(i,o),a}var Ot=ye,aT=oT;function oT(e,t){for(var n=0,r=1;r<t.length;++r)n+=iT(e,t[r-1],t[r]);return n}function iT(e,t,n){for(var r=Ot.zipObject(n,Ot.map(n,function(u,c){return c})),a=Ot.flatten(Ot.map(t,function(u){return Ot.sortBy(Ot.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var i=2*o-1;o-=1;var s=Ot.map(new Array(i),function(){return 0}),l=0;return Ot.forEach(a.forEach(function(u){var c=u.pos+o;s[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*d})),l}var uf=ye,sT=lT;function lT(e,t){return uf.map(t,function(n){var r=e.inEdges(n);if(r.length){var a=uf.reduce(r,function(o,i){var s=e.edge(i),l=e.node(i.v);return{sum:o.sum+s.weight*l.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:n}})}var $e=ye,cT=uT;function uT(e,t){var n={};$e.forEach(e,function(a,o){var i=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};$e.isUndefined(a.barycenter)||(i.barycenter=a.barycenter,i.weight=a.weight)}),$e.forEach(t.edges(),function(a){var o=n[a.v],i=n[a.w];!$e.isUndefined(o)&&!$e.isUndefined(i)&&(i.indegree++,o.out.push(n[a.w]))});var r=$e.filter(n,function(a){return!a.indegree});return dT(r)}function dT(e){var t=[];function n(o){return function(i){i.merged||($e.isUndefined(i.barycenter)||$e.isUndefined(o.barycenter)||i.barycenter>=o.barycenter)&&fT(o,i)}}function r(o){return function(i){i.in.push(o),--i.indegree===0&&e.push(i)}}for(;e.length;){var a=e.pop();t.push(a),$e.forEach(a.in.reverse(),n(a)),$e.forEach(a.out,r(a))}return $e.map($e.filter(t,function(o){return!o.merged}),function(o){return $e.pick(o,["vs","i","barycenter","weight"])})}function fT(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Un=ye,pT=Le,hT=mT;function mT(e,t){var n=pT.partition(e,function(c){return Un.has(c,"barycenter")}),r=n.lhs,a=Un.sortBy(n.rhs,function(c){return-c.i}),o=[],i=0,s=0,l=0;r.sort(gT(!!t)),l=df(o,a,l),Un.forEach(r,function(c){l+=c.vs.length,o.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,l=df(o,a,l)});var u={vs:Un.flatten(o,!0)};return s&&(u.barycenter=i/s,u.weight=s),u}function df(e,t,n){for(var r;t.length&&(r=Un.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function gT(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Lt=ye,vT=sT,yT=cT,bT=hT,wT=Lm;function Lm(e,t,n,r){var a=e.children(t),o=e.node(t),i=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,l={};i&&(a=Lt.filter(a,function(h){return h!==i&&h!==s}));var u=vT(e,a);Lt.forEach(u,function(h){if(e.children(h.v).length){var g=Lm(e,h.v,n,r);l[h.v]=g,Lt.has(g,"barycenter")&&CT(h,g)}});var c=yT(u,n);ST(c,l);var d=bT(c,r);if(i&&(d.vs=Lt.flatten([i,d.vs,s],!0),e.predecessors(i).length)){var p=e.node(e.predecessors(i)[0]),m=e.node(e.predecessors(s)[0]);Lt.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+p.order+m.order)/(d.weight+2),d.weight+=2}return d}function ST(e,t){Lt.forEach(e,function(n){n.vs=Lt.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function CT(e,t){Lt.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var jn=ye,ET=rt.Graph,_T=NT;function NT(e,t,n){var r=xT(e),a=new ET({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return jn.forEach(e.nodes(),function(o){var i=e.node(o),s=e.parent(o);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(a.setNode(o),a.setParent(o,s||r),jn.forEach(e[n](o),function(l){var u=l.v===o?l.w:l.v,c=a.edge(u,o),d=jn.isUndefined(c)?0:c.weight;a.setEdge(u,o,{weight:e.edge(l).weight+d})}),jn.has(i,"minRank")&&a.setNode(o,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),a}function xT(e){for(var t;e.hasNode(t=jn.uniqueId("_root")););return t}var IT=ye,TT=kT;function kT(e,t,n){var r={},a;IT.forEach(n,function(o){for(var i=e.parent(o),s,l;i;){if(s=e.parent(i),s?(l=r[s],r[s]=i):(l=a,a=i),l&&l!==i){t.setEdge(l,i);return}i=s}})}var Mt=ye,RT=nT,OT=aT,AT=wT,qT=_T,PT=TT,DT=rt.Graph,ff=Le,LT=MT;function MT(e){var t=ff.maxRank(e),n=pf(e,Mt.range(1,t+1),"inEdges"),r=pf(e,Mt.range(t-1,-1,-1),"outEdges"),a=RT(e);hf(e,a);for(var o=Number.POSITIVE_INFINITY,i,s=0,l=0;l<4;++s,++l){VT(s%2?n:r,s%4>=2),a=ff.buildLayerMatrix(e);var u=OT(e,a);u<o&&(l=0,i=Mt.cloneDeep(a),o=u)}hf(e,i)}function pf(e,t,n){return Mt.map(t,function(r){return qT(e,r,n)})}function VT(e,t){var n=new DT;Mt.forEach(e,function(r){var a=r.graph().root,o=AT(r,a,n,t);Mt.forEach(o.vs,function(i,s){r.node(i).order=s}),PT(r,n,o.vs)})}function hf(e,t){Mt.forEach(t,function(n){Mt.forEach(n,function(r,a){e.node(r).order=a})})}var J=ye,$T=rt.Graph,FT=Le,BT={positionX:UT,findType1Conflicts:Mm,findType2Conflicts:Vm,addConflict:ic,hasConflict:$m,verticalAlignment:Fm,horizontalCompaction:Bm,alignCoordinates:Hm,findSmallestWidthAlignment:zm,balance:Um};function Mm(e,t){var n={};function r(a,o){var i=0,s=0,l=a.length,u=J.last(o);return J.forEach(o,function(c,d){var p=zT(e,c),m=p?e.node(p).order:l;(p||c===u)&&(J.forEach(o.slice(s,d+1),function(h){J.forEach(e.predecessors(h),function(g){var v=e.node(g),C=v.order;(C<i||m<C)&&!(v.dummy&&e.node(h).dummy)&&ic(n,g,h)})}),s=d+1,i=m)}),o}return J.reduce(t,r),n}function Vm(e,t){var n={};function r(o,i,s,l,u){var c;J.forEach(J.range(i,s),function(d){c=o[d],e.node(c).dummy&&J.forEach(e.predecessors(c),function(p){var m=e.node(p);m.dummy&&(m.order<l||m.order>u)&&ic(n,p,c)})})}function a(o,i){var s=-1,l,u=0;return J.forEach(i,function(c,d){if(e.node(c).dummy==="border"){var p=e.predecessors(c);p.length&&(l=e.node(p[0]).order,r(i,u,d,s,l),u=d,s=l)}r(i,u,i.length,l,o.length)}),i}return J.reduce(t,a),n}function zT(e,t){if(e.node(t).dummy)return J.find(e.predecessors(t),function(n){return e.node(n).dummy})}function ic(e,t,n){if(t>n){var r=t;t=n,n=r}var a=e[t];a||(e[t]=a={}),a[n]=!0}function $m(e,t,n){if(t>n){var r=t;t=n,n=r}return J.has(e[t],n)}function Fm(e,t,n,r){var a={},o={},i={};return J.forEach(t,function(s){J.forEach(s,function(l,u){a[l]=l,o[l]=l,i[l]=u})}),J.forEach(t,function(s){var l=-1;J.forEach(s,function(u){var c=r(u);if(c.length){c=J.sortBy(c,function(g){return i[g]});for(var d=(c.length-1)/2,p=Math.floor(d),m=Math.ceil(d);p<=m;++p){var h=c[p];o[u]===u&&l<i[h]&&!$m(n,u,h)&&(o[h]=u,o[u]=a[u]=a[h],l=i[h])}}})}),{root:a,align:o}}function Bm(e,t,n,r,a){var o={},i=HT(e,t,n,a),s=a?"borderLeft":"borderRight";function l(d,p){for(var m=i.nodes(),h=m.pop(),g={};h;)g[h]?d(h):(g[h]=!0,m.push(h),m=m.concat(p(h))),h=m.pop()}function u(d){o[d]=i.inEdges(d).reduce(function(p,m){return Math.max(p,o[m.v]+i.edge(m))},0)}function c(d){var p=i.outEdges(d).reduce(function(h,g){return Math.min(h,o[g.w]-i.edge(g))},Number.POSITIVE_INFINITY),m=e.node(d);p!==Number.POSITIVE_INFINITY&&m.borderType!==s&&(o[d]=Math.max(o[d],p))}return l(u,i.predecessors.bind(i)),l(c,i.successors.bind(i)),J.forEach(r,function(d){o[d]=o[n[d]]}),o}function HT(e,t,n,r){var a=new $T,o=e.graph(),i=jT(o.nodesep,o.edgesep,r);return J.forEach(t,function(s){var l;J.forEach(s,function(u){var c=n[u];if(a.setNode(c),l){var d=n[l],p=a.edge(d,c);a.setEdge(d,c,Math.max(i(e,u,l),p||0))}l=u})}),a}function zm(e,t){return J.minBy(J.values(t),function(n){var r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return J.forIn(n,function(o,i){var s=WT(e,i)/2;r=Math.max(o+s,r),a=Math.min(o-s,a)}),r-a})}function Hm(e,t){var n=J.values(t),r=J.min(n),a=J.max(n);J.forEach(["u","d"],function(o){J.forEach(["l","r"],function(i){var s=o+i,l=e[s],u;if(l!==t){var c=J.values(l);u=i==="l"?r-J.min(c):a-J.max(c),u&&(e[s]=J.mapValues(l,function(d){return d+u}))}})})}function Um(e,t){return J.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var a=J.sortBy(J.map(e,r));return(a[1]+a[2])/2})}function UT(e){var t=FT.buildLayerMatrix(e),n=J.merge(Mm(e,t),Vm(e,t)),r={},a;J.forEach(["u","d"],function(i){a=i==="u"?t:J.values(t).reverse(),J.forEach(["l","r"],function(s){s==="r"&&(a=J.map(a,function(d){return J.values(d).reverse()}));var l=(i==="u"?e.predecessors:e.successors).bind(e),u=Fm(e,a,n,l),c=Bm(e,a,u.root,u.align,s==="r");s==="r"&&(c=J.mapValues(c,function(d){return-d})),r[i+s]=c})});var o=zm(e,r);return Hm(r,o),Um(r,e.graph().align)}function jT(e,t,n){return function(r,a,o){var i=r.node(a),s=r.node(o),l=0,u;if(l+=i.width/2,J.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":u=-i.width/2;break;case"r":u=i.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(i.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,J.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function WT(e,t){return e.node(t).width}var Wn=ye,jm=Le,GT=BT.positionX,YT=XT;function XT(e){e=jm.asNonCompoundGraph(e),QT(e),Wn.forEach(GT(e),function(t,n){e.node(n).x=t})}function QT(e){var t=jm.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Wn.forEach(t,function(a){var o=Wn.max(Wn.map(a,function(i){return e.node(i).height}));Wn.forEach(a,function(i){e.node(i).y=r+o/2}),r+=o+n})}var ae=ye,mf=Yx,gf=dI,ZT=DI,KT=Le.normalizeRanks,JT=$I,ek=Le.removeEmptyRanks,vf=HI,tk=XI,yf=ZI,nk=LT,rk=YT,$t=Le,ak=rt.Graph,ok=ik;function ik(e,t){var n=t&&t.debugTiming?$t.time:$t.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return vk(e)});n("  runLayout",function(){sk(r,n)}),n("  updateInputGraph",function(){lk(e,r)})})}function sk(e,t){t("    makeSpaceForEdgeLabels",function(){yk(e)}),t("    removeSelfEdges",function(){Ik(e)}),t("    acyclic",function(){mf.run(e)}),t("    nestingGraph.run",function(){vf.run(e)}),t("    rank",function(){ZT($t.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){bk(e)}),t("    removeEmptyRanks",function(){ek(e)}),t("    nestingGraph.cleanup",function(){vf.cleanup(e)}),t("    normalizeRanks",function(){KT(e)}),t("    assignRankMinMax",function(){wk(e)}),t("    removeEdgeLabelProxies",function(){Sk(e)}),t("    normalize.run",function(){gf.run(e)}),t("    parentDummyChains",function(){JT(e)}),t("    addBorderSegments",function(){tk(e)}),t("    order",function(){nk(e)}),t("    insertSelfEdges",function(){Tk(e)}),t("    adjustCoordinateSystem",function(){yf.adjust(e)}),t("    position",function(){rk(e)}),t("    positionSelfEdges",function(){kk(e)}),t("    removeBorderNodes",function(){xk(e)}),t("    normalize.undo",function(){gf.undo(e)}),t("    fixupEdgeLabelCoords",function(){_k(e)}),t("    undoCoordinateSystem",function(){yf.undo(e)}),t("    translateGraph",function(){Ck(e)}),t("    assignNodeIntersects",function(){Ek(e)}),t("    reversePoints",function(){Nk(e)}),t("    acyclic.undo",function(){mf.undo(e)})}function lk(e,t){ae.forEach(e.nodes(),function(n){var r=e.node(n),a=t.node(n);r&&(r.x=a.x,r.y=a.y,t.children(n).length&&(r.width=a.width,r.height=a.height))}),ae.forEach(e.edges(),function(n){var r=e.edge(n),a=t.edge(n);r.points=a.points,ae.has(a,"x")&&(r.x=a.x,r.y=a.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var ck=["nodesep","edgesep","ranksep","marginx","marginy"],uk={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},dk=["acyclicer","ranker","rankdir","align"],fk=["width","height"],pk={width:0,height:0},hk=["minlen","weight","width","height","labeloffset"],mk={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},gk=["labelpos"];function vk(e){var t=new ak({multigraph:!0,compound:!0}),n=Ei(e.graph());return t.setGraph(ae.merge({},uk,Ci(n,ck),ae.pick(n,dk))),ae.forEach(e.nodes(),function(r){var a=Ei(e.node(r));t.setNode(r,ae.defaults(Ci(a,fk),pk)),t.setParent(r,e.parent(r))}),ae.forEach(e.edges(),function(r){var a=Ei(e.edge(r));t.setEdge(r,ae.merge({},mk,Ci(a,hk),ae.pick(a,gk)))}),t}function yk(e){var t=e.graph();t.ranksep/=2,ae.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function bk(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),a=e.node(t.w),o={rank:(a.rank-r.rank)/2+r.rank,e:t};$t.addDummyNode(e,"edge-proxy",o,"_ep")}})}function wk(e){var t=0;ae.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ae.max(t,r.maxRank))}),e.graph().maxRank=t}function Sk(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Ck(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,a=0,o=e.graph(),i=o.marginx||0,s=o.marginy||0;function l(u){var c=u.x,d=u.y,p=u.width,m=u.height;t=Math.min(t,c-p/2),n=Math.max(n,c+p/2),r=Math.min(r,d-m/2),a=Math.max(a,d+m/2)}ae.forEach(e.nodes(),function(u){l(e.node(u))}),ae.forEach(e.edges(),function(u){var c=e.edge(u);ae.has(c,"x")&&l(c)}),t-=i,r-=s,ae.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ae.forEach(e.edges(),function(u){var c=e.edge(u);ae.forEach(c.points,function(d){d.x-=t,d.y-=r}),ae.has(c,"x")&&(c.x-=t),ae.has(c,"y")&&(c.y-=r)}),o.width=n-t+i,o.height=a-r+s}function Ek(e){ae.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),a=e.node(t.w),o,i;n.points?(o=n.points[0],i=n.points[n.points.length-1]):(n.points=[],o=a,i=r),n.points.unshift($t.intersectRect(r,o)),n.points.push($t.intersectRect(a,i))})}function _k(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);if(ae.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Nk(e){ae.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function xk(e){ae.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),a=e.node(n.borderBottom),o=e.node(ae.last(n.borderLeft)),i=e.node(ae.last(n.borderRight));n.width=Math.abs(i.x-o.x),n.height=Math.abs(a.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),ae.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function Ik(e){ae.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Tk(e){var t=$t.buildLayerMatrix(e);ae.forEach(t,function(n){var r=0;ae.forEach(n,function(a,o){var i=e.node(a);i.order=o+r,ae.forEach(i.selfEdges,function(s){$t.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function kk(e){ae.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),a=r.x+r.width/2,o=r.y,i=n.x-a,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:a+2*i/3,y:o-s},{x:a+5*i/6,y:o-s},{x:a+i,y:o},{x:a+5*i/6,y:o+s},{x:a+2*i/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function Ci(e,t){return ae.mapValues(ae.pick(e,t),Number)}function Ei(e){var t={};return ae.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Pr=ye,Rk=Le,Ok=rt.Graph,Ak={debugOrdering:qk};function qk(e){var t=Rk.buildLayerMatrix(e),n=new Ok({compound:!0,multigraph:!0}).setGraph({});return Pr.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Pr.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Pr.forEach(t,function(r,a){var o="layer"+a;n.setNode(o,{rank:"same"}),Pr.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var Pk="0.8.5",Wm={graphlib:rt,layout:ok,debug:Ak,util:{time:Le.time,notime:Le.notime},version:Pk},bf=function(t){return t.reduce(function(n,r){var a=r[0],o=r[1];return n[a]=o,n},{})},wf=typeof window<"u"&&window.document&&window.document.createElement?I.useLayoutEffect:I.useEffect,Dk=typeof Element<"u",Lk=typeof Map=="function",Mk=typeof Set=="function",Vk=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Hr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Hr(e[r],t[r]))return!1;return!0}var o;if(Lk&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!Hr(r.value[1],t.get(r.value[0])))return!1;return!0}if(Mk&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Vk&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;if(Dk&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((a[r]==="_owner"||a[r]==="__v"||a[r]==="__o")&&e.$$typeof)&&!Hr(e[a[r]],t[a[r]]))return!1;return!0}return e!==e&&t!==t}var $k=function(t,n){try{return Hr(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},Fk=[],Bk=function(t,n,r){r===void 0&&(r={});var a=I.useRef(null),o={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||Fk},i=I.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],l=i[1],u=I.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(m){var h=m.state,g=Object.keys(h.elements);xy.flushSync(function(){l({styles:bf(g.map(function(v){return[v,h.styles[v]||{}]})),attributes:bf(g.map(function(v){return[v,h.attributes[v]]}))})})},requires:["computeStyles"]}},[]),c=I.useMemo(function(){var p={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[u,{name:"applyStyles",enabled:!1}])};return $k(a.current,p)?a.current||p:(a.current=p,p)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,u]),d=I.useRef();return wf(function(){d.current&&d.current.setOptions(c)},[c]),wf(function(){if(!(t==null||n==null)){var p=r.createPopper||Nv,m=p(t,n,c);return d.current=m,function(){m.destroy(),d.current=null}}},[t,n,r.createPopper]),{state:d.current?d.current.state:null,styles:s.styles,attributes:s.attributes,update:d.current?d.current.update:null,forceUpdate:d.current?d.current.forceUpdate:null}};const ms=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:a,strategy:o,style:i})=>{n=n??"bottom-start";const[s,l]=I.useState(!1),[u,c]=I.useState(null),[d,p]=I.useState(null),[m,h]=I.useState(null),{styles:g,attributes:v}=Bk(u,d,{placement:n,strategy:o,modifiers:[{name:"arrow",options:{element:m}},{name:"offset",options:{offset:[0,10]}}]}),C=f(wp,{in:s,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:O("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...i,...g.popper},ref:p,...v.popper,children:[f(Ct,{variant:"body1",children:f(Ue,{...t})}),O("div",{className:"TooltipButtonContainer",children:[a&&f(kc,{color:"primary",variant:"contained",onClick:()=>{a.onClick(),a.closePopoverOnClick&&l(!1)},children:a.content}),r&&f(kc,{variant:"outlined",onClick:()=>l(!1),children:"Close"})]}),f("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:g.arrow})]})});return O(j,{children:[f("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>l(_=>!_),ref:c,children:e}),C]})};try{ms.displayName="MarkdownPopover",ms.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}}}catch{}const Jt=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:a=""})=>f(j,{children:f(ms,{contentProps:{markdown:e},placement:n,actionButton:t?{content:f(j,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:f(Sv,{className:`HelpButton ${a}`})})});try{Jt.displayName="HelpPopover",Jt.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const zk=()=>O(j,{children:[f(Ct,{variant:"smallText1",className:"description",children:"Undefined"}),f(Jt,{placement:"top",markdownText:`Provenance tracks the relationship 
          between data, code and analytical results.`,helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),gs=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return I.useMemo(()=>O(j,{children:[f("div",{children:f(he,{icon:"fileOutlined"})}),f("span",{children:n})]}),[n])};try{gs.displayName="EntityPlaceholderNodeLabel",gs.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var Ae=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(Ae||{});const ma=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=f(ss,{...n});break;case"EntityPlaceholderNode":r=f(gs,{...n});break;case"ExternalNode":r=f(ds,{...n});break;case"ActivityNode":r=f(os,{...n});break;case"ExpandNode":r=f(cs,{...n});break;case"UndefinedNode":r=f(zk,{});break;default:r=O("p",{children:["Unrecognized node type: ",t]});break}const a={label:r,props:n,type:t};return{id:xt(e),position:{x:100,y:100},data:a,connectable:!1,draggable:!1,className:`${t}`}},Gm=(e,t)=>{const n=xt(e),r=xt(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:gt.SimpleBezier,markerEnd:{type:rr.ArrowClosed}}},xt=e=>{const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${n.versionNumber??"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${n.targetVersionNumber??"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${n.entityHeader.versionNumber??"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${n.versionNumber??"latest"}`}},dn=new Wm.graphlib.Graph;dn.setDefaultEdgeLabel(()=>({}));const Sf=e=>e.data.type=="ExpandNode"?30:100,Cf=e=>e.data.type=="ExpandNode"?30:172,Hk=(e,t,n)=>{const r=n==="LR";return dn.setGraph({rankdir:n}),e.forEach(a=>{dn.setNode(a.id,{width:Cf(a),height:Sf(a)})}),t.forEach(a=>{dn.setEdge(a.source,a.target)}),Wm.layout(dn),e.forEach(a=>{const o=dn.node(a.id);return a.targetPosition=r?X.Left:X.Top,a.sourcePosition=r?X.Right:X.Bottom,a.position={x:o.x-Cf(a)/2,y:o.y-Sf(a)/2},a}),{nodes:e,edges:t}},Ef=(e,t)=>Iy(e,t,ky).length==0;try{ma.displayName="getProvenanceNode",ma.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}try{xt.displayName="getNodeId",xt.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}const Uk="org.sagebionetworks.repo.model.provenance.UsedEntity",_f=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(a=>t.id==a.id&&t.versionNumber==a.versionNumber))!==void 0},Ym=(e,t)=>t.find(r=>r.id===xt(e))===void 0,jk=(e,t)=>{const n={type:Ae.ENTITY,data:e};return t.find(r=>r.id===xt(n))},Wk=(e,t,n)=>n.find(a=>a.source===xt(e)&&a.target===xt(t))===void 0,mr=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:a}=e;Ym(t,r)&&r.push(ma(t)),Wk(t,n,a)&&a.push(Gm(t,n))},Gk=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:a}=e,o={type:Ae.ACTIVITY,data:t},i={type:Ae.ENTITY,data:n};mr({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},Yk=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:a}=e,o={type:Ae.EXPAND,data:{itemCount:n,entityHeader:t}},i={type:Ae.ENTITY,data:t};mr({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},Xk=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:Ae.ENTITY_PLACEHOLDER,data:t},i={type:Ae.ACTIVITY,data:n};mr({newNodeProps:o,existingNodeProps:i,nodesCopy:r,edgesCopy:a})},Qk=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,a={type:Ae.UNDEFINED,data:t},o={type:Ae.ENTITY,data:t};mr({newNodeProps:a,existingNodeProps:o,nodesCopy:n,edgesCopy:r})},Zk=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:Ae.ACTIVITY,data:n},i={type:Ae.EXTERNAL,data:t};mr({newNodeProps:i,existingNodeProps:o,nodesCopy:r,edgesCopy:a})},Kk=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:a}=e,o={type:Ae.ENTITY,data:t};if(Ym(o,r)&&(r.push(ma(o)),n)){const i={type:Ae.ACTIVITY,data:n};a.push(Gm(o,i))}},_i=400,Ni=.85,Jk=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:a=[],onNodesChangedListener:o,onEdgesChangedListener:i}=e,{accessToken:s}=ie(),[l,u]=V.useState(r),[c,d]=V.useState(a),[p,m,h]=HN([]),[g,v,C]=UN([]),[_,y]=I.useState(),S=Yg(),{data:b,isSuccess:w}=lw(t,{useErrorBoundary:!0});if(w&&b&&b.totalNumberOfResults==0){const P=t.map(R=>R.targetId).join(",");S(`Unable to load provenance for the given Synapse IDs: ${P}`)}const E=b==null?void 0:b.results,[N,x]=V.useState(!1),k=Jl(),A=I.useCallback((P,R)=>{y(R)},[]),D=I.useCallback(async P=>{var F;const{entityHeader:R,nodesCopy:L,edgesCopy:z,usedInActivity:B}=P;Kk({entityHeader:R,activity:B,nodesCopy:L,edgesCopy:z});try{const W=await _c(R.id,R.versionNumber,s);(!_f({entityHeader:R,rootEntityHeaders:E})||W.used&&W.used.length>=_i)&&Yk({entityHeader:R,itemCount:(F=W.used)==null?void 0:F.length,nodesCopy:L,edgesCopy:z})}catch(W){console.error(W),_f({entityHeader:R,rootEntityHeaders:E})&&Qk({entityHeader:R,nodesCopy:L,edgesCopy:z})}},[s,E]);I.useEffect(()=>{!N&&p.length>0&&setTimeout(()=>{if(E){const P=jk(E[0],p);if(P){const R=k.getZoom(),L=R>Ni?Ni:R;k==null||k.setCenter(P.position.x+150,P.position.y-30,{zoom:L,duration:0})}x(!0)}})},[N,p,k,E]);const M=I.useCallback(async P=>{const{entityHeader:R,nodesCopy:L,edgesCopy:z}=P;try{const B=await _c(R.id,R.versionNumber,s);if(Gk({activity:B,entityHeader:R,nodesCopy:L,edgesCopy:z}),B.used&&B.used.length<_i){const F=[];B.used.forEach(U=>{U.concreteType==Uk?F.push(U.reference):Zk({usedURL:U,activity:B,nodesCopy:L,edgesCopy:z})});const W=await vl(F,s),{results:Q}=W;F.filter(U=>Q.find(G=>G.id==U.targetId)==null).forEach(U=>{Xk({ref:U,activity:B,nodesCopy:L,edgesCopy:z})});const $=[];Q.forEach(U=>{$.push(D({entityHeader:U,nodesCopy:L,edgesCopy:z,usedInActivity:B}))}),await Promise.allSettled($)}}catch(B){console.error(B)}},[s,D]);I.useEffect(()=>{if(E&&l.length==0){const P=[...l],R=[...c],L=[];E.forEach(z=>{const B=D({entityHeader:z,nodesCopy:P,edgesCopy:R});L.push(B);const F=M({entityHeader:z,nodesCopy:P,edgesCopy:R});L.push(F)}),Promise.allSettled(L).finally(()=>{u(P),d(R)})}},[D,S,M,E,t,c,l]),I.useEffect(()=>{const P=_==null?void 0:_.data;if(_&&(P==null?void 0:P.type)==Ae.EXPAND){const R=P.props;if(R.itemCount>_i){Qt("Web visualization does not support expanding this many items at this time.","danger");return}else{P.label=f(Mb,{size:30});const L=l.filter(F=>F.id!=_.id),z=Zl([_],c)[0],B=c.filter(F=>F!=z);M({entityHeader:R.entityHeader,nodesCopy:L,edgesCopy:B}).finally(()=>{u(L),d(B)})}y(void 0)}},[_,l,c,M]),I.useEffect(()=>{const{nodes:P,edges:R}=Hk(l,c,"TB");Ef(P,p)||(m(P),o&&o(P)),Ef(R,g)||(v(R),i&&i(R))},[l,c,p,g,m,v,N,k,t,o,i]);const T=I.useCallback(P=>{P&&typeof P.deltaX<"u"&&typeof P.deltaY<"u"&&window.scrollTo(window.scrollX+P.deltaX,window.scrollY+P.deltaY)},[]);return f("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:f(om,{defaultZoom:Ni,nodes:p,edges:g,onNodeClick:A,onNodesChange:h,onEdgesChange:C,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:T,children:f(E_,{})})})},vs=e=>f(Xf,{children:f(im,{children:f(Jk,{...e})})});try{vs.displayName="ProvenanceGraph",vs.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}}}catch{}function ys(e){const{entityList:t,displayHeightPx:n}=e,r=t.split(",").map(o=>{const i=o.split("/version/");return{targetId:i[0],targetVersionNumber:i.length>1?parseInt(i[1]):void 0}}),a=n?`${n}px`:void 0;return f(vs,{entityRefs:r,containerHeight:a})}try{ys.displayName="MarkdownProvenanceGraph",ys.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}}}catch{}class ar extends I.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&Qn(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:Oe.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){kn({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(a=>{const{preSignedURL:o}=a.requestedFiles.filter(i=>i.fileHandleId===n)[0];this.setState({preSignedURL:o})}).catch(a=>{console.error("Error on getting image ",a)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(o=>o.fileName===t)[0],a=[{associateObjectId:this.props.wikiId,associateObjectType:Oe.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(a,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let a="auto";t.scale&&t.scale!=="100"&&(a=`${Number(t.scale)}%`);const o=n.toLowerCase();let i="";o==="left"&&(i="floatLeft"),o==="right"&&(i="floatright"),o==="center"&&(i="align-center");const s={width:a,height:a};return this.state.preSignedURL?f(I.Fragment,{children:f("img",{alt:r,className:"img-fluid  "+i,src:this.state.preSignedURL,style:s})}):null}}ar.contextType=cr;try{ar.displayName="SynapseImage",ar.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}}}catch{}const or=V.createContext(void 0),bs=({children:e,wikiContext:t})=>f(or.Provider,{value:t,children:e}),Nf=or.Consumer;function Xm(){return I.useContext(or)??{}}try{or.displayName="SynapseWikiContext",or.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}}}catch{}try{bs.displayName="SynapseWikiContextProvider",bs.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}}}catch{}try{Nf.displayName="SynapseWikiContextConsumer",Nf.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}}}catch{}function ws(e){const{wikiId:t,wikiPage:n,fileHandles:r}=Xm();return e.fileName?r?f(ar,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):f(j,{}):e.synapseId?f(ar,{params:e,synapseId:e.synapseId}):f(j,{})}try{ws.displayName="MarkdownSynapseImage",ws.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}}}catch{}const eR=Ry(Oy);class ga extends I.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:ur,entityId:On(t),query:{sql:t}};Qf(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var m,h;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:a,xaxistype:o,showlegend:i}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),u={showlegend:i,title:t};n&&(u.xaxis={title:n}),o&&(u.xaxis={...u.xaxis,xaxistype:o.toLowerCase()}),r&&(u.yaxis={title:r});const c=[],d=l?"v":"h",p=((m=s.queryData.queryResult)==null?void 0:m.queryResults.headers)??[];for(let g=0;g<p.length-1;g+=1)c[g]={orientation:d,name:p[g+1].name,type:a.toLowerCase(),x:[],y:[]};for(const g of((h=s.queryData.queryResult)==null?void 0:h.queryResults.rows)??[])for(let v=1;v<g.values.length;v+=1){const C=g.values;c[v-1].x.push(C[0]),c[v-1].y.push(C[v])}return f(eR,{layout:u,data:c})}render(){return this.state.isLoaded?this.showPlot():null}}ga.contextType=cr;try{ga.displayName="SynapsePlot",ga.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}}}catch{}function Ss(e){const{ownerId:t,wikiId:n,wikiPage:r}=Xm();return f(ga,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{Ss.displayName="MarkdownSynapsePlot",Ss.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}}}catch{}const tR=200,xf="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",If="ESTIMATED_DOWNLOAD_SPEED",nR="syn12600511",rR=e=>new Promise((t,n)=>{const r=localStorage.getItem(xf),a=localStorage.getItem(If);if(r&&a&&new Date().getTime()<Number(r)){t(Number(a));return}Qn(e,nR).then(o=>{const i=o,l={includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:i.id,associateObjectType:Oe.FileEntity,fileHandleId:i.dataFileHandleId}]};kn(l,e).then(u=>{const c=u.requestedFiles[0].preSignedURL,d=u.requestedFiles[0].fileHandle,p=new Date().getTime();return Xg(d,c).then(()=>{const m=d.contentSize/((new Date().getTime()-p-tR)/1e3),h=new Date().getTime();localStorage.setItem(xf,(h+1e3*60*5).toString()),localStorage.setItem(If,m.toString()),t(m)})})}).catch(o=>n(o))});var Cs={},aR={get exports(){return Cs},set exports(e){Cs=e}};(function(e,t){(function(n,r){e.exports=r()})(Oa,function(){var n,r,a=1e3,o=6e4,i=36e5,s=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,c=2592e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,p={years:u,months:c,days:s,hours:i,minutes:o,seconds:a,milliseconds:1,weeks:6048e5},m=function(b){return b instanceof S},h=function(b,w,E){return new S(b,E,w.$l)},g=function(b){return r.p(b)+"s"},v=function(b){return b<0},C=function(b){return v(b)?Math.ceil(b):Math.floor(b)},_=function(b){return Math.abs(b)},y=function(b,w){return b?v(b)?{negative:!0,format:""+_(b)+w}:{negative:!1,format:""+b+w}:{negative:!1,format:""}},S=function(){function b(E,N,x){var k=this;if(this.$d={},this.$l=x,E===void 0&&(this.$ms=0,this.parseFromMilliseconds()),N)return h(E*p[g(N)],this);if(typeof E=="number")return this.$ms=E,this.parseFromMilliseconds(),this;if(typeof E=="object")return Object.keys(E).forEach(function(M){k.$d[g(M)]=E[M]}),this.calMilliseconds(),this;if(typeof E=="string"){var A=E.match(d);if(A){var D=A.slice(2).map(function(M){return M!=null?Number(M):0});return this.$d.years=D[0],this.$d.months=D[1],this.$d.weeks=D[2],this.$d.days=D[3],this.$d.hours=D[4],this.$d.minutes=D[5],this.$d.seconds=D[6],this.calMilliseconds(),this}}return this}var w=b.prototype;return w.calMilliseconds=function(){var E=this;this.$ms=Object.keys(this.$d).reduce(function(N,x){return N+(E.$d[x]||0)*p[x]},0)},w.parseFromMilliseconds=function(){var E=this.$ms;this.$d.years=C(E/u),E%=u,this.$d.months=C(E/c),E%=c,this.$d.days=C(E/s),E%=s,this.$d.hours=C(E/i),E%=i,this.$d.minutes=C(E/o),E%=o,this.$d.seconds=C(E/a),E%=a,this.$d.milliseconds=E},w.toISOString=function(){var E=y(this.$d.years,"Y"),N=y(this.$d.months,"M"),x=+this.$d.days||0;this.$d.weeks&&(x+=7*this.$d.weeks);var k=y(x,"D"),A=y(this.$d.hours,"H"),D=y(this.$d.minutes,"M"),M=this.$d.seconds||0;this.$d.milliseconds&&(M+=this.$d.milliseconds/1e3);var T=y(M,"S"),P=E.negative||N.negative||k.negative||A.negative||D.negative||T.negative,R=A.format||D.format||T.format?"T":"",L=(P?"-":"")+"P"+E.format+N.format+k.format+R+A.format+D.format+T.format;return L==="P"||L==="-P"?"P0D":L},w.toJSON=function(){return this.toISOString()},w.format=function(E){var N=E||"YYYY-MM-DDTHH:mm:ss",x={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return N.replace(l,function(k,A){return A||String(x[k])})},w.as=function(E){return this.$ms/p[g(E)]},w.get=function(E){var N=this.$ms,x=g(E);return x==="milliseconds"?N%=1e3:N=x==="weeks"?C(N/p[x]):this.$d[x],N===0?0:N},w.add=function(E,N,x){var k;return k=N?E*p[g(N)]:m(E)?E.$ms:h(E,this).$ms,h(this.$ms+k*(x?-1:1),this)},w.subtract=function(E,N){return this.add(E,N,!0)},w.locale=function(E){var N=this.clone();return N.$l=E,N},w.clone=function(){return h(this.$ms,this)},w.humanize=function(E){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!E)},w.milliseconds=function(){return this.get("milliseconds")},w.asMilliseconds=function(){return this.as("milliseconds")},w.seconds=function(){return this.get("seconds")},w.asSeconds=function(){return this.as("seconds")},w.minutes=function(){return this.get("minutes")},w.asMinutes=function(){return this.as("minutes")},w.hours=function(){return this.get("hours")},w.asHours=function(){return this.as("hours")},w.days=function(){return this.get("days")},w.asDays=function(){return this.as("days")},w.weeks=function(){return this.get("weeks")},w.asWeeks=function(){return this.as("weeks")},w.months=function(){return this.get("months")},w.asMonths=function(){return this.as("months")},w.years=function(){return this.get("years")},w.asYears=function(){return this.as("years")},b}();return function(b,w,E){n=E,r=E().$utils(),E.duration=function(k,A){var D=E.locale();return h(k,{$l:D},A)},E.isDuration=m;var N=w.prototype.add,x=w.prototype.subtract;w.prototype.add=function(k,A){return m(k)&&(k=k.asMilliseconds()),N.bind(this)(k,A)},w.prototype.subtract=function(k,A){return m(k)&&(k=k.asMilliseconds()),x.bind(this)(k,A)}}})})(aR);const oR=Cs;Vt.extend(oR);Vt.extend(Uy);function Es(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=ie(),[a,o]=I.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:i,downloadSpeed:s}=a;I.useEffect(()=>{r&&rR(r).then(h=>{o({isLoading:!1,downloadSpeed:h})})},[r]);const l=i||s===0||!n?0:n/s,u=l===0,c=u?"":Vt.duration({seconds:l}).humanize(),d=t===0,p=d?"SRC-inactive":"SRC-primary-text-color",m=u?"SRC-inactive":"SRC-primary-text-color";return O("span",{className:"download-details-container",children:[O("span",{children:[f("span",{className:p,children:f(he,{icon:"file"})}),d?f(Ya,{width:50}):O(j,{children:[" ",t," files "]})]}),n&&f(Xe,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Gr,placement:"top",children:O("span",{"data-testid":"numBytesUI",children:[f("span",{className:m,children:f(he,{icon:"database"})}),u?f(Ya,{width:50}):Zf(n)]})}),n&&f(Xe,{title:"This is an estimate of how long package download will take.",enterNextDelay:Gr,placement:"top",children:O("span",{"data-testid":"downloadTimeEstimateUI",children:[f("span",{className:m,children:f(he,{icon:"clock"})}),i&&t>0?f(Ya,{width:50}):c]})})]})}try{Es.displayName="DownloadDetails",Es.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}}}catch{}async function iR(e,t,n,r,a){try{const o={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await Zg(o,e),Qt("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:a}}),t(),[0,""]}catch(o){return Qt("danger",void 0,o.reason),t(),[0,""]}}const Yn={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:O(j,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",f("br",{}),"If you don’t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:O(j,{children:["Please ",f(Qg,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},sR=e=>{switch(e.status){case 0:case 1:return O("div",{children:[f("span",{className:"spinner white"}),f("span",{className:"spinner__text",children:Yn[e.status].infoText})]});case 4:return f(j,{children:Yn[e.status].infoText});case 2:case 3:return O(j,{children:[f(Es,{numFiles:e.fileCount,numBytes:e.fileSize}),f("span",{className:"download-confirmation-infoText",children:Yn[e.status].infoText})]});default:return f(j,{})}},_s=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:a})=>{const{accessToken:o,downloadCartPageUrl:i}=ie(),{showDownloadConfirmation:s=!0}=a??{},[l,u]=I.useState(o?0:4),[c,d]=I.useState(0),[p,m]=I.useState(),{data:h,refetch:g}=jy(),v=e(),[C,_]=I.useState(!1),y=I.useCallback((D,M,T)=>{if(o&&T){const P=T.totalNumberOfFiles>0,R=D??0;u(P?3:2),d(R),m(M)}},[o]),{data:S,isSuccess:b}=sw({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[Oi.FILE]});Oc(()=>{b&&S&&h&&y(S.totalChildCount,S.sumFileSizesBytes,h)},[y,t,b,S,h]);const w=dr|wl,E={...v,partMask:w},{data:N}=xp(E);Oc(()=>{var D,M;if(N&&h){const T=(D=N.sumFileSizes)==null?void 0:D.greaterThan;y(N.queryCount,T||(M=N.sumFileSizes)==null?void 0:M.sumFileSizesBytes,h)}},[y,v,N,h]);const x=n?()=>n():()=>{r&&r(D=>({...D,showDownloadConfirmation:!1}))},k=async()=>{if(!o)u(4);else{u(1);const T=(await iR(o,x,v,t,()=>_(!0)))[0];u(T),g()}};C&&(window.location.href=i);const A=a==null?void 0:a.showFacetFilter;return f(j,{children:O(tn,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${Yn[l].className} ${s?"":"hidden"}
          ${A?An:qn}
        `,children:[f(sR,{status:l,fileCount:c,fileSize:p}),O("div",{className:"download-confirmation-action",children:[l!==1&&f("button",{className:"btn btn-link",onClick:x,children:Yn[l].closeText}),(l===2||l===3)&&f("button",{type:"button",className:"btn btn-primary",onClick:()=>{k()},children:"Add"})]})]})})};try{_s.displayName="DownloadConfirmation",_s.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}}}catch{}const xi=3,va=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=It(),{topLevelControlsState:{showSearchBar:a,showFacetFilter:o}}=Et(),[i,s]=I.useState(""),l=I.useRef(null),u=d=>{var p;if(d.preventDefault(),i.trim().length<xi)(p=l.current)==null||p.setCustomValidity(`Search term must have a minimum of ${xi} characters`);else{const m=r(),{additionalFilters:h=[]}=m.query,g={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:i};if(h.find(C=>C.concreteType==g.concreteType&&C.searchExpression==g.searchExpression))return;h.push(g),m.query.additionalFilters=h,n(m),s("")}},c=d=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(d.currentTarget.value)};return f("div",{className:`QueryWrapperSearchInput ${o?An:qn}`,children:f(bl,{in:a,timeout:{enter:300,exit:300},children:O("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[O("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:u,children:[f("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:f(he,{icon:"search"})}),f("input",{ref:l,minLength:xi,onChange:c,placeholder:"Enter Search Terms",value:i,type:"text"}),i.length>0&&f("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:f(he,{icon:"close"})})]}),f("div",{className:"QueryWrapperSearchInput__helppopover",children:f(Jt,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{va.displayName="FullTextSearch",va.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const Ns="First line is the columns names.",xs="Include row metadata (Row Id and Row Version).",ya="Comma Separated Values (CSV)",Tf="Tab Separated Values (TSV)",lR={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:ya,title:ya},{const:Tf,title:Tf}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[Ns,xs]},uniqueItems:!0}}},cR={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},uR={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},dR={},fR=[lR,uR],pR=[cR,dR];class In extends I.Component{constructor(t){super(t),this.handleSubmit=n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()},this.handleDownloadSetup=n=>{this.setState({isLoading:!0});const{formData:r}=n,a=r["File Type"],o=r.Contents,{queryBundleRequest:i,getLastQueryRequest:s}=this.props,l=a===ya?",":"	",u=o.includes(Ns),c=o.includes(xs),d=i??s(),p=d.query.sql,m={sql:p,entityId:On(p),selectedFacets:d.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:u,includeRowIdAndRowVersion:c,csvTableDescriptor:{separator:l},additionalFilters:d.query.additionalFilters};Kg(m,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})},this.onDownload=()=>{const{data:n}=this.state;Jg(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})},this.handleChange=n=>{const{formData:r}=n;this.setState({formData:r})},this.state={isLoading:!1,step:0,formData:{"File Type":ya,Contents:[Ns,xs]}}}render(){const t={position:"absolute",top:10,right:10,zIndex:10},n={height:50,width:50,backgroundSize:50};return f(se,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:O(se.Body,{children:[f("button",{style:t,onClick:this.props.onClose,children:f(he,{icon:"close"})}),O(ty,{schema:fR[this.state.step],uiSchema:pR[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&f("div",{className:"SRC-centerAndJustifyContent",children:O("div",{className:"SRC-center-text",children:[f("p",{children:" Creating the File "}),f("div",{style:n,className:"spinner"}),f("p",{children:" Loading... "})]})}),O("div",{style:{textAlign:"right"},children:[f(Ce,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),f(Ce,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}In.contextType=cr;try{In.displayName="ModalDownload",In.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}}}catch{}function ba(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:a,componentIndex:o,shouldDeepLink:i}=e,[s,l]=I.useState(void 0),{entityId:u,versionNumber:c,getInitQueryRequest:d,getLastQueryRequest:p,setQuery:m,resetQuery:h,removeQueryFilter:g,removeValueFromQueryFilter:v,removeSelectedFacet:C,removeValueFromSelectedFacet:_}=Py({initQueryRequest:t,componentIndex:o,shouldDeepLink:i,onQueryChange:n}),y=I.useMemo(()=>p(),[p]),{data:S,hasNextPage:b,fetchPreviousPage:w,fetchNextPage:E,isFetchingNextPage:N,isLoading:x,error:k,isPreviousData:A}=Gy(y,{keepPreviousData:!0},l),D=x||A,{data:M}=Pa(u,c),[T,P]=I.useState(0);async function R(){if(!b)throw new Error("Called appendNextPageToResults when there is no next page");await E(),P("ALL")}async function L(){if(!b)throw new Error("Called goToNextPage when there is no next page");if(T==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await E(),P(T+1)}const z=T!=="ALL"&&T>0;async function B(){if(T==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!z)throw new Error("Called goToNextPage when there is no next page");await w(),P(T-1)}const F=I.useMemo(()=>{var Z,K,Y;if(!(S==null||S.pages.length===0||S.pages[0].responseBody==null))return T==="ALL"?{...S==null?void 0:S.pages[0].responseBody,queryResult:{...(Z=S==null?void 0:S.pages[0].responseBody)==null?void 0:Z.queryResult,queryResults:{...(Y=(K=S==null?void 0:S.pages[0].responseBody)==null?void 0:K.queryResult)==null?void 0:Y.queryResults,rows:S.pages.flatMap(ge=>{var ue;return(ue=ge.responseBody.queryResult)==null?void 0:ue.queryResults.rows})??[]}}}:S==null?void 0:S.pages[T].responseBody},[T,S]);I.useEffect(()=>{F&&r&&r(JSON.stringify(F))},[F,r]);const W=F?Zy(F.facets,F.selectColumns):!0,Q=I.useMemo(()=>Ky(F,a),[F,a]),q=I.useMemo(()=>{const Z=p();return Jy(Z.query,a)},[p,a]),$=I.useCallback(Z=>{var K;return((K=F==null?void 0:F.columnModels)==null?void 0:K.find(Y=>Y.name===Z))??null},[F==null?void 0:F.columnModels]),U={data:Q,isLoadingNewPage:N,hasNextPage:!!b,hasPreviousPage:z,isLoadingNewBundle:D,getLastQueryRequest:p,getInitQueryRequest:d,error:k,entity:M,executeQueryRequest:m,isFacetsAvailable:W,asyncJobStatus:s,appendNextPageToResults:R,goToNextPage:L,goToPreviousPage:B,hasResettableFilters:q,resetQuery:h,removeQueryFilter:g,removeValueFromQueryFilter:v,removeSelectedFacet:C,removeValueFromSelectedFacet:_,lockedColumn:a,getColumnModel:$},{children:G}=e;return f(Dy,{queryContext:U,children:f("div",{className:`SRC-wrapper ${D||N?"SRC-logo-cursor":""} ${W?"has-facets":""}`,children:G})})}try{ba.displayName="InfiniteQueryWrapper",ba.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}}}catch{}class wa extends V.Component{constructor(t){super(t),this.handleClickOutsideForm=n=>{var r,a;!((r=this.searchFormRef.current)!=null&&r.contains(n==null?void 0:n.target))&&!((a=this.radioFormRef.current)!=null&&a.contains(n==null?void 0:n.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=n=>{var p,m,h,g,v,C;n.preventDefault();const{searchText:r}=this.state;let{columnName:a}=this.state;const{searchable:o,lockedColumn:i}=this.props;if(a==="")if(o)a=o.filter(_=>_!==(i==null?void 0:i.columnName))[0];else{const _=(h=(m=(p=this.props.queryContext)==null?void 0:p.data)==null?void 0:m.columnModels)==null?void 0:h.filter(y=>y.name!==(i==null?void 0:i.columnName)).filter(y=>this.isSupportedColumn(y));a=(_==null?void 0:_[0].name)??""}this.setState({show:!1});const{executeQueryRequest:s,getLastQueryRequest:l}=this.props.queryContext,u=l(),{additionalFilters:c=[]}=u.query,d=c.findIndex(_=>!!(eb(_)||tb(_)&&_.columnName===a));if(d===-1){const _=(C=(v=(g=this.props.queryContext)==null?void 0:g.data)==null?void 0:v.columnModels)==null?void 0:C.filter(y=>y.name===a)[0];if(_!=null&&_.columnType.endsWith("_LIST")){const y={columnName:a,function:nb.HAS_LIKE,values:[`%${r}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};c.push(y)}else{const y={columnName:a,operator:rb.LIKE,values:[`%${r}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};c.push(y)}}else c[d].values.push(`%${r}%`);u.query.additionalFilters=c,s(u)},this.handleChange=n=>{this.setState({searchText:n.currentTarget.value})},this.isSupportedColumn=n=>{switch(n==null?void 0:n.columnType){case re.FILEHANDLEID:case re.ENTITYID:case re.DATE:case re.DATE_LIST:case re.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=n=>{if(this.isSupportedColumn(n)){const{searchable:r}=this.props;return r==null?void 0:r.some(a=>a===(n==null?void 0:n.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:this.props.defaultColumn??""},this.searchFormRef=V.createRef(),this.radioFormRef=V.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(t){var n,r,a,o,i;!((n=t.queryVisualizationContext)!=null&&n.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)!=null&&r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(i=(o=(a=this.searchFormRef)==null?void 0:a.current)==null?void 0:o.querySelector("input"))==null||i.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var d;const{searchable:t,lockedColumn:n,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:a,getColumnDisplayName:o}}=this.props,{searchText:i,show:s,columnName:l}=this.state;let u=[];t?u=t.map(p=>{var m;return(m=r==null?void 0:r.columnModels)==null?void 0:m.find(h=>h.name===p)}).filter(this.isSupportedColumnAndInProps).map(p=>p.name):r!=null&&r.columnModels&&(u=(d=r.columnModels)==null?void 0:d.filter(this.isSupportedColumn).map(p=>p.name)),u.length&&(n!=null&&n.columnName)&&(u=u.filter(p=>p!==(n==null?void 0:n.columnName)));const c=a==null?void 0:a.showFacetFilter;return O("div",{className:`QueryWrapperSearchInput ${c?An:qn}`,children:[f(bl,{in:a==null?void 0:a.showSearchBar,children:O("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[f("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:f(he,{icon:"search"})}),f("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:i,type:"text"}),this.state.searchText.length>0&&f("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:f(he,{icon:"close"})})]})}),f("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:f(wp,{in:s,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:O("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[f("p",{className:"deemphasized",children:f("i",{children:" Search In Field: "})}),u.map((p,m)=>{const h=o(p);return f("div",{className:"radio",children:f("label",{children:O("span",{children:[f("input",{id:p,type:"radio",value:p,checked:l===""&&m===0||l===p,onClick:()=>{var v,C,_;(_=(C=(v=this.searchFormRef)==null?void 0:v.current)==null?void 0:C.querySelector("input"))==null||_.focus(),this.setState({columnName:p})}}),f("span",{children:h})]})})},`search-field-${p}-${m}`)})]})})})]})}}try{wa.displayName="Search",wa.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}}}catch{}const hR="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",mR="https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries",Sa=({helpMessage:e=hR,helpUrl:t=mR})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=It(),{topLevelControlsState:{showSqlEditor:a,showFacetFilter:o}}=Et(),[i,s]=I.useState(""),l=I.useRef(null);I.useEffect(()=>{var d;if(a){const p=r().query.sql;s(p),(d=l.current)==null||d.focus()}},[a,r]);const u=d=>{d.preventDefault();const p=r();p.query.sql=i,p.query.offset=0,p.query.additionalFilters=[],p.query.selectedFacets=[],n(p)},c=d=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(d.currentTarget.value)};return f("div",{className:`QueryWrapperSqlEditorInput ${o?An:qn}`,children:f(bl,{in:a,timeout:{enter:300,exit:300},children:O("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[O("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:u,children:[f(Cv,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),f("input",{ref:l,onChange:c,placeholder:"Enter Query",value:i,type:"text"})]}),f("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:f(Jt,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{Sa.displayName="SqlEditor",Sa.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const Is=e=>O(se,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[f(se.Header,{closeButton:!0,children:f("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),O(Xy,{children:[f("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),O("p",{children:["To find out more see ",f("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),f("span",{children:" and "}),f("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),O(Qy,{children:[f(Ce,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),f(Ce,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{Is.displayName="DownloadLoginModal",Is.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const Ts=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:a,rNotes:o,rCode:i,cliNotes:s,cliCode:l,helpMarkdown:u,helpUrl:c})=>{let d;l?d="Command Line":a?d="Python":d="R";const[p,m]=I.useState(d),h=O("p",{children:["Installation instructions are available at our"," ",f("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return O(se,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[f(se.Header,{closeButton:!0,children:O(se.Title,{children:[t," ",u&&f(Jt,{markdownText:u,helpUrl:c})]})}),O(se.Body,{children:[O("div",{className:"Tabs",children:[l&&f("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("Command Line")},"aria-selected":p==="Command Line",children:"Command Line"}),i&&f("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("R")},"aria-selected":p==="R",children:"R"}),a&&f("div",{className:"Tab",role:"tab",onClick:g=>{g.stopPropagation(),m("Python")},"aria-selected":p==="Python",children:"Python"})]}),O("div",{className:"TabContent",children:[p==="Command Line"&&O(j,{children:[f("p",{children:s}),h,O("pre",{children:[" ",l," "]})]}),p==="R"&&O(j,{children:[f("p",{children:o}),h,f("pre",{children:i})]}),p==="Python"&&O(j,{children:[f("p",{children:r}),h,f("pre",{children:a})]})]})]}),f(se.Footer,{children:f(Ce,{variant:"primary",onClick:n,children:"OK"})})]})};try{Ts.displayName="ProgrammaticInstructionsModal",Ts.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}function ks({queryBundleRequest:e,onHide:t}){var d;const[n,r]=I.useState("..."),{data:a,isLoading:o,isPreviousData:i}=Yy({...e,partMask:Tv},{keepPreviousData:!0,useErrorBoundary:!0}),s=(d=a==null?void 0:a.responseBody)==null?void 0:d.combinedSql,l=o||i;I.useEffect(()=>{if(s&&!l){const p=s.toUpperCase().indexOf("FROM SYN"),m=`SELECT * ${s.substring(p)}`;r(m)}},[s,l]);const u=I.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),c=I.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return f(Ts,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:f(j,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${u}"`,rNotes:O(j,{children:["This R code will download file annotations only. Use"," ",O("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${c}")
read.table(query$filepath, sep = ",")`,pythonNotes:O(j,{children:["This Python code will download file annotations only. Use"," ",f("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${c}")
query.asDataFrame()`})}try{ks.displayName="ProgrammaticOptions",ks.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const gR="Add To Download Cart",Rs=e=>{const{accessToken:t}=ie(),{entity:n,data:r,getLastQueryRequest:a}=It(),o=a(),[i,s]=I.useState(!1),[l,u]=I.useState(!1),[c,d]=I.useState(!1),{onDownloadFiles:p,darkTheme:m=!0}=e,h=n&&(fn(n)&&ev(n)||Sn(n)),g=n&&Sn(n)&&n.isLatestVersion;return O(I.Fragment,{children:[O(Dt,{as:"span",children:[f(Ml,{tooltipText:"Download Options",size:"lg",darkTheme:m,icon:"download"}),O(Dt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[f(Dt.Item,{onClick:()=>{u(!0)},children:"Export Table"}),h&&f(Xe,{title:g?"A draft version of a dataset cannot be added to the Download Cart":null,placement:"left",enterNextDelay:300,describeChild:!0,children:f(Dt.Item,{role:"button",className:g?"ignoreLink":void 0,disabled:g,style:g?{pointerEvents:"auto"}:{},onClick:()=>t?p():s(!0),children:gR})}),f(Xe,{title:g?"A draft version of a dataset cannot be downloaded programmatically":null,placement:"left",enterNextDelay:300,describeChild:!0,children:f(Dt.Item,{className:g?"ignoreLink":void 0,disabled:g,style:g?{pointerEvents:"auto"}:{},onClick:()=>d(!0),children:"Programmatic Options"})})]})]}),i&&f(Is,{showModal:i,onHide:()=>s(!1)}),l&&f(In,{onClose:()=>u(!1),queryBundleRequest:o}),c&&r&&f(ks,{onHide:()=>d(!1),queryBundleRequest:o})]})};try{Rs.displayName="DownloadOptions",Rs.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const vR="addAndRemoveColumns",Os=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:a}=e,{getColumnDisplayName:o}=Et(),[i,s]=I.useState(!1),l=(u,c,d)=>{d.source==="rootClose"?s(!1):s(!0)};return O(Dt,{as:"span",onToggle:(u,c,d)=>l(u,c,d),show:i,drop:"down",children:[f(Ml,{tooltipText:"Show/Hide Columns",icon:a?"columnsdark":"columns",darkTheme:a}),f(Dt.Menu,{id:`${vR}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(u=>{const{name:c}=u,d=n.includes(c),p={width:"11px",marginRight:"10px",visibility:d?void 0:"hidden"},m=d?"SRC-primary-text-color":"";return O(Dt.Item,{onClick:()=>r(c),children:[f("span",{className:m,style:p,children:f(he,{icon:"check",sx:{width:"14px"}})}),o(c)]},c)})})]})};try{Os.displayName="ColumnSelection",Os.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const yR="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",bR="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",As=({entity:e})=>{var a;const t=e&&Sn(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:dr},{data:r}=xp(n,{enabled:t});if(t&&r&&e){const o=r.queryCount,i=((a=e.items)==null?void 0:a.length)??0;if(o===i)return f(j,{});const s=i-o;let l="";return e.isLatestVersion?l=yR:l=bR,O(Ct,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[f(ow,{className:"SRC-color-warning",style:{fontSize:"16px"}}),s.toLocaleString()+" Unavailable",f(Jt,{className:"SRC-margin-left-5",markdownText:l,placement:"right"})]})}else return f(j,{})};try{As.displayName="MissingQueryResultsWarning",As.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}const wR=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:kv,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],Ca=e=>{const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:a=!1,hideFacetFilterControl:o=!1,hideQueryCount:i=!1,hideSqlEditorControl:s=!0,customControls:l}=e,{data:u,entity:c,executeQueryRequest:d,getLastQueryRequest:p,getInitQueryRequest:m,lockedColumn:h}=It(),{topLevelControlsState:g,setTopLevelControlsState:v,columnsToShowInTable:C,selectedRowIndices:_,setColumnsToShowInTable:y}=Et(),S=x=>{const k={[x]:!g[x]};x==="showSearchBar"&&(k.showDownloadConfirmation=!1),x==="showDownloadConfirmation"&&(k.showSearchBar=!1),v(A=>({...A,...k}))},b=()=>{d(p())},w=I.useMemo(()=>{const x=m();return{sql:x.query.sql,selectedFacets:(x.query.selectedFacets??[]).filter(k=>k.columnName===(h==null?void 0:h.columnName)),additionalFilters:(x.query.additionalFilters??[]).filter(k=>"columnName"in k?k.columnName===(h==null?void 0:h.columnName):!0)}},[m,h==null?void 0:h.columnName]),E=x=>{let k=Fn(C);k.includes(x)?k=k.filter(A=>A!==x):k.push(x),y(k)},N=g==null?void 0:g.showFacetFilter;return f("div",{className:`TopLevelControls ${N?An:qn}`,"data-testid":"TopLevelControls",children:O("div",{children:[O("div",{className:"TopLevelControls__querycount",children:[t&&O(j,{children:[O(Ct,{variant:"sectionTitle",role:"heading",children:[t," ",!i&&f(ib,{query:w,parens:!0})]}),!i&&c&&f(As,{entity:c})]}),!o&&O("a",{onClick:()=>S("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[f(Da,{type:g.showFacetFilter?"close":"filter"}),O("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[g.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),O("div",{className:"TopLevelControls__actions",children:[l&&l.map(x=>O("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${x.classNames??""}`,style:{marginRight:"5px"},type:"button",onClick:()=>x.onClick({data:u,selectedRowIndices:_,refresh:b}),children:[x.icon," ",x.buttonText]},x.buttonText)),wR.map(x=>{const{key:k,icon:A,tooltipText:D}=x;return k==="showDownloadConfirmation"&&r||k==="showFacetVisualization"&&a||k==="showSqlEditor"&&s?f(V.Fragment,{},k):k==="showDownloadConfirmation"?f(Rs,{darkTheme:!0,onDownloadFiles:()=>S(k)},k):f(Ml,{tooltipText:D,callbackFn:()=>S(k),darkTheme:!0,icon:A},k)}),n&&f(Os,{headers:u==null?void 0:u.selectColumns,isColumnSelected:C,toggleColumnSelection:E,darkTheme:!0})]})]})})};try{Ca.displayName="TopLevelControls",Ca.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}}}catch{}const qs=({sortConfig:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:r}=e,a=It(),{getLastQueryRequest:o,executeQueryRequest:i}=a,{getColumnDisplayName:s}=Et(),[l,u]=I.useState(t),[c,d]=I.useState(n),p=r.map(h=>({value:h,label:s(h)})),m=h=>{const g=o();let v="ASC";h===l&&(v=c==="ASC"?"DESC":"ASC");const C=h?[{column:h,direction:v}]:void 0;g.query.sort=C,i(g),u(h),d(v)};return O("div",{className:"QuerySortSelector bootstrap-4-backport",children:[f(Ct,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),f(sb,{className:"react-select-container SRC-inlineBlock",value:yy(l,p),options:p,onChange:h=>m(h==null?void 0:h.value),components:{Control:by},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{qs.displayName="QuerySortSelector",qs.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}}}catch{}var wt=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(wt||{});const kf=e=>{const t=On(e.sql),n=Pl(e.searchParams,e.sqlOperator),{sortConfig:r,columnAliases:a}=e,o=r?[{column:r.defaultColumn,direction:r.defaultDirection}]:void 0,i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:e.sql,limit:e.limit,sort:o,additionalFilters:n},partMask:ur|dr|Sl|lp|Cl|El|wl|_l};return f(ba,{...e,initQueryRequest:i,children:O(Dl,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:a,noContentPlaceholderType:e.noContentPlaceholderType??Yr.STATIC,children:[r&&f(qs,{sortConfig:r}),f(Na,{...e}),f(Ll,{children:s=>f(Kf,{error:s==null?void 0:s.error})})]})})};try{kf.displayName="CardContainerLogic",kf.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}}}}}catch{}const Ps=({type:e,title:t,subTitle:n="",description:r,values:a,secondaryLabelLimit:o,isAlignToLeftNav:i,descriptionConfig:s,href:l,target:u,rgbIndex:c,icon:d})=>{const p=document.querySelector('meta[name="description"]'),[m]=I.useState(document.title),[h]=I.useState(p?p.getAttribute("content"):"");return I.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(p==null||p.setAttribute("content",r||n)),function(){document.title=m,p==null||p.setAttribute("content",h)})),f("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:f("div",{className:"container-fluid container-full-width",children:f("div",{className:"row",children:f("div",{className:"col-md-offset-1 col-md-10",children:O("div",{className:"SRC-portalCardMain",children:[d,O("div",{style:{width:"100%"},children:[O("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[f("div",{className:"SRC-type",children:e}),f("div",{children:f("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?f("a",{target:u,href:l,className:"highlight-link",children:t}):O("span",{children:[" ",t," "]})})}),n&&O("div",{className:"SRC-author",children:[" ",n," "]}),r&&f("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?f(Ue,{markdown:r}):r})]}),f("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),f("div",{className:"SRC-cardContent",children:a&&f(Vl,{isHeader:!0,secondaryLabelLimit:o,values:a})})]})]})})})})})};try{Ps.displayName="HeaderCard",Ps.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}}}catch{}const Ds=e=>{var u;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:a}=e,{accessToken:o}=ie(),[i,s]=I.useState();I.useEffect(()=>{a===void 0&&(async()=>s(await kn({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},o)))()},[o,a,t]);let l;return i&&(l=(u=i.requestedFiles[0].fileHandle)==null?void 0:u.fileName),O("button",{onClick:()=>{o&&t&&Jf(t.fileHandleId,o,t.associateObjectType,t.associateObjectId,r).then(c=>{window.open(c,"_blank")}).catch(c=>{console.error("Error on retrieving file handle url ",c)})},className:`SRC-primary-text-color ${Nl}`,type:"button",style:{padding:0},children:[a??l??t.fileHandleId,n&&f(he,{icon:"download"})]})};try{Ds.displayName="FileHandleLink",Ds.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}}}catch{}const Ls=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:a}=ie(),[o,i]=I.useState(),{ref:s,inView:l}=Rn({triggerOnce:!0,rootMargin:"500px 0px"});return I.useEffect(()=>{(()=>{t&&n&&r&&l&&Jf(t,a,r,n,!1).then(c=>{i(c)}).catch(c=>{console.error("Error on retrieving file handle url ",c)})})()},[l,t,n,a,r]),f("span",{ref:s,children:o&&f("img",{src:o,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{Ls.displayName="ImageFileHandle",Ls.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}}}catch{}const sc=400,SR="SRC-short-description",CR="SRC-long-description",Ms=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<sc&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},ER=(e,t,n)=>{let r;return e&&t&&(ep(e)?r={fileHandleId:t,associateObjectId:(e==null?void 0:e.id)??"",associateObjectType:Oe.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:Oe.FileEntity})),r},Gt=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const a=(n==null?void 0:n.find(i=>i.name===e))||(r==null?void 0:r.find(i=>i.name===e));if(a==null?void 0:a.columnType.endsWith("_LIST")){let i=t,s;try{return s=JSON.parse(i),i=s.join(", "),{strList:s,str:i,columnModelType:a==null?void 0:a.columnType}}catch(l){console.error("Could not parse multivalue string ",i," caught err ",l)}}return{str:t,columnModelType:a==null?void 0:a.columnType}},_R=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),Vs=e=>{const{synapseId:t,version:n}=e;return O("span",{children:[n,"  ",f("a",{target:wt.NEW_WINDOW,rel:"noopener noreferrer",href:`${Be.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},Ea=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:a,columnModels:o,isHeader:i,className:s,rowData:l,rowId:u}=e;if(!t)return f(j,{children:t});const{strList:c,str:d,columnModelType:p}=Gt({columnName:n,value:t,selectColumns:a,columnModels:o});if(!d)return f(j,{children:d});let m=s;const h={};if(i&&(m=s==null?void 0:s.concat(" ","SRC-lightLink")),p===re.USERID_LIST&&c)return f(j,{children:c.map((v,C)=>O("span",{children:[f(Cn,{ownerId:v,size:jr,className:m}),C<c.length-1&&",  "]},v))});if(p===re.USERID&&d)return f(Cn,{ownerId:d,size:jr,className:m});if(!r)return d.match(dp)?f("a",{target:wt.NEW_WINDOW,rel:"noopener noreferrer",href:`${Be.PORTAL}#!Synapse:${d}`,className:m,children:d}):f(j,{children:d});let g;if(r.isMarkdown)c?g=f(j,{children:c.map((v,C)=>O("span",{children:[f(Ue,{renderInline:!0,markdown:v},v),C<c.length-1&&",  "]},v))}):g=f(Ue,{renderInline:!0,markdown:t});else{const v=c||d.split(",");let C;if("target"in r&&(C=r.target),"linkColumnName"in r){const _=_R(r.linkColumnName,a,o);if(_==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),g=f(j,{children:t});else{const y=l[_];cb(y)?g=f(j,{children:t}):g=f(j,{children:v.map((S,b)=>O(V.Fragment,{children:[f("a",{href:y??void 0,target:C??wt.NEW_WINDOW,rel:"noopener noreferrer",className:m,style:h,children:S},S),b<v.length-1&&f("span",{style:{marginRight:4},children:", "})]},S))})}}else g=f(j,{children:v.map((_,y)=>{const{baseURL:S,URLColumnName:b,wrapValueWithParens:w}=r,E=r.overrideValueWithRowID?`syn${u}`:_,N=w?`(${E})`:E,x=`/${S}?${b}=${N}`;return O(V.Fragment,{children:[f("a",{href:x,className:m,style:h,target:C??wt.CURRENT_WINDOW,children:_},_),y<v.length-1&&f("span",{style:{marginRight:4},children:", "})]},_)})})}return r.tooltipText?f(Xe,{title:r.tooltipText,enterNextDelay:300,children:f("span",{children:g})}):g};function NR(e,t,n,r){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:a,URLColumnName:o,overrideLinkURLColumnName:i,overrideValueWithRowID:s}=e;if(i&&n[i]){const u=n[i],c=t[u];if(c)return c}const l=n[a];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${a}`);else{const u=s?`syn${r}`:t[l];if(u)return`/${e.baseURL}?${o}=${u}`}}}function Rf(e,t,n,r,a){e=e.trim();let o=e,i=wt.CURRENT_WINDOW;e.match(dp)?o=`${Be.PORTAL}#!Synapse:${e}`:e.match($v)?(i=wt.NEW_WINDOW,o=`https://dx.doi.org/${e}`):t?t&&(o=NR(t,n,r,a)??"",o.includes("/DetailsPage")&&(i=wt.NEW_WINDOW)):i=wt.NEW_WINDOW;const s=(t==null?void 0:t.target)??i;return{href:o,target:s}}function $s(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:a}=e;let o=t;a!=null&&a.isMarkdown&&(o=f(Ue,{markdown:o}));const i=n||(a==null?void 0:a.showFullDescriptionByDefault);return f("div",{className:i?"":"SRC-hidden",children:f("span",{"data-search-handle":r,className:`SRC-font-size-base ${CR}`,children:o})})}function Fs(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:a,toggleShowMore:o}=e;return a!=null&&a.showFullDescriptionByDefault?f(j,{}):O("div",{className:n?"SRC-hidden":"",children:[f("span",{"data-search-handle":r,className:`SRC-font-size-base ${SR} SRC-short-description`,children:Ms(t).previewText}),t.length>=sc&&f("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:o,children:"...Show More"})]})}class _a extends V.Component{constructor(t){super(t),this.getCutoff=n=>{let r="";const a=n.split(" ");let o=0;for(;r.length<sc&&o<a.length;)r+=`${a[o]} `,o+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:n,target:r,titleSearchHandle:a,title:o})=>n?f("a",{"data-search-handle":a,target:r,href:n,className:"highlight-link",children:o}):O("span",{"data-search-handle":a,children:[" ",o," "]}),this.state={hasClickedShowMore:!1}}render(){var ge;const{schema:t,data:n,rowId:r,genericCardSchema:a,secondaryLabelLimit:o,selectColumns:i,columnModels:s,iconOptions:l,useTypeColumnForIcon:u=!1,isHeader:c=!1,titleLinkConfig:d,ctaLinkConfig:p,labelLinkConfig:m,descriptionConfig:h,rgbIndex:g,columnIconOptions:v,queryContext:{entity:C},queryVisualizationContext:{getColumnDisplayName:_}}=this.props,y=a,{hasClickedShowMore:S}=this.state,{link:b="",type:w}=y,E=n[t[y.title]];let N=y.subTitle&&n[t[y.subTitle]];N=(y==null?void 0:y.subTitle)&&Gt({value:N,columnName:y==null?void 0:y.subTitle,selectColumns:i,columnModels:s}).str;const x=n[t[y.description||""]],k=n[t[y.icon||""]],A=n[t[y.dataTypeIconNames||""]],D=n[t[y.imageFileHandleColumnName||""]],M=s==null?void 0:s.find(ue=>y.link===ue.name),T=M==null?void 0:M.columnType,P=n[t[b]]||"",{href:R,target:L}=Rf(P,d,n,t,r),z=[],{secondaryLabels:B=[]}=y,F=C&&!ep(C);for(let ue=0;ue<B.length;ue+=1){const Ee=B[ue];let Se=n[t[Ee]],ke;if(Se){if(F&&Ee==="currentVersion"){const Me=n[t.id];Se=Vs({synapseId:Me,version:Se}),ke="Version"}else{const Me=m==null?void 0:m.find(We=>We.matchColumnName===Ee);Se=f(Ea,{value:Se,columnName:Ee,labelLink:Me,isHeader:c,selectColumns:i,columnModels:s,rowData:n}),ke=_(Ee)}const je=[ke,Se,Ee];z.push(je)}}const Q=ER(C,D||P,n[t.id]),q=z.length>0,$={marginTop:c?"0px":void 0,marginBottom:c?"0px":void 0,paddingBottom:q||D?void 0:"15px"},U=O(j,{children:[!u&&D&&f("div",{className:"SRC-imageThumbnail",style:{padding:y.thumbnailRequiresPadding?"21px":void 0},children:Q&&f(Ls,{fileHandleAssociation:Q})}),!u&&!D&&f("div",{className:"SRC-cardThumbnail",children:f(Da,{iconOptions:l,value:k,type:w})}),u&&f("div",{className:"SRC-cardThumbnail",children:f(he,{icon:Ev[n[t.type]]})})]});if(c)return f(Ps,{descriptionConfig:h,title:E,subTitle:N,description:x,type:w,icon:U,values:z,href:R,target:L,isAlignToLeftNav:!0,secondaryLabelLimit:o,rgbIndex:g});const G=_(y.title),H=_(y.subTitle),Z=_(y.description);let K,Y;if(p){const ue=n[t[p.link]]||"",{href:Ee,target:Se}=Rf(ue,void 0,n,t,r);K=Ee,Y=Se}return O("div",{style:$,className:"SRC-portalCard",children:[O("div",{className:"SRC-portalCardMain",children:[U,O("div",{className:"SRC-cardContent",children:[f("div",{className:"SRC-type",children:w}),((ge=v==null?void 0:v.columns)==null?void 0:ge.dataType)&&(A==null?void 0:A.length)&&f("div",{style:{marginTop:"20px"},children:f(lb,{iconConfigs:v.columns.dataType,iconNames:JSON.parse(A),useBackground:!0,useTheme:!0})}),f("div",{children:f("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!d&&T===re.FILEHANDLEID&&Q?f(Ds,{fileHandleAssociation:Q,showDownloadIcon:w!==Rv,displayValue:E}):this.renderTitle({href:R,target:L,titleSearchHandle:G,title:E})})}),N&&f("div",{"data-search-handle":H,className:"SRC-author",children:N}),x&&f(Fs,{description:x,hasClickedShowMore:S,descriptionSubTitle:Z,descriptionConfig:h,toggleShowMore:this.toggleShowMore}),x&&f($s,{description:x,hasClickedShowMore:S,descriptionSubTitle:Z,descriptionConfig:h}),p&&K&&Y&&f("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:f("a",{target:Y,rel:"noopener noreferrer",href:K,children:p.text})})]})]}),q&&f(Vl,{isHeader:!1,secondaryLabelLimit:o,values:z,columnIconOptions:v,className:`${D?"hasImage":"hasIcon"}`})]})}}_a.contextType=cr;try{$s.displayName="LongDescription",$s.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}}}catch{}try{Fs.displayName="ShortDescription",Fs.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}}}catch{}try{Ms.displayName="getCutoff",Ms.__docgenInfo={description:"",displayName:"getCutoff",props:{}}}catch{}try{Gt.displayName="getValueOrMultiValue",Gt.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{Vs.displayName="VersionLabel",Vs.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}}}catch{}try{Ea.displayName="SynapseCardLabel",Ea.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}}}catch{}try{_a.displayName="GenericCard",_a.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}}}catch{}class ir extends I.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(`${Be.PORTAL}#!Synapse:${n}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n,selectColumns:r,columnModels:a}=this.props,o=t[n.datasetName],i=t[n.summary],s=Gt({columnName:"tumorType",value:t[n.tumorType],selectColumns:r,columnModels:a}).str,l=Gt({columnName:"diseaseFocus",value:t[n.diseaseFocus],selectColumns:r,columnModels:a}).str,u=t[n.id],c=t[n.fundingAgency],d=t[n.fileCount],p=Zf(t[n.fileSize]),m=[["FUNDER",Gt({columnName:"fundingAgency",value:c,selectColumns:r,columnModels:a}).str],["SIZE",p],["FILES",d]];return O("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[O("div",{className:"SRC-cardThumbnail",children:[f(Da,{type:cp}),f("div",{children:p})]}),O("div",{className:"SRC-cardContent SRC-dataset",children:[f("div",{className:"SRC-type",children:"Dataset "}),f("div",{children:f("h3",{children:f("a",{target:"_self",href:`${Be.PORTAL}#!Synapse:${u}`,children:o})})}),O("div",{className:"SRC-description-dataset",children:[f("p",{className:"SRC-description-text",children:i}),f("div",{className:"SRC-cardAction bootstrap-4-backport",children:f(Ce,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(u),variant:"secondary",children:"Download Dataset"})})]}),f("div",{className:"SRC-cardAnnotations",children:f(ab,{chips:[s,l]})})]}),f(Vl,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:m})]})}}try{ir.displayName="Dataset",ir.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}class Bs extends I.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(n,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n}=this.props,r=t[n.organizationName],a=t[n.organizationPath],o=t[n.summary],i=t[n.website],s=t[n.logo];let l=i.replace("https://","");l=l.replace("http://",""),l.charAt(l.length-1)==="/"&&(l=l.substring(0,l.length-1));const u=window.location.hash.substring(1)===a,c={};let d;return u?c.paddingBottom="42px":d=f("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:f(Ce,{className:"pill-xl",href:a,variant:"secondary",children:"View Funded Research"})}),O("div",{className:"SRC-portalCard SRC-typeFunder ",style:c,children:[O("div",{className:"SRC-cardContent",children:[f("div",{className:"SRC-type",children:"Organization"}),s&&f("div",{className:"SRC-cardThumbnail",children:f("img",{alt:"funder logo",className:"SRC-logo",src:s})}),f("div",{children:O("h3",{children:[u&&r,!u&&f("a",{href:a,children:r})]})}),f("div",{className:"SRC-website",children:f("a",{rel:"noopener noreferrer",target:"_blank",href:i,children:l})}),f("div",{className:"SRC-description",children:o})]}),d]})}}try{Bs.displayName="Funder",Bs.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}try{ir.displayName="Dataset",ir.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}const zs=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],a=e[t.time],o=e[t.timeUnits],i=e[t.text],s=e[t.tag];return O("div",{className:"SRC-portalCard ObservationCard",children:[O("div",{className:"ObservationCard__submitter",children:[!r&&f("div",{children:n}),r&&f(Cn,{size:"SMALL USER CARD",ownerId:r})]}),a&&O("div",{className:"ObservationCard__time",children:[f(he,{icon:"time"}),O("span",{children:[`${a} ${o}`,Number(a)>1?"s":""]})]}),f("div",{className:"ObservationCard__text",children:f(ob,{summary:i})}),f("div",{className:"ObservationCard__tags",children:s&&f("span",{className:"SRC-tag",children:s})})]})},Hs=()=>O("div",{className:"SRC-portalCard ObservationCard",children:[f("div",{className:"ObservationCard__submitter",children:f("span",{children:f(qi,{width:"100px"})})}),f("div",{className:"ObservationCard__time",children:f(he,{icon:"time"})}),f("div",{className:"ObservationCard__text",children:f(Tl,{numCols:1,numRows:4})}),f("div",{className:"ObservationCard__tags",children:f(qi,{width:"80px"})})]});try{zs.displayName="ObservationCard",zs.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}}}catch{}try{Hs.displayName="LoadingObservationCard",Hs.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}}}catch{}function xR(e){const{propsToPass:t,type:n}=e;switch(n){case cp:return f(ir,{...t});case Av:return f(Bs,{...t});case Ov:return f(_a,{...t});case Ai:return f(zs,{...t});default:return f("div",{})}}const Na=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:a,secondaryLabelLimit:o=3,title:i,...s}=e,l=Ly(),{NoContentPlaceholder:u}=Et(),{data:c,appendNextPageToResults:d,hasNextPage:p}=l,m=Et(),h=c!=null&&c.queryResult.queryResults.tableId?[c==null?void 0:c.queryResult.queryResults.tableId]:[],g=ip({ids:h,type:"ENTITY_HEADER"});if(c){if(c&&c.queryResult.queryResults.rows.length===0)return f(u,{})}else return O("div",{children:[a&&r===Ai&&f(Hs,{}),a&&r!==Ai&&up]});const v={};c.queryResult.queryResults.headers.forEach((y,S)=>{v[y.name]=S});const C=p&&f("div",{className:"SRC-viewMore bootstrap-4-backport",children:f(Ce,{variant:"secondary",className:"pill-xl",onClick:()=>{d()},children:"View More"})});let _;if(r===xc){const y=c.queryResult.queryResults.headers.findIndex(b=>b.columnType===re.USERID);if(y===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const S=c.queryResult.queryResults.rows.map(b=>b.values[y]);_=f(ub,{data:c,list:S,size:xc})}else{const y=c.queryResult.queryResults.rows;_=y.length?y.map((S,b)=>{const E={key:JSON.stringify(S.values),type:r,schema:v,isHeader:t,secondaryLabelLimit:o,rowId:S.rowId,data:S.values,selectColumns:c.selectColumns,columnModels:c.columnModels,tableEntityConcreteType:g[0]&&g[0].type,tableId:c==null?void 0:c.queryResult.queryResults.tableId,queryContext:l,queryVisualizationContext:m,...s};return f(xR,{propsToPass:E,type:r},S.rowId??b)}):f(j,{})}return O("div",{role:"list",children:[i&&f("h2",{className:"SRC-card-overview-title",children:i}),!i&&n&&f(Ep,{frontText:"Displaying"}),_,C]})};try{Na.displayName="CardContainer",Na.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}}}catch{}var Us={},IR={get exports(){return Us},set exports(e){Us=e}};(function(e,t){(function(r,a){e.exports=a()})(Oa,()=>(()=>{var n={887:i=>{i.exports=function(l){for(var u=5381,c=l.length;c;)u=33*u^l.charCodeAt(--c);return u>>>0}}},r={};function a(i){var s=r[i];if(s!==void 0)return s.exports;var l=r[i]={exports:{}};return n[i](l,l.exports,a),l.exports}a.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return a.d(s,{a:s}),s},a.d=(i,s)=>{for(var l in s)a.o(s,l)&&!a.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:s[l]})},a.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var o={};return(()=>{a.r(o),a.d(o,{default:()=>v});var i=a(887),s=a.n(i);function l(C){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},l(C)}function u(C,_){for(var y=0;y<_.length;y++){var S=_[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(C,m(S.key),S)}}function c(C,_,y){return _&&u(C.prototype,_),y&&u(C,y),Object.defineProperty(C,"prototype",{writable:!1}),C}function d(C,_){if(!(C instanceof _))throw new TypeError("Cannot call a class as a function")}function p(C,_,y){return(_=m(_))in C?Object.defineProperty(C,_,{value:y,enumerable:!0,configurable:!0,writable:!0}):C[_]=y,C}function m(C){var _=function(S,b){if(l(S)!=="object"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var E=w.call(S,b||"default");if(l(E)!=="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(S)}(C,"string");return l(_)==="symbol"?_:String(_)}var h,g=(h=0,function(){return h++}),v=c(function C(_){var y=this,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d(this,C),p(this,"ID","id"),p(this,"PX","px"),p(this,"RESIZABLE","grip-resizable"),p(this,"FLEX","grip-flex"),p(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),p(this,"reset",function(b){return y.init(b)}),p(this,"onResize",function(){var b=y.tb;if(b.classList.remove(y.RESIZABLE),b.opt.fixed){b.tableWidth=Number(window.getComputedStyle(b).width.replace(/px/,"")).valueOf();for(var w=0,E=0;E<b.columnCnt;E++)w+=b.columns[E].w;for(var N=0;N<b.columnCnt;N++)b.columns[N].style.width=Math.round(1e3*b.columns[N].w/w)/10+"%",b.columns[N].locked=!0,b.opt.currentWidths[N]=Number(window.getComputedStyle(b.columns[N]).width.replace(/px/,"")).valueOf()}else y.applyBounds(),b.opt.resizeMode==="flex"&&b.opt.serialize&&y.serializeStore();b.classList.add(y.RESIZABLE),y.syncGrips()}),p(this,"onGripMouseDown",function(b){var w=b.target.parentNode.data,E=y.tb,N=E.grips[w.i],x=b.touches;if(N.ox=x?x[0].pageX:b.pageX,N.l=N.offsetLeft,N.x=N.l,y.createStyle(document.querySelector("head"),"*{cursor:"+E.opt.dragCursor+"!important}"),document.addEventListener("touchmove",y.onGripDrag),document.addEventListener("mousemove",y.onGripDrag),document.addEventListener("touchend",y.onGripDragOver),document.addEventListener("mouseup",y.onGripDragOver),N.classList.add(E.opt.draggingClass),y.grip=N,E.columns[w.i].locked)for(var k,A=0;A<E.columnCnt;A++)(k=E.columns[A]).locked=!1,k.w=Number(window.getComputedStyle(k).width.replace(/px/,"")).valueOf();b.preventDefault()}),p(this,"onGripDrag",function(b){var w=y.grip;if(w){var E=w.t,N=b.touches,x=(N?N[0].pageX:b.pageX)-w.ox+w.l,k=E.opt.minWidth,A=w.i,D=1.5*E.cellSpace+k+E.borderSpace,M=A===E.columnCnt-1,T=A?E.grips[A-1].offsetLeft+E.cellSpace+k:D,P=E.opt.fixed?A===E.columnCnt-1?E.tableWidth-D:E.grips[A+1].offsetLeft-E.cellSpace-k:1/0;if(x=Math.max(T,Math.min(P,x)),w.x=x,w.style.left=x+y.PX,M&&(w.w=E.columns[A].w+x-w.l),E.opt.liveDrag){M?(E.columns[A].style.width=w.w+y.PX,!E.opt.fixed&&E.opt.overflow?E.style.minWidth=E.tableWidth+x-w.l+y.PX:E.tableWidth=Number(window.getComputedStyle(E).width.replace(/px/,"")).valueOf()):y.syncCols(E,A,!1,E.opt),y.syncGrips();var R=E.opt.onDrag;R&&R(b)}b.preventDefault()}}),p(this,"onGripDragOver",function(b){var w=y.grip;document.removeEventListener("touchend",y.onGripDragOver),document.removeEventListener("mouseup",y.onGripDragOver),document.removeEventListener("touchmove",y.onGripDrag),document.removeEventListener("mousemove",y.onGripDrag);var E=document.querySelector("head").lastChild;if(E.parentNode.removeChild(E),w){if(w.classList.remove(w.t.opt.draggingClass),w.x-w.l!=0){var N=w.t,x=N.opt.onResize,k=w.i;if(k===N.columnCnt-1){var A=N.columns[k];A.style.width=w.w+y.PX,A.w=w.w}else y.syncCols(N,k,!0,N.opt);N.opt.fixed||y.applyBounds(),y.syncGrips(),x&&x(b),N.opt.serialize&&y.serializeStore()}y.grip=null}}),p(this,"init",function(b){if(b.disable)return y.destroy();var w=y.tb,E=w.getAttribute(y.ID)||y.RESIZABLE+g();if(!w.matches("table")||w.extended&&!b.partialRefresh)return null;var N=document.querySelector("head");if(y.createStyle(N," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),b.hoverCursor&&b.hoverCursor!=="col-resize"){var x=".grip-handle .grip-resizable:hover{cursor:"+b.hoverCursor+"!important}";y.createStyle(N,x)}w.setAttribute(y.ID,E);var k=w.opt;w.opt=y.extendOptions(b);var A=y.getTableHeaders(w);if(y.extendTable(A),b.remoteTable&&b.remoteTable.matches("table")){var D=y.getTableHeaders(w.opt.remoteTable);A.length===D.length?y.extendRemoteTable(w.opt.remoteTable,D,w):console.warn("column count for remote table did not match")}return k}),p(this,"applyBounds",function(){var b=y.tb,w=b.columns.map(function(E){return window.getComputedStyle(E).width});b.style.width=window.getComputedStyle(b).width,b.tableWidth=Number(b.style.width.replace(/px/,"")).valueOf(),b.classList.remove(y.FLEX),b.columns.forEach(function(E,N){E.style.width=w[N];var x=Number(w[N].replace(/px/,"")).valueOf();E.w=x,b.opt.currentWidths[N]=x}),b.classList.add(y.FLEX)}),p(this,"serializeStore",function(){var b=y.store,w=y.tb;b[w.getAttribute(y.ID)]="";for(var E=0,N=0;N<w.columns.length;N++){var x=window.getComputedStyle(w.columns[N]).width.replace(/px/,"");b[w.getAttribute(y.ID)]+=x+";",E+=Number(x).valueOf()}b[w.getAttribute(y.ID)]+=E.toString(),w.opt.fixed||(b[w.getAttribute(y.ID)]+=";"+window.getComputedStyle(w).width.replace(/px/,""))}),p(this,"syncGrips",function(){var b=y.tb;b.gripContainer.style.width=b.tableWidth+y.PX;for(var w=0;w<b.columnCnt;w++){var E=b.columns[w],N=E.getBoundingClientRect(),x=b.getBoundingClientRect();b.grips[w].style.left=N.left-x.left+E.offsetWidth+b.cellSpace/2+y.PX,b.grips[w].style.height=(b.opt.headerOnly?b.columns[0].offsetHeight:b.offsetHeight)+y.PX}}),p(this,"destroy",function(){var b=y.tb,w=b.getAttribute(y.ID);return w?(y.store[w]="",b.classList.remove(y.RESIZABLE),b.classList.remove(y.FLEX),b.remote&&(b.remote.classList.remove(y.RESIZABLE),b.remote.classList.remove(y.FLEX)),b.gripContainer&&b.gripContainer.parentNode&&b.gripContainer.parentNode.removeChild(b.gripContainer),delete b.extended,b.opt):null}),p(this,"createStyle",function(b,w){var E=s()(w).toString(),N=b.querySelectorAll("style"),x=Array.from(N).filter(function(A){return A.gripid===E});if(!x.length){var k=document.createElement("style");k.type="text/css",k.gripid=E,k.styleSheet?k.styleSheet.cssText=w:k.appendChild(document.createTextNode(w)),b.appendChild(k)}}),p(this,"extendOptions",function(b){var w=Object.assign({},C.DEFAULTS,b);switch(w.fixed=!0,w.overflow=!1,w.resizeMode){case"flex":w.fixed=!1;break;case"overflow":w.fixed=!1,w.overflow=!0}return w}),p(this,"getTableHeaders",function(b){var w="#"+b.id,E=Array.from(b.querySelectorAll(w+">thead>tr:nth-of-type(1)>th"));return(E=E.concat(Array.from(b.querySelectorAll(w+">thead>tr:nth-of-type(1)>td")))).length||(E=(E=(E=(E=Array.from(b.querySelectorAll(w+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(b.querySelectorAll(w+">tr:nth-of-type(1)>th")))).concat(Array.from(b.querySelectorAll(w+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(b.querySelectorAll(w+">tr:nth-of-type(1)>td")))),y.filterInvisible(E,!1)}),p(this,"filterInvisible",function(b,w){return b.filter(function(E){var N=w?-1:E.offsetWidth,x=w?-1:E.offsetHeight;return!(N===0&&x===0||E.style&&E.style.display&&window.getComputedStyle(E).display==="none")})}),p(this,"extendTable",function(b){var w=y.tb;w.opt.removePadding&&w.classList.add("grip-padding"),w.classList.add(y.RESIZABLE),w.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),w.grips=[],w.columns=[],w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf(),w.gripContainer=w.previousElementSibling,w.opt.marginLeft&&(w.gripContainer.style.marginLeft=w.opt.marginLeft),w.opt.marginRight&&(w.gripContainer.style.marginRight=w.opt.marginRight),w.cellSpace=parseInt(y.legacyIE?w.cellSpacing||w.currentStyle.borderSpacing:window.getComputedStyle(w).borderSpacing.split(" ")[0].replace(/px/,""))||2,w.borderSpace=parseInt(y.legacyIE?w.border||w.currentStyle.borderLeftWidth:window.getComputedStyle(w).borderLeftWidth.replace(/px/,""))||1,w.extended=!0,y.createGrips(b)}),p(this,"extendRemoteTable",function(b,w,E){E.opt.removePadding&&b.classList.add("grip-padding"),b.classList.add(y.RESIZABLE),b.getAttribute(y.ID)||b.setAttribute(y.ID,E.getAttribute(y.ID)+"remote"),b.columns=[],w.forEach(function(x,k){var A=w[k];A.w=E.columns[k].w,A.style.width=A.w+y.PX,A.removeAttribute("width"),b.columns.push(A)}),b.tableWidth=E.tableWidth,b.cellSpace=E.cellSpace,b.borderSpace=E.borderSpace;var N=Array.from(b.querySelectorAll("col"));b.columnGrp=y.filterInvisible(N,!0),b.columnGrp.forEach(function(x,k){x.removeAttribute("width"),x.style.width=E.columnGrp[k].style.width}),E.remote=b}),p(this,"createGrips",function(b){var w=y.tb;w.columnGrp=y.filterInvisible(Array.from(w.querySelectorAll("col")),!0),w.columnGrp.forEach(function(x){x.removeAttribute("width")}),w.columnCnt=b.length;var E=!1;y.store[w.getAttribute(y.ID)]&&(y.deserializeStore(b),E=!0),b.forEach(function(x,k){var A=b[k],D=w.opt.disabledColumns.indexOf(k)!==-1;y.createDiv(w.gripContainer,"grip-handle");var M=w.gripContainer.lastChild;!D&&w.opt.gripInnerHtml&&(M.innerHTML=w.opt.gripInnerHtml),y.createDiv(M,y.RESIZABLE),k===w.columnCnt-1&&(M.classList.add("grip-lastgrip"),w.opt.fixed&&(M.innerHTML="")),M.addEventListener("touchstart",y.onGripMouseDown,{capture:!0,passive:!0}),M.addEventListener("mousedown",y.onGripMouseDown,!0),D?M.classList.add("grip-disabledgrip"):(M.classList.remove("grip-disabledgrip"),M.addEventListener("touchstart",y.onGripMouseDown,{capture:!0,passive:!0}),M.addEventListener("mousedown",y.onGripMouseDown,!0)),M.t=w,M.i=k,w.opt.widths[k]?A.w=w.opt.widths[k]:A.w=E?Number(A.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(A).width.replace(/px/,"")).valueOf(),w.opt.currentWidths[k]=A.w,A.style.width=A.w+y.PX,A.removeAttribute("width"),M.data={i:k,t:w.getAttribute(y.ID),last:k===w.columnCnt-1},w.grips.push(M),w.columns.push(A)});var N=Array.from(w.querySelectorAll("td"));N.concat(Array.from(w.querySelectorAll("th"))),(N=(N=N.filter(function(x){for(var k=0;k<b.length;k++)if(b[k]===x)return!1;return!0})).filter(function(x){return!(x.querySelectorAll("table th").length||x.querySelectorAll("table td").length)})).forEach(function(x){x.removeAttribute("width")}),w.opt.fixed||(w.removeAttribute("width"),w.classList.add(y.FLEX)),y.syncGrips()}),p(this,"deserializeStore",function(b){var w=y.tb;if(w.columnGrp.forEach(function(k){k.removeAttribute("width")}),w.opt.flush)y.store[w.getAttribute(y.ID)]="";else{var E=y.store[w.getAttribute(y.ID)].split(";"),N=E[w.columnCnt+1];!w.opt.fixed&&N&&(w.style.width=N+y.PX,w.opt.overflow&&(w.style.minWidth=N+y.PX,w.tableWidth=Number(N).valueOf()));for(var x=0;x<w.columnCnt;x++)b[x].style.width=E[x]+y.PX,w.columnGrp[x]&&(w.columnGrp[x].style.width=100*Number(E[x]).valueOf()/Number(E[w.columnCnt]).valueOf()+"%")}}),p(this,"createDiv",function(b,w,E){var N=document.createElement("div");N.classList.add(w),E&&(N.innerHTML=E),b.appendChild(N)}),p(this,"syncCols",function(b,w,E,N){var x=b.remote,k=y.grip.x-y.grip.l,A=b.columns[w],D=b.columns[w+1];if(A&&D){var M=A.w+k,T=D.w-k,P=M+y.PX;if(A.style.width=P,b.columnGrp[w]&&b.columnGrp[w].style.width&&(b.columnGrp[w].style.width=P),x&&(x.columns[w].style.width=P,x.columnGrp[w]&&x.columnGrp[w].style.width&&(x.columnGrp[w].style.width=P)),N.fixed){var R=T+y.PX;D.style.width=R,b.columnGrp[w+1]&&b.columnGrp[w+1].style.width&&(b.columnGrp[w+1].style.width=R),x&&(x.columns[w+1].style.width=R,x.columnGrp[w+1]&&x.columnGrp[w+1].style.width&&(x.columnGrp[w+1].style.width=R))}else N.overflow&&(b.style.minWidth=b.tableWidth+k+y.PX);E&&(A.w=M,D.w=N.fixed?T:D.w,x&&(x.columns[w].w=M,x.columns[w+1].w=N.fixed?T:D.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=_,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(S)});v.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],currentWidths:[],serialize:!0,onDrag:null,onResize:null}})(),o})())})(IR);const TR=Fv(Us),js=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=ie(),a=!!r,{data:o}=Pa(t,n),{mutate:i}=Wy({onSuccess:()=>{Qt(`${(o==null?void 0:o.name)??t} was successfully added to your Download Cart.`,"success")},onError:s=>{Qt(`Unable to add the file to your Download Cart. ${s.reason}`,"danger")}});return a?f(j,{children:f(Xe,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:f("a",{"data-testid":"AddToDownloadListV2",onClick:()=>{i({entityId:t,entityVersionNumber:n})},className:"ignoreLink",children:f(he,{icon:"addToCart"})})})}):f(j,{})};try{js.displayName="AddToDownloadListV2",js.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var xa={},kR={get exports(){return xa},set exports(e){xa=e}};(function(e,t){(function(n,r){var a="1.0.33",o="",i="?",s="function",l="undefined",u="object",c="string",d="major",p="model",m="name",h="type",g="vendor",v="version",C="architecture",_="console",y="mobile",S="tablet",b="smarttv",w="wearable",E="embedded",N=350,x="Amazon",k="Apple",A="ASUS",D="BlackBerry",M="Browser",T="Chrome",P="Edge",R="Firefox",L="Google",z="Huawei",B="LG",F="Microsoft",W="Motorola",Q="Opera",q="Samsung",$="Sharp",U="Sony",G="Xiaomi",H="Zebra",Z="Facebook",K=function(ne,ce){var te={};for(var ve in ne)ce[ve]&&ce[ve].length%2===0?te[ve]=ce[ve].concat(ne[ve]):te[ve]=ne[ve];return te},Y=function(ne){for(var ce={},te=0;te<ne.length;te++)ce[ne[te].toUpperCase()]=ne[te];return ce},ge=function(ne,ce){return typeof ne===c?ue(ce).indexOf(ue(ne))!==-1:!1},ue=function(ne){return ne.toLowerCase()},Ee=function(ne){return typeof ne===c?ne.replace(/[^\d\.]/g,o).split(".")[0]:r},Se=function(ne,ce){if(typeof ne===c)return ne=ne.replace(/^\s\s*/,o),typeof ce===l?ne:ne.substring(0,N)},ke=function(ne,ce){for(var te=0,ve,ee,Re,oe,Ge,Ie;te<ce.length&&!Ge;){var Ke=ce[te],ft=ce[te+1];for(ve=ee=0;ve<Ke.length&&!Ge;)if(Ge=Ke[ve++].exec(ne),Ge)for(Re=0;Re<ft.length;Re++)Ie=Ge[++ee],oe=ft[Re],typeof oe===u&&oe.length>0?oe.length===2?typeof oe[1]==s?this[oe[0]]=oe[1].call(this,Ie):this[oe[0]]=oe[1]:oe.length===3?typeof oe[1]===s&&!(oe[1].exec&&oe[1].test)?this[oe[0]]=Ie?oe[1].call(this,Ie,oe[2]):r:this[oe[0]]=Ie?Ie.replace(oe[1],oe[2]):r:oe.length===4&&(this[oe[0]]=Ie?oe[3].call(this,Ie.replace(oe[1],oe[2])):r):this[oe]=Ie||r;te+=2}},je=function(ne,ce){for(var te in ce)if(typeof ce[te]===u&&ce[te].length>0){for(var ve=0;ve<ce[te].length;ve++)if(ge(ce[te][ve],ne))return te===i?r:te}else if(ge(ce[te],ne))return te===i?r:te;return ne},Me={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},We={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},at={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,v],[/opios[\/ ]+([\w\.]+)/i],[v,[m,Q+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[m,Q]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[m,"UC"+M]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[v,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+M],v],[/\bfocus\/([\w\.]+)/i],[v,[m,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[m,Q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[m,Q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[m,"MIUI "+M]],[/fxios\/([-\w\.]+)/i],[v,[m,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+M]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+M],v],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,Z],v],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[m,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,T+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[m,"Android "+M]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[v,je,Me]],[/(webkit|khtml)\/([\w\.]+)/i],[m,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[m,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,v],[/(cobalt)\/([\w\.]+)/i],[m,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[C,"amd64"]],[/(ia32(?=;))/i],[[C,ue]],[/((?:i[346]|x)86)[;\)]/i],[[C,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[C,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[C,"armhf"]],[/windows (ce|mobile); ppc;/i],[[C,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[C,/ower/,o,ue]],[/(sun4\w)[;\)]/i],[[C,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[C,ue]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[g,q],[h,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[g,q],[h,y]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[g,k],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[g,k],[h,S]],[/(macintosh);/i],[p,[g,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[g,z],[h,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[g,z],[h,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[g,G],[h,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[g,G],[h,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[g,"OPPO"],[h,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[g,"Vivo"],[h,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[g,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[g,W],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[g,W],[h,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[g,B],[h,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[g,B],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[g,"Lenovo"],[h,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[g,"Nokia"],[h,y]],[/(pixel c)\b/i],[p,[g,L],[h,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[g,L],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[g,U],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[g,U],[h,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[g,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[g,x],[h,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[g,x],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[p,g,[h,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[g,D],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[g,A],[h,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[g,A],[h,y]],[/(nexus 9)/i],[p,[g,"HTC"],[h,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[p,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[g,"Acer"],[h,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[g,"Meizu"],[h,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[g,$],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,p,[h,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,p,[h,S]],[/(surface duo)/i],[p,[g,F],[h,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[g,"Fairphone"],[h,y]],[/(u304aa)/i],[p,[g,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[p,[g,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[p,[g,"RCA"],[h,S]],[/\b(venue[\d ]{2,7}) b/i],[p,[g,"Dell"],[h,S]],[/\b(q(?:mv|ta)\w+) b/i],[p,[g,"Verizon"],[h,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[g,"Barnes & Noble"],[h,S]],[/\b(tm\d{3}\w+) b/i],[p,[g,"NuVision"],[h,S]],[/\b(k88) b/i],[p,[g,"ZTE"],[h,S]],[/\b(nx\d{3}j) b/i],[p,[g,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[p,[g,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[p,[g,"Swiss"],[h,S]],[/\b((zeki)?tb.*\b) b/i],[p,[g,"Zeki"],[h,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],p,[h,S]],[/\b(ns-?\w{0,9}) b/i],[p,[g,"Insignia"],[h,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[g,"NextBook"],[h,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],p,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],p,[h,y]],[/\b(ph-1) /i],[p,[g,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[g,"Envizen"],[h,S]],[/\b(trio[-\w\. ]+) b/i],[p,[g,"MachSpeed"],[h,S]],[/\btu_(1491) b/i],[p,[g,"Rotor"],[h,S]],[/(shield[\w ]+) b/i],[p,[g,"Nvidia"],[h,S]],[/(sprint) (\w+)/i],[g,p,[h,y]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[g,F],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[g,H],[h,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[g,H],[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,p,[h,_]],[/droid.+; (shield) bui/i],[p,[g,"Nvidia"],[h,_]],[/(playstation [345portablevi]+)/i],[p,[g,U],[h,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[g,F],[h,_]],[/smart-tv.+(samsung)/i],[g,[h,b]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[g,q],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,B],[h,b]],[/(apple) ?tv/i],[g,[p,k+" TV"],[h,b]],[/crkey/i],[[p,T+"cast"],[g,L],[h,b]],[/droid.+aft(\w)( bui|\))/i],[p,[g,x],[h,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[g,$],[h,b]],[/(bravia[\w ]+)( bui|\))/i],[p,[g,U],[h,b]],[/(mitv-\w{5}) bui/i],[p,[g,G],[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[g,Se],[p,Se],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/((pebble))app/i],[g,p,[h,w]],[/droid.+; (glass) \d/i],[p,[g,L],[h,w]],[/droid.+; (wt63?0{2,3})\)/i],[p,[g,H],[h,w]],[/(quest( 2)?)/i],[p,[g,Z],[h,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[h,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[h,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[m,P+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[v,je,We]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[v,je,We]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,v],[/\(bb(10);/i],[v,[m,D]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[m,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[m,T+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],v],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,v],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,v]]},_e=function(ne,ce){if(typeof ne===u&&(ce=ne,ne=r),!(this instanceof _e))return new _e(ne,ce).getResult();var te=ne||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:o),ve=ce?K(at,ce):at;return this.getBrowser=function(){var ee={};return ee[m]=r,ee[v]=r,ke.call(ee,te,ve.browser),ee.major=Ee(ee.version),ee},this.getCPU=function(){var ee={};return ee[C]=r,ke.call(ee,te,ve.cpu),ee},this.getDevice=function(){var ee={};return ee[g]=r,ee[p]=r,ee[h]=r,ke.call(ee,te,ve.device),ee},this.getEngine=function(){var ee={};return ee[m]=r,ee[v]=r,ke.call(ee,te,ve.engine),ee},this.getOS=function(){var ee={};return ee[m]=r,ee[v]=r,ke.call(ee,te,ve.os),ee},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return te},this.setUA=function(ee){return te=typeof ee===c&&ee.length>N?Se(ee,N):ee,this},this.setUA(te),this};_e.VERSION=a,_e.BROWSER=Y([m,v,d]),_e.CPU=Y([C]),_e.DEVICE=Y([p,g,h,_,y,b,S,w,E]),_e.ENGINE=_e.OS=Y([m,v]),e.exports&&(t=e.exports=_e),t.UAParser=_e;var Ve=typeof n!==l&&(n.jQuery||n.Zepto);if(Ve&&!Ve.ua){var dt=new _e;Ve.ua=dt.getResult(),Ve.ua.get=function(){return dt.getUA()},Ve.ua.set=function(ne){dt.setUA(ne);var ce=dt.getResult();for(var te in ce)Ve.ua[te]=ce[te]}}})(typeof window=="object"?window:Oa)})(kR,xa);const Ia=e=>{const{accessToken:t}=ie(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:a,fileHandleId:o,displayFileName:i,onClickCallback:s}=e,{ref:l,inView:u}=Rn(),[c,d]=I.useState(!1),[p,m]=I.useState(!1),[h,g]=I.useState(),[v,C]=I.useState(),[_,y]=I.useState("");let S=!0;I.useEffect(()=>(S&&u&&N(),()=>{S=!1}),[t,u]);const b=async()=>{let k;const D=new xa.UAParser().getBrowser().name=="Safari";let M=null;D&&(M=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),M.document.body.innerHTML="Downloading file on Safari...");try{a===Oe.TableEntity?k=(await E(!0)).requestedFiles[0].preSignedURL:k=(await Nc(h,t,!1,!0)).preSignedURL}catch(T){console.log("Fail to get file download link: ",T)}k?(D&&M?(M.location=k,setTimeout(()=>{M&&M.close()},1e4)):window.open(k),s&&s(c)):(M==null||M.close(),console.log("Fail to get file download link"))},w=k=>k&&!k.isPreview?(m(!0),!0):(m(!1),!1),E=(k=!1)=>kn({includeFileHandles:!0,includePreSignedURLs:k,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:a,fileHandleId:o}]},t),N=()=>Qn(t,n,r).then(async k=>{if(Object.hasOwn(k,"dataFileHandleId"))return g(k),Nc(k,t,!0).then(A=>{const D=A.fileHandle;D&&w(D)&&Nb(D)&&(d(!0),C(D.externalURL))}).catch(A=>{console.log("Error on getFileEntityFileHandle = ",A)});if(a===Oe.TableEntity){const D=(await E()).requestedFiles[0].fileHandle;i&&D&&w(D)&&y(D.fileName)}return Promise.resolve()}).catch(k=>{console.log("Error on getEntity = ",k)});return f(Xe,{title:c?"Navigate to external link":"Download this file individually",enterNextDelay:Gr,placement:"left",children:f("span",{ref:l,children:(()=>c?f("button",{className:"btn-download-icon",onClick:()=>{s&&s(c)},children:f("a",{className:"ignoreLink",rel:"noreferrer",href:v,target:"_blank",children:f(he,{icon:"openInNewWindow"})})}):p?O("button",{className:"btn-download-icon",onClick:()=>{b()},children:[f(he,{icon:"download"}),i&&_?_:""]}):f(j,{}))()})})};try{Ia.displayName="DirectDownload",Ia.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}}}catch{}const RR={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""}};function Of(e){const{downloadType:t}=e,n=Tp();if(t){const r=RR[t];return f(he,{icon:r.icon,label:r.tooltipText,sx:{color:r.color(n)}})}return f(j,{})}function Ws(e,t){const[n,r]=V.useState(),{accessToken:a}=ie(),o=parseInt(t??""),{data:i,error:s}=Rp(e,Number.isNaN(o)?void 0:o,{includeEntity:!0,includePermissions:!0}),l=V.useMemo(()=>({restrictableObjectType:$l.ENTITY,objectId:e}),[e]),{data:u}=Ip(l),c=i==null?void 0:i.entity,d=i==null?void 0:i.permissions;return V.useEffect(()=>{u&&u.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):c&&(d!=null&&d.canDownload)?yl(c)&&c.dataFileHandleId?r("Accessible"):r("NoFileHandle"):d&&!d.canDownload&&r(a?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[a,c,s,d,u]),n}function Gs(e){const[t,n]=V.useState(!1),[r,a]=V.useState([]),{entityId:o,entityVersionNumber:i}=e,s=Ws(o,i),{accessToken:l}=ie(),u=V.useMemo(()=>({restrictableObjectType:$l.ENTITY,objectId:o}),[o]),{data:c}=Ip(u),d=()=>{tp(l,o).then(h=>{ml(h)?window.open(`${bv(wv.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${o}&TYPE=ENTITY`,"_blank"):(a(h),n(!0))})},p=I.useMemo(()=>{if(!c)return f(j,{});const h=c==null?void 0:c.hasUnmetAccessRequirement,g=c==null?void 0:c.restrictionLevel;let v="";if(h)v="Request Access";else{if(db.OPEN===g)return f(j,{});v="View Terms"}return O(j,{children:[f("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:e.className,onClick:d,children:v}),t&&f(gl,{entityId:o,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[o,c,r,t]);return s===void 0?f(j,{}):O("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?f("button",{type:"button",className:Nl,onClick:h=>{if(h.isTrusted){const g=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(g)}},children:f(Of,{downloadType:s})}):f(Of,{downloadType:s}),p]})}try{Ws.displayName="useGetFileHandleDownloadType",Ws.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}}}catch{}try{Gs.displayName="HasAccessV2",Gs.__docgenInfo={description:`HasAccess shows if the user has access to the file or not. If the user doesn't have access due to a restriction,
then a link will be shown that opens a modal with steps to request access.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Ys=e=>{const{accessToken:t}=ie(),{entityIdList:n}=e,[r,a]=I.useState([f(j,{})]),{ref:o,inView:i}=Rn();let s=!0;I.useEffect(()=>(i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n.length&&tv(n,t).then(u=>{if(s){const c=u.results.map(d=>f("p",{children:f(Pi,{entity:d,displayTextField:"name"})},d.id));a(c)}}).catch(u=>{console.log("EntityIdList: Error getting entity headers",u)})};return f("span",{ref:o,children:r})};try{Ys.displayName="EntityIdList",Ys.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}}}catch{}const Xs=e=>{const{accessToken:t}=ie(),{evaluationId:n}=e,[r,a]=I.useState(),{ref:o,inView:i}=Rn();let s=!0;I.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n&&nv(n,t).then(u=>{a(u.name)}).catch(u=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",u)})};return f("span",{ref:o,children:r})};try{Xs.displayName="EvaluationIdRenderer",Xs.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}const Qs=e=>{const{accessToken:t}=ie(),{userIds:n}=e,[r,a]=I.useState(),{ref:o,inView:i}=Rn();let s=!0;I.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{n.length&&rv(n,t).then(u=>{const c=u.list.map(d=>f(Il,{userProfile:d,className:"SRC-marginFifteen"},d.ownerId));a(c)}).catch(u=>{console.log("UserIdList: Error getting user profiles",u)})};return f("span",{ref:o,children:r})};try{Qs.displayName="UserIdList",Qs.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}}}catch{}const Zs=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:a,columnLinkConfig:o,columnName:i,selectColumns:s,columnModels:l,rowData:u,rowId:c,rowVersionNumber:d})=>{const{entity:p}=It();if(!t)return O("p",{className:"SRC-center-text SRC-inactive",children:[" ",qy]});if(o)return f(Ea,{value:t,columnName:i,selectColumns:s,columnModels:l,isHeader:!1,labelLink:o,rowData:u,rowId:c});if(p&&(fn(p)||Sn(p)||np(p))&&(i==="id"||i==="name")&&c&&d){const m=`syn${c.toString()}`,h=r[m]??m;return f("p",{children:f(Pi,{entity:h,versionNumber:d,className:`${n}`,showIcon:!1,displayTextField:i})})}switch(e){case re.ENTITYID:return f("p",{children:f(Pi,{entity:r[t]??t,className:`${n}`,displayTextField:"name"})});case re.DATE_LIST:{const m=JSON.parse(t);return O("p",{children:[m.map((h,g)=>O("span",{className:n,children:[Zn(Vt(Number(h))),g!==m.length-1?", ":""]},g))," "]})}case re.BOOLEAN_LIST:{const m=JSON.parse(t);return f("p",{children:m.map((h,g)=>O("span",{className:n,children:[h?"true":"false",g!==m.length-1?", ":""]},g))})}case re.FILEHANDLEID:return f(j,{children:p&&f(Ia,{associatedObjectId:p.id,associatedObjectType:Oe.TableEntity,fileHandleId:t,displayFileName:!0})});case re.ENTITYID_LIST:{const m=JSON.parse(t);return f(Ys,{entityIdList:m})}case re.USERID_LIST:{const m=JSON.parse(t);return f(Qs,{userIds:m})}case re.STRING_LIST:case re.INTEGER_LIST:{const m=JSON.parse(t);return f("p",{children:m.map((h,g)=>O("span",{className:n,children:[h,g!==m.length-1?", ":""]},h))})}case re.EVALUATIONID:return f(Xs,{evaluationId:t});case re.DATE:return f("p",{className:n,children:Zn(Vt(Number(t)))});case re.USERID:if(Object.prototype.hasOwnProperty.call(a,t)){const{ownerId:m,userName:h}=a[t];if(a[t].isIndividual===!1){const g=h===Ic?"public":"people";return h===Ic?O("span",{children:[f(he,{icon:g})," All registered Synapse users"]}):O("a",{target:"_blank",rel:"noopener noreferrer",href:`${Be.PORTAL}#!Team:${m}`,children:[f(he,{icon:g})," ",h]})}else return f(Cn,{userProfile:a[t],preSignedURL:a[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case re.LINK:return f("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case re.STRING:case re.DOUBLE:case re.INTEGER:case re.BOOLEAN:case re.MEDIUMTEXT:case re.LARGETEXT:return f("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),f("p",{className:n,children:t})}return f("p",{className:n,children:t})};try{Zs.displayName="SynapseTableCell",Zs.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string | null"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}}}catch{}const Af=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((a,o)=>{t.includes(a.columnType)&&n.push(o)}),n},qf=(e,t,n)=>{var a;const r=new Set;return(a=e.queryResult)==null||a.queryResults.rows.forEach(o=>{o.values.forEach((i,s)=>{i!=null&&n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,i)&&i&&r.add(i)})}),r},OR=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:a}=My(),o=e==null?void 0:e.queryCount,i=(l,u)=>{t(u)},s=l=>{const u=l.target.value;r(u)};return a==1&&o&&o<10?f(j,{}):O("div",{children:[f(nw,{page:a,count:Math.ceil(o/n),color:"secondary",onChange:i,style:{display:"inline-block",float:"left"}}),f(Ct,{variant:"body1",style:{display:"inline-block"},children:`${o==null?void 0:o.toLocaleString()} total rows /`}),O("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[f("option",{value:10,children:"10 per page"}),f("option",{value:25,children:"25 per page"}),f("option",{value:100,children:"100 per page"}),f("option",{value:500,children:"500 per page"})]})]})},Ks=e=>{const{onCopy:t}=e;return f(Xe,{title:"Copy IDs to the clipboard",enterNextDelay:Gr,placement:"right",children:f("span",{children:f("button",{"data-testid":"copySynIdsButton",onClick:t,children:f("span",{style:{height:15,marginTop:-1},children:f(he,{icon:"contentCopy"})})})})})};try{Ks.displayName="InteractiveCopyIdsIcon",Ks.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}}}catch{}const AR=()=>{const e=ie(),t=It(),[n,r]=I.useState(!1),[a,o]=I.useState(),[i,s]=I.useState();I.useEffect(()=>(i||s(new AbortController),()=>{i&&i.abort()}),[i]);const l=()=>{r(!0);const{getLastQueryRequest:u}=t,c=u(),{sql:d}=c.query,{entityId:p,versionNumber:m}=Ay(d),h=m?`.${m}`:"";c.partMask=ur;const g=`${p}${h}`,v=d.indexOf(g);c.query.sql=`select id from ${g}${d.substring(v+g.length)}`,Qf(c,e.accessToken,i==null?void 0:i.signal).then(C=>{o(C)}).catch(C=>{console.error(C),Qt("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return I.useEffect(()=>{if(a){const{rows:u}=a.queryResult.queryResults,c=u.map(d=>`${d.values[0]}`).join(`
`);navigator.clipboard.writeText(c).then(()=>{Qt("Successfully copied to clipboard"),o(void 0)})}},[a]),n?f(Ra,{size:25}):f(Ks,{onCopy:()=>{l()}})};var Yt=[],qR=function(){return Yt.some(function(e){return e.activeTargets.length>0})},PR=function(){return Yt.some(function(e){return e.skippedTargets.length>0})},Pf="ResizeObserver loop completed with undelivered notifications.",DR=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Pf}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Pf),window.dispatchEvent(e)},sr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(sr||(sr={}));var Xt=function(e){return Object.freeze(e)},LR=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Xt(this)}return e}(),Qm=function(){function e(t,n,r,a){return this.x=t,this.y=n,this.width=r,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Xt(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,a=t.top,o=t.right,i=t.bottom,s=t.left,l=t.width,u=t.height;return{x:n,y:r,top:a,right:o,bottom:i,left:s,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),lc=function(e){return e instanceof SVGElement&&"getBBox"in e},Zm=function(e){if(lc(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var a=e,o=a.offsetWidth,i=a.offsetHeight;return!(o||i||e.getClientRects().length)},Df=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},MR=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Xn=typeof window<"u"?window:{},Dr=new WeakMap,Lf=/auto|scroll/,VR=/^tb|vertical/,$R=/msie|trident/i.test(Xn.navigator&&Xn.navigator.userAgent),it=function(e){return parseFloat(e||"0")},wn=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new LR((n?t:e)||0,(n?e:t)||0)},Mf=Xt({devicePixelContentBoxSize:wn(),borderBoxSize:wn(),contentBoxSize:wn(),contentRect:new Qm(0,0,0,0)}),Km=function(e,t){if(t===void 0&&(t=!1),Dr.has(e)&&!t)return Dr.get(e);if(Zm(e))return Dr.set(e,Mf),Mf;var n=getComputedStyle(e),r=lc(e)&&e.ownerSVGElement&&e.getBBox(),a=!$R&&n.boxSizing==="border-box",o=VR.test(n.writingMode||""),i=!r&&Lf.test(n.overflowY||""),s=!r&&Lf.test(n.overflowX||""),l=r?0:it(n.paddingTop),u=r?0:it(n.paddingRight),c=r?0:it(n.paddingBottom),d=r?0:it(n.paddingLeft),p=r?0:it(n.borderTopWidth),m=r?0:it(n.borderRightWidth),h=r?0:it(n.borderBottomWidth),g=r?0:it(n.borderLeftWidth),v=d+u,C=l+c,_=g+m,y=p+h,S=s?e.offsetHeight-y-e.clientHeight:0,b=i?e.offsetWidth-_-e.clientWidth:0,w=a?v+_:0,E=a?C+y:0,N=r?r.width:it(n.width)-w-b,x=r?r.height:it(n.height)-E-S,k=N+v+b+_,A=x+C+S+y,D=Xt({devicePixelContentBoxSize:wn(Math.round(N*devicePixelRatio),Math.round(x*devicePixelRatio),o),borderBoxSize:wn(k,A,o),contentBoxSize:wn(N,x,o),contentRect:new Qm(d,l,N,x)});return Dr.set(e,D),D},Jm=function(e,t,n){var r=Km(e,n),a=r.borderBoxSize,o=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(t){case sr.DEVICE_PIXEL_CONTENT_BOX:return i;case sr.BORDER_BOX:return a;default:return o}},FR=function(){function e(t){var n=Km(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Xt([n.borderBoxSize]),this.contentBoxSize=Xt([n.contentBoxSize]),this.devicePixelContentBoxSize=Xt([n.devicePixelContentBoxSize])}return e}(),eg=function(e){if(Zm(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},BR=function(){var e=1/0,t=[];Yt.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(u){var c=new FR(u.target),d=eg(u.target);s.push(c),u.lastReportedSize=Jm(u.target,u.observedBox),d<e&&(e=d)}),t.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var a=r[n];a()}return e},Vf=function(e){Yt.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(a){a.isActive()&&(eg(a.target)>e?n.activeTargets.push(a):n.skippedTargets.push(a))})})},zR=function(){var e=0;for(Vf(e);qR();)e=BR(),Vf(e);return PR()&&DR(),e>0},Ii,tg=[],HR=function(){return tg.splice(0).forEach(function(e){return e()})},UR=function(e){if(!Ii){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return HR()}).observe(n,r),Ii=function(){n.textContent="".concat(t?t--:t++)}}tg.push(e),Ii()},jR=function(e){UR(function(){requestAnimationFrame(e)})},Ur=0,WR=function(){return!!Ur},GR=250,YR={attributes:!0,characterData:!0,childList:!0,subtree:!0},$f=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ff=function(e){return e===void 0&&(e=0),Date.now()+e},Ti=!1,XR=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=GR),!Ti){Ti=!0;var r=Ff(t);jR(function(){var a=!1;try{a=zR()}finally{if(Ti=!1,t=r-Ff(),!WR())return;a?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,YR)};document.body?n():Xn.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),$f.forEach(function(n){return Xn.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),$f.forEach(function(n){return Xn.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),Js=new XR,Bf=function(e){!Ur&&e>0&&Js.start(),Ur+=e,!Ur&&Js.stop()},QR=function(e){return!lc(e)&&!MR(e)&&getComputedStyle(e).display==="inline"},ZR=function(){function e(t,n){this.target=t,this.observedBox=n||sr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Jm(this.target,this.observedBox,!0);return QR(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),KR=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),Lr=new WeakMap,zf=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Mr=function(){function e(){}return e.connect=function(t,n){var r=new KR(t,n);Lr.set(t,r)},e.observe=function(t,n,r){var a=Lr.get(t),o=a.observationTargets.length===0;zf(a.observationTargets,n)<0&&(o&&Yt.push(a),a.observationTargets.push(new ZR(n,r&&r.box)),Bf(1),Js.schedule())},e.unobserve=function(t,n){var r=Lr.get(t),a=zf(r.observationTargets,n),o=r.observationTargets.length===1;a>=0&&(o&&Yt.splice(Yt.indexOf(r),1),r.observationTargets.splice(a,1),Bf(-1))},e.disconnect=function(t){var n=this,r=Lr.get(t);r.observationTargets.slice().forEach(function(a){return n.unobserve(t,a.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),JR=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Mr.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Mr.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Mr.unobserve(this,t)},e.prototype.disconnect=function(){Mr.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const e1=V[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],t1=e1,n1=e=>{const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),t},r1=n1,a1=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:JR;function o1(){}function i1(e,t){const n=l1(),r=r1(t);return t1(()=>{let a=!1;const o=e&&"current"in e?e.current:e;if(!o)return o1;function i(s,l){a||r.current(s,l)}return n.subscribe(o,i),()=>{a=!0,n.unsubscribe(o,i)}},[e,n,r]),n.observer}function s1(){let e=!1,t=[];const n=new Map,r=new a1((a,o)=>{t=t.concat(a);function i(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const u=n.get(t[l].target);u==null||u.forEach(c=>c(t[l],o))}t=[],e=!1}e||window.requestAnimationFrame(i),e=!0});return{observer:r,subscribe(a,o){var i;r.observe(a);const s=(i=n.get(a))!==null&&i!==void 0?i:[];s.push(o),n.set(a,s)},unsubscribe(a,o){var i;const s=(i=n.get(a))!==null&&i!==void 0?i:[];if(s.length===1){r.unobserve(a),n.delete(a);return}const l=s.indexOf(o);l!==-1&&s.splice(l,1),n.set(a,s)}}}let ki;const l1=()=>ki||(ki=s1());function el(e){const[t,n]=I.useState(!1),[r,a]=I.useState(!1),o=I.useRef(null);return i1(o,({target:i})=>{if(!t&&i){const s=i.getElementsByTagName("p")[0];s&&a(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),O("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:o,children:[r&&f("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:f(he,{icon:t?"minusBoxOutline":"addBoxOutline",sx:{color:"grey.600"}})}),e.children]})}try{el.displayName="ExpandableTableDataCell",el.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}}}catch{}const c1=["","DESC","ASC"],Hf={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class Ta extends I.Component{constructor(t){super(t),this.tableElement=void 0,this.renderTable=(n,r,a,o)=>{var C,_;const i=(_=(C=this.props.queryContext).getLastQueryRequest)==null?void 0:_.call(C),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:u,isRowSelectionVisible:c}=this.props,d=s&&(fn(s)&&av(s)||Sn(s)),p=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),m=!!this.props.synapseContext.accessToken,h=s&&d&&m&&this.allRowsHaveId(),g=!!(h&&!this.props.hideDownload),v=h&&u;return O("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[O("table",{ref:y=>this.tableElement=y,className:"table table-striped table-condensed",children:[f("thead",{className:"SRC_bordered",children:f("tr",{children:this.createTableHeader(n,r,a,p,v,g,c,i)})}),f("tbody",{children:this.createTableRows(o,n,p,v,g,c)})]}),f("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:f(OR,{})})]})},this.handleColumnSortPress=n=>r=>{let a=Fn(this.state.columnIconSortState);a.length===0&&(a=Array(this.getLengthOfPropsData()).fill(0));const o=Fn(this.state.sortedColumnSelection),i=this.findSelectionIndex(o,n.name);i!==-1&&o.splice(i,1),a[n.index]=(a[n.index]+1)%Rc.length,a[n.index]>0&&o.unshift({column:n.name,direction:c1[a[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=o,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:a,sortedColumnSelection:o})},this.applyChangesFromQueryFilter=n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(t,n){const{isFetchingEntityHeaders:r,...a}=this.state,{isFetchingEntityHeaders:o,...i}=n,s=!br(this.props,t),l=!br(a,i),u=s||l;return u&&this.disableResize(),u}componentDidUpdate(t,n){br(t.queryContext.data,this.props.queryContext.data)?t.queryContext.entity&&this.props.queryContext.entity&&!br(fn(t.queryContext.entity),fn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(Hf)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new TR(this.tableElement,Hf))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(t){var d,p;const{data:n,entity:r}=this.props.queryContext;if(!n||!r)return;if(this.state.isFetchingEntityHeaders&&!t)return;const a=Fn(this.state.mapEntityIdToHeader),o=Fn(this.state.mapUserIdToHeader),i=Af(n,re.ENTITYID),s=Af(n,re.USERID),l=qf(n,a,i);(this.isEntityViewOrDataset()||r&&np(r))&&this.allRowsHaveId()&&(((p=(d=n.queryResult)==null?void 0:d.queryResults)==null?void 0:p.rows)??[]).forEach(h=>{const g=`syn${h.rowId}`;l.add(g)});const u=qf(n,o,s);if(l.size===0&&u.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),l.size>0){const m=Array.from(l).map(h=>({targetId:h}));try{const h=await vl(m,this.props.synapseContext.accessToken),{results:g}=h;g.forEach(v=>{a[v.id]=v})}catch(h){console.error("Error on retrieving entity header list , ",h)}}const c=[];if(u.size>0){const m=Array.from(u);try{(await ov(m,this.props.synapseContext.accessToken)).children.forEach(g=>{g.isIndividual?c.push(g.ownerId):o[g.ownerId]=g})}catch(h){console.error("Error on getGroupHeaders batch: ",h)}}if(c.length>0)try{(await Mv(c)).list.forEach(h=>{o[h.ownerId]=h})}catch(m){console.error("Error on getUserProfile : ",m)}this.setState({mapEntityIdToHeader:a,mapUserIdToHeader:o,isFetchingEntityHeaders:!1})}render(){var g;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return up;if(!this.props.queryContext.data)return f(j,{});const{queryContext:{data:t},queryVisualizationContext:{NoContentPlaceholder:n}}=this.props,{queryResult:r,columnModels:a=[]}=t,{facets:o=[]}=t,{isExpanded:i,isExportTableDownloadOpen:s}=this.state,l=this.props.queryContext.getLastQueryRequest(),u="";if(!((((g=t.queryResult)==null?void 0:g.queryResults.rows.length)??0)>0)&&l.query.offset===0)return f(n,{});const{rows:d,headers:p}=r.queryResults,m=f("div",{children:this.renderTable(p,a,o,d)}),h=f(j,{children:O("div",{className:u,children:[s&&f(In,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:l}),f("div",{children:m})]})});return O(I.Fragment,{children:[i&&O(se,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[f(se.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),f(se.Body,{children:h})]}),!i&&h]})}allRowsHaveId(){var n;const{queryContext:{data:t}}=this.props;return((n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.rows.every(r=>!!r.rowId))??!1}isEntityViewOrDataset(){const{queryContext:{entity:t}}=this.props;return(t&&(fn(t)||Sn(t)))??!1}createTableRows(t,n,r,a,o,i){const s=[],{queryContext:{data:l},queryVisualizationContext:{columnsToShowInTable:u,selectedRowIndices:c,setSelectedRowIndices:d},columnLinks:p=[]}=this.props,{selectColumns:m=[],columnModels:h=[]}=l,{mapEntityIdToHeader:g,mapUserIdToHeader:v}=this.state;return t.forEach((C,_)=>{var N,x;const y=(N=C.versionNumber)==null?void 0:N.toString(),S=`syn${C.rowId}`,b=C.values.map((k,A)=>{const D=n[A].name,M=u.includes(D),T=p.find(L=>L.matchColumnName===D),R=this.findSelectionIndex(this.state.sortedColumnSelection,D)===-1?"":"SRC-boldText";return M?f(el,{className:"SRC_noBorderTop",children:f(Zs,{columnType:n[A].columnType,columnValue:k,isBold:R,mapEntityIdToHeader:g,mapUserIdToHeader:v,columnLinkConfig:T,columnName:D,rowData:C.values,selectColumns:m,columnModels:h,rowId:C.rowId,rowVersionNumber:C.versionNumber})},`(${_}${k}${A})`):f("td",{className:"SRC-hidden"},`(${_},${A})`)});r&&b.unshift(f("td",{className:"SRC_noBorderTop",children:f(Gs,{entityId:S,entityVersionNumber:y},S)},S));const w=((x=g[S])==null?void 0:x.type)=="org.sagebionetworks.repo.model.FileEntity";a&&b.unshift(f("td",{className:"SRC_noBorderTop direct-download",children:w&&f(Ia,{associatedObjectId:S,entityVersionNumber:y})},`direct-download-${S}`)),o&&b.unshift(f("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:w&&f(js,{entityId:S,entityVersionNumber:parseInt(y)})},`add-to-download-list-v2-${S}`)),i&&c&&b.unshift(f("td",{className:"SRC_noBorderTop",children:f(hb,{label:"",checked:c.includes(_),onChange:k=>{const A=[...c];if(k)A.push(_);else{const D=A.indexOf(_);D>-1&&A.splice(D,1)}d(A)}})},`(${_},rowSelectColumn)`));const E=f("tr",{children:b},C.rowId??_);s.push(E)}),s}isSortableColumn(t){switch(t){case re.USERID:case re.ENTITYID:case re.FILEHANDLEID:case re.STRING_LIST:case re.INTEGER_LIST:case re.BOOLEAN_LIST:case re.DATE_LIST:case re.USERID_LIST:case re.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(t,n,r,a,o,i,s,l){const{sortedColumnSelection:u,columnIconSortState:c}=this.state,{queryVisualizationContext:{getColumnDisplayName:d,columnsToShowInTable:p},queryContext:{lockedColumn:m}}=this.props,h=t.map((g,v)=>{var _;if(p.includes(g.name)){const y=this.findSelectionIndex(u,g.name)!==-1,S=c[v]===void 0?0:c[v],b=r.findIndex(P=>P.columnName===g.name),w=b!==-1&&r[b].facetType==="enumeration",E=r[b],N=y?"SRC-primary-background-color SRC-anchor-light":"",x=y?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",k=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${N}`,A=d(g.name),D=n.find(P=>P.name===g.name),M=g.name.toLowerCase()===((_=m==null?void 0:m.columnName)==null?void 0:_.toLowerCase()),T=D&&D.name=="id"&&D.columnType==re.ENTITYID;return f("th",{children:O("div",{className:"SRC-split",children:[f("span",{style:{whiteSpace:"nowrap"},children:A}),O("div",{className:"SRC-centerContent",children:[w&&!M&&this.configureFacetDropdown(E,D,l),this.isSortableColumn(g.columnType)&&f("span",{role:"button","aria-label":"sort",tabIndex:0,className:k,onKeyPress:this.handleColumnSortPress({index:v,name:g.name}),onClick:this.handleColumnSortPress({index:v,name:g.name}),children:f(Da,{type:Rc[S],cssClass:x})}),T&&f(AR,{})]})]})},g.name)}else return f("th",{className:"SRC-hidden"},g.name)});return a&&h.unshift(f("th",{children:f("div",{className:"SRC-centerContent",children:f("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),o&&h.unshift(f("th",{children:f("div",{className:"SRC-centerContent",children:" "})},"downloadColumn")),i&&h.unshift(f("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:f("div",{className:"SRC-centerContent",children:" "})},"addToV2DownloadListColumn")),s&&h.unshift(f("th",{children:f("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),h}findSelectionIndex(t,n){return t.length!==0?t.findIndex(r=>r.column===n):-1}advancedSearch(t){t&&t.preventDefault();const n=this.props.queryContext.getLastQueryRequest(),{query:r}=n,a=btoa(JSON.stringify(r)),o=n.entityId;window.open(`${Be.PORTAL}#!Synapse:${o}/tables/query/${a}`,"_blank")}getLengthOfPropsData(){var n;const{data:t}=this.props.queryContext;return((n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.headers.length)??0}configureFacetDropdown(t,n,r){return f(Vy,{containerAs:"Dropdown",facetValues:t.facetValues,columnModel:n,onChange:a=>{$y(r,t,this.applyChangesFromQueryFilter,a)},onClear:()=>{Fy(r,t,this.applyChangesFromQueryFilter)}})}}try{Ta.displayName="SynapseTable",Ta.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}}}}}catch{}function ng(){const{data:e}=It(),{showLastUpdatedOn:t}=Et();return t&&e&&e.lastUpdatedOn?f("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:O(Ct,{variant:"body1Italic",children:["Last updated on ",Zn(Vt(e.lastUpdatedOn))]})}):f(j,{})}const tl=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,a=ie(),o=It(),i=Et();return O("div",{className:`FilterAndView ${i.topLevelControlsState.showFacetFilter?An:qn}`,children:[t?f(Ta,{...t,synapseContext:a,queryContext:o,queryVisualizationContext:i,hideDownload:r}):f(j,{}),n?f(Na,{...n}):f(j,{}),f(ng,{})]})};try{tl.displayName="FilterAndView",tl.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}}}catch{}const u1="isShowingFacetFilters",d1="isHidingFacetFilters",nl=e=>{const[t,n]=I.useState(!1),{searchParams:r,sql:a,sqlOperator:o,tableConfiguration:i,name:s,cardConfiguration:l,facetsToPlot:u,availableFacets:c,hideDownload:d,hideQueryCount:p,hideSqlEditorControl:m,searchConfiguration:h,limit:g=qv,initQueryJson:v,showLastUpdatedOn:C}=e,_=Pl(r,o),y=v?JSON.parse(v):{sql:a,additionalFilters:_,limit:g,offset:0},S=On(y.sql),{data:b}=Pa(S),w=b&&rp(b)&&b.isSearchEnabled,E={entityId:S,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:ur|dr|Sl|lp|Cl|El|wl|_l,query:y};return f("div",{className:"QueryWrapperPlotNav",children:f(i?Np:ba,{...e,initQueryRequest:E,children:f(Dl,{unitDescription:"results",rgbIndex:e.rgbIndex,columnAliases:e.columnAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||w,showLastUpdatedOn:C,noContentPlaceholderType:Yr.INTERACTIVE,children:f(Ll,{children:x=>{if(x===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const k=x==null?void 0:x.isFacetsAvailable;return f(_p,{children:A=>{if(A===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const D=(A==null?void 0:A.topLevelControlsState.showFacetFilter)||(A==null?void 0:A.topLevelControlsState.showFacetFilter)===void 0;return O(j,{children:[f("div",{className:`ErrorBannerWrapper ${D?u1:d1}`,children:f(By,{})}),w?f(va,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):f(wa,{...h,queryContext:x,queryVisualizationContext:A}),f(Sa,{}),f(_s,{getLastQueryRequest:x.getLastQueryRequest,topLevelControlsState:A.topLevelControlsState,setTopLevelControlsState:A.setTopLevelControlsState}),f(Ca,{showColumnSelection:i!==void 0,name:s,hideDownload:d,hideQueryCount:p,hideFacetFilterControl:!k,hideVisualizationsControl:!k,hideSqlEditorControl:m}),k&&f(j,{children:f(zy,{availableFacets:c})}),f(Hy,{facetsToPlot:u}),f(tl,{tableConfiguration:i,hideDownload:d,cardConfiguration:l}),t&&f(In,{getLastQueryRequest:x.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})};try{nl.displayName="QueryWrapperPlotNav",nl.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},availableFacets:{defaultValue:null,description:"",name:"availableFacets",required:!1,type:{name:"string[]"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}}}catch{}const f1=e=>({partMask:El|dr|Sl|Cl|ur|_l,entityId:On(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:25,offset:0}}),rl=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:a,sql:o,hideDownload:i,hideQueryCount:s,name:l,showTopLevelControls:u=!1,searchConfiguration:c,unitDescription:d="Results",rgbIndex:p,showLastUpdatedOn:m,noContentPlaceholderType:h=u?Yr.INTERACTIVE:Yr.STATIC,...g}=e,v=f1(o);n&&(v.query.additionalFilters=Pl(n,r));const C=ie(),_=On(o),{data:y}=Pa(_);return f(Np,{...g,initQueryRequest:v,children:f(Dl,{rgbIndex:p,unitDescription:d,showLastUpdatedOn:m,noContentPlaceholderType:h,...g,children:f(Ll,{children:S=>{if(S===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return f(_p,{children:b=>{if(b===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return O(j,{children:[u&&f(Ca,{showColumnSelection:!0,name:l,hideDownload:i,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),y&&rp(y)&&y.isSearchEnabled?f(va,{helpUrl:c==null?void 0:c.fullTextSearchHelpURL}):f(wa,{...c,queryContext:S,queryVisualizationContext:b}),f(Sa,{}),u&&f(Ep,{frontText:""}),f(Ta,{synapseContext:C,queryContext:S,queryVisualizationContext:b,showAccessColumn:a,title:t,"data-testid":"SynapseTable",...g}),f(ng,{})]})}})}})})})};try{rl.displayName="StandaloneQueryWrapper",rl.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}}}}}catch{}function al(e){const{query:t,showquery:n,tableonly:r}=e,a=n==="true",o=r==="true",i="Items";return o?f(rl,{sql:t,name:i}):f(nl,{sql:t,hideSqlEditorControl:!a,name:i,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{al.displayName="MarkdownSynapseTable",al.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}}}catch{}const p1={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function ol(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let a="";return t.replace(r,(o,i,s,l)=>(a+=l,n.push(f("div",{children:f("a",{role:"link",className:`link ${p1[Number(i)]}`,"data-anchor":s,children:l})},l)),"")),f("div",{children:n},a)}try{ol.displayName="MarkdownTableOfContents",ol.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}function il(e){const{alias:t}=e,{data:n}=gb([t]);return n?f(vb,{principalId:n[0].ownerId}):f(j,{})}try{il.displayName="MarkdownUserOrTeamBadge",il.__docgenInfo={description:"",displayName:"MarkdownUserOrTeamBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}}}catch{}function sl(e){return f(yb,{params:e})}try{sl.displayName="MarkdownVideo",sl.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}}}catch{}function ll(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return f(Di,{...n});case"image":return f(ws,{...n});case"plot":return f(Ss,{...n});case"toc":return f(ol,{originalMarkup:r});case"badge":return f(il,{...n});case"iduReport":return f(zi,{...n});case"video":case"vimeo":case"youtube":return f(sl,{...n});case"synapsetable":return f(al,{...n});case"provenance":return f(ys,{...n});case"preview":return f($i,{...n});default:return console.warn(`Unsupported widget: ${t}.`),f(j,{})}}function Uf(e){return f(Xf,{children:f(ll,{...e})})}try{ll.displayName="MarkdownWidget",ll.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}class cl extends I.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const a=[];for(;r=n.exec(t);)a.push(r[1]);return a.map((o,i)=>{const s=i<a.length-1;return O(I.Fragment,{children:[O("button",{className:"SRC-markdown-bookmark",id:`bookmark${i}`,children:["[",i+1,"]"]}),f("span",{dangerouslySetInnerHTML:{__html:o}}),s&&f("br",{})]},i)})}render(){return O(I.Fragment,{children:[f("hr",{}),this.renderBookmarks()]})}}try{cl.displayName="Bookmarks",cl.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}}}catch{}const Ri=markdownit({html:!0});class Ue extends V.Component{constructor(t){super(t),markdownitSynapse.init_markdown_it(Ri,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const n="";Ri.use(markdownitSynapse,n,"https://synapse.org").use(markdownitMath,n);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:Ri,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=V.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(t){const n=t.target;if(n.tagName==="A"||n.tagName==="BUTTON"){const r=t.target;if(r.id.substring(0,3)==="ref"){t.preventDefault();const a=Number(t.currentTarget.id.substring(3)),o=this.markupRef.current.querySelector(`#bookmark${a}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}else if(t.currentTarget.id!==null&&r.getAttribute("data-anchor")){t.preventDefault();const a=r.getAttribute("data-anchor"),o=this.markupRef.current.querySelector(`#${a}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}}}createHTML(t){if(!t)return{__html:""};const n=this.props.renderInline?this.state.md.renderInline(t):this.state.md.render(t);return{__html:jp(n,Wp)}}processMath(){if(!this.markupRef.current)return;const t=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),n=new RegExp(/\\[()[\]]/,"g");t.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const a=r.textContent.replace(n,"");return katex.render(a,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const t=this.createHTML(markdownitSynapse.footnotes()).__html;if(t.length>0)return f(cl,{footnotes:t})}async getWikiPageMarkdown(){const{ownerId:t,wikiId:n,objectType:r}=this.props;if(!(!t&&!n))try{const a=await iv(this.context.accessToken,t,n,r);try{const o=await this.getWikiAttachments(n||a.id);this.setState({data:a,fileHandles:o,error:void 0})}catch(o){console.error("fileHandlesErr = ",o)}}catch(a){console.error(`Error on wiki markdown load
`,a),this.setState({error:a})}}async getWikiAttachments(t){const{ownerId:n,objectType:r}=this.props;if(!n){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await sv(this.context.accessToken,n,t,r).then(a=>a).catch(a=>{console.error("Error on wiki attachment load ",a)})}addIdsToReferenceWidgets(t){const n=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return t.replace(n,()=>{const a=r;return r+=1,`<a href="" id="ref${a}">[${a}]</a>`})}addIdsToTocWidgets(t){const n="SRC-header-";let r=1;const a=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return t.replace(a,o=>{const i=r;return r+=1,`${o.substring(0,3)} id="${n}${i}"${o.substring(3)}`})}renderMarkdown(){let t=this.createHTML(this.state.data.markdown).__html;if(t=this.addIdsToReferenceWidgets(t),t=this.addIdsToTocWidgets(t),t.length>0){const r=new DOMParser().parseFromString(t,"text/html");return f(j,{children:this.recursiveRender(r.body,t)})}}recursiveRender(t,n){if(t.nodeType===Node.TEXT_NODE)return O(j,{children:[" ",t.textContent," "]});if(t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement){const r=t.tagName.toLowerCase()==="body"?"span":t.tagName.toLowerCase(),a=t.getAttribute("data-widgetparams");if(a)return this.processHTMLWidgetMapping(a,n);const o=t.attributes,i={};for(let l=0;l<o.length;l++){let u="",c="";const d=o.item(l);d&&(u=d.name,c=d.value),u&&c&&(i[u]=c)}if(t.childNodes.length===0)return f(r,{...i});const s=Array.from(t.childNodes).map((l,u)=>f(V.Fragment,{children:this.recursiveRender(l,n)},u));return f(r,{...i,children:s})}}decodeXml(t){const n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,a)=>n[a])}processHTMLWidgetMapping(t,n){const r=this.decodeXml(t),a=r.indexOf("?");if(a===-1)return f(Uf,{widgetType:r,widgetParamsMapped:{},originalMarkup:n},JSON.stringify(r));const o=r.substring(0,a),i={};return r.substring(a+1).split("&").forEach(s=>{let[l,u]=s.split("=");u=decodeURIComponent(u),i[l]=u}),f(Uf,{widgetType:o,widgetParamsMapped:i,originalMarkup:n},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(t){let n=this.props.ownerId!==t.ownerId;n=n||this.props.wikiId!==t.wikiId,n&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:t,loadingSkeletonRowCount:n}=this.props,{isLoading:r,error:a}=this.state,o={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(a)return f(Kf,{error:a});const i=this.addBookmarks(),s=O(bs,{wikiContext:o,children:[r&&f(j,{children:n?f(Tl,{numCols:1,numRows:n}):f("span",{className:"spinner"})}),this.renderMarkdown(),i&&f("div",{children:this.addBookmarks()})]});return t?f("span",{className:"markdown markdown-inline",ref:this.markupRef,children:s}):f("div",{className:"markdown",ref:this.markupRef,children:s})}}Ue.contextType=cr;try{Ue.displayName="MarkdownSynapse",Ue.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}}}catch{}function lr({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:a=!0,entityId:o,onHide:i}){const{accessToken:s}=ie(),[l,u]=I.useState(!0),c=r==null?void 0:r.isApproved,[d,p]=I.useState(c);let m="";n.concreteType===Fe.ManagedACTAccessRequirement||n.concreteType===Fe.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?m="Request access":m="Request access via Synapse.org":m="I Accept Terms of Use",I.useEffect(()=>{p(c)},[c]);const h=()=>{window.open(`${Be.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${o}`)},g=()=>{if(n.concreteType===Fe.ManagedACTAccessRequirement||n.concreteType===Fe.ACTAccessRequirement)h(),i==null||i();else if(!d){const N={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:Fl.APPROVED};ap(s,N).then(x=>{p(!0)}).catch(x=>console.error("Error on post access approval: ",x))}},v=n.termsOfUse,C=n.actContactInfo,_=n.concreteType===Fe.TermsOfUseAccessRequirement,y=n.concreteType===Fe.ACTAccessRequirement,S=_&&v||y&&C;let b=f(j,{});t?b=f("div",{className:"AcceptRequirementsMarkdown",children:f(Ue,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):S&&(b=f(Ue,{markdown:_?v:C}));const w=n.concreteType===Fe.ManagedACTAccessRequirement;return f(j,{children:O("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[f(Zt,{isCompleted:d}),O("div",{className:"terms-of-use-content",children:[d?O("div",{children:[O("p",{children:[w?"Your data access request has been approved.":"You have accepted the terms of use.",w&&f("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),f("a",{className:"view-terms-button",onClick:()=>{u(!l)},children:"View Terms"})]}),f("div",{className:`view-terms ${l?"hidden":"show"}`,children:b})]}):b,s&&a&&O("div",{className:`button-container ${d?"hide":"default"}`,children:[f("div",{className:"accept-button-container",children:f("button",{className:"accept-button",onClick:g,children:m})}),f("div",{className:"not-accept-button-container",children:f("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})}try{lr.displayName="AcceptedRequirements",lr.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}function h1({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState();return I.useEffect(()=>{(async()=>{try{const u=await ka(o,e.id);s(u)}catch(u){console.error("Error on get ACTAccessRequirement",u)}})()},[o,e]),f(lr,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:i,onHide:n,entityId:a})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}const ul=e=>{const{accessToken:t}=ie(),{formSubmitRequestObject:n,onHide:r}=e,[a,o]=I.useState(),[i,s]=I.useState(!1),l=async()=>{if(n)try{await op(n,t)?r==null||r():(o({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),s(!0))}catch(u){console.log("CancelRequestDataAccess: Error updating form",u),o({key:"danger",message:`Sorry, there is an error in submitting your request. ${u.reason||""}. Please close this dialog and try again later`}),s(!0)}};return O(j,{children:[f(se.Header,{closeButton:!0,children:f(se.Title,{className:"AccessRequirementList__title",children:"Save Changes"})}),O(se.Body,{children:[f("p",{children:"Would you like to save your recent changes?"}),a&&f(tn,{variant:a.key,children:a.message})]}),O(se.Footer,{children:[!i&&O(j,{children:[f(Ce,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),f(Ce,{variant:"primary",onClick:()=>{l()},children:"Save changes"})]}),i&&f(Ce,{variant:"primary",onClick:()=>r==null?void 0:r(),children:"Close"})]})]})};try{ul.displayName="CancelRequestDataAccess",ul.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const dl=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:a,showButton:o=!0,onHide:i,requestDataStepCallback:s}=e,{accessToken:l}=ie(),[u,c]=I.useState(!0),d=r==null?void 0:r.isApproved,[p,m]=I.useState(d),[h,g]=I.useState(),[v,C]=I.useState(),[_,y]=I.useState(!1);I.useEffect(()=>{m(d),r!=null&&r.currentSubmissionStatus&&(g(r.currentSubmissionStatus.state),E(r.currentSubmissionStatus))},[d]);const S=R=>{s==null||s({managedACTAccessRequirement:R,step:1})},b=async()=>{if(a.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement")if(l)if(h===Pe.SUBMITTED&&!_){const R={key:"danger",message:O(j,{children:[f("strong",{children:"Error canceling your data access request."}),f("br",{}),"Please try again later."]})};try{(await lv(r==null?void 0:r.currentSubmissionStatus.submissionId,l)).state===Pe.CANCELLED?(C({key:"success",message:f("strong",{children:"Your data access request has been canceled."})}),y(!0)):C(R)}catch(L){console.log("RequestDataAccess: error canceling data access request:",L),C(R)}}else S(a);else s==null||s({managedACTAccessRequirement:a,step:4});else if(!p){const R={requirementId:a==null?void 0:a.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:Fl.APPROVED};ap(l,R).then(L=>{m(!0)}).catch(L=>console.error("Error on post access approval: ",L))}},w=()=>{if(a.concreteType===Fe.ManagedACTAccessRequirement||a.concreteType===Fe.ACTAccessRequirement)if(h){let R;switch(h){case Pe.SUBMITTED:R=_?"Update Request":"Cancel Request";break;case Pe.APPROVED:case Pe.REJECTED:case Pe.CANCELLED:R="Update Request"}return R}else return"Request access";else return"I Accept Terms of Use"},E=R=>{switch(R.state){case Pe.SUBMITTED:C({key:"primary",message:f("strong",{children:"You have submitted a data access request."})});break;case Pe.APPROVED:C({key:"success",message:f("strong",{children:"Your data access request has been approved."})});break;case Pe.REJECTED:C({key:"danger",message:O(j,{children:[f("strong",{children:"Your data access request has been rejected."}),f("br",{}),R.rejectedReason||""]})});break}return f(j,{})},N=a.termsOfUse,x=a.actContactInfo,k=a.concreteType===Fe.TermsOfUseAccessRequirement,A=a.concreteType===Fe.ACTAccessRequirement,D=k&&N||A&&x;let M=f(j,{});n?M=O("div",{className:"AcceptRequirementsMarkdown",children:[n&&f(Ue,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),v&&f(tn,{className:"access-requirement-list-alert",variant:v.key,children:v.message})]}):D&&(M=f(Ue,{markdown:k?N:x}));const T=a.concreteType===Fe.ManagedACTAccessRequirement;return f(j,{children:O("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[f(Zt,{isCompleted:p}),O("div",{className:"terms-of-use-content",children:[p?O("div",{children:[f("p",{children:T?"Your data access request has been approved.":"You have accepted the terms of use."}),O("p",{style:{marginBottom:"0"},children:[T&&f("button",{className:"update-request-button",onClick:()=>{S(a)},style:{paddingLeft:"0",marginRight:"2rem"},children:w()}),f("a",{onClick:()=>{c(!u)},children:"View Terms"})]}),f("div",{className:`view-terms ${u?"hidden":"show"}`,children:M})]}):M,o&&O("div",{className:`button-container ${p?"hide":"default"}`,children:[f("div",{className:"accept-button-container",children:f("button",{className:"accept-button",onClick:()=>{b()},children:w()})}),f("div",{className:"not-accept-button-container",children:f("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})};try{dl.displayName="RequestDataAccess",dl.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((args: RequestDataStepCallbackArgs) => void)"}}}}}catch{}const m1=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:a,onHide:o,requestDataStepCallback:i}=e,{accessToken:s}=ie(),[l,u]=I.useState();return I.useEffect(()=>{(async()=>{try{const d=await ka(s,r.id);u(d)}catch(d){console.error("Error on get ManagedACTAccessRequirement",d)}})()},[s,r]),f(dl,{accessRequirement:r,accessRequirementStatus:a,entityId:t,user:n,wikiPage:l,onHide:o,requestDataStepCallback:i})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: RequestDataStepCallbackArgs) => void)"}}}}}catch{}const fl=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:a}=ie(),[o,i]=I.useState(""),[s,l]=I.useState(""),[u,c]=I.useState(""),[d,p]=I.useState(),m=I.useRef({});let h=!0;I.useEffect(()=>(h&&(p(void 0),g()),()=>{h=!1}),[a]);const g=async()=>{try{const _=await cv(String(n.id),a);_.id&&(m.current=_,i(_.projectLead),l(_.institution),c(_.intendedDataUseStatement))}catch(_){console.log("RequestDataAccessStep1: Error getting research project data: ",_)}},v=(_="")=>O(j,{children:[f("strong",{children:"Unable to update research project data."}),f("br",{}),_]});return f(j,{children:O(pe,{className:"access-request-form1",onSubmit:_=>{_.preventDefault();const y=Object.assign({},m.current,{accessRequirementId:String(n.id),institution:s,projectLead:o,intendedDataUseStatement:u});try{uv(y,a).then(S=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:S.id})}).catch(S=>{console.log("RequestDataAccessStep1: Error updating research project data: ",S),p({key:"danger",message:v(S.reason)})})}catch(S){console.log("RequestDataAccessStep1: Error updating research project data: ",S),p({key:"danger",message:v(S.reason)})}},children:[f(se.Header,{closeButton:!0,children:f(se.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),O(se.Body,{children:[f("p",{children:"Please tell us about your project."}),O(pe.Group,{children:[f(pe.Label,{htmlFor:"project-lead",children:"Project Lead"}),f(pe.Control,{id:"project-lead",type:"text",value:o,required:!0,onChange:_=>i(_.target.value)})]}),O(pe.Group,{children:[f(pe.Label,{htmlFor:"institution",children:"Institution"}),f(pe.Control,{id:"institution",type:"text",value:s,required:!0,onChange:_=>l(_.target.value)})]}),n.isIDURequired&&O(pe.Group,{children:[O(pe.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&f("i",{id:"idu-visible",children:"this will be visible to the public"})]}),f(pe.Control,{id:"data-use",as:"textarea",value:u,rows:10,required:!0,onChange:_=>c(_.target.value)})]}),d&&f(tn,{variant:d.key,children:d.message})]}),O(se.Footer,{children:[f(Ce,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),f(Ce,{variant:"primary",type:"submit",children:"Save changes"})]})]})})};try{fl.displayName="RequestDataAccessStep1",fl.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: RequestDataStepCallbackArgs) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const mn=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:a,fileName:o}=e,{accessToken:i}=ie(),s=async()=>{if(!n.fileHandleId||!i)return;const l={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const c=(await kn(l,i)).requestedFiles[0].preSignedURL;c?window.open(c):console.log("Fail to get file download link")}catch(u){console.log("Fail to get file download link",u)}};return f(j,{children:f(Ce,{id:t,variant:a,className:r,onClick:()=>{s()},children:o})})};try{mn.displayName="DirectDownloadButton",mn.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}}}catch{}const pl=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:a,researchProjectId:o}=e,{accessToken:i}=ie(),[s,l]=I.useState(),[u,c]=I.useState(),[d,p]=I.useState(),[m,h]=I.useState([]),[g,v]=I.useState(),[C,_]=I.useState(),[y,S]=I.useState(!1),[b,w]=I.useState([]),E={},N={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let x=!0;I.useEffect(()=>(x&&(_(void 0),k()),()=>{x=!1}),[i,o]);const k=async()=>{const q=await dv(String(n.id),i);if(q.accessorChanges){const $=new Set;q.accessorChanges=q.accessorChanges.filter(U=>$.has(U.userId)?!1:$.add(U.userId))}q.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&S(!0),q.researchProjectId=o,v(q),A(q),D(q)},A=q=>{const $=q.accessorChanges,U=[];!$||!$.length?(U.push(a.ownerId),v(H=>Object.assign({},H,{accessorChanges:[{userId:a.ownerId,type:mt.GAIN_ACCESS}]}))):$.forEach(H=>{U.push(H.userId)});const G=U.map(H=>fv(i,H));Promise.all(G).then(H=>{const Z=H.map((K,Y)=>{var ue;const ge=$&&((ue=$[Y])!=null&&ue.type)?$[Y].type:mt.GAIN_ACCESS;return{profile:K,accessType:ge}});w(Z)})},D=q=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const $={associateObjectId:String(n.id),associateObjectType:Oe.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};N.requestedFiles.push($),E[n.ducTemplateFileHandleId]||(E[n.ducTemplateFileHandleId]=[]),E[n.ducTemplateFileHandleId].push("DUCTemplate"),l($)}if(n.isDUCRequired&&q.ducFileHandleId){const $={associateObjectId:q.id,associateObjectType:Oe.DataAccessRequestAttachment,fileHandleId:q.ducFileHandleId};N.requestedFiles.push($),E[q.ducFileHandleId]||(E[q.ducFileHandleId]=[]),E[q.ducFileHandleId].push("DUC"),c($)}if(n.isIRBApprovalRequired&&q.irbFileHandleId){const $={associateObjectId:q.id,associateObjectType:Oe.DataAccessRequestAttachment,fileHandleId:q.irbFileHandleId};N.requestedFiles.push($),E[q.irbFileHandleId]||(E[q.irbFileHandleId]=[]),E[q.irbFileHandleId].push("IRB"),p($)}q.attachments&&q.attachments.length&&q.attachments.forEach($=>{N.requestedFiles.push({associateObjectId:q.id,associateObjectType:Oe.DataAccessRequestAttachment,fileHandleId:$}),E[$]||(E[$]=[]),E[$].push("attachments")}),N.requestedFiles.length&&kn(N,i).then($=>{$.requestedFiles.forEach(U=>{const G=U.fileHandle.fileName,H=E[U.fileHandleId];H.forEach(Z=>{switch(Z){case"DUCTemplate":l(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("DUCTemplate"),1);break;case"DUC":c(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("DUC"),1);break;case"IRB":p(K=>Object.assign({},K,{fileName:G})),E[U.fileHandleId].splice(H.indexOf("IRB"),1);break;case"attachments":h(K=>[...K,{fileName:G,associateObjectId:q.id,associateObjectType:Oe.DataAccessRequestAttachment,fileHandleId:U.fileHandleId}]),E[U.fileHandleId].splice(H.indexOf("attachments"),1);break}})})})},M=async()=>{if(g)try{const q=await op(g,i);if(q&&q.etag){const $={requestId:q.id,requestEtag:q.etag,subjectId:r,subjectType:$l.ENTITY};v(H=>Object.assign({},H,{etag:q.etag}));const U=await hv($,i),G=P(U);U.state===Pe.REJECTED?_({key:"danger",message:G}):t==null||t({step:5})}else _({key:"danger",message:T()})}catch(q){console.log("RequestDataAccessStep2: Error updating form",q),_({key:"danger",message:T(q.reason)})}},T=(q="")=>O(j,{children:[f("strong",{children:"Sorry, there is an error in submitting your request."}),f("br",{}),q]}),P=q=>{const $="The information has been ";switch(q.state){case Pe.SUBMITTED:return O("strong",{children:[$," submitted."]});case Pe.APPROVED:return O("strong",{children:[$," approved."]});case Pe.CANCELLED:return O("strong",{children:[$," canceled."]});case Pe.REJECTED:return O(j,{children:[O("strong",{children:[$," rejected."]})," ",q.rejectedReason,". Please close this dialog and try again later."]});default:return f(j,{})}},R=q=>{const $=b.filter(G=>G.profile.ownerId!==q);w($);const U=$.map(G=>({userId:G.profile.ownerId,type:G.accessType}));v(G=>Object.assign({},G,{accessorChanges:U}))},L=q=>{const $=m.filter(G=>G.fileHandleId!==q);h($);const U=$.map(G=>G.fileHandleId);v(G=>Object.assign({},G,{attachments:U}))},z=q=>{if(q.resp&&q.success){const $=q.resp;if(q.context==="attachments"){const U=g!=null&&g.attachments?g==null?void 0:g.attachments:[];U==null||U.push($.fileHandleId),v(G=>Object.assign({},G,{attachments:U})),h(G=>[...G,{fileName:$.fileName,fileHandleId:$.fileHandleId}])}else v(U=>Object.assign({},U,{[q.context]:$.fileHandleId})),q.context==="ducFileHandleId"&&c(U=>Object.assign({},U,{fileName:$.fileName,fileHandleId:$.fileHandleId})),q.context==="irbFileHandleId"&&p(U=>Object.assign({},U,{fileName:$.fileName,fileHandleId:$.fileHandleId}))}else!q.success&&q.error&&(console.log("RequestDataAccessStep2: Error uploading the file",q.error),_({key:"danger",message:T(q.error.reason)}))},B=q=>{if(!b.map(U=>U.profile.ownerId).includes(q.ownerId)){w(H=>[...H,{profile:{ownerId:q.ownerId,firstName:q.firstName??"",lastName:q.lastName??"",userName:q.userName},accessType:mt.GAIN_ACCESS}]);const U={userId:q.ownerId,type:mt.GAIN_ACCESS},G=(g==null?void 0:g.accessorChanges)||[];G.push(U),v(H=>Object.assign({},H,{accessorChanges:G}))}},F=(q,$)=>{const U=q.target.value;switch($){case"publications":v(G=>Object.assign({},G,{publication:U}));break;case"summaryOfUse":v(G=>Object.assign({},G,{summaryOfUse:U}));break}},W=(q,$)=>{const U=[...b],G=U.findIndex(K=>K.profile.ownerId===$);U[G].accessType=q,w(U);const H=(g==null?void 0:g.accessorChanges)||[],Z=H.findIndex(K=>K.userId===$);H[Z].type=q,v(K=>Object.assign({},K,{accessorChanges:H}))},Q=()=>{let q="",$="";return n.isCertifiedUserRequired&&(q="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",$="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(q="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",$="All data requesters must have a validated user profile."),q&&$?O(j,{children:[$,f("a",{href:q,target:"_blank",rel:"noreferrer",children:f(he,{icon:"info"})})]}):f(j,{})};return f(j,{children:O(pe,{className:"access-request-form2",onSubmit:q=>q.preventDefault(),children:[f(se.Header,{closeButton:!0,children:f(se.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),O(se.Body,{children:[f("p",{children:"Please provide the information below to submit the request for access."}),O(pe.Group,{children:[f(pe.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),f("br",{}),O("span",{className:"requester-label",children:[n.isDUCRequired&&O(j,{children:["This list should match those listed on your DUC.",f("br",{})]}),Q()]}),f(fb,{id:"requesters",typeFilter:pv.USERS_ONLY,onSelectCallback:B,filterUserIds:b.map(q=>q.profile.ownerId)})]}),f(pe.Group,{style:{marginBottom:"4rem"},children:b.map((q,$)=>O("div",{className:"list-items",children:[f(Il,{userProfile:q.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),a.ownerId!==q.profile.ownerId&&q.accessType===mt.GAIN_ACCESS&&f(Ce,{className:"clear-x",variant:"link",onClick:()=>R(q.profile.ownerId),children:f(he,{icon:"clear"})}),y&&q.accessType!==mt.GAIN_ACCESS&&f(j,{children:f(pb,{id:`accessor-renewal-${q.profile.ownerId}`,value:q.accessType,options:[{label:"Renew",value:mt.RENEW_ACCESS},{label:"Revoke",value:mt.REVOKE_ACCESS}],onChange:U=>W(U,q.profile.ownerId)})})]},`accessor-${$}`))}),(n==null?void 0:n.isDUCRequired)&&O(j,{children:[O(pe.Group,{children:[f(pe.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),f("br",{}),s&&f("div",{children:f(mn,{fileHandleAssociation:{associateObjectId:s==null?void 0:s.associateObjectId,associateObjectType:s.associateObjectType,fileHandleId:s.fileHandleId},fileName:s.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),O(pe.Group,{children:[f(pe.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),f("br",{}),u&&f("div",{children:f(mn,{fileHandleAssociation:{associateObjectId:u.associateObjectId,associateObjectType:u.associateObjectType,fileHandleId:u.fileHandleId},fileName:u==null?void 0:u.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),f(Xa,{id:"duc-browse",variant:"light-primary-base",uploadCallback:z,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&O(pe.Group,{children:[f(pe.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),f("br",{}),d&&f("div",{children:f(mn,{fileHandleAssociation:{associateObjectId:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d==null?void 0:d.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),f(Xa,{id:"irb-browse",variant:"light-primary-base",uploadCallback:z,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&O(pe.Group,{children:[f(pe.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),f("br",{}),m.map((q,$)=>O("div",{className:"list-items",children:[f(mn,{fileHandleAssociation:{associateObjectId:q.associateObjectId,associateObjectType:q.associateObjectType,fileHandleId:q.fileHandleId},fileName:q==null?void 0:q.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),f(Ce,{className:"clear-x",variant:"link",onClick:()=>L(q.fileHandleId),children:f(he,{icon:"clear"})})]},`file-attachment-${$}`)),f(Xa,{id:"attachment-browse",variant:"light-primary-base",uploadCallback:z,context:"attachments"})]}),y&&O(j,{children:[O(pe.Group,{children:[f(pe.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),f(pe.Control,{id:"publications",as:"textarea",rows:3,onChange:q=>F(q,"publications")})]}),O(pe.Group,{children:[f(pe.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),f(pe.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:q=>F(q,"summaryOfUse")})]})]}),C&&f(tn,{variant:C.key,children:C.message})]}),f(se.Footer,{children:O(j,{children:[f(Ce,{variant:"link",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:g}),children:"Cancel"}),f(Ce,{variant:"primary",onClick:()=>{M()},children:"Submit"})]})})]})})};try{pl.displayName="RequestDataAccessStep2",pl.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: RequestDataStepCallbackArgs) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const hl=e=>{const{onHide:t}=e;return O(j,{children:[f(se.Header,{closeButton:!0,children:f(se.Title,{className:"AccessRequirementList__title",children:"Your Data Access Request Has Been Submitted!"})}),f(se.Body,{children:f("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),f(se.Footer,{children:f(Ce,{variant:"primary",onClick:()=>t==null?void 0:t(),children:"Finish"})})]})};try{hl.displayName="RequestDataAccessSuccess",hl.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function g1({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(void 0),[c,d]=I.useState(!1);return I.useEffect(()=>{(async()=>{try{d(!0);const m=await ka(o,e.id);s(m);const h=Pv|Dv;if(t!=null&&t.ownerId){const g=await mv(t.ownerId,h,o);u(g)}}catch(m){console.error("Error on get Self Sign Access Requirement: ",m)}finally{d(!1)}})()},[e,o,t]),O(j,{children:[e.isCertifiedUserRequired&&O("div",{className:"requirement-container",children:[f(Zt,{isCompleted:l==null?void 0:l.isCertified}),O("div",{children:[O("p",{className:"self-sign-access-title bold-text",children:["You must first become a",f("a",{className:"self-sign-access-certified bold-text",href:`${Be.PORTAL}#!Quiz:`,children:" certified user"})]}),c&&f("span",{className:"spinner"}),f("p",{className:`self-sign-access-certified-success-text ${l!=null&&l.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&O("div",{className:"requirement-container",children:[f(Zt,{isCompleted:l==null?void 0:l.isVerified}),O("div",{children:[O("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",f("a",{className:"self-sign-access-validated bold-text",href:`${Be.PORTAL}#!Profile:v/settings`,children:" user profile validated"})]}),c&&f("span",{className:"spinner"}),f("p",{className:`self-sign-access-verified-success-text ${l!=null&&l.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),f(lr,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:a})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}function v1({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:a}){const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(!1);return I.useEffect(()=>{(async()=>{u(!0);try{const d=await ka(o,e.id);s(d)}catch(d){console.error("Error on prepare terms of use ",d)}finally{u(!1)}})()},[o,e]),O(j,{children:[l&&f("span",{className:"spinner"}),f(lr,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:a})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}}}}}catch{}var Fe=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(Fe||{});const ml=e=>e.filter(y1).length>0,y1=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},jf=async(e,t)=>{const n=t.map(i=>yv(e,i.id)),r=await Promise.all(n),a=t.map(i=>({accessRequirement:i,accessRequirementStatus:r.find(s=>Number(s.accessRequirementId)===i.id)}));return Ty(a,i=>-1*Number(i.accessRequirementStatus.isApproved))};function gl({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:a}){var k;const{accessToken:o}=ie(),[i,s]=I.useState(void 0),[l,u]=I.useState(),[c,d]=I.useState(),[p,m]=I.useState(""),[h,g]=I.useState(),v={ids:[e],type:"ENTITY_HEADER"},_=Ib(o)||!i,y=ip(v),{data:S}=gv();I.useEffect(()=>{let A=!1;return(async()=>{try{if(!_)return;if(n){const M=await jf(o,n);A||s(M)}else{const M=await tp(o,e),T=await jf(o,M);A||s(T)}}catch(M){console.error("Error on get access requirements: ",M)}})(),()=>{A=!0}},[o,e,n,_]);const b=Boolean(o),w=(A,D)=>{switch(A.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return f(g1,{accessRequirement:A,accessRequirementStatus:D,user:S,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return f(v1,{accessRequirement:A,accessRequirementStatus:D,user:S,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return f(m1,{accessRequirement:A,accessRequirementStatus:D,user:S,onHide:t,entityId:e,requestDataStepCallback:E});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return f(h1,{accessRequirement:A,accessRequirementStatus:D,user:S,onHide:t,entityId:e});default:return}},E=A=>{const{managedACTAccessRequirement:D,step:M,researchProjectId:T,formSubmitRequestObject:P}=A;D&&d(D),T&&m(T),P&&g(P),u(M)},N=O(j,{children:[f(se.Header,{closeButton:!0,children:f(se.Title,{className:"AccessRequirementList__title",children:"Data Access Request"})}),f(se.Body,{children:O("div",{children:[f("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),f("span",{className:"AccessRequirementList__file-icon-container",children:f(he,{icon:"file",sx:{width:"30px"}})})," ",a&&O("span",{children:[a," File(s)"]}),!a&&f("a",{className:"AccessRequirementList__register-text-link",href:`${Be.PORTAL}#!Synapse:${e}`,children:(k=y[0])==null?void 0:k.name}),f("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),O("div",{className:"requirement-container",children:[f(Zt,{isCompleted:b}),O("div",{children:[!b&&O(j,{children:[O("p",{className:"AccessRequirementList__signin",children:[f("a",{className:`${Nl} SRC-boldText `,children:"Sign in "}),"with a Sage Platform (Synapse) user account."]}),O("p",{children:["If you do not have a Sage Account, you can",f("a",{className:"register-text-link bold-text",href:`${Be.PORTAL}#!RegisterAccount:0`,children:" Register for free."})]})]}),b&&O("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",O("b",{children:[S==null?void 0:S.userName,"@synapse.org"]})]})]})]}),i==null?void 0:i.map(({accessRequirement:A,accessRequirementStatus:D})=>f(V.Fragment,{children:w(A,D)},A.id))]})})]});let x=N;if(r){switch(l){case 1:x=f(fl,{managedACTAccessRequirement:c,requestDataStepCallback:E,onHide:()=>t==null?void 0:t()});break;case 2:x=f(pl,{user:S,researchProjectId:p,managedACTAccessRequirement:c,entityId:e,requestDataStepCallback:E,onHide:()=>t==null?void 0:t()});break;case 3:x=f(ul,{formSubmitRequestObject:h,onHide:()=>t==null?void 0:t()});break;case 4:x=O(j,{children:[f(se.Header,{closeButton:!1,children:f(se.Title,{className:"AccessRequirementList__title",children:"Please Log In"})}),f(se.Body,{className:"AccessRequirementList login-modal ",children:f(vv,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:x=f(hl,{onHide:()=>t==null?void 0:t()});break;default:x=N}return f(se,{className:l?"bootstrap-4-backport AccessRequirementList modal-auto-height":"bootstrap-4-backport AccessRequirementList",onHide:()=>t==null?void 0:t(),show:!0,animation:!1,centered:!0,scrollable:!0,size:"lg",children:x})}return f("div",{className:"AccessRequirementList",children:x})}try{gl.displayName="AccessRequirementList",gl.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}}}catch{}try{ml.displayName="checkHasUnsportedRequirement",ml.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}}}catch{}export{gl as A,kf as C,Ia as D,Cb as E,Ds as F,wb as G,Jt as H,Ks as I,aw as L,ms as M,_b as P,nl as Q,Sb as S,Fl as a,rw as b,BO as c,zO as d,Eb as e,Ue as f,Ts as g,Fe as h,lw as i,sw as j,Gs as k,Ls as l,Rf as m,ER as n,vs as o,GN as p,bb as q,oR as r,rl as s,mt as t,Rp as u};
//# sourceMappingURL=AccessRequirementList-057a35ec.js.map
