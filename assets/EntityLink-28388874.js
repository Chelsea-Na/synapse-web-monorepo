import{a as m,j as y}from"./jsx-runtime-9dc53467.js";import{h as E,n as I,l as v,m as h,ay as T,az as k,z as q}from"./ApplicationSessionManager-7bf0c8e1.js";import{P as H}from"./getEndpoint-ac94413e.js";import"./OrientationBanner-450e6652.js";import"./index-76fb7be0.js";import{u as V}from"./useEntity-6f7c07ff.js";import{E as f}from"./EntityIcon-690aebac.js";import{E as Q}from"./ErrorChip-4c79e5ee.js";import{L as _}from"./Link-5cdd275a.js";import{S as x}from"./Skeleton-2007774f.js";function $(a,r){const{accessToken:o,keyFactory:t}=E(),i=I(),c=async()=>{const l=await h.getEntityHeaders(a,o);return l.results.forEach(e=>{const s=a.find(n=>n.targetVersionNumber?n.targetId===e.id&&n.targetVersionNumber===e.versionNumber:n.targetId===e.id);if(s&&(i.setQueryData(t.getEntityHeadersQueryKey([s]),{results:[e],totalNumberOfResults:1}),i.setQueryData(t.getEntityHeaderQueryKey(s.targetId,s.targetVersionNumber),e),s.targetVersionNumber&&e.isLatestVersion)){const n={targetId:e.id};i.setQueryData(t.getEntityHeadersQueryKey([n]),{results:[e],totalNumberOfResults:1}),i.setQueryData(t.getEntityHeaderQueryKey(s.targetId),e)}}),l};return v({...r,queryKey:t.getEntityHeadersQueryKey(a),queryFn:c})}function F(a,r,o){const{accessToken:t,keyFactory:i}=E();return v({...o,queryKey:i.getEntityHeaderQueryKey(a,r),queryFn:()=>h.getEntityHeader(a,r,t)})}const g=a=>{const{entity:r,className:o,versionNumber:t,displayTextField:i="name",link:c=!0,showIcon:l=!0}=a;let e="";typeof r=="string"&&(e=r);const s=!!e&&typeof r=="string",{data:n,isLoading:N}=F(e,t,{enabled:s}),b=s&&n==null&&!N,{error:p}=V(e,t,{enabled:b});if(n||typeof r!="string"){const u=n??r;let d;return"concreteType"in u?d=T(u.concreteType):d=k(u),c?m(_,{className:o,target:"_blank",rel:"noopener noreferrer",href:`${H.PORTAL}#!Synapse:${u.id}${t?`.${t}`:""}`,children:[l&&y(f,{type:d,style:{marginRight:"6px"}}),u[i]]}):m("p",{className:o,children:[l&&y(f,{type:d,style:{marginRight:"6px"}}),u[i]]})}else return p?e?y(Q,{chipText:e,error:p}):y(q,{error:p}):y(x,{variant:"rectangular",width:"100"})};try{g.displayName="EntityLink",g.__docgenInfo={description:"",displayName:"EntityLink",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"string | EntityHeader | Entity"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}},link:{defaultValue:null,description:"Whether the component should link to the entity page in Synapse. Default true",name:"link",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},showIcon:{defaultValue:null,description:"Whether to display an icon identifying the entity type. Default true",name:"showIcon",required:!1,type:{name:"boolean"}},displayTextField:{defaultValue:null,description:"The field of the entity to display. Default is 'name'",name:"displayTextField",required:!1,type:{name:"enum",value:[{value:'"name"'},{value:'"type"'},{value:'"id"'},{value:'"modifiedOn"'},{value:'"modifiedBy"'},{value:'"benefactorId"'},{value:'"isLatestVersion"'},{value:'"versionNumber"'},{value:'"versionLabel"'},{value:'"createdOn"'},{value:'"createdBy"'},{value:'"description"'},{value:'"etag"'},{value:'"parentId"'},{value:'"concreteType"'}]}}}}}catch{}export{g as E,F as a,$ as u};
