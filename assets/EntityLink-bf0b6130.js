import{a as c,j as y}from"./jsx-runtime-9dc53467.js";import{h as E,n as I,ay as v,l as b,m as h,az as k,aA as q,z as H}from"./ApplicationSessionManager-20a96080.js";import{P as V}from"./getEndpoint-ac94413e.js";import"./OrientationBanner-450e6652.js";import"./index-76fb7be0.js";import{u as Q}from"./useEntity-340c4afe.js";import{E as f}from"./EntityIcon-9d43e63a.js";import{E as x}from"./ErrorChip-bac706c4.js";import{L as _}from"./Link-5cdd275a.js";import{S as F}from"./Skeleton-2007774f.js";function $(t,n){const{accessToken:u,keyFactory:r}=E(),i=I();t=t.map(o=>({...o,targetId:v(o.targetId)}));const p=async()=>{const o=await h.getEntityHeaders(t,u);return o.results.forEach(e=>{const s=t.find(a=>a.targetVersionNumber?a.targetId===e.id&&a.targetVersionNumber===e.versionNumber:a.targetId===e.id);if(s&&(i.setQueryData(r.getEntityHeadersQueryKey([s]),{results:[e],totalNumberOfResults:1}),i.setQueryData(r.getEntityHeaderQueryKey(s.targetId,s.targetVersionNumber),e),s.targetVersionNumber&&e.isLatestVersion)){const a={targetId:e.id};i.setQueryData(r.getEntityHeadersQueryKey([a]),{results:[e],totalNumberOfResults:1}),i.setQueryData(r.getEntityHeaderQueryKey(s.targetId),e)}}),o};return b({...n,queryKey:r.getEntityHeadersQueryKey(t),queryFn:p})}function L(t="",n,u){const{accessToken:r,keyFactory:i}=E();return t&&(t=v(t)),b({enabled:!!t,...u,queryKey:i.getEntityHeaderQueryKey(t,n),queryFn:()=>h.getEntityHeader(t,n,r)})}const g=t=>{const{entity:n,className:u,versionNumber:r,displayTextField:i="name",link:p=!0,showIcon:o=!0}=t;let e="";typeof n=="string"&&(e=n);const s=!!e&&typeof n=="string",{data:a,isLoading:N}=L(e,r,{enabled:s}),T=s&&a==null&&!N,{error:m}=Q(e,r,{enabled:T});if(a||typeof n!="string"){const l=a??n;let d;return"concreteType"in l?d=k(l.concreteType):d=q(l),p?c(_,{className:u,target:"_blank",rel:"noopener noreferrer",href:`${V.PORTAL}#!Synapse:${l.id}${r?`.${r}`:""}`,children:[o&&y(f,{type:d,style:{marginRight:"6px"}}),l[i]]}):c("p",{className:u,children:[o&&y(f,{type:d,style:{marginRight:"6px"}}),l[i]]})}else return m?e?y(x,{chipText:e,error:m}):y(H,{error:m}):y(F,{variant:"rectangular",width:"100"})};try{g.displayName="EntityLink",g.__docgenInfo={description:"",displayName:"EntityLink",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"string | EntityHeader | Entity"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}},link:{defaultValue:null,description:"Whether the component should link to the entity page in Synapse. Default true",name:"link",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},showIcon:{defaultValue:null,description:"Whether to display an icon identifying the entity type. Default true",name:"showIcon",required:!1,type:{name:"boolean"}},displayTextField:{defaultValue:null,description:"The field of the entity to display. Default is 'name'",name:"displayTextField",required:!1,type:{name:"enum",value:[{value:'"name"'},{value:'"type"'},{value:'"id"'},{value:'"modifiedOn"'},{value:'"modifiedBy"'},{value:'"benefactorId"'},{value:'"isLatestVersion"'},{value:'"versionNumber"'},{value:'"versionLabel"'},{value:'"createdOn"'},{value:'"createdBy"'},{value:'"description"'},{value:'"etag"'},{value:'"parentId"'},{value:'"concreteType"'}]}}}}}catch{}export{g as E,L as a,$ as u};
