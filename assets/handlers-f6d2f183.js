import{l as u}from"./index-91c9d22a.js";import{g as v}from"./entityHandlers-d04caf96.js";import{M as $,b as H,c as U,d as w,m as L,e as P,a as K,g as q}from"./userProfileHandlers-cfa88871.js";import{g as V,B}from"./getEndpoint-ac94413e.js";import{c as F}from"./accessRequirementHandlers-060c24b1.js";import{g as G}from"./MockSubmission-180b768a.js";import{a as W,g as J}from"./fileHandlers-cd35696b.js";import{g as X}from"./researchProjectHandlers-89895280.js";import{bq as E,br as M,bs as Y,bt as Q,bu as Z}from"./SynapseClient-b994616a.js";import{q as p,n as j}from"./index-3a31b023.js";import{m as y,a as C}from"./mock_discussion-da4a428c.js";import{M as l}from"./mock_user_profile-915263e8.js";import{m as z,f as A}from"./mockProject-c0e4ebb7.js";import{u as S}from"./uniqueId-4d05949d.js";import{r as k}from"./remove-f204f5d4.js";import{c as x,b as ee,a as te}from"./tableQueryHandlers-ba1cadac.js";import{M as se}from"./mockAnnotationColumns-6525609e.js";import{g as re}from"./personalAccessTokenHandlers-56b904d9.js";const ae=[...y],b=[...C];function ne(e,s){return b.filter(r=>r.forumId===e).filter(r=>{switch(s){case p.NO_FILTER:return!0;case p.DELETED_ONLY:return r.isDeleted;case p.EXCLUDE_DELETED:return!r.isDeleted}})}function oe(e){return[u.rest.get(`${e}${E}/:id`,async(s,r,t)=>{let a=404,n={reason:`MSW could not find a mock forum object with ID ${s.params.id}`};const i=ae.find(o=>o.id===s.params.id);return i&&(a=200,n=i),r(t.status(a),t.json(n))}),u.rest.get(`${e}${M}/:id`,async(s,r,t)=>{let a=404,n={reason:`MSW could not find a mock discussion thread bundle object with ID ${s.params.id}`};s.params.id==="messageUrl"&&(n={reason:"GET /thread/messageUrl is not yet implemented"});const i=b.find(o=>o.id===s.params.id);return i&&(a=200,n=i),r(t.status(a),t.json(n))}),u.rest.post(`${e}${M}`,async(s,r,t)=>{const a=await s.json(),n={id:S(),forumId:a.forumId,projectId:z.id,title:a.title,createdOn:new Date().toISOString(),createdBy:String(l),modifiedOn:new Date().toISOString(),etag:"etag",messageKey:"todo key",numberOfViews:0,numberOfReplies:0,lastActivity:new Date().toISOString(),activeAuthors:[String(l)],isEdited:!1,isDeleted:!1,isPinned:!1};return b.push(n),r(t.status(201),t.json(n))}),u.rest.get(`${e}${Y(":forumId")}`,async(s,r,t)=>{const a=s.url.searchParams.get("offset"),n=a?parseInt(a):0,i=s.url.searchParams.get("limit"),o=i?parseInt(i):10,c=s.params.filter??p.EXCLUDE_DELETED,m=ne(s.params.forumId,c),I={results:m.slice(n,n+o),totalNumberOfResults:m.length};return r(t.status(200),t.json(I))}),u.rest.get(`${e}${E}/:id/moderators`,async(s,r,t)=>{const a={results:[String(l)],totalNumberOfResults:1};return r(t.status(200),t.json(a))})]}function O(e){return{subscriptionId:String(A.number.int({min:1e3,max:9999})),subscriberId:String(l),createdOn:A.date.anytime().toISOString(),...e}}const ie=y.map(e=>O({objectId:e.id,objectType:j.FORUM})),ue=C.map(e=>O({objectType:j.THREAD,objectId:e.id})),f=[...ie,...ue];function D(e,s="ASC",r=0,t=10,a){const n=f.filter(o=>e?o.objectType===e:!0).filter(o=>a?a.includes(o.objectId):!0).sort((o,c)=>{const m=new Date(c.createdOn).getTime()-new Date(o.createdOn).getTime();return s==="ASC"?m:-1*m}),i=n.length;return{results:n.slice(r,r+t),totalNumberOfResults:i}}function me(e){return[u.rest.get(`${e}/repo/v1/subscription/all`,async(s,r,t)=>{const a=s.url.searchParams.get("objectType")??void 0,n=s.url.searchParams.get("sortDirection")??void 0,i=s.url.searchParams.get("offset"),o=i?parseInt(i):void 0,c=s.url.searchParams.get("limit"),m=c?parseInt(c):void 0,I=D(a??void 0,n,o,m);return r(t.status(200),t.json(I))}),u.rest.post(`${e}/repo/v1/subscription/list`,async(s,r,t)=>{const a=await s.json(),n=D(a.objectType,a.sortDirection,void 0,void 0,a.idList);return r(t.status(200),t.json(n))}),u.rest.post(`${e}/repo/v1/subscription`,async(s,r,t)=>{const a=await s.json(),n={subscriptionId:S(),subscriberId:String(l),objectId:a.objectId,objectType:a.objectType,createdOn:new Date().toISOString()};return f.push(n),r(t.status(201),t.json(n))}),u.rest.delete(`${e}/repo/v1/subscription/:id`,async(s,r,t)=>{const a=s.params.id;return k(f,n=>n.subscriptionId===a),r(t.status(200),t.body(""))}),u.rest.post(`${e}/repo/v1/subscription/subscribers`,async(s,r,t)=>{const a=await s.json(),i={subscribers:f.filter(o=>o.objectType===a.objectType&&o.objectId===a.objectId).map(o=>o.subscriberId)};return r(t.status(200),t.json(i))})]}const ce="9614712",le="a2b871cb-faa4-471a-8c23-b917c77fecb2",de="My mock evaluation queue name",pe="Description for mock eval queue",fe="1131050",Ie="2021-03-02T22:16:14.552Z",ge="syn5585645",he="Mock submission instructions",be="Mock thanks for submitting",Te={id:ce,etag:le,name:de,description:pe,ownerId:fe,createdOn:Ie,contentSource:ge,submissionInstructionsMessage:he,submissionReceiptMessage:be},g=[Te];function Se(e){return[u.rest.get(`${e}${Q(":evaluationId")}`,async(s,r,t)=>{let a=404,n={reason:`Mock Service worker could not find a mock evaluation queue with ID ${s.params.evaluationId}`};const i=g.find(o=>o.id===s.params.entityId);return i&&(n=i,a=200),r(t.status(a),t.json(n))}),u.rest.get(`${e}${Z}`,async(s,r,t)=>{let a=200,n={results:g,totalNumberOfResults:g.length};return r(t.status(a),t.json(n))})]}const d="1234",Ee="f1b29c62-e987-4e69-9cec-198bf017a586",_=e=>{const s=Math.pow(10,e-1);return Math.floor(Math.random()*9*s+s)},h=e=>{const s=_(6).toString(),r=_(6).toString();return{id:s,etag:Ee,challengeId:d,teamId:r,message:`Message for team ${r}`,...e}},T=[h({teamId:String($),challengeId:d}),h({teamId:String(H),challengeId:d}),h({teamId:String(U),challengeId:d})];function Me(e){return u.rest.get(`${e}/repo/v1/entity/:id/challenge`,async(s,r,t)=>{const a={id:d,etag:"f5e9df54-360b-4ede-9a17-f7f5680c8dd4",projectId:s.params.id,participantTeamId:String(w)};return r(t.status(200),t.json(a))})}function Ae(e){return u.rest.get(`${e}/repo/v1/challenge/:challengeId/challengeTeam`,async(s,r,t)=>{const a={results:T,totalNumberOfResults:T.length};return r(t.status(200),t.json(a))})}function De(e){return u.rest.post(`${e}/repo/v1/challenge/:challengeId/challengeTeam`,async(s,r,t)=>{const n={...await s.json(),id:S(),etag:"abcdef0987654321"};return T.push(n),r(t.status(200),t.json(n))})}function _e(e){return u.rest.get(`${e}/repo/v1/challenge/:challengeId/submissionTeams`,async(s,r,t)=>{const a={results:[],totalNumberOfResults:0};return r(t.status(200),t.json(a))})}function je(e){return[Me(e),_e(e),De(e),Ae(e)]}const ye=[...L];function N(e){return ye.find(s=>s.id===e)}const R=[...P];function Ce(e,s){return R.find(r=>r.teamId===e&&r.userId===s)}function Oe(e){R.push(e)}function Ne(e){return u.rest.get(`${e}/repo/v1/team/:teamId/member/:memberId/membershipStatus`,async(s,r,t)=>{const a=s.params.teamId,n=s.params.memberId;let i,o;return N(a)?(i=Ce(a,n)??{teamId:a,userId:n,isMember:!1,hasOpenInvitation:!1,hasOpenRequest:!1,canJoin:!0,membershipApprovalRequired:!1,hasUnmetAccessRequirement:!1,canSendEmail:!1},o=200):(i={reason:`getTeamMembershipStatusHandler could not locate a team with ID ${a}`},o=404),r(t.status(o),t.json(i))})}function Re(e){return u.rest.put(`${e}/repo/v1/team/:teamId/member/:memberId`,async(s,r,t)=>{const a=s.params.teamId,n=s.params.memberId;let i,o;return N(a)?(Oe({teamId:a,userId:n,isMember:!0,hasOpenInvitation:!1,hasOpenRequest:!1,canJoin:!0,membershipApprovalRequired:!1,hasUnmetAccessRequirement:!1,canSendEmail:!1}),i="",o=201):(i={reason:`getTeamMembershipStatusHandler could not locate a team with ID ${a}`},o=404),r(t.status(o),t.json(i))})}function ve(e){return[Ne(e),Re(e)]}const $e=e=>[u.rest.options("*",async(s,r,t)=>r(t.status(200))),u.rest.get(`${e}/auth/v1/authenticatedOn`,async(s,r,t)=>r(t.status(200),t.json({authenticatedOn:new Date().toISOString()}))),...v(e),...K(e),q(e,!0,!0),...G(e),...F(e),...W(e),...X(e),...J(e),...oe(e),...me(e),...Se(e),x(e),...ee(se,e),...te(e),...re(e),...ve(e),...je(e)];$e(V(B.REPO_ENDPOINT));export{$e as g};
