import{j as t,a as n}from"./jsx-runtime-095bf462.js";import{r as g}from"./index-8db94870.js";import{u as D,E as V,ab as U,ac as A}from"./SynapseClient-b4c2fe2f.js";import{m as F,b as H}from"./SynapseConstants-935f39ee.js";import"./getEndpoint-ac94413e.js";import{u as O}from"./useShowDesktop-4eaeb2a6.js";import{g as d}from"./queryUtils-f12052f8.js";import{u as B}from"./useGetQueryResultBundle-228ace2b.js";import{E as P}from"./ExpandableContent-2be6d4ce.js";import{Q as I}from"./QueryCount-6e16d5ff.js";import{B as k}from"./Button-3631c64e.js";function h({link:r,summary:l,countSql:i,title:o}){return t(P,{title:n("div",{className:"Goals__Mobile__Header",children:[i&&t("span",{className:"Goals__Mobile__Header__Count",children:t(I,{parens:!1,query:{sql:i}})}),n("span",{className:"Goals__Mobile__Header__Title",children:[" ",o," "]})]}),content:n("div",{className:"Goals__Mobile__Content",children:[t("p",{children:l}),t(k,{variant:"contained",color:"secondary",className:"Goals__Mobile__Content__Link",href:r,children:"Explore"})]})})}try{h.displayName="GoalsMobile",h.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}function q({asset:r,link:l,summary:i,countSql:o,title:m}){return n("div",{className:"Goals__Card",children:[t("div",{className:"Goals__Card__header",style:{background:`url('${r}')`},children:n("p",{children:[n("span",{className:"Goals__Card__header__title",children:[" ",m," "]}),o&&t("span",{className:"Goals__Card__header__count",children:t(I,{parens:!1,query:{sql:o}})})]})}),n("div",{className:"Goals__Card__summary",children:[n("p",{children:[" ",i," "]}),t(k,{className:"Goals__Card__summary__link",variant:"contained",color:"secondary",href:l,children:"Explore"})]})]})}try{q.displayName="GoalsDesktop",q.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}const Q=1200,C=r=>{const{entityId:l}=r,{accessToken:i}=D(),[o,m]=g.useState(),[_,E]=g.useState(),G=O(Q),v={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:l,partMask:F|H,query:{sql:`select * from ${l} order by ItemOrder`}},{data:e}=B(v);g.useEffect(()=>{(async()=>{try{const c=d("Asset",e),s=(e==null?void 0:e.queryResult.queryResults.rows.map(a=>a.values[c]))??[];if(s.some(a=>a===null)&&console.warn("Row has null value(s) when no nulls expected"),s.length===0)return;const u={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:s.map(a=>({associateObjectId:l,associateObjectType:U.TableEntity,fileHandleId:a}))},f=await A(u,i);E(void 0),m(f.requestedFiles.filter(a=>a.preSignedURL!==void 0).map(a=>a.preSignedURL))}catch(c){console.error("Error on get data",c),E(c)}})()},[l,i,e]);const N=d("TableId",e),p=d("CountSql",e),x=d("Title",e),R=d("Summary",e),L=d("Link",e);return n("div",{className:`Goals${G?"__Desktop":""}`,children:[_&&t(V,{error:_}),e==null?void 0:e.queryResult.queryResults.rows.map((S,c)=>{const s=S.values;s.some(T=>T===null)&&console.warn("Row has null value(s) when no nulls expected");const y=N>-1?s[N]:void 0;let u;p>-1&&s[p]?u=s[p]:y&&(u=`SELECT * FROM ${y}`);const f=s[x],a=s[R],M=s[L],w=(o==null?void 0:o[c])??"",b={countSql:u,title:f,summary:a,link:M,asset:w};return G?t(q,{...b}):t(h,{...b})})]})};try{C.displayName="Goals",C.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}export{C as G};
//# sourceMappingURL=Goals-8487777c.js.map
