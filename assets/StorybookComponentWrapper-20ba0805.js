import{j as n,a as c}from"./jsx-runtime-095bf462.js";import{r as s,R as y}from"./index-8db94870.js";import{aH as m,aI as f,aJ as C,n as l,aK as k,a as h,aL as S,aM as g,aN as v,b as x,aO as w,aP as b}from"./SynapseClient-d7646a6f.js";import{S as E}from"./getEndpoint-ac94413e.js";import"./OrientationBanner-e18cce1c.js";import{S as Q}from"./ToastMessage-d41beca8.js";import{d as R}from"./dayjs.min-59ef0ea6.js";var d={exports:{}};d.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var T=d.exports;async function _(){let e=await g(),t;try{t=await v(e)}catch(o){throw o instanceof x&&o.status===401&&(console.error("Encountered error fetching profile: ",o,"Signing out..."),await w(),e=void 0),o}let a;return e&&b(e).then(o=>{a=R(o.authenticatedOn).format("L LT")}),{accessToken:e,profile:t,authenticatedOn:a}}const r=new m(f);function O(e){const t=E[e];window.SRC={OVERRIDE_ENDPOINT_CONFIG:t},r.resetQueries()}function u(e){const{storybookContext:t}=e;s.useEffect(()=>{O(t.globals.stack||t.parameters.stack)},[t.globals.stack]);const[a,o]=y.useState(void 0);C(),s.useEffect(()=>{_().then(i=>{o(i.accessToken)})}),s.useEffect(()=>{async function i(){await r.cancelQueries(),r.removeQueries(),await r.invalidateQueries()}i()},[a]);const p=s.useMemo(()=>({accessToken:a,isInExperimentalMode:l.isInSynapseExperimentalMode(),utcTime:l.getUseUtcTimeFromCookie(),withErrorBoundary:!0,downloadCartPageUrl:"/?path=/story/download-downloadcartpage--demo"}),[a]);return n(k,{client:r,children:c(h,{synapseContext:p,children:[t.globals.showReactQueryDevtools&&n(T.ReactQueryDevtools,{}),c(S,{children:[n(Q,{}),n("main",{children:e.children})]})]})})}try{u.displayName="StorybookComponentWrapper",u.__docgenInfo={description:"Wraps storybook story components to ensure that all components receive required context.",displayName:"StorybookComponentWrapper",props:{storybookContext:{defaultValue:null,description:"",name:"storybookContext",required:!0,type:{name:"{ globals: { stack?: SynapseStack | undefined; showReactQueryDevtools?: boolean | undefined; }; parameters: { stack?: SynapseStack | undefined; }; }"}}}}}catch{}export{u as S,_ as s};
//# sourceMappingURL=StorybookComponentWrapper-20ba0805.js.map
