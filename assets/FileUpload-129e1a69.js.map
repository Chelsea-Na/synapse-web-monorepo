{"version":3,"file":"FileUpload-129e1a69.js","sources":["../../../../node_modules/.pnpm/@mui+utils@5.11.13_react@18.2.0/node_modules/@mui/utils/esm/deprecatedPropType.js","../../../../node_modules/.pnpm/@mui+utils@5.11.13_react@18.2.0/node_modules/@mui/utils/esm/requirePropFactory.js","../../../../node_modules/.pnpm/@mui+utils@5.11.13_react@18.2.0/node_modules/@mui/utils/esm/unsupportedProp.js","../../../../node_modules/.pnpm/@mui+material@5.11.16_@emotion+react@11.10.6_@emotion+styled@11.10.6_@types+react@18.0.27_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/utils/index.js","../../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/interopRequireDefault.js","../../../../node_modules/.pnpm/@mui+icons-material@5.11.16_@mui+material@5.11.16_@types+react@18.0.27_react@18.2.0/node_modules/@mui/icons-material/utils/createSvgIcon.js","../../src/lib/containers/FileUpload.tsx"],"sourcesContent":["export default function deprecatedPropType(validator, reason) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n  return (props, propName, componentName, location, propFullName) => {\n    const componentNameSafe = componentName || '<<anonymous>>';\n    const propFullNameSafe = propFullName || propName;\n    if (typeof props[propName] !== 'undefined') {\n      return new Error(`The ${location} \\`${propFullNameSafe}\\` of ` + `\\`${componentNameSafe}\\` is deprecated. ${reason}`);\n    }\n    return null;\n  };\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport default function requirePropFactory(componentNameInError, Component) {\n  if (process.env.NODE_ENV === 'production') {\n    return () => null;\n  }\n\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  const prevPropTypes = Component ? _extends({}, Component.propTypes) : null;\n  const requireProp = requiredProp => (props, propName, componentName, location, propFullName, ...args) => {\n    const propFullNameSafe = propFullName || propName;\n    const defaultTypeChecker = prevPropTypes == null ? void 0 : prevPropTypes[propFullNameSafe];\n    if (defaultTypeChecker) {\n      const typeCheckerResult = defaultTypeChecker(props, propName, componentName, location, propFullName, ...args);\n      if (typeCheckerResult) {\n        return typeCheckerResult;\n      }\n    }\n    if (typeof props[propName] !== 'undefined' && !props[requiredProp]) {\n      return new Error(`The prop \\`${propFullNameSafe}\\` of ` + `\\`${componentNameInError}\\` can only be used together with the \\`${requiredProp}\\` prop.`);\n    }\n    return null;\n  };\n  return requireProp;\n}","export default function unsupportedProp(props, propName, componentName, location, propFullName) {\n  if (process.env.NODE_ENV === 'production') {\n    return null;\n  }\n  const propFullNameSafe = propFullName || propName;\n  if (typeof props[propName] !== 'undefined') {\n    return new Error(`The prop \\`${propFullNameSafe}\\` is not supported. Please remove it.`);\n  }\n  return null;\n}","import { unstable_ClassNameGenerator as ClassNameGenerator } from '@mui/base/className';\nexport { default as capitalize } from './capitalize';\nexport { default as createChainedFunction } from './createChainedFunction';\nexport { default as createSvgIcon } from './createSvgIcon';\nexport { default as debounce } from './debounce';\nexport { default as deprecatedPropType } from './deprecatedPropType';\nexport { default as isMuiElement } from './isMuiElement';\nexport { default as ownerDocument } from './ownerDocument';\nexport { default as ownerWindow } from './ownerWindow';\nexport { default as requirePropFactory } from './requirePropFactory';\nexport { default as setRef } from './setRef';\nexport { default as unstable_useEnhancedEffect } from './useEnhancedEffect';\nexport { default as unstable_useId } from './useId';\nexport { default as unsupportedProp } from './unsupportedProp';\nexport { default as useControlled } from './useControlled';\nexport { default as useEventCallback } from './useEventCallback';\nexport { default as useForkRef } from './useForkRef';\nexport { default as useIsFocusVisible } from './useIsFocusVisible';\n// TODO: remove this export once ClassNameGenerator is stable\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const unstable_ClassNameGenerator = {\n  configure: generator => {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(['MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.', '', \"You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead\", '', 'The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401', '', 'The updated documentation: https://mui.com/guides/classname-generator/'].join('\\n'));\n    }\n    ClassNameGenerator.configure(generator);\n  }\n};","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\nvar _utils = require(\"@mui/material/utils\");","import * as React from 'react'\nimport { Button, ButtonProps } from '@mui/material'\nimport { uploadFile } from '../utils/SynapseClient'\nimport { useSynapseContext } from '../utils/SynapseContext'\nimport { FileUploadComplete, UploadCallbackResp } from '../utils/synapseTypes'\n\nexport type FileUploadProps = {\n  id?: string\n  label?: string\n  buttonProps?: ButtonProps\n  uploadCallback?: (response: UploadCallbackResp) => void\n  context?: any // to distinguish which file was uploaded if we have several FileUpload components on the same page\n}\n\nconst FileUpload: React.FC<FileUploadProps> = props => {\n  const {\n    id,\n    buttonProps = { variant: 'contained' },\n    label = 'Browse...',\n    uploadCallback,\n    context,\n  } = props\n  const { accessToken } = useSynapseContext()\n  const hiddenFileInput = React.useRef<HTMLInputElement>(null)\n\n  const clickHandler = () => {\n    if (hiddenFileInput?.current!) {\n      hiddenFileInput.current?.click()\n    }\n  }\n\n  const changeHandler = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const file = e.target.files[0]\n      try {\n        const resp: FileUploadComplete = await uploadFile(\n          accessToken,\n          file.name,\n          file,\n        )\n        uploadCallback?.({\n          success: true,\n          resp: resp,\n          context: context,\n        })\n      } catch (e) {\n        console.log('FileUpload: fail to upload file', e)\n        uploadCallback?.({\n          success: false,\n          error: e,\n        })\n      }\n    }\n  }\n\n  return (\n    <>\n      <input\n        type={'file'}\n        ref={hiddenFileInput}\n        onChange={e => {\n          changeHandler(e)\n        }}\n        style={{ display: 'none' }}\n      />\n      <Button id={id} onClick={clickHandler} {...buttonProps}>\n        {label}\n      </Button>\n    </>\n  )\n}\n\nexport default FileUpload\n"],"names":["deprecatedPropType","validator","reason","requirePropFactory","componentNameInError","Component","unsupportedProp","props","propName","componentName","location","propFullName","unstable_ClassNameGenerator","generator","ClassNameGenerator","_interopRequireDefault","obj","module","exports","_utils","require$$0","FileUpload","id","buttonProps","label","uploadCallback","context","accessToken","useSynapseContext","hiddenFileInput","React.useRef","clickHandler","_a","changeHandler","e","file","resp","uploadFile","e2","jsxs","Fragment","jsx","Button"],"mappings":"grBAAe,SAASA,EAAmBC,EAAWC,EAAQ,CAE1D,MAAO,IAAM,IAUjB,CCXe,SAASC,EAAmBC,EAAsBC,EAAW,CAExE,MAAO,IAAM,IAoBjB,CCvBe,SAASC,EAAgBC,EAAOC,EAAUC,EAAeC,EAAUC,EAAc,CAE5F,OAAO,IAOX,CCWO,MAAMC,EAA8B,CACzC,UAAWC,GAAa,CAItBC,EAAmB,UAAUD,CAAS,CACvC,CACH,ueC3BA,SAASE,EAAuBC,EAAK,CACnC,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CACnC,QAAWA,CACf,CACC,CACDC,EAAA,QAAiBF,EAAwBE,EAA4B,QAAA,WAAA,GAAMA,EAAO,QAAQ,QAAaA,EAAO,kFCH9G,OAAO,eAAwBC,EAAA,aAAc,CAC3C,MAAO,EACT,CAAC,EACD,OAAO,eAAeA,EAAS,UAAW,CACxC,WAAY,GACZ,IAAK,UAAY,CACf,OAAOC,EAAO,aACf,CACH,CAAC,EACD,IAAIA,EAASC,uBCGbC,EAAAd,GAAA,CACE,KAAA,CAAM,GAAAe,EACJ,YAAAC,EAAA,CAAA,QAAA,WAAA,EACqC,MAAAC,EAAA,YAC7B,eAAAC,EACR,QAAAC,CACA,EAAAnB,EAEF,CAAA,YAAAoB,GAAAC,IACAC,EAAAC,SAAA,IAAA,EAEAC,EAAA,IAAA,OACEF,GAAA,MAAAA,EAAA,WACEG,EAAAH,EAAA,UAAA,MAAAG,EAAA,QACF,EAGFC,EAAA,MAAAC,GAAA,CACE,GAAAA,EAAA,OAAA,OAAAA,EAAA,OAAA,MAAA,OAAA,EAAA,CACE,MAAAC,EAAAD,EAAA,OAAA,MAAA,CAAA,EACA,GAAA,CACE,MAAAE,EAAA,MAAAC,EAAuCV,EACrCQ,EAAA,KACKA,CACL,EAEFV,GAAA,MAAAA,EAAA,CAAiB,QAAA,GACN,KAAAW,EACT,QAAAV,CACA,EACD,OAAAY,EAAA,CAED,QAAA,IAAA,kCAAAA,CAAA,EACAb,GAAA,MAAAA,EAAA,CAAiB,QAAA,GACN,MAAAa,CACF,EACR,CACH,CACF,EAGF,OAAAC,EAAAC,EAAA,CAAA,SAAA,CAEIC,EAAA,QAAC,CAAA,KAAA,OACO,IAAAZ,EACD,SAAAK,GAAA,CAEHD,EAAAC,CAAA,CAAe,EACjB,MAAA,CAAA,QAAA,MAAA,CACyB,CAAA,EAC3BO,EAAAC,EAAA,CAAA,GAAApB,EAAA,QAAAS,EAAA,GAAAR,EAAA,SAAAC,EAAA,CAGA,CAAA,CAAA,CAGN"}