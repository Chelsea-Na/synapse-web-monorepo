import{r as d}from"./index-8db94870.js";import{u as y,az as i,bT as R,bU as k,bf as E}from"./EntityTypeUtils-5efcfc46.js";import{u as M}from"./useInfiniteQuery-028328b2.js";import{p,k as c}from"./SynapseConstants-a1d83293.js";import"./getEndpoint-ac94413e.js";import"./jsx-runtime-095bf462.js";import{m as b}from"./merge-a4a3c8d7.js";const f={staleTime:1e3*60*30};function w(e,r){const{accessToken:a,keyFactory:t}=y();return i(t.getEntityTableQueryResultQueryKey(e,!1),()=>R(e,a),{...f,...r})}function T(e,r,a){const{accessToken:t,keyFactory:u}=y();return i(u.getEntityTableQueryResultWithAsyncStatusQueryKey(e,!1),()=>k(e,t,a),{...f,...r})}function S(e,r,a){const t=e.partMask&c,u={...e,partMask:t},s=t>0?r==null?void 0:r.enabled:!1;return T(u,{...r,enabled:s},a)}function P(e,r,a){const t=e.partMask&~c,u={...e,query:{...e.query,offset:void 0,limit:void 0,sort:void 0},partMask:t},s=t>0?r==null?void 0:r.enabled:!1;return T(u,{...r,enabled:s},a)}function K(e,r,a){const t=S(e,r,a),u=P(e,r,a);return d.useMemo(()=>t.status==="error"?t:u.status==="error"?u:t.status==="loading"?t:u.status==="loading"?u:t.status==="idle"?b({},t,u):b({},u,t),[t,u])}function L(e,r,a){const{accessToken:t,keyFactory:u}=y();return M(u.getEntityTableQueryResultQueryKey(e,!0),s=>{const n=s.pageParam?parseInt(s.pageParam):0;return k({...e,query:{...e.query,offset:n},partMask:n!==0?e.partMask&c:e.partMask},t,a)},{...f,...r,select:s=>{const n=s==null?void 0:s.pages[0];if(n.responseBody)for(let o=0;o<s.pages.length;o++){const l=s.pages[o];l.responseBody!=null&&(s.pages[o].responseBody={...n.responseBody,queryResult:l.responseBody.queryResult})}return s},getPreviousPageParam:s=>{if(s.jobState!=="COMPLETE")return;const n=s.requestBody;if(n.query.offset==null||n.query.offset===0)return;const o=n.query.limit??p;return Math.max(n.query.offset-o,0)},getNextPageParam:(s,n)=>{var Q,g;if(s.jobState!=="COMPLETE")return;const o=s.requestBody,l=o.query.limit??p,m=(Q=n[0].responseBody)==null?void 0:Q.queryCount;if(!(m!=null&&(o.query.offset??0)+l>=m))return((g=s.responseBody.queryResult)==null?void 0:g.queryResults.rows.length)===l?(o.query.offset??0)+l:void 0}})}function U(e,r){const{accessToken:a,keyFactory:t}=y();return i(t.getFullTableQueryResultQueryKey(e),()=>E(e,a),{...f,...r})}export{w as a,L as b,U as c,K as u};
//# sourceMappingURL=useGetQueryResultBundle-84481f42.js.map
