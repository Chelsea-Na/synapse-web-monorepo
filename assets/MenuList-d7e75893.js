import{_ as j}from"./extends-98964cd2.js";import{_ as T}from"./objectWithoutPropertiesLoose-4f48578a.js";import{r as f}from"./index-f1f749bf.js";import"./index-1aacdabe.js";import{j as _}from"./jsx-runtime-670450c2.js";import{a as A,u as H}from"./useIsFocusVisible-c754a498.js";import{g as N}from"./Paper-f168accd.js";import{n as I}from"./Clear-fa5d240c.js";import{a as O}from"./List-226c3755.js";const $=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function w(n,e,r){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r?null:n.firstChild}function M(n,e,r){return n===e?r?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r?null:n.lastChild}function k(n,e){if(e===void 0)return!0;let r=n.innerText;return r===void 0&&(r=n.textContent),r=r.trim().toLowerCase(),r.length===0?!1:e.repeating?r[0]===e.keys[0]:r.indexOf(e.keys.join(""))===0}function m(n,e,r,y,d,g){let p=!1,l=d(n,e,e?r:!1);for(;l;){if(l===n.firstChild){if(p)return!1;p=!0}const c=y?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!k(l,g)||c)l=d(n,l,r);else return l.focus(),!0}return!1}const z=f.forwardRef(function(e,r){const{actions:y,autoFocus:d=!1,autoFocusItem:g=!1,children:p,className:l,disabledItemsFocusable:c=!1,disableListWrap:h=!1,onKeyDown:x,variant:C="selectedMenu"}=e,v=T(e,$),u=f.useRef(null),F=f.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});A(()=>{d&&u.current.focus()},[d]),f.useImperativeHandle(y,()=>({adjustStyleForScrollbar:(t,i)=>{const o=!u.current.style.width;if(t.clientHeight<u.current.clientHeight&&o){const a=`${N(I(t))}px`;u.current.style[i.direction==="rtl"?"paddingLeft":"paddingRight"]=a,u.current.style.width=`calc(100% + ${a})`}return u.current}}),[]);const K=t=>{const i=u.current,o=t.key,a=I(i).activeElement;if(o==="ArrowDown")t.preventDefault(),m(i,a,h,c,w);else if(o==="ArrowUp")t.preventDefault(),m(i,a,h,c,M);else if(o==="Home")t.preventDefault(),m(i,null,h,c,w);else if(o==="End")t.preventDefault(),m(i,null,h,c,M);else if(o.length===1){const s=F.current,D=o.toLowerCase(),E=performance.now();s.keys.length>0&&(E-s.lastTime>500?(s.keys=[],s.repeating=!0,s.previousKeyMatched=!0):s.repeating&&D!==s.keys[0]&&(s.repeating=!1)),s.lastTime=E,s.keys.push(D);const R=a&&!s.repeating&&k(a,s);s.previousKeyMatched&&(R||m(i,a,!1,c,w,s))?t.preventDefault():s.previousKeyMatched=!1}x&&x(t)},S=H(u,r);let b=-1;f.Children.forEach(p,(t,i)=>{f.isValidElement(t)&&(t.props.disabled||(C==="selectedMenu"&&t.props.selected||b===-1)&&(b=i))});const L=f.Children.map(p,(t,i)=>{if(i===b){const o={};return g&&(o.autoFocus=!0),t.props.tabIndex===void 0&&C==="selectedMenu"&&(o.tabIndex=0),f.cloneElement(t,o)}return t});return _(O,j({role:"menu",ref:S,className:l,onKeyDown:K,tabIndex:d?0:-1},v,{children:L}))}),X=z;export{X as M};
//# sourceMappingURL=MenuList-d7e75893.js.map
