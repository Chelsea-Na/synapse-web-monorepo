import{j as i,a as f,F as y}from"./jsx-runtime-095bf462.js";import{C as n,bZ as $,b_ as Z,b5 as ee,aJ as oe,G as te}from"./SynapseClient-1c2fcc91.js";import{M as D}from"./getEndpoint-ac94413e.js";import{f as ne}from"./SynapseConstants-c9342f94.js";import{u as re}from"./useEntity-513f12fe.js";import{r as T,R as le}from"./index-8db94870.js";import{b as ie}from"./use-deep-compare-effect.esm-7a830988.js";import{b as se}from"./useGetQueryResultBundle-95ae630b.js";import"./SkeletonButton-53ae0bfd.js";import{a5 as j,a6 as E,_ as M}from"./SynapseTableCell-e640afb4.js";import{S as ae}from"./SkeletonTable-f13a2e9d.js";import{c as w}from"./cloneDeep-2774ded5.js";import{C as ue}from"./EnumFacetFilterUI-b04f495c.js";import{J as me}from"./JSONArrayEditorModal-7ff9ad20.js";import{B as m}from"./Box-49321e59.js";import{T as S}from"./TextField-612b027b.js";import{F as v}from"./InputLabel-b63da0ce.js";import{S as A}from"./Select-3485fe5f.js";import{M as O}from"./MenuItem-0cef413c.js";import{T as ce}from"./Tooltip-39e0afa2.js";import{L as de}from"./Link-fc5d7a73.js";import{c as U}from"./isNil-53e0d334.js";import{A as pe}from"./AddToList-17d7ba80.js";import{A as fe,I as he}from"./IconSvg-3b8e6785.js";import{t as Te}from"./times-9cad1363.js";import{B as C}from"./Button-c45f00b4.js";import{M as Ie}from"./FormControlLabel-4d3908a7.js";import{T as Se}from"./Typography-d16533eb.js";import{B as Ce}from"./ButtonGroup-f7c25835.js";import{c as z}from"./createSvgIcon-fd8a55dc.js";import{g as ye}from"./tableQueryHandlers-ad7cb6f4.js";import{a as be,m as ge}from"./mockFileViewQuery-de836850.js";import{g as Ee}from"./entityHandlers-492fff29.js";import"./_commonjsHelpers-042e6b4d.js";import"./inheritsLoose-c82a83d4.js";import"./index-8ce4a492.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-4abd396b.js";import"./FullWidthAlert-918940ef.js";import"./AlertTitle-af39c120.js";import"./styled-9c91c4fe.js";import"./Paper-88da9df3.js";import"./IconButton-152addcf.js";import"./ButtonBase-7c3b1b89.js";import"./emotion-react.browser.esm-8f02f344.js";import"./assertThisInitialized-081f9914.js";import"./TransitionGroupContext-f2b81dde.js";import"./useForkRef-f2aa3d66.js";import"./useIsFocusVisible-bbf13f29.js";import"./Stack-c9edc483.js";import"./extendSxProp-e5d44a75.js";import"./useTheme-68d5aa8d.js";import"./Grow-adae5ed8.js";import"./isHostComponent-fa76b8d9.js";import"./utils-87fd7144.js";import"./ClickAwayListener-36b79525.js";import"./_getTag-39555acc.js";import"./isArray-5e3f9107.js";import"./StringUtils-2ea3ab4d.js";import"./OrientationBanner-7886af1c.js";import"./dayjs.min-59ef0ea6.js";import"./index-58d3fd43.js";import"./tiny-invariant-dd7d57d2.js";import"./CheckCircleTwoTone-784a445a.js";import"./inputBaseClasses-f05f2ac2.js";import"./Fade-26b5aaed.js";import"./useMutation-bf1e6b07.js";import"./useInfiniteQuery-5577ab15.js";import"./pick-e68090dd.js";import"./toString-cc90cb98.js";import"./isSymbol-7c514724.js";import"./_baseClone-daafcb33.js";import"./_Uint8Array-81ff25c8.js";import"./_baseTimes-8715be3e.js";import"./hasIn-d5ffa125.js";import"./_baseSlice-cf92e063.js";import"./isPlainObject-b0225e48.js";import"./_overRest-6b5900af.js";import"./identity-46f208ab.js";import"./merge-2642e70f.js";import"./_baseFor-d254fa1e.js";import"./isArrayLikeObject-a31b0675.js";import"./_baseRest-2c0b1ec4.js";import"./_isIterateeCall-44d71915.js";import"./Skeleton-2bd04c38.js";import"./DateFormatter-17724456.js";import"./SynapseTableConstants-5f56c39f.js";import"./UserBadge-1a9968e2.js";import"./Popover-9afe50c5.js";import"./Modal-5d1d85a5.js";import"./Backdrop-7ef683b4.js";import"./getScrollbarSize-ac846fe6.js";import"./ownerWindow-2c76219e.js";import"./createChainedFunction-0bab83cf.js";import"./ToastMessage-91a3bbbf.js";import"./hasClass-ec9efd32.js";import"./uniqueId-4d05949d.js";import"./Avatar-281ced81.js";import"./EntityLink-42392a5d.js";import"./useGetEntityHeaders-dfa0256a.js";import"./EntityIcon-cc046b99.js";import"./ErrorChip-81efbb32.js";import"./ErrorOutlined-dd0fb706.js";import"./index-95cfb7c2.js";import"./RegularExpressions-bc0adf55.js";import"./SqlFunctions-5a9f8a83.js";import"./UserSearchBoxV2-4b66de38.js";import"./Select-ce3716e1.esm-2948b13e.js";import"./isNativeReflectConstruct-e378569d.js";import"./uniq-a197bf03.js";import"./_cacheHas-432cce39.js";import"./without-7e76d1c1.js";import"./_setToArray-3d6ec6fd.js";import"./UserOrTeamBadge-d8c28483.js";import"./index-53b84cc8.js";import"./Icon-0baed793.js";import"./WideButton-58152e91.js";import"./LoadingScreen-a23a06c8.js";import"./LinearProgress-f638b645.js";import"./useTeamMembers-d4e5a2fb.js";import"./ObservationCard-31f63f63.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./uniq-fe955338.js";import"./mapValues-dee13770.js";import"./isPlainObject-1dec192d.js";import"./now-beb31482.js";import"./ThemesPlot-4cfe1271.js";import"./ElementWithTooltip-77222d2d.js";import"./Dropdown-7674e440.js";import"./ThemeProvider-c7f6a893.js";import"./createWithBsPrefix-d02901e3.js";import"./factory-275e83af.js";import"./sortBy-66c7c630.js";import"./_getMatchData-c26eb7a1.js";import"./NoSearchResults-460db635.js";import"./NoData-59ea70fa.js";import"./queryUtils-7bee5bfd.js";import"./LastLoginInfo-4882f926.js";import"./jsx-runtime_commonjs-proxy-c97ba25c.js";import"./isMuiElement-08f54e3c.js";import"./Dialog-b154ee51.js";import"./DialogTitle-0b7c1528.js";import"./tslib.es6-9c2726d7.js";import"./lodash-e374147d.js";import"./index-953d39fd.js";import"./useAccessRequirements-4955c0ec.js";import"./StandaloneLoginForm-95b9902c.js";import"./LoginFlowBackButton-0fecfce7.js";import"./TextField-d8035ef7.js";import"./StyledFormControl-80c3c2db.js";import"./LoginMethodButton-0aea9ced.js";import"./Grid-3201877c.js";import"./useDataAccessSubmission-ddb0c158.js";import"./RadioGroup-b7f85712.js";import"./Form-93e8509c.js";import"./Col-80cc1e4a.js";import"./FileUpload-93f45d58.js";import"./Divider-c7474078.js";import"./dividerClasses-94cb8e7e.js";import"./AuthenticatedRequirement-95bc20f2.js";import"./RequirementItem-724a29d5.js";import"./ConditionalWrapper-51b8d1ed.js";import"./CheckTwoTone-8be00e66.js";import"./CertificationRequirement-08bc848a.js";import"./ValidationRequirement-db40f9f4.js";import"./TwoFactorAuthEnabledRequirement-fb52e422.js";import"./TwoFactorEnrollmentForm-8f7fdf67.js";import"./LeftRightPanel-908871dc.js";import"./ActionRequiredCard-be78f5a1.js";import"./RequestDownloadCard-248572f2.js";import"./Tabs-9b8cc802.js";import"./QueryCount-e3fe4213.js";import"./GetAppTwoTone-325427e5.js";import"./RangeSlider-c06226d1.js";import"./react-sizeme-5bfc490a.js";import"./ColorGradient-3d3e1969.js";import"./colorPalette-c43701fe.js";import"./InfoOutlined-3b5cb253.js";import"./SelectionCriteriaPill-eeba275d.js";import"./useDownloadList-3d9421b3.js";import"./UpsetPlot-ad91c765.js";import"./LargeButton-02e32055.js";import"./SynapseVideo-82b114ba.js";import"./IconList-19a02846.js";import"./UserCardList-7b503910.js";import"./ArrayFieldDescriptionTemplate-4cf9ef7c.js";import"./MenuList-06d3cd4c.js";import"./listItemButtonClasses-c5743ce1.js";import"./ListItemText-74e1a0bd.js";import"./ContentCopy-2f100347.js";import"./index-2484f9c8.js";import"./util-f846e4fa.js";import"./mock_user_profile-b6d0118a.js";import"./mockProject-1075e532.js";import"./mockFileEntity-8db34bb8.js";import"./mock_file_handle-3b13efe4.js";import"./mockTableEntity-0ce7dff8.js";import"./mockEntity-b5a185da.js";import"./mockSchema-06b5a123.js";const Me=z(i("path",{d:"m5 9 1.41 1.41L11 5.83V22h2V5.83l4.59 4.59L19 9l-7-7-7 7z"}),"North"),xe=z(i("path",{d:"m19 15-1.41-1.41L13 18.17V2h-2v16.17l-4.59-4.59L5 15l7 7 7-7z"}),"South");function Le(t,o){const e=j(t,(r,l,s)=>l(e,o(r(e),s)));return e}const x=(t,o,e)=>(o.has(e)?o:o.set(e,t())).get(e),Ne=new WeakMap,_e=(t,o,e,r)=>{const l=x(()=>new WeakMap,Ne,o),s=x(()=>new WeakMap,l,e);return x(t,s,r)};function J(t,o,e=Object.is){return _e(()=>{const r=Symbol(),l=([c,d])=>{if(d===r)return o(c);const p=o(c,d);return e(d,p)?d:p},s=j(c=>{const d=c(s),p=c(t);return p instanceof Promise||d instanceof Promise?Promise.all([p,d]).then(l):l([p,d])});return s.init=r,s},t,o,e)}const je=[n.LARGETEXT,n.MEDIUMTEXT,n.JSON];function Re(t,o){return Object.values(n).filter(e=>t?!je.includes(e):!0).filter(e=>{if(o)switch(e){case n.JSON:case n.STRING_LIST:case n.INTEGER_LIST:case n.BOOLEAN_LIST:case n.DATE_LIST:case n.USERID_LIST:case n.ENTITYID_LIST:return!1;default:return!0}return!0})}function De(t){switch(t){case"enumeration":return"Values";case"range":return"Range";default:return t}}function we(t){switch(t){case n.STRING:return"String";case n.DOUBLE:return"Double";case n.BOOLEAN:return"Boolean";case n.INTEGER:return"Integer";case n.DATE:return"Date";case n.FILEHANDLEID:return"File";case n.ENTITYID:return"Entity";case n.LINK:return"Link";case n.MEDIUMTEXT:return"MediumText";case n.LARGETEXT:return"LargeText";case n.USERID:return"User";case n.STRING_LIST:return"String List";case n.INTEGER_LIST:return"Integer List";case n.BOOLEAN_LIST:return"Boolean List";case n.DATE_LIST:return"Date List";case n.USERID_LIST:return"User ID List";case n.ENTITYID_LIST:return"Entity ID List";case n.EVALUATIONID:return"Evaluation";case n.JSON:return"JSON";default:return t}}function L(t){switch(t){case n.STRING:case n.STRING_LIST:case n.LINK:return!0;default:return!1}}function H(t){switch(t){case n.STRING_LIST:case n.BOOLEAN_LIST:case n.DATE_LIST:case n.INTEGER_LIST:return!0;default:return!1}}function W(t,o){let e;switch(t){case n.INTEGER:case n.INTEGER_LIST:e=["enumeration","range"];break;case n.STRING:case n.BOOLEAN:case n.USERID:case n.ENTITYID:case n.STRING_LIST:case n.BOOLEAN_LIST:case n.ENTITYID_LIST:case n.USERID_LIST:case n.EVALUATIONID:e=["enumeration"];break;case n.DOUBLE:case n.DATE:case n.DATE_LIST:e=["range"];break;default:e=null}return e&&!o&&(e=[void 0,...e]),e}function ve(t,o,e){if(!o&&!e)switch(t){case n.ENTITYID:case n.FILEHANDLEID:case n.USERID:case n.MEDIUMTEXT:case n.LARGETEXT:case n.JSON:return!1;default:return!0}else return!1}const Ae=50,Oe=1e3;function ke(t){switch(t){case n.STRING:case n.STRING_LIST:return Ae;case n.LINK:return Oe;default:throw new Error(`Type is not known to have a max size: ${t}`)}}function Y(t,o){if(o)return!1;switch(t){case n.STRING:case n.INTEGER:case n.ENTITYID:return!0;default:return!1}}function q(t){return t.length>0&&t.every(o=>o.isSelected&&(o.jsonSubColumns??[]).every(e=>e.isSelected))}function Ve(t){return t.reduce((o,e)=>(e.isSelected&&(o+=1),e.jsonSubColumns&&e.jsonSubColumns.forEach(r=>{r.isSelected&&(o+=1)}),o),0)}function Fe(){return{id:"",name:"",columnType:n.STRING,isSelected:!1}}function Ge(){return{name:"",jsonPath:"",columnType:n.STRING,facetType:"enumeration",isSelected:!1}}function k(t,o){const e=[...t];return e.forEach((r,l)=>{if(l>0&&o(r)&&!o(e[l-1])){const s=e[l-1];e[l-1]=e[l],e[l]=s}}),e}function V(t,o){const e=[...t];for(let r=e.length-1;r>=0;r--){const l=e[r];if(r<e.length-1&&o(l)&&!o(e[r+1])){const s=e[r];e[r]=e[r+1],e[r+1]=s}}return e}function Pe(t,o){const{columnModelIndex:e,jsonSubColumnModelIndex:r,newColumnType:l}=t;let s;if(o&&o[e])o[e].jsonSubColumns&&r!==void 0?s=w(o[e].jsonSubColumns[r]):s=w(o[e]);else throw new Error("Cannot change column model type for a column that does not exist");s.columnType=l,!L(l)&&"maximumSize"in s&&delete s.maximumSize,!H(l)&&"maximumListLength"in s&&delete s.maximumListLength,!Y(l,!!r)&&"enumValues"in s&&delete s.enumValues;const c=W(l,!!r);"facetType"in s&&(c===null||!c.includes(s.facetType))&&delete s.facetType,"jsonSubColumns"in s&&l!==n.JSON&&delete s.jsonSubColumns,o&&o[e]&&(o[e].jsonSubColumns&&r!==void 0?o[e].jsonSubColumns[r]=s:o[e]=s)}function Be(t){return q(t)?t.map(e=>{var r;return{...e,jsonSubColumns:(r=e.jsonSubColumns)==null?void 0:r.map(l=>({...l,isSelected:!1})),isSelected:!1}}):t.map(e=>{var r;return{...e,jsonSubColumns:(r=e.jsonSubColumns)==null?void 0:r.map(l=>({...l,isSelected:!0})),isSelected:!0}})}function Ue(t,o){const{columnModelIndex:e,jsonSubColumnModelIndex:r,value:l}=t;o&&o[e]&&(o[e].jsonSubColumns&&r!==void 0?o[e].jsonSubColumns[r]=l:o[e]=l)}function ze(t,o){const{columnModelIndex:e,jsonSubColumnModelIndex:r}=t;if(o&&o[e])if(o[e].jsonSubColumns&&r!==void 0){const l=o[e].jsonSubColumns[r];o[e].jsonSubColumns[r]={...l,isSelected:!l.isSelected}}else{const l=o[e];o[e]={...l,isSelected:!l.isSelected}}}function Je(t){return t.filter(o=>!o.isSelected).map(o=>(o.jsonSubColumns&&(o={...o,jsonSubColumns:o.jsonSubColumns.filter(e=>!e.isSelected)}),o))}function He(t,o,e){if(o==e)return t;const r=[...t],l=r[o];return r.splice(o,1),r.splice(e,0,l),r}function We(t,o){const{from:e,to:r}=t,l=e.jsonSubColumnModelIndex!==void 0?o[e.columnModelIndex].jsonSubColumns:o,s=e.jsonSubColumnModelIndex!==void 0?e.jsonSubColumnModelIndex:e.columnModelIndex,c=r.jsonSubColumnModelIndex!==void 0?r.jsonSubColumnModelIndex:r.columnModelIndex,d=He(l,s,c);return e.jsonSubColumnModelIndex!==void 0?(o[e.columnModelIndex].jsonSubColumns=d,o):d}function Ye(t,o){switch(o.type){case"setValue":t=o.value;break;case"toggleSelectAll":{t=Be(t);break}case"setColumnModelValue":{Ue(o,t);break}case"changeColumnModelType":{Pe(o,t);break}case"appendColumn":t.push(Fe());break;case"appendJsonSubColumn":{const{columnModelIndex:e}=o;t[e]={...t[e],jsonSubColumns:[...t[e].jsonSubColumns??[],Ge()]};break}case"toggleSelect":{ze(o,t);break}case"delete":t=Je(t);break;case"move":{t=We(o,t);break}case"moveUp":t=k(t,e=>e.isSelected),t.forEach(e=>{e.jsonSubColumns&&(e.jsonSubColumns=k(e.jsonSubColumns,r=>r.isSelected))});break;case"moveDown":t=V(t,e=>e.isSelected),t.forEach(e=>{e.jsonSubColumns&&(e.jsonSubColumns=V(e.jsonSubColumns,r=>r.isSelected))});break;default:throw new Error("Unexpected action",o)}return[...t]}const I=Le([],Ye),qe={height:"28px",fontSize:"12px"},Qe={height:"38px",fontSize:"14px"};function g(t){const{columnModelIndex:o,jsonSubColumnIndex:e,entityType:r}=t,l=e!=null,s=E(I),c=$.includes(Z(r)),[d,p]=T.useState(!1),Q=T.useMemo(()=>J(I,u=>l?u[o].jsonSubColumns[e]:u[o],U),[o,l,e]),a=M(Q),X=T.useMemo(()=>Re(c,l),[c,l]),R=T.useMemo(()=>W(a.columnType,l),[a.columnType,l]),h=T.useMemo(()=>l?qe:Qe,[l]);return f(y,{children:[l&&i(m,{sx:{gridColumn:"1 / span 1"},children:F}),i(m,{display:"flex",alignItems:"center",sx:{gridColumn:l?"2 / span 1":" 1 / span 1"},children:i(ue,{label:"Select",hideLabel:!0,checked:a.isSelected,onChange:()=>{s({type:"toggleSelect",columnModelIndex:o,jsonSubColumnModelIndex:e})}})}),i(m,{sx:{gridColumn:l?"3 / span 1":"2 / span 2"},children:i(S,{value:a.name,placeholder:l?"Facet name":"Column name",onChange:u=>{s({type:"setColumnModelValue",columnModelIndex:o,jsonSubColumnModelIndex:e,value:{...a,name:u.target.value}})},InputProps:{sx:h,inputProps:{"aria-label":"Name"}},fullWidth:!0})}),i(m,{children:i(v,{fullWidth:!0,children:i(A,{label:"Column Type",value:a.columnType,onChange:u=>{s({type:"changeColumnModelType",columnModelIndex:o,jsonSubColumnModelIndex:e,newColumnType:u.target.value})},sx:h,children:X.map(u=>i(O,{value:u,children:we(u)},u))})})}),i(m,{children:i(S,{type:"number",value:a.maximumSize??"",disabled:!L(a.columnType),InputProps:{inputProps:{"aria-label":"Maximum Size",min:0,max:L(a.columnType)?ke(a.columnType):void 0},sx:h},onChange:u=>{s({type:"setColumnModelValue",columnModelIndex:o,jsonSubColumnModelIndex:e,value:{...a,maximumSize:parseInt(u.target.value)}})},fullWidth:!0})}),i(m,{children:i(S,{type:"number",value:a.maximumListLength??"",disabled:!H(a.columnType),onChange:u=>{s({type:"setColumnModelValue",columnModelIndex:o,jsonSubColumnModelIndex:e,value:{...a,maximumListLength:parseInt(u.target.value)}})},InputProps:{inputProps:{"aria-label":"Maximum List Length"},sx:h},fullWidth:!0})}),i(m,{children:i(S,{fullWidth:!0,value:(a==null?void 0:a.defaultValue)??"",disabled:!ve(a.columnType,c,l),onChange:u=>{s({type:"setColumnModelValue",columnModelIndex:o,jsonSubColumnModelIndex:e,value:{...a,defaultValue:u.target.value}})},InputProps:{inputProps:{"aria-label":"Default Value"},sx:h}})}),f(m,{children:[i(me,{isShowingModal:d,onConfirm:u=>{s({type:"setColumnModelValue",columnModelIndex:o,jsonSubColumnModelIndex:e,value:{...a,enumValues:ee(u)?void 0:u}}),p(!1)},onCancel:()=>p(!1)}),i(S,{fullWidth:!0,value:((a==null?void 0:a.enumValues)??[]).join(", "),onClick:()=>{p(!0)},disabled:Y(a.columnType,l),InputProps:{readOnly:!0,sx:h,inputProps:{"aria-label":"Restrict Values"}}})]}),i(m,{children:i(v,{fullWidth:!0,children:i(A,{label:"Facet Type",value:a.facetType,disabled:R===null,onChange:u=>{s({type:"setColumnModelValue",columnModelIndex:o,jsonSubColumnModelIndex:e,value:{...a,facetType:u.target.value}})},sx:h,children:(R??[]).map((u,K)=>i(O,{value:u,children:u===void 0?"":De(u)},K))})})}),l&&f(y,{children:[i(m,{children:F}),i(m,{}),i(m,{sx:{gridColumn:"3 / span 7"},children:i(S,{placeholder:"JSON Path",value:a.jsonPath,onChange:u=>{s({type:"setColumnModelValue",columnModelIndex:o,jsonSubColumnModelIndex:e,value:{...a,jsonPath:u.target.value}})},fullWidth:!0,InputProps:{sx:h,endAdornment:i(ce,{title:f(le.Fragment,{children:[i("p",{children:i(de,{href:"https://dev.mysql.com/doc/refman/8.0/en/json.html#json-path-syntax",children:"Please use a valid JSON Path selector, following this format."})}),i("p",{children:"This field is for linking the sub-column facet to the corresponding location in the JSON data, so that it can be used as facet filter. The correct selector will point to the key referenced in the sub-column JSON Path."})]}),children:i(oe,{sx:{color:"grey.700"}})}),inputProps:{"aria-label":"JSON Path"}}})})]})]})}try{g.displayName="ColumnModelForm",g.__docgenInfo={description:"",displayName:"ColumnModelForm",props:{entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"project"'},{value:'"folder"'},{value:'"file"'},{value:'"table"'},{value:'"link"'},{value:'"entityview"'},{value:'"dockerrepo"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"materializedview"'},{value:'"virtualtable"'}]}},columnModelIndex:{defaultValue:null,description:"",name:"columnModelIndex",required:!0,type:{name:"number"}},jsonSubColumnIndex:{defaultValue:null,description:"",name:"jsonSubColumnIndex",required:!1,type:{name:"number"}}}}}catch{}const Xe="18px 18px 2fr 2fr 0.75fr 1fr 1fr 1fr 1fr",Ke=6,F=i(m,{sx:{width:"1px",height:`calc(100% + 2 * ${Ke}px)`,backgroundColor:"grey.400",marginLeft:"8px"}}),$e=i(m,{sx:t=>({width:"50%",height:"60%",borderLeft:`1px solid ${t.palette.grey[400]}`,borderBottom:`1px solid ${t.palette.grey[400]}`,marginLeft:"8px",marginBottom:"auto",marginRight:"0",borderBottomLeftRadius:"5px"})});function N(t){const{initialData:o,entityType:e}=t,r=M(T.useMemo(()=>j(s=>s(I).length),[])),l=E(I);return T.useEffect(()=>{o&&l({type:"setValue",value:o.map(s=>{var c;return{...s,jsonSubColumns:(c=s.jsonSubColumns)==null?void 0:c.map(d=>({...d,isSelected:!1})),isSelected:!1}})})},[]),f(m,{sx:{py:2.5,borderBottom:"2px solid",borderColor:"grey.300"},children:[i(Ze,{}),f(m,{display:"grid",sx:{gridTemplateColumns:Xe,py:2.5,fontWeight:700},gap:"8px",children:[i(m,{}),i(m,{sx:{gridColumn:"2 / span 2"},children:"Column Name"}),i(m,{children:"Column Type"}),i(m,{children:"Size"}),i(m,{children:"Max List Length"}),i(m,{children:"Default Value"}),i(m,{children:"Restrict Values"}),i(m,{children:"Facet"}),Te(r,s=>i(eo,{entityType:e,columnModelIndex:s},s))]}),i(C,{variant:"outlined",onClick:()=>{l({type:"appendColumn"})},startIcon:i(fe,{}),children:"Add Column"})]})}function Ze(){const t=E(I),o=M(I),e=q(o),r=Ve(o);return f(m,{display:"flex",gap:1,children:[f(C,{variant:"outlined",color:"neutral",onClick:()=>{t({type:"toggleSelectAll"})},children:[i(Ie,{size:"small",checked:e,indeterminate:r>0&&!e}),f(Se,{variant:"smallText1",color:"text.secondary",children:[r," selected"]})]}),f(Ce,{children:[i(C,{"aria-label":"Move Down",variant:"outlined",color:"neutral",onClick:()=>{t({type:"moveDown"})},disabled:r==0,children:i(xe,{fontSize:"small"})}),i(C,{"aria-label":"Move Up",variant:"outlined",color:"neutral",onClick:()=>{t({type:"moveUp"})},disabled:r==0,children:i(Me,{fontSize:"small"})})]}),i(C,{"aria-label":"Delete",variant:"outlined",color:"neutral",onClick:()=>{t({type:"delete"})},disabled:r==0,children:i(he,{fontSize:"small",icon:"delete",wrap:!1})})]})}function eo(t){const{columnModelIndex:o,entityType:e}=t,r=E(I),l=M(T.useMemo(()=>J(I,s=>s[o],U),[o]));return l?f(y,{children:[i(g,{entityType:e,columnModelIndex:o}),l.columnType===n.JSON&&l.jsonSubColumns&&l.jsonSubColumns.map((s,c)=>i(g,{entityType:e,columnModelIndex:o,jsonSubColumnIndex:c},c)),l.columnType===n.JSON&&f(y,{children:[i(m,{sx:{gridColumn:"1 / span 2"},children:$e}),i(m,{children:i(C,{startIcon:i(pe,{}),variant:"text",onClick:()=>r({type:"appendJsonSubColumn",columnModelIndex:o}),children:"Add sub-column"})})]})]}):i(y,{})}try{N.displayName="TableColumnSchemaForm",N.__docgenInfo={description:"",displayName:"TableColumnSchemaForm",props:{entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"project"'},{value:'"folder"'},{value:'"file"'},{value:'"table"'},{value:'"link"'},{value:'"entityview"'},{value:'"dockerrepo"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"materializedview"'},{value:'"virtualtable"'}]}},initialData:{defaultValue:null,description:"",name:"initialData",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}function _(t){var p;const{entityId:o}=t,{data:e,isLoading:r}=re(o),{data:l,isLoading:s}=se({entityId:o,query:{sql:"SELECT * FROM ${entityId}"},partMask:ne,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest"},{staleTime:1/0,useErrorBoundary:!0}),c=r||s,d=ie(l);return c||!e?i(ae,{numRows:8,numCols:7,rowHeight:"50px",fullWidthCells:!0}):i(N,{entityType:te(e.concreteType),initialData:(p=d==null?void 0:d.responseBody)==null?void 0:p.columnModels})}try{_.displayName="TableColumnSchemaEditor",_.__docgenInfo={description:"Fetches column model data for a Synapse Table and renders a form to edit the column models.",displayName:"TableColumnSchemaEditor",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}const Gr={title:"Synapse/Table Column Schema Editor",component:_,parameters:{stack:"mock"}},b={parameters:{msw:{handlers:[...Ee(D),...ye(ge,D)]}},args:{entityId:be.entityId}};var G,P,B;b.parameters={...b.parameters,docs:{...(G=b.parameters)==null?void 0:G.docs,source:{originalSource:`{
  parameters: {
    msw: {
      handlers: [...getEntityHandlers(MOCK_REPO_ORIGIN), ...getHandlersForTableQuery(mockQueryResultBundle, MOCK_REPO_ORIGIN)]
    }
  },
  args: {
    entityId: mockQueryBundleRequest.entityId
  }
}`,...(B=(P=b.parameters)==null?void 0:P.docs)==null?void 0:B.source}}};const Pr=["Demo"];export{b as Demo,Pr as __namedExportsOrder,Gr as default};
//# sourceMappingURL=TableColumnSchemaEditor.stories-502bf6b5.js.map
