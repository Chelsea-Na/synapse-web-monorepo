import{a as d,j as n}from"./jsx-runtime-670450c2.js";import{a9 as o,ab as b,d5 as T,bO as _,d6 as f,d7 as D,d8 as E}from"./SynapseContext-7f54a871.js";import{u as m}from"./useMutation-2f70f09c.js";import{D as M}from"./EntityChildren-7cd71d6e.js";import{r as U}from"./index-f1f749bf.js";import{U as B}from"./UserCard-2dc96923.js";import{i as O}from"./SynapseConstants-9273577d.js";import{M as u}from"./Modal-02fe67fa.js";import{B as R}from"./Button-ad1d45e7.js";var g=(e=>(e.FORUM="FORUM",e.THREAD="THREAD",e.DATA_ACCESS_SUBMISSION="DATA_ACCESS_SUBMISSION",e.DATA_ACCESS_SUBMISSION_STATUS="DATA_ACCESS_SUBMISSION_STATUS",e))(g||{}),C=(e=>(e.SUBSCRIPTION_ID="SUBSCRIPTION_ID",e.SUBSCRIBER_ID="SUBSCRIBER_ID",e.OBJECT_ID="OBJECT_ID",e.OBJECT_TYPE="OBJECT_TYPE",e.CREATED_ON="CREATED_ON",e))(C||{});function h(e,s){const{accessToken:r}=o();return b(["subscriber",e.objectId,e.objectType],()=>T(r,e),s)}function w(e,s,r){const{accessToken:i}=o();return b([i,"subscription",e,s],async()=>{const t={objectType:s,idList:[e],sortByType:C.OBJECT_ID,sortDirection:M.ASC};return(await E(i,t)).results[0]},r)}function N(e){const s=_(),{accessToken:r}=o();return m(i=>f(r,i),{...e,onSuccess:async(i,a,t)=>{await s.invalidateQueries([r,"subscription"]),await s.invalidateQueries(["subscriber",a.objectId,a.objectType]),e!=null&&e.onSuccess&&await e.onSuccess(i,a,t)}})}function v(e){const s=_(),{accessToken:r}=o();return m(i=>D(r,i),{...e,onSuccess:async(i,a,t)=>{await s.invalidateQueries([r,"subscription"]),await s.invalidateQueries(["subscriber"]),e!=null&&e.onSuccess&&await e.onSuccess(i,a,t)}})}const L=(e,s)=>{const{data:r,isLoading:i}=w(e,s),{data:a}=h({objectId:e,objectType:s}),{mutate:t,isLoading:c}=N(),{mutate:l,isLoading:A}=v(),p=i||c||A,I=U.useCallback(()=>{r?l(r.subscriptionId):t({objectId:e,objectType:s})},[l,e,s,t,r]);return{isLoading:p,subscription:r,toggleSubscribed:I,subscribers:a}},S=({id:e,objectType:s,showModal:r,handleModal:i})=>{const{subscribers:a}=L(e,s);return d("div",{className:"SubscribersModal",children:[a&&a.subscribers.length>0&&n("a",{onClick:()=>i(!0),children:`Followers (${a.subscribers.length})`}),d(u,{className:"bootstrap-4-backport",show:r,onHide:()=>i(!1),animation:!1,children:[n(u.Header,{closeButton:!0,children:n(u.Title,{children:"Followers"})}),n(u.Body,{children:a&&a.subscribers.map(t=>n(B,{ownerId:t,size:O,showCardOnHover:!0},t))}),n(u.Footer,{children:n(R,{variant:"contained",onClick:()=>i(!1),children:"Ok"})})]})]})};try{S.displayName="SubscribersModal",S.__docgenInfo={description:"",displayName:"SubscribersModal",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!0,type:{name:"enum",value:[{value:'"FORUM"'},{value:'"THREAD"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'}]}},showModal:{defaultValue:null,description:"",name:"showModal",required:!0,type:{name:"boolean"}},handleModal:{defaultValue:null,description:"",name:"handleModal",required:!0,type:{name:"(a: boolean) => void"}}}}}catch{}export{g as S,S as a,L as u};
//# sourceMappingURL=SubscribersModal-90ffd3d9.js.map
