import{a as m,F as N,j as l}from"./jsx-runtime-9dc53467.js";import{r as T}from"./index-76fb7be0.js";import{C as e,i as f,l as p}from"./index-4a1b1a67.js";import{J as D}from"./JSONArrayEditorModal-c4bc381d.js";import{i as d,az as i,p as I,aG as _,aH as v}from"./ApplicationSessionManager-5baf04bf.js";import{f as A}from"./DateFormatter-d710997e.js";import{d as R}from"./dayjs.min-941aafe8.js";import{M as y}from"./TextField-4e593128.js";const O=[e.LARGETEXT,e.MEDIUMTEXT,e.JSON];function Y(a,t){return Object.values(e).filter(s=>a?!O.includes(s):!0).filter(s=>{if(t)switch(s){case e.JSON:case e.STRING_LIST:case e.INTEGER_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.USERID_LIST:case e.ENTITYID_LIST:return!1;default:return!0}return!0})}function b(a){switch(a){case"enumeration":return"Values";case"range":return"Range";default:return a}}function k(a){switch(a){case e.STRING:return"String";case e.DOUBLE:return"Double";case e.BOOLEAN:return"Boolean";case e.INTEGER:return"Integer";case e.DATE:return"Date";case e.FILEHANDLEID:return"File";case e.ENTITYID:return"Entity";case e.LINK:return"Link";case e.MEDIUMTEXT:return"MediumText";case e.LARGETEXT:return"LargeText";case e.USERID:return"User";case e.STRING_LIST:return"String List";case e.INTEGER_LIST:return"Integer List";case e.BOOLEAN_LIST:return"Boolean List";case e.DATE_LIST:return"Date List";case e.USERID_LIST:return"User ID List";case e.ENTITYID_LIST:return"Entity ID List";case e.EVALUATIONID:return"Evaluation";case e.SUBMISSIONID:return"Submission";case e.JSON:return"JSON";default:return a}}function X(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return!0;default:return!1}}function J(a){switch(a){case e.STRING_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.INTEGER_LIST:return!0;default:return!1}}function j(a,t){let s;switch(a){case e.INTEGER:case e.INTEGER_LIST:s=["enumeration","range"];break;case e.STRING:case e.BOOLEAN:case e.USERID:case e.ENTITYID:case e.STRING_LIST:case e.BOOLEAN_LIST:case e.ENTITYID_LIST:case e.USERID_LIST:case e.EVALUATIONID:s=["enumeration"];break;case e.DOUBLE:case e.DATE:case e.DATE_LIST:s=["range"];break;default:s=null}return s&&!t&&(s=[void 0,...s]),s}function H(a,t,s){if(t)return!1;if(s)return!1;switch(a){case e.ENTITYID:case e.ENTITYID_LIST:case e.FILEHANDLEID:case e.USERID:case e.USERID_LIST:case e.MEDIUMTEXT:case e.LARGETEXT:case e.JSON:case e.SUBMISSIONID:case e.EVALUATIONID:return!1;default:return!0}}const z=50,g=1e3,K=100;function P(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return g;default:throw new Error(`Type is not known to have a max size: ${a}`)}}function q(a,t){if(t)return!1;switch(a){case e.STRING:case e.INTEGER:case e.ENTITYID:return!0;default:return!1}}function M(a,t){return t===e.INTEGER?a.map(s=>parseInt(s)):a}function W(a,t=[]){return a.map(s=>({...s,columnType:s.columnType,maximumSize:s.maximumSize==null?void 0:s.maximumSize.toString(),maximumListLength:s.maximumListLength==null?void 0:s.maximumListLength.toString(),isSelected:!1,isOriginallyDefaultColumn:t.some(r=>r.name===s.name),jsonSubColumns:s.jsonSubColumns?s.jsonSubColumns.map(r=>({...r,columnType:r.columnType,isSelected:!1})):void 0,defaultValue:s.defaultValue&&s.columnType.endsWith("_LIST")?JSON.parse(s.defaultValue):s.defaultValue,enumValues:s.enumValues!=null?M(s.enumValues,s.columnType):void 0}))}function $(a){if(d(a))return{scope:a.scopeIds,viewTypeMask:a.viewTypeMask,viewEntityType:i(a.concreteType)};if(I(a)||_(a)){const t=I(a)?f:p;return{scope:(a.items??[]).map(s=>`${s.entityId}.${s.versionNumber}`),viewTypeMask:t,viewEntityType:i(a.concreteType)}}else if(v(a))return{scope:a.scopeIds,viewTypeMask:void 0,viewEntityType:i(a.concreteType)}}function G(a){switch(a){case e.STRING:case e.STRING_LIST:return{type:"string",minLength:1};case e.DOUBLE:return{type:"number"};case e.BOOLEAN:case e.BOOLEAN_LIST:return{type:"boolean"};case e.INTEGER:case e.INTEGER_LIST:return{type:"integer"};case e.DATE:case e.DATE_LIST:return{type:"string",format:"datetime"};case e.FILEHANDLEID:case e.ENTITYID:case e.ENTITYID_LIST:case e.LINK:case e.MEDIUMTEXT:case e.LARGETEXT:case e.USERID:case e.USERID_LIST:case e.SUBMISSIONID:case e.JSON:case e.EVALUATIONID:default:return{type:"string",minLength:1}}}function o(a){const{columnType:t,onChange:s,value:r=[],TextFieldProps:c}=a,[E,n]=T.useState(!1),S=T.useMemo(()=>G(t),[t]),L=T.useMemo(()=>r==null?"":t===e.DATE_LIST?r.map(u=>A(R(u))).join(", "):r.join(", "),[r,t]);return m(N,{children:[l(D,{arrayItemDefinition:S,value:r??void 0,isShowingModal:E,onConfirm:u=>{s(u),n(!1)},onCancel:()=>n(!1)}),l(y,{...c,value:L,onClick:()=>{n(!0)}})]})}try{o.displayName="MultiValueField",o.__docgenInfo={description:"",displayName:"MultiValueField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T[] | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: T[] | null) => void"}},columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'}]}},TextFieldProps:{defaultValue:null,description:"",name:"TextFieldProps",required:!1,type:{name:'Omit<TextFieldProps, "value" | "onChange">'}}}}}catch{}export{z as D,o as M,J as a,j as b,X as c,Y as d,k as e,P as f,$ as g,H as h,q as i,b as j,g as k,K as l,W as t};
