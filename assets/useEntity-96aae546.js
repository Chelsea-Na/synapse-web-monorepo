import{r as f}from"./index-8db94870.js";import{u,l as E,a as y,h as g}from"./SynapseClient-3df37313.js";import{u as l}from"./useMutation-7966944e.js";import{u as d}from"./useInfiniteQuery-dd378161.js";import{m as k}from"./EntityTypeUtils-674a0207.js";import{_ as Q,o as m}from"./pick-53cef1e4.js";function S(t,n,s){return t.invalidateQueries(n.getEntityQueryKey(s))}function P(t,n,s){const{accessToken:a,keyFactory:e}=u();return E(e.getEntityVersionQueryKey(t,n),()=>y.getEntity(a,t,n==null?void 0:n.toString()),s)}function I(t){const n=g(),{accessToken:s,keyFactory:a}=u();return l(e=>y.updateEntity(e,s),{...t,onSuccess:async(e,c,r)=>{await S(n,a,e.id),n.setQueryData(a.getEntityQueryKey(e.id),e),t!=null&&t.onSuccess&&await t.onSuccess(e,c,r)}})}function V(t){const n=g(),{accessToken:s,keyFactory:a}=u();return l(e=>y.deleteEntity(s,e),{...t,onSuccess:async(e,c,r)=>{await S(n,a,c),t!=null&&t.onSuccess&&await t.onSuccess(e,c,r)}})}function q(t,n){const{accessToken:a,keyFactory:e}=u();return d(e.getEntityVersionsQueryKey(t),async c=>await y.getEntityVersions(t,a,c.pageParam,200),{...n,getNextPageParam:(c,r)=>{if(c.results.length>0)return r.length*200}})}function T(t){return Q(t,k[t.concreteType])}function F(t){return m(t,k[t.concreteType])}function x(t,n){const[s,a]=f.useState(),[e,c]=f.useState(),{accessToken:r,keyFactory:o}=u(),i=E(o.getEntityJsonQueryKey(t),()=>y.getEntityJson(t,r),n);return f.useEffect(()=>{i.data&&(a(T(i.data)),c(F(i.data)))},[i.data]),{...i,entityMetadata:s,annotations:e}}function G(t){const n=g(),{accessToken:s,keyFactory:a}=u();return l(e=>{const c=e.id;return y.updateEntityJson(c,e,s)},{...t,onSuccess:async(e,c,r)=>{const o=e.id;await S(n,a,o),n.setQueryData(a.getEntityJsonQueryKey(o),e),t!=null&&t.onSuccess&&await t.onSuccess(e,c,r)}})}function D(t,n){const{accessToken:s,keyFactory:a}=u();return E(a.getEntityPathQueryKey(t),()=>y.getEntityPath(t,s),n)}export{V as a,q as b,D as c,x as d,G as e,I as f,P as u};
//# sourceMappingURL=useEntity-96aae546.js.map
